"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[7555],{88848:(e,t,r)=>{r.d(t,{$:()=>o});var a=r(9950),s=r(27081);const o=()=>{const[e,t]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[r,o]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[i,l]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[n,d]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[c,u]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[v,m]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[g,S]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[f,p]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[k,b]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[y,j]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[L,M]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),O=(0,s.d4)((e=>e.masterMakerLov||{})),N=(0,s.d4)((e=>e.masterMakerLovList||{})),h=(0,s.d4)((e=>e.lovsForMasterName||[])),A=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),D=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),E=(0,s.d4)((e=>e.currency||[])),T=(0,s.d4)((e=>e.gstStatus||[])),w=(0,s.d4)((e=>e.paymentTerm||[])),H=(0,s.d4)((e=>e.incoterms||[])),C=(0,s.d4)((e=>e.title||[])),B=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{t((e=>({...e,...O})))}),[O]),(0,a.useEffect)((()=>{o((e=>({...e,...N})))}),[N]),(0,a.useEffect)((()=>{l((e=>({...e,...h})))}),[h]),(0,a.useEffect)((()=>{d((e=>({...e,...A})))}),[A]),(0,a.useEffect)((()=>{u((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{m((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{S((e=>({...e,...T})))}),[T]),(0,a.useEffect)((()=>{p((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{b((e=>({...e,...H})))}),[H]),(0,a.useEffect)((()=>{j((e=>({...e,...C})))}),[C]),(0,a.useEffect)((()=>{M((e=>({...e,...B})))}),[B]),{masterMakerLovs:e,masterMakerLovsList:r,masterMakerOrgType:i,masterMakerOrgTypeSecond:n,masterMakerOrgTypeThird:c,masterMakerCurrency:v,masterMakerGstStatus:g,masterMakerIncoterms:k,masterMakerPaymentTerm:f,masterMakerLovHistory:L,masterMakerTitle:y}}},47454:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var a=r(9950),s=r(27081),o=r(28429),i=r(88848),l=r(62605),n=r(29024),d=r(52867),c=r(99635),u=r(89649),v=r(14846),m=r(3252),g=r(83456),S=r(39225),f=r(44414);const p=(0,m.A)((0,a.lazy)((()=>r.e(8820).then(r.bind(r,46439))))),k=[{Header:"Actions",accessor:"actionButtons"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"stock_ledgers[0].project.name"},{Header:"Company",accessor:"stock_ledgers[0].organization.name"},{Header:"Company Store",accessor:"toStore.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"E-Way Bill Number",accessor:"eWayBillNumber"},{Header:"E-Way Bill Date",accessor:"eWayBillDate"},{Header:"Vehicle Number",accessor:"vehicleNumber"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}],b=()=>{var e,t,r,m,b;const y=(0,s.wA)(),{transactionId:j}=(0,o.g)(),[L,M]=(0,a.useState)("closed"),[O,N]=(0,a.useState)(null),[h,A]=(0,a.useState)(null),[D,E]=(0,a.useState)(null),{paginations:{pageSize:T,pageIndex:w},setPageIndex:H,setPageSize:C}=(0,u.A)(),{searchString:B,setSearchString:x,accessorsRef:P,setAccessors:_,forceSearch:R,searchStringTrimmed:I}=(0,S.A)(),{stockLedgerDetailList:W}=(0,l.t)(),{masterMakerOrgType:z}=(0,i.$)(),F=null===z||void 0===z?void 0:z.masterObject,{data:U,count:V}=(0,a.useMemo)((()=>{var e,t;return{data:(0,d.yN)(null===W||void 0===W||null===(e=W.stockLedgerDetailListObject)||void 0===e?void 0:e.rows).map(((e,t)=>{var r,a,s,o,i,l,n,d,c,u,m,g;return{...e,...!0===(null===e||void 0===e||null===(r=e.stock_ledgers[0])||void 0===r?void 0:r.isCancelled)?{status:"Cancelled"}:!0===(null===e||void 0===e||null===(a=e.stock_ledgers[0])||void 0===a?void 0:a.isProcessed)?{status:"Processed"}:{status:null},serialNumber:(w*T-T+t+1).toString(),projectSiteStore:null===(s=e.stock_ledgers)||void 0===s||null===(o=s.filter((e=>e.quantity<0)))||void 0===o||null===(i=o[0])||void 0===i||null===(l=i.organization_store)||void 0===l?void 0:l.name,actionButtons:(0,f.jsx)(v.w,{openPreview:()=>J(t),initiatePrint:()=>K(t),initiateDownload:()=>Q(t),viewSerialNumbers:()=>{A(t)},disablePrint:+e.sumOfAmounts>(null===(n=e.stock_ledgers)||void 0===n||null===(d=n[0])||void 0===d||null===(c=d.project)||void 0===c?void 0:c.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:+e.sumOfAmounts>(null===(u=e.stock_ledgers)||void 0===u||null===(m=u[0])||void 0===m||null===(g=m.project)||void 0===g?void 0:g.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}}))||[],count:null===W||void 0===W||null===(t=W.stockLedgerDetailListObject)||void 0===t?void 0:t.count,isLoading:null===W||void 0===W?void 0:W.loading,error:null===W||void 0===W?void 0:W.error}}),[w,T,null===W||void 0===W?void 0:W.error,null===W||void 0===W?void 0:W.loading,null===W||void 0===W||null===(e=W.stockLedgerDetailListObject)||void 0===e?void 0:e.count,null===W||void 0===W||null===(t=W.stockLedgerDetailListObject)||void 0===t?void 0:t.rows]),Y=(null===U||void 0===U||null===(r=U[h])||void 0===r?void 0:r.materialData)||[],$=null===U||void 0===U||null===(m=U[O])||void 0===m?void 0:m.id,q=null===U||void 0===U||null===(b=U[O])||void 0===b?void 0:b.referenceDocumentNumber,G=(0,d.x)(F,"RETURNMRN");(0,a.useEffect)((()=>{y((0,n.VOH)("TRANSACTION TYPE"))}),[y]),(0,a.useEffect)((()=>{G&&y((0,n.rYL)({pageIndex:w,pageSize:T,transactionTypeId:G,...I&&{searchString:I,accessors:JSON.stringify(P.current)},sortBy:(null===D||void 0===D?void 0:D[0])||"createdAt",sortOrder:(null===D||void 0===D?void 0:D[1])||"DESC"}))}),[y,j,w,T,G,I,P,D,R]);const J=e=>{M("view"),N(e)},Q=e=>{M("download"),N(e)},K=e=>{M("print"),N(e)};return(0,f.jsxs)(f.Fragment,{children:["closed"!==L&&(0,f.jsx)(p,{fetchFromRoute:"/return-mrn-receipt",apiParams:$,previewAction:L,onClose:()=>{M("hidden"),N(null)},fileNameForDownload:q}),null!==h&&(0,f.jsx)(g.A,{selectedMaterialList:Y,onClose:()=>{A(null)}}),(0,f.jsx)(c.default,{title:"Return MRN Receipt",setPageIndex:H,setPageSize:C,pageIndex:w,pageSize:T,columns:k,data:G?U:[],count:G?V:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:B,searchStringTrimmed:I,setSearchString:x,setAccessors:_},sortConfig:{sort:D,setSort:E},exportConfig:{tableName:"return_mrn_receipt",apiQuery:{transactionTypeId:G}}})]})}}}]);