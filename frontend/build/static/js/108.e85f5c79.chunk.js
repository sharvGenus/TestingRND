"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[108],{70108:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var r=a(9950),s=a(27081),o=a(96583),n=a(22754),i=a(4139),d=a(67535),l=a(60666),c=a(9449),u=a(26473),m=a(66369),v=a(71826),p=a(96951),g=a(14351),f=a(84601),h=a(29024),y=a(62054),S=a(44414);const k=e=>{var t;const{onClick:a,data:o,view:k,update:A,refreshPagination:O}=e,[b,x]=(0,r.useState)(""),M=(0,c.mN)({resolver:(0,u.t)(l.Ik().shape("STORE LOCATION"===b?{masterId:f.A.masterMaker,name:f.A.lov,code:f.A.masterCode}:{masterId:f.A.masterMaker,name:f.A.lov})),defaultValues:{},mode:"all"}),{handleSubmit:j,setValue:C}=M,L=(0,s.wA)();(0,r.useEffect)((()=>{L((0,h.bAg)())}),[L]),(0,r.useEffect)((()=>{var e;var t;(k||A)&&(t=o,Object.entries(t).forEach((e=>{let[t,a]=e;C(t,a)}))),null!==o&&void 0!==o&&o.master_maker&&"STORE LOCATION"===(null===o||void 0===o||null===(e=o.master_maker)||void 0===e?void 0:e.name)?x("STORE LOCATION"):x("")}),[o,A,k,C]);const{masterMakers:T}=(0,m.y)(),w=(null===(t=T.masterMakerObject)||void 0===t?void 0:t.rows)||[],E=function(e,t,a,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(0,S.jsx)(p.o3,{name:e,type:a,label:t,InputLabelProps:{shrink:s},...r&&{required:!0},...k?{disabled:!0}:A?{disabled:!1}:{}})};return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(p.Op,{methods:M,onSubmit:j((async e=>{let t;if(t=A?await(0,v.default)("/master-maker-lov-update",{method:"PUT",body:e,params:o.id}):await(0,v.default)("/master-maker-lov-form",{method:"POST",body:e}),t.success){const e=A?"Master Maker LOV updated successfully!":"Master Maker LOV added successfully!";(0,y.A)(e,{variant:"success",autoHideDuration:1e4}),O(),L((0,n._G)()),a()}else{var r,s;(0,y.A)((null===(r=t)||void 0===r||null===(s=r.error)||void 0===s?void 0:s.message)||"Operation failed. Please try again.",{variant:"error"})}})),children:(0,S.jsxs)(g.A,{title:(k?"View ":A?"Update ":"Add ")+"Master LOV",children:[(0,S.jsxs)(i.Ay,{container:!0,spacing:4,children:[(0,S.jsx)(i.Ay,{item:!0,md:3,xl:2,children:(I="masterId",P="Master",H=w,N=!0,R=e=>{var t,a;null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.name&&x(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.name)},(0,S.jsx)(p.eu,{name:I,label:P,InputLabelProps:{shrink:!0},menus:H,onChange:R,...N&&{required:!0},...k?{disable:!0}:A?{disable:!1}:{}}))}),(0,S.jsx)(i.Ay,{item:!0,md:3,xl:2,children:E("name","LOV","text",!0)}),"STORE LOCATION"===b&&(0,S.jsx)(i.Ay,{item:!0,md:3,xl:2,children:E("code","Code","text",!0)})]}),(0,S.jsx)(i.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mt:2},children:(0,S.jsxs)(i.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px"},children:[(0,S.jsx)(d.A,{onClick:a,size:"small",variant:"outlined",color:"primary",children:"Back"}),!k&&(0,S.jsx)(d.A,{size:"small",type:"submit",variant:"contained",color:"primary",children:A?"Update":"Save"})]})})]})})});var I,P,H,N,R};var A=a(88848),O=a(99635),b=a(64499),x=a(89649),M=a(39225),j=a(30423),C=a(65920),L=a(52867);const T=()=>{const{paginations:{pageSize:e,pageIndex:t,forceUpdate:a},refreshPagination:i,setPageIndex:d,setPageSize:l}=(0,x.A)(),[c,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[h,T]=(0,r.useState)(!1),[w,E]=(0,r.useState)(null),[I,P]=(0,r.useState)(null),[H,N]=(0,r.useState)(null),[R,_]=(0,r.useState)(1),[z,B]=(0,r.useState)(null),[V,D]=(0,r.useState)(!1),[U,F]=(0,r.useState)(!1),[$,q]=(0,r.useState)(null),{searchString:G,setSearchString:J,accessorsRef:K,setAccessors:Q,forceSearch:W,searchStringTrimmed:Z}=(0,M.A)(),X=(0,s.wA)(),{filterObjectForApi:Y}=(0,j.bZ)(),ee=(0,C.A)(Y),te=(0,C.A)($);(0,r.useEffect)((()=>{[[ee,Y],[te,$]].some(L.$H)?i():X((0,n.AR)({pageIndex:t,pageSize:e,listType:R,...Z&&{searchString:Z,accessors:JSON.stringify(K.current)},sortBy:(null===$||void 0===$?void 0:$[0])||"updatedAt",sortOrder:(null===$||void 0===$?void 0:$[1])||"DESC",filterObject:Y}))}),[X,t,e,a,R,Z,$,K,W,i,ee,Y,te]),(0,r.useEffect)((()=>{null!==w&&void 0!==w&&w.id&&X((0,n.AF)({pageIndex:t,pageSize:e,listType:R,recordId:null===w||void 0===w?void 0:w.id}))}),[X,t,e,R,a,w]);const{masterMakerLovsList:ae,masterMakerLovHistory:re}=(0,A.$)(),{data:se,count:oe}=(0,r.useMemo)((()=>{var e,t;return{data:(null===ae||void 0===ae||null===(e=ae.masterMakerLovsObject)||void 0===e?void 0:e.rows)||[],count:(null===ae||void 0===ae||null===(t=ae.masterMakerLovsObject)||void 0===t?void 0:t.count)||0,isLoading:ae.loading||!1}}),[ae]),{historyData:ne,historyCounts:ie}=(0,r.useMemo)((()=>{var e,t;return{historyData:(null===(e=re.masterMakerLovHistoryObject)||void 0===e?void 0:e.rows)||[],historyCounts:(null===(t=re.masterMakerLovHistoryObject)||void 0===t?void 0:t.count)||0,isLoading:re.loading||!1}}),[re]),de=(0,r.useMemo)((()=>[{Header:"Master",accessor:"master_maker.name",filterProps:{tableName:"master_makers",getColumn:"name",customAccessor:"masterName"}},{Header:"LOV",accessor:"name",filterProps:{tableName:"master_maker_lovs",getColumn:"name",customAccessor:"name"}},{Header:"Code",accessor:"code",filterProps:{tableName:"master_maker_lovs",getColumn:"code",customAccessor:"code"}},{Header:"Updated By",accessor:"updated.name",filterProps:{tableName:"users",getColumn:"name",customAccessor:"updatedBy"}},{Header:"Created By",accessor:"created.name",filterProps:{tableName:"users",getColumn:"name",customAccessor:"createdBy"}},{Header:"Updated On",accessor:"updatedAt"},{Header:"Created On",accessor:"createdAt"}]),[]),le=()=>{D(!1),_(1),B(null),F(!1),p(!m)};return(0,S.jsxs)(S.Fragment,{children:[m?(0,S.jsx)(k,{refreshPagination:i,onClick:le,...z&&{data:z},...V&&{view:V,update:!1},...U&&{update:U,view:!1}}):(0,S.jsx)(O.default,{title:"Master Maker LOV",data:se,count:oe,setPageIndex:d,setPageSize:l,pageIndex:t,pageSize:e,columns:de,onClick:le,handleRowView:e=>{p(!0),D(!0),F(!1),B(e)},handleRowDelete:e=>{P(e),u(!0)},handleRowUpdate:e=>{p(!0),F(!0),D(!1),B(e)},handleRowRestore:async e=>{N(e),f(!0)},listType:R,setListType:e=>{_(e)},handleRowHistory:e=>{E(e),T(!0)},searchConfig:{searchString:G,searchStringTrimmed:Z,setSearchString:J,setAccessors:Q},sortConfig:{sort:$,setSort:q},exportConfig:{tableName:"master_maker_lovs",apiQuery:{listType:R,filterObject:Y}}}),(0,S.jsx)(b.A,{open:c,handleClose:()=>u(!1),handleConfirm:async()=>{const e=await(0,v.default)("/delete-master-maker-lov",{method:"DELETE",params:I});var t;e.success?(i(),u(!1)):(0,y.A)(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)},title:"Confirm Delete",message:"Are you sure you want to delete?",confirmBtnTitle:"Delete"}),(0,S.jsx)(b.A,{open:g,handleClose:()=>f(!1),handleConfirm:async()=>{const e={...H,isActive:"1"};(await(0,v.default)("/master-maker-lov-update",{method:"PUT",body:e,params:e.id})).success&&(i(),f(!1))},title:"Confirm Restore",message:"Are you sure you want to restore?",confirmBtnTitle:"Restore"}),(0,S.jsx)(o.A,{open:h,onClose:()=>T(!1),scroll:"paper",disableEscapeKeyDown:!0,maxWidth:"lg",children:(0,S.jsx)(O.default,{isHistory:!0,title:null===w||void 0===w?void 0:w.name,data:ne,columns:de,count:ie,hideActions:!0,hideSearch:!0,hideAddButton:!0,hideExportButton:!0,setPageIndex:d,setPageSize:l,pageIndex:t,pageSize:e})})]})}},88848:(e,t,a)=>{a.d(t,{$:()=>o});var r=a(9950),s=a(27081);const o=()=>{const[e,t]=(0,r.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[a,o]=(0,r.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[n,i]=(0,r.useState)({masterObject:[],error:"",loading:!0}),[d,l]=(0,r.useState)({masterObject:[],error:"",loading:!0}),[c,u]=(0,r.useState)({masterObject:[],error:"",loading:!0}),[m,v]=(0,r.useState)({currencyObject:[],error:"",loading:!0}),[p,g]=(0,r.useState)({gstStatusObject:[],error:"",loading:!0}),[f,h]=(0,r.useState)({paymentTermObject:[],error:"",loading:!0}),[y,S]=(0,r.useState)({incotermsObject:[],error:"",loading:!0}),[k,A]=(0,r.useState)({titleObject:[],error:"",loading:!0}),[O,b]=(0,r.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),x=(0,s.d4)((e=>e.masterMakerLov||{})),M=(0,s.d4)((e=>e.masterMakerLovList||{})),j=(0,s.d4)((e=>e.lovsForMasterName||[])),C=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),L=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),T=(0,s.d4)((e=>e.currency||[])),w=(0,s.d4)((e=>e.gstStatus||[])),E=(0,s.d4)((e=>e.paymentTerm||[])),I=(0,s.d4)((e=>e.incoterms||[])),P=(0,s.d4)((e=>e.title||[])),H=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,r.useEffect)((()=>{t((e=>({...e,...x})))}),[x]),(0,r.useEffect)((()=>{o((e=>({...e,...M})))}),[M]),(0,r.useEffect)((()=>{i((e=>({...e,...j})))}),[j]),(0,r.useEffect)((()=>{l((e=>({...e,...C})))}),[C]),(0,r.useEffect)((()=>{u((e=>({...e,...L})))}),[L]),(0,r.useEffect)((()=>{v((e=>({...e,...T})))}),[T]),(0,r.useEffect)((()=>{g((e=>({...e,...w})))}),[w]),(0,r.useEffect)((()=>{h((e=>({...e,...E})))}),[E]),(0,r.useEffect)((()=>{S((e=>({...e,...I})))}),[I]),(0,r.useEffect)((()=>{A((e=>({...e,...P})))}),[P]),(0,r.useEffect)((()=>{b((e=>({...e,...H})))}),[H]),{masterMakerLovs:e,masterMakerLovsList:a,masterMakerOrgType:n,masterMakerOrgTypeSecond:d,masterMakerOrgTypeThird:c,masterMakerCurrency:m,masterMakerGstStatus:p,masterMakerIncoterms:y,masterMakerPaymentTerm:f,masterMakerLovHistory:O,masterMakerTitle:k}}}}]);