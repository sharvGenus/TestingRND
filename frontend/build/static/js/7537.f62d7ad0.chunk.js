"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[7537],{77716:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var a=r(9950),s=r(27081),o=r(28429),i=r(62605),l=r(29024),n=r(52867),d=r(99635),c=r(89649),u=r(14846),v=r(3252),g=r(83456),p=r(39225),m=r(44414);const S=(0,v.A)((0,a.lazy)((()=>r.e(8820).then(r.bind(r,46439))))),f=[{Header:"Actions",accessor:"actionButtons"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"stock_ledgers[0].project.name"},{Header:"Organization",accessor:"stock_ledgers[0].organization.name"},{Header:"Store",accessor:"stock_ledgers[0].organization_store.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"E-Way Bill Number",accessor:"eWayBillNumber"},{Header:"E-Way Bill Date",accessor:"eWayBillDate"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}],h=()=>{var e,t,r;const v=(0,s.wA)(),{transactionId:h}=(0,o.g)(),[A,b]=(0,a.useState)("closed"),[y,k]=(0,a.useState)(null),[D,w]=(0,a.useState)(null),[B,N]=(0,a.useState)(null),{searchString:P,setSearchString:x,accessorsRef:_,setAccessors:j,forceSearch:C,searchStringTrimmed:H}=(0,p.A)(),{paginations:{pageSize:L,pageIndex:W,forceUpdate:z},setPageIndex:I,setPageSize:O}=(0,c.A)(),{stockLedgerDetailList:R}=(0,i.t)(),{data:T,count:E}=(0,a.useMemo)((()=>{var e,t;return{data:(0,n.yN)(null===R||void 0===R||null===(e=R.stockLedgerDetailListObject)||void 0===e?void 0:e.rows).map(((e,t)=>{var r,a,s,o,i,l,n,d;return{...e,...!0===(null===e||void 0===e||null===(r=e.stock_ledgers[0])||void 0===r?void 0:r.isCancelled)?{status:"Cancelled"}:!0===(null===e||void 0===e||null===(a=e.stock_ledgers[0])||void 0===a?void 0:a.isProcessed)?{status:"Processed"}:{status:null},serialNumber:(W*L-L+t+1).toString(),actionButtons:(0,m.jsx)(u.w,{openPreview:()=>J(t),initiatePrint:()=>Y(t),initiateDownload:()=>Q(t),viewSerialNumbers:()=>{w(t)},disablePrint:+e.sumOfAmounts>(null===(s=e.stock_ledgers)||void 0===s||null===(o=s[0])||void 0===o||null===(i=o.project)||void 0===i?void 0:i.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:+e.sumOfAmounts>(null===(l=e.stock_ledgers)||void 0===l||null===(n=l[0])||void 0===n||null===(d=n.project)||void 0===d?void 0:d.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}}))||[],count:null===R||void 0===R||null===(t=R.stockLedgerDetailListObject)||void 0===t?void 0:t.count,isLoading:null===R||void 0===R?void 0:R.loading,error:null===R||void 0===R?void 0:R.error}}),[R,W,L]),F=(null===T||void 0===T||null===(e=T[D])||void 0===e?void 0:e.materialData)||[],M=null===T||void 0===T||null===(t=T[y])||void 0===t?void 0:t.id,U=null===T||void 0===T||null===(r=T[y])||void 0===r?void 0:r.referenceDocumentNumber,G="c384a987-d92c-481f-9223-605dd3d05338";(0,a.useEffect)((()=>{G&&v((0,l.rYL)({pageIndex:W,pageSize:L,transactionTypeId:G,...H&&{searchString:H,accessors:JSON.stringify(_.current)},sortBy:(null===B||void 0===B?void 0:B[0])||"createdAt",sortOrder:(null===B||void 0===B?void 0:B[1])||"DESC"}))}),[v,h,W,L,z,G,H,B,_,C]);const J=e=>{b("view"),k(e)},Q=e=>{b("download"),k(e)},Y=e=>{b("print"),k(e)};return(0,m.jsxs)(m.Fragment,{children:["closed"!==A&&(0,m.jsx)(S,{fetchFromRoute:"/ptp-grn-receipt",apiParams:M,previewAction:A,onClose:()=>{b("hidden"),k(null)},fileNameForDownload:U}),null!==D&&(0,m.jsx)(g.A,{selectedMaterialList:F,onClose:()=>{w(null)}}),(0,m.jsx)(d.default,{title:"PTPGRN Receipt",setPageIndex:I,setPageSize:O,pageIndex:W,pageSize:L,columns:f,data:G?T:[],count:G?E:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:P,searchStringTrimmed:H,setSearchString:x,setAccessors:j},sortConfig:{sort:B,setSort:N},exportConfig:{tableName:"ptp_grn_receipt",apiQuery:{transactionTypeId:G}}})]})}}}]);