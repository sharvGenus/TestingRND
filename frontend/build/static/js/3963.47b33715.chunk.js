"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[3963],{75491:(e,t,a)=>{a.d(t,{A:()=>i});var o=a(59019),r=a(60764),n=a.n(r);const i=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;const i=new o.jsPDF({orientation:"landscape"});i.setFont("Times-Roman","normal"),i.setFontSize(16),i.text(e.replace(/-/g," "),15,10,{fontSize:20}),r&&(i.setFont("Times-Roman","bold"),i.setFontSize(20),i.text(r.heading,i.internal.pageSize.width/2,20,{align:"center",marginTop:20,marginBottom:20}),i.setFont("Times-Roman","normal"),i.setFontSize(12),i.text("",15,20),i.text(`${r.subHead1}: ${r.subCont1}`,15,40,{marginTop:20,marginBottom:20,fontSize:12}),i.text(`${r.subHead2}: ${r.subCont2}`,15,50,{marginTop:20,marginBottom:20,fontSize:12})),i.text("",15,20),i.text("",15,20),n()(i,{head:t,body:a,...r&&{startY:65}}),r&&(i.text("",15,20),i.text("",15,20),i.setFontSize(16),i.text(`${r.subSign1}                                                  ${r.subSign2}`,i.internal.pageSize.width/2,i.internal.pageSize.height-20,{align:"center",marginTop:20,marginBottom:20,fontSize:14})),i.save(e+".pdf")}},89649:(e,t,a)=>{a.d(t,{A:()=>n});var o=a(9950),r=a(80415);function n(){const[e,t]=(0,o.useState)({pageIndex:r.j7.pageIndex,pageSize:r.j7.pageSize,forceUpdate:!0}),a=(0,o.useCallback)((function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.pageIndex,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pageSize;t((e=>({pageIndex:a,pageSize:o,forceUpdate:!e.forceUpdate})))}),[e]),n=(0,o.useCallback)((()=>{t((e=>({pageIndex:r.j7.pageIndex,pageSize:r.j7.pageSize,forceUpdate:!e.forceUpdate})))}),[]);return{paginations:e,setPageIndex:e=>t((t=>({...t,pageIndex:e,forceUpdate:!t.forceUpdate}))),setPageSize:e=>t((t=>({pageIndex:r.j7.pageIndex,pageSize:e,forceUpdate:!t.forceUpdate}))),refreshPagination:n,setPaginationsFunctions:a}}},3147:(e,t,a)=>{a.d(t,{E:()=>n});var o=a(9950),r=a(27081);const n=()=>{const[e,t]=(0,o.useState)({organizationStoreObject:{},error:"",loading:!0}),[a,n]=(0,o.useState)({organizationStoreObject:{},error:"",loading:!0}),[i,l]=(0,o.useState)({organizationStoreObject:[],error:"",loading:!0}),[s,d]=(0,o.useState)({organizationStoreDropdownObject:{},error:"",loading:!0}),[c,p]=(0,o.useState)({organizationStoreDropdownSecondObject:{},error:"",loading:!0}),[g,u]=(0,o.useState)({orgStoreDropDownObject:{},error:"",loading:!0}),[S,m]=(0,o.useState)({orgViewStoreDropDownObject:{},error:"",loading:!0}),[v,A]=(0,o.useState)({organizationStoresHistoryObject:{},error:"",loading:!0}),b=(0,r.d4)((e=>e.organizationStores||{})),f=(0,r.d4)((e=>e.organizationStoresAllAccess||{})),x=(0,r.d4)((e=>e.organizationStoresSecond||[])),h=(0,r.d4)((e=>e.organizationStoreDropdown||[])),I=(0,r.d4)((e=>e.organizationStoreDropdownSecond||[])),j=(0,r.d4)((e=>e.orgStoreDropDown||[])),z=(0,r.d4)((e=>e.orgViewStoreDropDown||[])),y=(0,r.d4)((e=>e.organizationStoresHistory||[]));return(0,o.useEffect)((()=>{t((e=>({...e,...b})))}),[b]),(0,o.useEffect)((()=>{n((e=>({...e,...f})))}),[f]),(0,o.useEffect)((()=>{l((e=>({...e,...x})))}),[x]),(0,o.useEffect)((()=>{d((e=>({...e,...h})))}),[h]),(0,o.useEffect)((()=>{p((e=>({...e,...I})))}),[I]),(0,o.useEffect)((()=>{u((e=>({...e,...j})))}),[j]),(0,o.useEffect)((()=>{m((e=>({...e,...z})))}),[z]),(0,o.useEffect)((()=>{A((e=>({...e,...y})))}),[y]),{organizationStores:e,organizationStoresSecond:i,organizationStoresDropdown:s,orgStoreDropDown:g,orgViewStoreDropDown:S,organizationStoresHistory:v,organizationStoresAllAccess:a,organizationStoresDropdownSecond:c}}},63963:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var o=a(9950),r=a(27081),n=a(4139),i=a(67535),l=a(60666),s=a(9449),d=a(26473),c=a(80733),p=a(3147),g=a(40761),u=a(96951),S=a(14351),m=a(84601),v=a(29024),A=a(99635),b=a(89649),f=a(75491),x=a(44414);const h=()=>{const[e,t]=(0,o.useState)(!1),[a,h]=(0,o.useState)(null),[I,j]=(0,o.useState)(null),[z,y]=(0,o.useState)(null),{paginations:{pageSize:w,pageIndex:D},setPageIndex:T,setPageSize:C}=(0,b.A)(),P=(0,r.wA)(),H=(0,s.mN)({resolver:(0,d.t)(l.Ik().shape({projectId:m.A.projectArr})),defaultValues:{},mode:"all"}),{handleSubmit:E,setValue:F}=H,{projectsDropdown:O}=(0,c.Y)(),{organizationStoresDropdown:M}=(0,p.E)(),k=null===O||void 0===O?void 0:O.projectsDropdownObject,{storeData:U}=(0,o.useMemo)((()=>{var e;return{storeData:(null===M||void 0===M||null===(e=M.organizationStoreDropdownObject)||void 0===e?void 0:e.rows)||[]}}),[M]),{storeWiseMaterialReport:R,materialTypeForReport:V}=(0,g.r)(),{data:L}=(0,o.useMemo)((()=>({data:R.storeWiseMaterial||[],isLoading:R.loading||!1})),[R]),[$,B]=(0,o.useState)([]),{materialTypeAllData:q}=(0,o.useMemo)((()=>({materialTypeAllData:V.materialTypeArr||[],isLoading:V.loading||!1})),[V]),W=e=>{const t=[];return e&&e.length&&e.map((e=>t.push(e.id))),t};(0,o.useEffect)((()=>{const e=[];U.map((t=>e.push(t.id))),j(e),y(e)}),[U]),(0,o.useEffect)((()=>{q&&B(q)}),[q]);const N=(0,o.useMemo)((()=>[{Header:"Project",accessor:"project"},{Header:"Store Name",accessor:"store"},{Header:"Material Type",accessor:"materialType"},{Header:"Received At Store",accessor:"receivedAtStore"},{Header:"At Contractor",accessor:"receivedAtContractor"},{Header:"At Installer",accessor:"receivedAtInstaller"},{Header:"Installed",accessor:"installed"},{Header:"Available At Store",accessor:"availableAtStore"},{Header:"Available At Contractor",accessor:"availableAtContractor"},{Header:"Available At Installer",accessor:"availableAtInstaller"}]),[]);(0,o.useEffect)((()=>{P((0,v.uiG)())}),[P]),(0,o.useEffect)((()=>{P((0,v.h7m)("420e7b13-25fd-4d23-9959-af1c07c7e94b"))}),[P]);const Y=e=>{let t={project:" ",store:"Total",materialType:" ",receivedAtStore:0,receivedAtContractor:0,receivedAtInstaller:0,installed:0,availableAtStore:0,availableAtContractor:0,availableAtInstaller:0};return e&&e.length>0&&e.map((e=>{t.receivedAtStore+=e.receivedAtStore,t.receivedAtContractor+=e.receivedAtContractor,t.receivedAtInstaller+=e.receivedAtInstaller,t.installed+=e.installed,t.availableAtStore+=e.availableAtStore,t.availableAtContractor+=e.availableAtContractor,t.availableAtInstaller+=e.availableAtInstaller})),e.push(t),e};return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(u.Op,{methods:H,onSubmit:E((async e=>{P((0,v.p5L)({projectId:W(e.projectId),storeId:I&&I.length>0?I:z,...e.materialTypeId&&{materialTypeId:W(e.materialTypeId)}})),t(!0)})),children:(0,x.jsxs)(S.A,{title:"Store Wise Material Summary Report",sx:{mb:2},children:[(0,x.jsxs)(n.Ay,{container:!0,spacing:4,children:[(0,x.jsx)(n.Ay,{item:!0,md:3,xl:3,children:(0,x.jsx)(u.aq,{name:"projectId",label:"Project",InputLabelProps:{shrink:!0},menus:k,onChange:e=>{t(!1),F("storeId",null),h(W(e)),P((0,v.MZV)({projectId:W(e),storeId:I&&I.length>0?I:z}))},required:!0})}),(0,x.jsx)(n.Ay,{item:!0,md:3,xl:3,children:(0,x.jsx)(u.aq,{name:"storeId",label:"Store",InputLabelProps:{shrink:!0},menus:U,onChange:e=>{e?(t(!1),j(W(e)),a&&a.length>0&&P((0,v.MZV)({projectId:a,storeId:e&&e.length>0?W(e):z}))):(F("materialTypeId",null),B([]))},allowClear:!0})}),(0,x.jsx)(n.Ay,{item:!0,md:3,xl:3,children:(0,x.jsx)(u.aq,{name:"materialTypeId",label:"Material Type",InputLabelProps:{shrink:!0},menus:$,allowClear:!0})}),(0,x.jsx)(n.Ay,{container:!0,spacing:2,alignItems:"end",sx:{mt:2},children:(0,x.jsx)(n.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px",mb:"15px"},children:(0,x.jsx)(i.A,{type:"submit",size:"small",variant:"contained",color:"primary",children:"Proceed"})})})]}),e?(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(A.default,{title:" ",data:Y([...L]),hideActions:!0,hideAddButton:!0,accessTableOnly:!0,hidePagination:!0,exportPDFOnly:!0,exportToPdf:()=>{const e=[],t=[];N.map((t=>{e.push(t.Header)})),L&&Y([...L]).map((e=>{t.push([null===e||void 0===e?void 0:e.project,null===e||void 0===e?void 0:e.store,null===e||void 0===e?void 0:e.materialType,null===e||void 0===e?void 0:e.receivedAtStore,null===e||void 0===e?void 0:e.receivedAtContractor,null===e||void 0===e?void 0:e.receivedAtInstaller,null===e||void 0===e?void 0:e.installed,null===e||void 0===e?void 0:e.availableAtStore,null===e||void 0===e?void 0:e.availableAtContractor,null===e||void 0===e?void 0:e.availableAtInstaller])})),(0,f.A)("Store-Wise-Material-Summary-Report",[e],t)},count:L.length,setPageIndex:T,setPageSize:C,pageIndex:D,pageSize:w,columns:N})}):null]})})})}}}]);