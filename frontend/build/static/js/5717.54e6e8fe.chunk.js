"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[5717],{88848:(e,t,r)=>{r.d(t,{$:()=>o});var a=r(9950),s=r(27081);const o=()=>{const[e,t]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[r,o]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[i,n]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[c,l]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[d,u]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[m,v]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[g,S]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[p,f]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[b,y]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[k,O]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[h,N]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),j=(0,s.d4)((e=>e.masterMakerLov||{})),M=(0,s.d4)((e=>e.masterMakerLovList||{})),L=(0,s.d4)((e=>e.lovsForMasterName||[])),A=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),H=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),T=(0,s.d4)((e=>e.currency||[])),D=(0,s.d4)((e=>e.gstStatus||[])),w=(0,s.d4)((e=>e.paymentTerm||[])),C=(0,s.d4)((e=>e.incoterms||[])),E=(0,s.d4)((e=>e.title||[])),x=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{t((e=>({...e,...j})))}),[j]),(0,a.useEffect)((()=>{o((e=>({...e,...M})))}),[M]),(0,a.useEffect)((()=>{n((e=>({...e,...L})))}),[L]),(0,a.useEffect)((()=>{l((e=>({...e,...A})))}),[A]),(0,a.useEffect)((()=>{u((e=>({...e,...H})))}),[H]),(0,a.useEffect)((()=>{v((e=>({...e,...T})))}),[T]),(0,a.useEffect)((()=>{S((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{f((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{y((e=>({...e,...C})))}),[C]),(0,a.useEffect)((()=>{O((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{N((e=>({...e,...x})))}),[x]),{masterMakerLovs:e,masterMakerLovsList:r,masterMakerOrgType:i,masterMakerOrgTypeSecond:c,masterMakerOrgTypeThird:d,masterMakerCurrency:m,masterMakerGstStatus:g,masterMakerIncoterms:b,masterMakerPaymentTerm:p,masterMakerLovHistory:h,masterMakerTitle:k}}},81248:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var a=r(96583),s=r(9950),o=r(27081),i=r(28429),n=r(88848),c=r(62605),l=r(29024),d=r(52867),u=r(99635),m=r(89649),v=r(14846),g=r(3252),S=r(75682),p=r(83456),f=r(39225),b=r(44414);const y=(0,g.A)((0,s.lazy)((()=>r.e(8820).then(r.bind(r,46439))))),k=[{Header:"Actions",accessor:"actionButtons"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"fromProject.name"},{Header:"From Organization",accessor:"fromStore.organization.name"},{Header:"From Store",accessor:"fromStore.name"},{Header:"Receiving Organization",accessor:"toStore.organization.name"},{Header:"Receiving Store",accessor:"toStore.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"Transporter Name",accessor:"transporterName"},{Header:"Transporter Contact Number",accessor:"transporterContactNumber"},{Header:"Vehicle Number",accessor:"vehicleNumber"},{Header:"E-Way Bill Number",accessor:"eWayBillNumber"},{Header:"E-Way Bill Date",accessor:"eWayBillDate"},{Header:"LR Number",accessor:"lrNumber"},{Header:"Actual Receipt Date",accessor:"actualReceiptDate"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}],O=()=>{var e,t,r;const g=(0,o.wA)(),{transactionId:O}=(0,i.g)(),[h,N]=(0,s.useState)("closed"),[j,M]=(0,s.useState)(null),[L,A]=(0,s.useState)(!1),[H,T]=(0,s.useState)(null),[D,w]=(0,s.useState)(!1),[C,E]=(0,s.useState)(null),[x,P]=(0,s.useState)(null),{paginations:{pageSize:B,pageIndex:R,forceUpdate:W},setPageIndex:z,refreshPagination:I,setPageSize:F}=(0,m.A)(),{searchString:_,setSearchString:U,accessorsRef:V,setAccessors:Y,forceSearch:$,searchStringTrimmed:q}=(0,f.A)(),{stockLedgerDetailList:G}=(0,c.t)(),{masterMakerOrgType:J}=(0,n.$)(),K=null===J||void 0===J?void 0:J.masterObject,{data:Q,count:X}=(0,s.useMemo)((()=>{var e,t;return{data:(0,d.yN)(null===G||void 0===G||null===(e=G.stockLedgerDetailListObject)||void 0===e?void 0:e.rows).map(((e,t)=>{var r,a,s,o,i,n,c;return{...e,...!0===(null===e||void 0===e||null===(r=e.stock_ledgers[0])||void 0===r?void 0:r.isCancelled)?{status:"Cancelled"}:null!==e&&void 0!==e&&e.stock_ledgers.find((e=>e.quantity>0&&!0===e.willReturn&&!1===e.isProcessed))||null!==e&&void 0!==e&&e.stock_ledgers.every((e=>!1===e.willReturn))?{status:null}:{status:"Processed"},serialNumber:(R*B-B+t+1).toString(),actionButtons:(0,b.jsx)(v.w,{editButton:!0,openPreview:()=>ae(t),initiatePrint:()=>ie(t),initiateDownload:()=>oe(t),updateReceipt:()=>se(e),viewSerialNumbers:()=>{T(t)},disablePrint:+e.sumOfAmounts>(null===(a=e.stock_ledgers)||void 0===a||null===(s=a[0])||void 0===s||null===(o=s.project)||void 0===o?void 0:o.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:+e.sumOfAmounts>(null===(i=e.stock_ledgers)||void 0===i||null===(n=i[0])||void 0===n||null===(c=n.project)||void 0===c?void 0:c.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}}))||[],count:null===G||void 0===G||null===(t=G.stockLedgerDetailListObject)||void 0===t?void 0:t.count,isLoading:null===G||void 0===G?void 0:G.loading,error:null===G||void 0===G?void 0:G.error}}),[G,R,B]),Z=(null===Q||void 0===Q||null===(e=Q[H])||void 0===e?void 0:e.materialData)||[],ee=null===Q||void 0===Q||null===(t=Q[j])||void 0===t?void 0:t.id,te=null===Q||void 0===Q||null===(r=Q[j])||void 0===r?void 0:r.referenceDocumentNumber,re=(0,d.x)(K,"STC");(0,s.useEffect)((()=>{g((0,l.VOH)("TRANSACTION TYPE"))}),[g]),(0,s.useEffect)((()=>{re&&g((0,l.rYL)({pageIndex:R,pageSize:B,transactionTypeId:re,...q&&{searchString:q,accessors:JSON.stringify(V.current)},sortBy:(null===x||void 0===x?void 0:x[0])||"createdAt",sortOrder:(null===x||void 0===x?void 0:x[1])||"DESC"}))}),[g,O,R,W,B,re,q,x,V,$]);const ae=e=>{N("view"),M(e)},se=e=>{E(e),A(!0),w(!0)},oe=e=>{N("download"),M(e)},ie=e=>{N("print"),M(e)};return(0,b.jsxs)(b.Fragment,{children:["closed"!==h&&(0,b.jsx)(y,{fetchFromRoute:"/stc-receipt",apiParams:ee,previewAction:h,onClose:()=>{N("hidden"),M(null)},fileNameForDownload:te}),null!==H&&(0,b.jsx)(p.A,{selectedMaterialList:Z,onClose:()=>{T(null)}}),L&&(0,b.jsx)(a.A,{open:D,onClose:()=>w(!1),scroll:"paper",maxWidth:"xs",disableEscapeKeyDown:!0,children:(0,b.jsx)(S.W,{rowData:C,setOpen:w,refreshPagination:I,title:"STC",editPlaceOfSupply:!0})}),(0,b.jsx)(u.default,{title:"STC Receipt",setPageIndex:z,setPageSize:F,pageIndex:R,pageSize:B,columns:k,data:re?Q:[],count:re?X:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:_,searchStringTrimmed:q,setSearchString:U,setAccessors:Y},sortConfig:{sort:x,setSort:P},exportConfig:{tableName:"stc_receipt",apiQuery:{transactionTypeId:re}}})]})}}}]);