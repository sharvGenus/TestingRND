"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[7585],{64499:(e,t,a)=>{a.d(t,{A:()=>f});var s=a(9950),i=a(65669),r=a(43263),n=a(57191),o=a(95537),d=a(67535),l=a(87233),c=a(44414);f.defaultProps={title:"Confirm Action",message:"Are you sure to perform this action",closeBtnTitle:"Cancel",confirmBtnTitle:"Ok"};const u={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",borderRadius:"10px",p:3},p={display:"flex",flexDirection:"row",padding:"15px 0"},m={display:"flex",justifyContent:"flex-end",gap:2},g={marginTop:2,display:"flex",fontSize:"14px"};function f(e){let{open:t,handleClose:a,title:f,message:h,closeBtnTitle:x,confirmBtnTitle:y,handleConfirm:A,confirmColor:v}=e;const[S,j]=(0,s.useState)(null);return(0,s.useEffect)((()=>{j(null)}),[t]),(0,c.jsx)("div",{children:(0,c.jsx)(i.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:t,closeAfterTransition:!0,slots:{backdrop:r.A},slotProps:{backdrop:{timeout:500}},children:(0,c.jsx)(n.A,{in:t,children:(0,c.jsxs)(o.A,{sx:u,children:[(0,c.jsx)(l.A,{id:"transition-modal-title",variant:"h4",children:f}),(0,c.jsx)(l.A,{id:"transition-modal-title",variant:"h6",sx:p,children:h}),(0,c.jsxs)(o.A,{sx:m,children:[!!a&&(0,c.jsx)(d.A,{onClick:a,size:"small",variant:"outlined",color:"primary",children:x}),!!A&&(0,c.jsx)(d.A,{onClick:A,size:"small",variant:"contained",color:v||"error",children:y})]}),S&&(0,c.jsx)(l.A,{variant:"p",color:"red",sx:g,children:S})]})})})})}},89649:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(9950),i=a(80415);function r(){const[e,t]=(0,s.useState)({pageIndex:i.j7.pageIndex,pageSize:i.j7.pageSize,forceUpdate:!0}),a=(0,s.useCallback)((function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.pageIndex,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pageSize;t((e=>({pageIndex:a,pageSize:s,forceUpdate:!e.forceUpdate})))}),[e]),r=(0,s.useCallback)((()=>{t((e=>({pageIndex:i.j7.pageIndex,pageSize:i.j7.pageSize,forceUpdate:!e.forceUpdate})))}),[]);return{paginations:e,setPageIndex:e=>t((t=>({...t,pageIndex:e,forceUpdate:!t.forceUpdate}))),setPageSize:e=>t((t=>({pageIndex:i.j7.pageIndex,pageSize:e,forceUpdate:!t.forceUpdate}))),refreshPagination:r,setPaginationsFunctions:a}}},39225:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(41397),i=a.n(s),r=a(9950);const n=e=>{const{isFcMode:t}=e||{},[a,s]=(0,r.useState)(void 0),[n,o]=(0,r.useState)(!1),d=(0,r.useRef)([]),l=(0,r.useCallback)((e=>{const s=d.current;d.current=e,a&&(t||i().isEqual(e,s)||o((e=>!e)))}),[t,a]),c=(0,r.useMemo)((()=>null===a||void 0===a?void 0:a.trim()),[a]);return{searchString:a,searchStringTrimmed:c,forceSearch:n,accessorsRef:d,setSearchString:s,setAccessors:l}}},97585:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var s=a(9950),i=a(27081),r=a(96583),n=a(29024),o=a(4139),d=a(67535),l=a(60666),c=a(9449),u=a(26473),p=a(71826),m=a(99144),g=a(28073),f=a(96951),h=a(14351),x=a(84601),y=a(62054),A=a(44414);const v=e=>{const t=(0,i.wA)(),{setRefresh:a,data:r,view:v,update:S,refreshPagination:j}=e,b=(0,c.mN)({resolver:(0,u.t)(l.Ik().shape({name:x.A.name,code:x.A.other,countryId:x.A.country,stateId:x.A.state})),defaultValues:{},mode:"all"});(0,s.useEffect)((()=>{t((0,n.cTJ)())}),[t]);const{countriesDropdown:C}=(0,m.o)(),{statesDropdown:I}=(0,g.Y)(),w=(null===C||void 0===C?void 0:C.countriesDropdownObject)||[],P=(null===I||void 0===I?void 0:I.statesDropdownObject)||[],{handleSubmit:z,setValue:k,clearErrors:T}=b,O=(0,s.useCallback)((()=>{a(),b.reset({name:"",code:"",integrationId:"",countryId:"",stateId:""})}),[a,b]);(0,s.useEffect)((()=>{var e;r||O(),(v||S)&&(t((0,n.CYQ)(r.state.country.id)),k("countryId",r.state.country.id),k("stateId",r.state.id),e=r,Object.entries(e).forEach((e=>{let[t,a]=e;k(t,a)}))),T()}),[r,S,v,k,t,T,O]);const U=(e,t,a,s,i)=>(0,A.jsx)(f.eu,{name:e,onChange:i,label:t,InputLabelProps:{shrink:!0},menus:a,...s&&{required:!0},...v?{disable:!0}:S?{disable:!1}:{}}),B=function(e,t,a,s){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return(0,A.jsx)(f.o3,{name:e,type:a,label:t,InputLabelProps:{shrink:i},...s&&{required:!0},...v?{disabled:!0}:S?{disabled:!1}:{}})};return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(f.Op,{methods:b,onSubmit:z((async e=>{let t;if(t=S?await(0,p.default)("/city-update",{method:"PUT",body:e,params:r.id}):await(0,p.default)("/city-form",{method:"POST",body:e}),t.success){const e=S?"City updated successfully!":"City added successfully!";(0,y.A)(e,{variant:"success",autoHideDuration:1e4}),j(),O()}else{var a,s;(0,y.A)((null===(a=t)||void 0===a||null===(s=a.error)||void 0===s?void 0:s.message)||"Operation failed. Please try again.",{variant:"error"})}})),children:(0,A.jsxs)(h.A,{title:(v?"View ":S?"Update ":"Add ")+"City",sx:{mb:2},children:[(0,A.jsxs)(o.Ay,{container:!0,spacing:4,children:[(0,A.jsx)(o.Ay,{item:!0,md:3,xl:2,children:U("countryId","Country Name",w,!0,(e=>{var a;t((0,n.CYQ)(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value))}))}),(0,A.jsx)(o.Ay,{item:!0,md:3,xl:2,children:U("stateId","State Name",P,!0)}),(0,A.jsx)(o.Ay,{item:!0,md:3,xl:2,children:B("name","City Name","text",!0)}),(0,A.jsx)(o.Ay,{item:!0,md:3,xl:2,children:B("code","Code","text",!0)}),(0,A.jsx)(o.Ay,{item:!0,md:3,xl:2,children:B("integrationId","Integration ID","text")})]}),(0,A.jsx)(o.Ay,{container:!0,spacing:2,alignItems:"end",sx:{mt:1},children:(0,A.jsx)(o.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px"},children:v?(0,A.jsx)(d.A,{onClick:O,size:"small",variant:"outlined",color:"primary",children:"Back"}):S?(0,A.jsxs)(o.Ay,{item:!0,sx:{display:"flex",gap:"20px"},children:[(0,A.jsx)(d.A,{size:"small",type:"submit",variant:"contained",color:"primary",children:"Update"}),(0,A.jsx)(d.A,{onClick:O,size:"small",variant:"outlined",color:"primary",children:"Back"})]}):(0,A.jsx)(o.Ay,{item:!0,sx:{display:"flex",gap:"20px"},children:(0,A.jsx)(d.A,{size:"small",type:"submit",variant:"contained",color:"primary",children:"Save"})})})})]})})})};var S=a(32112),j=a(99635),b=a(89649),C=a(64499),I=a(39225),w=a(30423),P=a(65920),z=a(52867);const k=()=>{const{paginations:{pageSize:e,pageIndex:t,forceUpdate:a},refreshPagination:o,setPageIndex:d,setPageSize:l}=(0,b.A)(),{searchString:c,forceSearch:u,accessorsRef:m,setAccessors:g,setSearchString:f,searchStringTrimmed:h}=(0,I.A)(),[x,k]=(0,s.useState)(!1),[T,O]=(0,s.useState)(!1),[U,B]=(0,s.useState)(!1),[H,N]=(0,s.useState)(null),[D,R]=(0,s.useState)(null),[E,L]=(0,s.useState)(null),[F,M]=(0,s.useState)(1),[V,q]=(0,s.useState)(null),[J,Q]=(0,s.useState)(!1),[Y,_]=(0,s.useState)(!1),[K,W]=(0,s.useState)(null),Z=(0,i.wA)(),{filterObjectForApi:$}=(0,w.bZ)(),G=(0,P.A)($),X=(0,P.A)(K);(0,s.useEffect)((()=>{[[G,$],[X,K]].some(z.$H)?o():Z((0,n.i6)({pageIndex:t,pageSize:e,listType:F,...h&&{searchString:h,accessors:JSON.stringify(m.current)},sortBy:null===K||void 0===K?void 0:K[0],sortOrder:null===K||void 0===K?void 0:K[1],filterObject:$}))}),[Z,t,e,F,h,K,m,u,a,o,G,$,X]),(0,s.useEffect)((()=>{null!==H&&void 0!==H&&H.id&&Z((0,n.KOU)({pageIndex:t,pageSize:e,listType:F,recordId:null===H||void 0===H?void 0:H.id}))}),[Z,t,e,a,F,H]);const{cities:ee,citiesHistory:te}=(0,S.J)(),{data:ae,count:se}=(0,s.useMemo)((()=>{var e,t;return{data:(null===(e=ee.citiesObject)||void 0===e?void 0:e.rows)||[],count:(null===(t=ee.citiesObject)||void 0===t?void 0:t.count)||0,isLoading:ee.loading||!1}}),[ee]),{historyData:ie,historyCounts:re}=(0,s.useMemo)((()=>{var e,t;return{historyData:(null===(e=te.citiesHistoryObject)||void 0===e?void 0:e.rows)||[],historyCounts:(null===(t=te.citiesHistoryObject)||void 0===t?void 0:t.count)||0,isLoading:te.loading||!1}}),[te]),ne=(0,s.useMemo)((()=>[{Header:"Country Name",accessor:"state.country.name",filterProps:{tableName:"countries",getColumn:"name",customAccessor:"countryId"}},{Header:"State Name",accessor:"state.name",filterProps:{tableName:"states",getColumn:"name",customAccessor:"stateId"}},{Header:"City Name",accessor:"name",filterProps:{tableName:"cities",getColumn:"name",customAccessor:"name"}},{Header:"Code",accessor:"code",filterProps:{tableName:"cities",getColumn:"code",customAccessor:"code"}},{Header:"Integration ID",accessor:"integrationId",filterProps:{tableName:"states",getColumn:"integration_id",customAccessor:"integrationId"}},{Header:"Updated On",accessor:"updatedAt"},{Header:"Updated By",accessor:"updated.name",filterProps:{tableName:"users",getColumn:"name",customAccessor:"updatedBy"}},{Header:"Created On",accessor:"createdAt"},{Header:"Created By",accessor:"created.name",filterProps:{tableName:"users",getColumn:"name",customAccessor:"createdBy"}}]),[]),oe=()=>{Q(!1),_(!1),q(null)};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(v,{refreshPagination:o,setRefresh:oe,...V&&{data:V},...J&&{view:J,update:!1},...Y&&{update:Y,view:!1}}),(0,A.jsx)(j.default,{title:"City",hideAddButton:!0,data:ae,columns:ne,count:se,setPageIndex:d,setPageSize:l,pageIndex:t,pageSize:e,handleRowRestore:async e=>{L(e),O(!0)},handleRowDelete:e=>{R(e),k(!0)},handleRowUpdate:e=>{_(!0),Q(!1),q(e)},handleRowHistory:e=>{N(e),B(!0)},handleRowView:e=>{Q(!0),_(!1),q(e)},listType:F,setListType:e=>{M(e),oe()},searchConfig:{searchString:c,searchStringTrimmed:h,setSearchString:f,setAccessors:g},sortConfig:{sort:K,setSort:W},exportConfig:{tableName:"cities",apiQuery:{listType:F,filterObject:$}}}),(0,A.jsx)(C.A,{open:x,handleClose:()=>k(!1),handleConfirm:async()=>{const e=await(0,p.default)("/delete-city",{method:"DELETE",params:D});var t;e.success?(o(),k(!1)):(0,y.A)(null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)},title:"Confirm Delete",message:"Are you sure you want to delete?",confirmBtnTitle:"Delete"}),(0,A.jsx)(C.A,{open:T,handleClose:()=>O(!1),handleConfirm:async()=>{const e={...E,isActive:"1"};(await(0,p.default)("/city-update",{method:"PUT",body:e,params:e.id})).success&&(o(),O(!1))},title:"Confirm Restore",message:"Are you sure you want to restore?",confirmBtnTitle:"Restore"}),(0,A.jsx)(r.A,{open:U,onClose:()=>B(!1),scroll:"paper",disableEscapeKeyDown:!0,maxWidth:"lg",children:(0,A.jsx)(j.default,{isHistory:!0,title:null===H||void 0===H?void 0:H.name,data:ie,columns:ne,count:re,hideActions:!0,hideSearch:!0,hideAddButton:!0,hideExportButton:!0,setPageIndex:d,setPageSize:l,pageIndex:t,pageSize:e})})]})}}}]);