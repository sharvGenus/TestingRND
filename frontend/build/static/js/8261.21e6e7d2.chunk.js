"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[8261],{88848:(e,r,t)=>{t.d(r,{$:()=>o});var a=t(9950),s=t(27081);const o=()=>{const[e,r]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[t,o]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[i,n]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[c,l]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[d,u]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[m,v]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[g,S]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[p,f]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[b,y]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[k,O]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[h,N]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),j=(0,s.d4)((e=>e.masterMakerLov||{})),M=(0,s.d4)((e=>e.masterMakerLovList||{})),L=(0,s.d4)((e=>e.lovsForMasterName||[])),T=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),A=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),H=(0,s.d4)((e=>e.currency||[])),C=(0,s.d4)((e=>e.gstStatus||[])),D=(0,s.d4)((e=>e.paymentTerm||[])),E=(0,s.d4)((e=>e.incoterms||[])),w=(0,s.d4)((e=>e.title||[])),x=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{r((e=>({...e,...j})))}),[j]),(0,a.useEffect)((()=>{o((e=>({...e,...M})))}),[M]),(0,a.useEffect)((()=>{n((e=>({...e,...L})))}),[L]),(0,a.useEffect)((()=>{l((e=>({...e,...T})))}),[T]),(0,a.useEffect)((()=>{u((e=>({...e,...A})))}),[A]),(0,a.useEffect)((()=>{v((e=>({...e,...H})))}),[H]),(0,a.useEffect)((()=>{S((e=>({...e,...C})))}),[C]),(0,a.useEffect)((()=>{f((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{y((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{O((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{N((e=>({...e,...x})))}),[x]),{masterMakerLovs:e,masterMakerLovsList:t,masterMakerOrgType:i,masterMakerOrgTypeSecond:c,masterMakerOrgTypeThird:d,masterMakerCurrency:m,masterMakerGstStatus:g,masterMakerIncoterms:b,masterMakerPaymentTerm:p,masterMakerLovHistory:h,masterMakerTitle:k}}},85696:(e,r,t)=>{t.r(r),t.d(r,{default:()=>O});var a=t(96583),s=t(9950),o=t(27081),i=t(28429),n=t(88848),c=t(62605),l=t(29024),d=t(52867),u=t(99635),m=t(89649),v=t(14846),g=t(3252),S=t(75682),p=t(83456),f=t(39225),b=t(44414);const y=(0,g.A)((0,s.lazy)((()=>t.e(8820).then(t.bind(t,46439))))),k=[{Header:"Actions",accessor:"actionButtons",disableSortBy:!0},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"fromProject.name"},{Header:"From Organization",accessor:"fromStore.organization.name"},{Header:"From Store",accessor:"fromStore.name"},{Header:"Receiving Organization",accessor:"toStore.organization.name"},{Header:"Receiving Store",accessor:"toStore.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"Transporter Name",accessor:"transporterName"},{Header:"Transporter Contact Number",accessor:"transporterContactNumber"},{Header:"Vehicle Number",accessor:"vehicleNumber"},{Header:"E-Way Bill Number",accessor:"eWayBillNumber"},{Header:"E-Way Bill Date",accessor:"eWayBillDate"},{Header:"LR Number",accessor:"lrNumber"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}],O=()=>{var e,r,t;const g=(0,o.wA)(),{transactionId:O}=(0,i.g)(),[h,N]=(0,s.useState)("closed"),[j,M]=(0,s.useState)(null),[L,T]=(0,s.useState)(!1),[A,H]=(0,s.useState)(null),[C,D]=(0,s.useState)(!1),[E,w]=(0,s.useState)(null),[x,P]=(0,s.useState)(null),{paginations:{pageSize:B,pageIndex:W,forceUpdate:z},setPageIndex:I,refreshPagination:R,setPageSize:F}=(0,m.A)(),{searchString:_,setSearchString:U,accessorsRef:V,setAccessors:Y,forceSearch:$,searchStringTrimmed:G}=(0,f.A)(),{stockLedgerDetailList:J}=(0,c.t)(),{masterMakerOrgType:K}=(0,n.$)(),Q=null===K||void 0===K?void 0:K.masterObject,{data:q,count:X}=(0,s.useMemo)((()=>{var e,r;return{data:(0,d.yN)(null===J||void 0===J||null===(e=J.stockLedgerDetailListObject)||void 0===e?void 0:e.rows).map(((e,r)=>{var t,a,s,o,i,n,c,l;return{...e,...!0===(null===e||void 0===e||null===(t=e.stock_ledgers[0])||void 0===t?void 0:t.isCancelled)?{status:"Cancelled"}:!0===(null===e||void 0===e||null===(a=e.stock_ledgers[0])||void 0===a?void 0:a.isProcessed)?{status:"Processed"}:{status:null},serialNumber:(W*B-B+r+1).toString(),actionButtons:(0,b.jsx)(v.w,{editButton:!0,openPreview:()=>ae(r),initiatePrint:()=>ie(r),initiateDownload:()=>oe(r),updateReceipt:()=>se(e),viewSerialNumbers:()=>{H(r)},disablePrint:+e.sumOfAmounts>(null===(s=e.stock_ledgers)||void 0===s||null===(o=s[0])||void 0===o||null===(i=o.project)||void 0===i?void 0:i.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:+e.sumOfAmounts>(null===(n=e.stock_ledgers)||void 0===n||null===(c=n[0])||void 0===c||null===(l=c.project)||void 0===l?void 0:l.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}}))||[],count:null===J||void 0===J||null===(r=J.stockLedgerDetailListObject)||void 0===r?void 0:r.count,isLoading:null===J||void 0===J?void 0:J.loading,error:null===J||void 0===J?void 0:J.error}}),[J,W,B]),Z=(null===q||void 0===q||null===(e=q[A])||void 0===e?void 0:e.materialData)||[],ee=null===q||void 0===q||null===(r=q[j])||void 0===r?void 0:r.id,re=null===q||void 0===q||null===(t=q[j])||void 0===t?void 0:t.referenceDocumentNumber,te=(0,d.x)(Q,"CTS");(0,s.useEffect)((()=>{g((0,l.VOH)("TRANSACTION TYPE"))}),[g]),(0,s.useEffect)((()=>{te&&g((0,l.rYL)({pageIndex:W,pageSize:B,transactionTypeId:te,...G&&{searchString:G,accessors:JSON.stringify(V.current)},sortBy:(null===x||void 0===x?void 0:x[0])||"createdAt",sortOrder:(null===x||void 0===x?void 0:x[1])||"DESC"}))}),[g,O,W,B,z,te,G,x,V,$]);const ae=e=>{N("view"),M(e)},se=e=>{w(e),T(!0),D(!0)},oe=e=>{N("download"),M(e)},ie=e=>{N("print"),M(e)};return(0,b.jsxs)(b.Fragment,{children:["closed"!==h&&(0,b.jsx)(y,{fetchFromRoute:"/cts-receipt",apiParams:ee,previewAction:h,onClose:()=>{N("hidden"),M(null)},fileNameForDownload:re}),null!==A&&(0,b.jsx)(p.A,{selectedMaterialList:Z,onClose:()=>{H(null)}}),L&&(0,b.jsx)(a.A,{open:C,onClose:()=>D(!1),scroll:"paper",maxWidth:"xs",disableEscapeKeyDown:!0,children:(0,b.jsx)(S.W,{rowData:E,setOpen:D,refreshPagination:R,title:"CTS",editPlaceOfSupply:!0})}),(0,b.jsx)(u.default,{title:"CTS Receipt",setPageIndex:I,setPageSize:F,pageIndex:W,pageSize:B,columns:k,data:te?q:[],count:te?X:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:_,searchStringTrimmed:G,setSearchString:U,setAccessors:Y},sortConfig:{sort:x,setSort:P},exportConfig:{tableName:"cts_receipt",apiQuery:{transactionTypeId:te}}})]})}}}]);