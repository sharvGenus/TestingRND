"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[3404],{88848:(e,t,r)=>{r.d(t,{$:()=>o});var a=r(9950),s=r(27081);const o=()=>{const[e,t]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[r,o]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[i,l]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[n,d]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[c,u]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[m,v]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[g,p]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[S,f]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[k,y]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[b,O]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[j,L]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),h=(0,s.d4)((e=>e.masterMakerLov||{})),M=(0,s.d4)((e=>e.masterMakerLovList||{})),A=(0,s.d4)((e=>e.lovsForMasterName||[])),D=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),T=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),N=(0,s.d4)((e=>e.currency||[])),w=(0,s.d4)((e=>e.gstStatus||[])),E=(0,s.d4)((e=>e.paymentTerm||[])),x=(0,s.d4)((e=>e.incoterms||[])),C=(0,s.d4)((e=>e.title||[])),P=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{t((e=>({...e,...h})))}),[h]),(0,a.useEffect)((()=>{o((e=>({...e,...M})))}),[M]),(0,a.useEffect)((()=>{l((e=>({...e,...A})))}),[A]),(0,a.useEffect)((()=>{d((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{u((e=>({...e,...T})))}),[T]),(0,a.useEffect)((()=>{v((e=>({...e,...N})))}),[N]),(0,a.useEffect)((()=>{p((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{f((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{y((e=>({...e,...x})))}),[x]),(0,a.useEffect)((()=>{O((e=>({...e,...C})))}),[C]),(0,a.useEffect)((()=>{L((e=>({...e,...P})))}),[P]),{masterMakerLovs:e,masterMakerLovsList:r,masterMakerOrgType:i,masterMakerOrgTypeSecond:n,masterMakerOrgTypeThird:c,masterMakerCurrency:m,masterMakerGstStatus:g,masterMakerIncoterms:k,masterMakerPaymentTerm:S,masterMakerLovHistory:j,masterMakerTitle:b}}},55999:(e,t,r)=>{r.r(t),r.d(t,{default:()=>O});var a=r(96583),s=r(9950),o=r(27081),i=r(28429),l=r(88848),n=r(62605),d=r(29024),c=r(52867),u=r(99635),m=r(89649),v=r(14846),g=r(3252),p=r(75682),S=r(83456),f=r(39225),k=r(44414);const y=(0,g.A)((0,s.lazy)((()=>r.e(8820).then(r.bind(r,46439))))),b=[{Header:"Actions",accessor:"actionButtons"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"stock_ledgers[0].project.name"},{Header:"From Organization",accessor:"stock_ledgers[0].organization.name"},{Header:"From Store",accessor:"stock_ledgers[0].organization_store.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"E-Way Bill Number",accessor:"eWayBillNumber"},{Header:"E-Way Bill Date",accessor:"eWayBillDate"},{Header:"Place Of Supply",accessor:"placeOfSupply"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}],O=()=>{var e,t,r,g,O;const j=(0,o.wA)(),{transactionId:L}=(0,i.g)(),[h,M]=(0,s.useState)("closed"),[A,D]=(0,s.useState)(null),[T,N]=(0,s.useState)(null),[w,E]=(0,s.useState)(!1),[x,C]=(0,s.useState)(!1),[P,H]=(0,s.useState)(null),[B,F]=(0,s.useState)(null),{paginations:{pageSize:W,pageIndex:_,forceUpdate:I},setPageIndex:R,refreshPagination:z,setPageSize:Q}=(0,m.A)(),{searchString:U,setSearchString:Y,accessorsRef:$,setAccessors:G,forceSearch:J,searchStringTrimmed:K}=(0,f.A)(),{stockLedgerDetailList:V}=(0,n.t)(),{masterMakerOrgType:q}=(0,l.$)(),X=null===q||void 0===q?void 0:q.masterObject,{data:Z,count:ee}=(0,s.useMemo)((()=>{var e,t;return{data:(0,c.yN)(null===V||void 0===V||null===(e=V.stockLedgerDetailListObject)||void 0===e?void 0:e.rows).map(((e,t)=>{var r,a,s,o,i,l,n,d;return{...e,...!0===(null===e||void 0===e||null===(r=e.stock_ledgers[0])||void 0===r?void 0:r.isCancelled)?{status:"Cancelled"}:!0===(null===e||void 0===e||null===(a=e.stock_ledgers[0])||void 0===a?void 0:a.isProcessed)?{status:"Processed"}:{status:null},serialNumber:(_*W-W+t+1).toString(),actionButtons:(0,k.jsx)(v.w,{editButton:!0,openPreview:()=>oe(t),initiatePrint:()=>ne(t),initiateDownload:()=>le(t),updateReceipt:()=>ie(e),viewSerialNumbers:()=>{N(t)},disablePrint:parseFloat(e.sumOfAmounts)>parseFloat(null===(s=e.stock_ledgers)||void 0===s||null===(o=s[0])||void 0===o||null===(i=o.project)||void 0===i?void 0:i.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:parseFloat(e.sumOfAmounts)>parseFloat(null===(l=e.stock_ledgers)||void 0===l||null===(n=l[0])||void 0===n||null===(d=n.project)||void 0===d?void 0:d.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}}))||[],count:null===V||void 0===V||null===(t=V.stockLedgerDetailListObject)||void 0===t?void 0:t.count,isLoading:null===V||void 0===V?void 0:V.loading,error:null===V||void 0===V?void 0:V.error}}),[_,W,null===V||void 0===V?void 0:V.error,null===V||void 0===V?void 0:V.loading,null===V||void 0===V||null===(e=V.stockLedgerDetailListObject)||void 0===e?void 0:e.count,null===V||void 0===V||null===(t=V.stockLedgerDetailListObject)||void 0===t?void 0:t.rows]),te=(null===Z||void 0===Z||null===(r=Z[T])||void 0===r?void 0:r.materialDataNegativeQty)||[],re=null===Z||void 0===Z||null===(g=Z[A])||void 0===g?void 0:g.id,ae=null===Z||void 0===Z||null===(O=Z[A])||void 0===O?void 0:O.referenceDocumentNumber,se=(0,c.x)(X,"SRCTS");(0,s.useEffect)((()=>{j((0,d.VOH)("TRANSACTION TYPE"))}),[j]),(0,s.useEffect)((()=>{se&&j((0,d.rYL)({pageIndex:_,pageSize:W,transactionTypeId:se,...K&&{searchString:K,accessors:JSON.stringify($.current)},sortBy:(null===B||void 0===B?void 0:B[0])||"createdAt",sortOrder:(null===B||void 0===B?void 0:B[1])||"DESC"}))}),[j,L,_,W,I,I,se,K,B,$,J]);const oe=e=>{M("view"),D(e)},ie=e=>{H(e),E(!0),C(!0)},le=e=>{M("download"),D(e)},ne=e=>{M("print"),D(e)};return(0,k.jsxs)(k.Fragment,{children:["closed"!==h&&(0,k.jsx)(y,{fetchFromRoute:"/srcts-receipt",apiParams:re,previewAction:h,onClose:()=>{M("hidden"),D(null)},fileNameForDownload:ae}),null!==T&&(0,k.jsx)(S.A,{selectedMaterialList:te,onClose:()=>{N(null)}}),w&&(0,k.jsx)(a.A,{open:x,onClose:()=>{C(!1)},scroll:"paper",maxWidth:"xs",disableEscapeKeyDown:!0,children:(0,k.jsx)(p.W,{rowData:P,setOpen:C,refreshPagination:z,editPlaceOfSupply:!0,title:"SRCTS"})}),(0,k.jsx)(u.default,{title:"SRCTS Receipt",setPageIndex:R,setPageSize:Q,pageIndex:_,pageSize:W,columns:b,data:se?Z:[],count:se?ee:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:U,searchStringTrimmed:K,setSearchString:Y,setAccessors:G},sortConfig:{sort:B,setSort:F},exportConfig:{tableName:"srcts_receipt",apiQuery:{transactionTypeId:se}}})]})}}}]);