"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[4379,5406],{84601:(e,r,t)=>{t.d(r,{A:()=>s});var a=t(60666);const o=["is-decimal-up-to-3-places","Must have up to 3 decimal places",e=>!e||/^\d+(\.\d{1,3})?$/.test(e.toString())],i=["is-decimal-up-to-2-places","Must have up to 2 decimal places",e=>!e||/^\d+(\.\d{1,2})?$/.test(e.toString())],l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return["is-non-zero",`${e||"Quantity"} should be greater than zero`,e=>e>0]},n=["nothing","",()=>!0],d=function(e,r,t){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=new Date(e),i=new Date(r),l=new Date(t);return a?l<=o&&o<=i:l<=o&&o>=i},s={allowedColumns:a.ai().typeError("Value must be a number").min(1,"Value must be between 1 and 5").max(5,"Value must be between 1 and 5").required(""),name:a.Yj().matches(/^[A-Za-z ]*$/,"Please enter valid name").required("Required"),form:a.Yj().required("Required").nullable(),formType:a.Yj().required("Required").nullable(),taskType:a.Yj().required("Required").nullable(),code:a.Yj().matches(/^(?!0\d).*$/,"Leading zero values are not allowed").required("Required").nullable(),inventoryName:a.Yj().matches(/^[A-Za-z0-9\-_'\s(),./]+$/,"Please enter valid name").required("Required"),particulars:a.Yj().matches(/^[A-Za-z0-9\-_'\s(),./]+$/,"Please enter valid particulars").required("Required"),orgName:a.Yj().required("Required"),title:a.Yj().required("Required").nullable(),office:a.Yj().required("Required").nullable(),masterCode:a.Yj().matches(/^(?!0\d).*$/,"Leading zero values are not allowed").required("Required"),projectName:a.Yj().matches(/^(?!0\d).*$/,"Leading zero values are not allowed").required("Required"),type:a.Yj().required("Required"),gstNumber:a.Yj().matches(/^([0][1-9]|[1-2][0-9]|[3][0-7])([a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9a-zA-Z]{1}[zZ]{1}[0-9a-zA-Z]{1})+$/,"Please enter valid GST number").required("Required").nullable(),attachments:a.Yj().required("Required"),storePhoto:a.Yj().required("Required"),email:a.Yj().matches(/^[a-zA-Z0-9._]{1,}@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,"Enter valid email").required("Required").nullable(),mobileNumber:a.Yj().matches("^((\\+91)?|91)?[6789]\\d{9}$","Please enter valid mobile number").required("Required"),mobileNumberOptional:a.Yj().nullable().test("isValidOrEmpty","Please enter a valid mobile number",(function(e){return!e||/^((\+91)?|91)?[6789]\d{9}$/.test(e)})),other:a.Yj().required("Required"),nother:a.Yj().nullable().required("Required"),otherArray:a.YO().min(1,"Please select atleast one field"),areaLevel:a.YO().min(1,"Please select atleast one level."),formTitle:a.Yj().matches(/^[A-Za-z ]*$/,"Only A-Z letters allowed.").required("Required"),attributeTitle:a.Yj().required(" ").matches(/^[A-Z].*$/,"First letter must be capital"),dbColumn:a.Yj().matches(/^(?!.*__)[a-z_]{1,20}$/,"Only use small letters and underscore. (Max length 20)").required(""),required:a.Yj().required(" "),telephone:a.Yj().matches(/\b(?:\d{3}-\d{3}-\d{4}|\(\d{3}\) \d{3}-\d{4}|\d{10})\b/,"Enter valid telephone number").nullable(),address:a.Yj().required("Required"),registeredAddress:a.Yj().required("Required"),quantity:a.ai().typeError("Please enter valid quantity").required("Required"),billingQuantity:a.ai().typeError("Please enter valid billing quantity").required("Required"),trxnQuantity:a.ai().test(...l()).test(...o).typeError("Please enter valid quantity").required("Required"),maxQuantity:function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.ai().test(...r?l():n).test(...o).required("Required").typeError("Please enter a valid Quantity").max(e,`Maximum quantity allowed: ${e||0}.`)},country:a.Yj().required("Required"),state:a.Yj().required("Required"),city:a.Yj().required("Required"),registeredCountry:a.Yj().required("Required"),registeredState:a.Yj().required("Required"),registeredCity:a.Yj().required("Required"),organizationType:a.Yj().nullable().required("Required"),organizationCode:a.ai().typeError("Value must be a valid integer").required("Required").integer("Value must be an integer").max("2147483647","Value exceeds maximum allowed"),organizationStoreId:a.Yj().nullable().required("Required"),organizationLocationId:a.Yj().required("Required"),integrationId:a.Yj().required("Required"),firm:a.Yj().required("Required"),movementType:a.Yj().required("Required"),supplier:a.Yj().required("Required"),masterMaker:a.Yj().required("Required"),projectMasterMaker:a.Yj().required("Required"),lov:a.Yj().required("Required"),date:a.Yj().required("Required"),fromDate:a.Yj().required("Required"),toDate:a.Yj().when("fromDate",{is:e=>!!e,then:a.Yj().test("isGreaterThanFromDate","To Date cannot be less than From date",(function(e,r){return new Date(e).getTime()>=new Date(r.parent.fromDate).getTime()}))}),invoiceNumber:a.Yj().required("Required"),challanNumber:a.Yj().required("Required"),poNumber:a.Yj().required("Required"),workOrderNumber:a.Yj().required("Required"),receivingStore:a.Yj().required("Required"),uom:a.Yj().required("Required"),project:a.Yj().nullable().required("Required"),projectArr:a.YO().of(a.gl()).nullable().required("Required").min(1,"Required"),organizationArr:a.YO().of(a.gl()).nullable().required("Required").min(1,"Required"),accessProject:a.Yj().nullable().required("Required"),rate:a.Yj().matches(/^[0-9]\d{0,9}(\.\d{1,2})?%?$/,"Enter valid rate").required("Required"),tax:a.Yj().matches(/^[0-9]\d{0,9}(\.\d{1,2})?%?$/,"Enter valid tax").required("Required"),rangeFrom:a.Yj().required("Required"),rangeTo:a.Yj().required("Required"),requiredWithLabel:()=>a.Yj().nullable().required("Required"),requiredWithNonZero:e=>a.ai().required("Required").min(1,`${e} must be greater than zero`).typeError(`${e} must be a number`),endRange:e=>a.ai().required("Required").min(e,"End Range must be greater than start range").typeError("End Range must be a number"),value:a.ai().required("Required"),isSerialize:a.Yj().required("Please select a checkbox"),vehicleNumber:a.Yj().required("Required"),vehicleNumberOptional:a.Yj().nullable(),inventoryNameOptional:a.Yj().nullable().test("isValidOrEmpty","Please enter valid name",(function(e){return!e||/^[A-Za-z0-9\-_'\s(),./]+$/.test(e)})),aadharNumber:a.Yj().matches(/^\d{12}$/,"Please enter valid aadhar number"),panNumber:a.Yj().matches(/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,"Please enter valid PAN Number"),lrNumber:a.Yj().required("Required"),eWayBillNumber:a.Yj().required("Required"),eWayBillDate:a.Yj().required("Required"),actualReceiptDate:a.Yj().when("eWayBillDate",{is:e=>!!e,then:a.Yj().test("isGreaterThanEWayBillDate","Actual receipt date cannot be less than e-way bill date",(function(e,r){return new Date(e).getTime()>=new Date(r.parent.eWayBillDate).getTime()}))}).required("Required"),pincode:a.Yj().min(6,"Enter valid pincode").max(6,"Enter valid pincode").required("Required"),registeredPincode:a.Yj().min(6,"Enter valid pincode").max(6,"Enter valid pincode").required("Required"),projectSiteStore:a.Yj().nullable().required("Required"),placeOfTransfer:a.Yj().required("Required"),contractorStore:a.Yj().nullable().required("Required"),projectSiteStoreLocation:a.Yj().required("Required"),contractorStoreLocation:a.Yj().nullable().required("Required"),contractorEmployee:a.Yj().required("Required"),alphanumericWithAlphabetRequired:e=>a.Yj().matches(/^[^\s]*$/,`Enter Valid ${e}`).required("Required"),description:a.Yj().required("Required"),longDescription:a.Yj().required("Required"),hsnCode:a.Yj().min(6,"Enter valid HSN Code").max(8,"Enter valid HSN Code").required("Required"),isSerialNumber:a.Yj().required("Required"),store:a.Yj().nullable().required("Required"),accessStore:a.Yj().nullable().required("Required"),series:a.Yj().required("Required"),material:a.Yj().required("Required"),materialType:a.Yj().required("Required"),materialCode:a.Yj().required("Required").matches(/^\S+$/,"Should not contain any space").matches(/[0-9]/,"Should contain at least one number").matches(/^(?!0\d).*$/,"Leading zero values are not allowed"),organizationId:a.Yj().nullable().required("Required"),accessOrganizationId:a.Yj().nullable().required("Required"),company:a.Yj().required("Required"),contractor:a.Yj().nullable().required("Required"),contractorId:a.Yj().required("Required"),fromInstaller:a.Yj().nullable().required("Required"),toInstaller:a.Yj().nullable().required("Required"),fromStoreLocationId:a.Yj().nullable().required("Required"),toStoreLocationId:a.Yj().nullable().required("Required"),storeLocationId:a.Yj().nullable().required("Required"),installerStoreLocationId:a.Yj().nullable().required("Required"),accessStoreLocationId:a.Yj().nullable().required("Required"),fromStore:a.Yj().nullable().required("Required"),toStore:a.Yj().required("Required"),transporterName:a.Yj().required("Required"),customerSiteStoreId:a.Yj().nullable().required("Required"),toCustomerId:a.Yj().nullable().required("Required"),financialYear:a.Yj().required("Required"),user:a.Yj().required("Required"),accessUser:a.Yj().nullable().required("Required"),rightsFor:a.Yj().nullable().required("Required"),gaaLevelId:a.Yj().nullable().required("Required"),networkLevelId:a.Yj().nullable().required("Required"),server:a.Yj().required("Required"),port:a.Yj().required("Required"),encryption:a.Yj().required("Required"),requisitionNumber:a.Yj().nullable().required("Required"),password:a.Yj().required("Required"),transaction:a.Yj().nullable().required("Required"),serviceCenter:a.Yj().nullable().required("Required"),scrapLocation:a.Yj().nullable().required("Required"),effectiveFrom:a.Yj().required("Required"),effectiveTo:a.Yj().required("Required"),displayName:a.Yj().required("Required"),templateName:a.Yj().required("Required"),subject:a.Yj().required("Required"),from:a.Yj().required("Required"),to:a.YO().min(1,"Provide at least one Receiver Email"),supervisorNumber:a.Yj().required("Required"),attachmentsWhenIsAuthorized:a.Yj().nullable().when("authorizedUser",{is:e=>"true"===e||!0===e,then:a.Yj().nullable().required("Required")}),requestNumber:a.Yj().required("Required"),remarks:a.Yj().test("isLength","Length should not be more then 256 characters",(e=>!e||(null===e||void 0===e?void 0:e.length)<=256)).nullable(),bankName:a.Yj().matches(/^[A-Za-z ]*$/,"Please enter valid bank name").required("Required"),ifscCode:a.Yj().matches(/^[A-Z]{4}0[A-Z0-9]{6}$/,"Please enter a valid IFSC code").required("IFSC code is required"),accountNumber:a.Yj().matches(/^[0-9]{1,}$/,"Please enter a valid account number").required("Required"),endDate:()=>a.Yj().required("Required"),startDateRange:(e,r,t)=>a.Yj().required("Required").test("date-comparison",`${r} must be >= ${t}`,(function(r){return function(e,r){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=new Date(e),o=new Date(r);return t?a<=o:a>=o}(r,e,!1)})),endDateRange:(e,r,t,o,i,l)=>a.Yj().required("Required").test("date-comparison",`${t} must be <= ${o} and >= ${i}`,(function(t){return d(t,e,r,!l)})),endDateRangeMax:(e,r,t,o,i,l)=>a.Yj().required("Required").test("date-comparison",`${t} must be >= ${o} and >= ${i}`,(function(t){return d(t,e,r,!l)})),month:e=>a.ai().test(...l(e)).test(...i).typeError(`Please enter valid ${e}`).required("Required"),endMonthRange:(e,r,t)=>a.ai().test(...l(r)).test(...i).typeError(`Please enter valid ${r}`).required("Required").max(e,`${r} must be less than equal to ${t}`),checkQty:e=>a.ai().test(...l(e)).test(...o).typeError(`Please enter valid ${e}`).required("Required"),checkForInteger:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return r||r>=0?a.ai().nullable().transform(((e,r)=>/^\s*$/.test(r)?null:e)).integer(`${e} must be an integer`).required("Required").typeError(`${e} must be an integer`).min(1,`${e} must be greater than 0`).max(r,`Maximum quantity allowed: ${r||0}.`).required("Required"):a.ai().nullable().transform(((e,r)=>/^\s*$/.test(r)?null:e)).integer(`${e} must be an integer`).required("Required").typeError(`${e} must be an integer`).min(1,`${e} must be greater than 0`).required("Required")},priority:a.ai().typeError("Must be a number").integer("Must be an integer").min(0,"Must be a non-negative number").required("Required")}},89649:(e,r,t)=>{t.d(r,{A:()=>i});var a=t(9950),o=t(80415);function i(){const[e,r]=(0,a.useState)({pageIndex:o.j7.pageIndex,pageSize:o.j7.pageSize,forceUpdate:!0}),t=(0,a.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.pageIndex,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pageSize;r((e=>({pageIndex:t,pageSize:a,forceUpdate:!e.forceUpdate})))}),[e]),i=(0,a.useCallback)((()=>{r((e=>({pageIndex:o.j7.pageIndex,pageSize:o.j7.pageSize,forceUpdate:!e.forceUpdate})))}),[]);return{paginations:e,setPageIndex:e=>r((r=>({...r,pageIndex:e,forceUpdate:!r.forceUpdate}))),setPageSize:e=>r((r=>({pageIndex:o.j7.pageIndex,pageSize:e,forceUpdate:!r.forceUpdate}))),refreshPagination:i,setPaginationsFunctions:t}}},88848:(e,r,t)=>{t.d(r,{$:()=>i});var a=t(9950),o=t(27081);const i=()=>{const[e,r]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[t,i]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[l,n]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[d,s]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[u,c]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[m,v]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[q,g]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[p,b]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[j,f]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[h,S]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[y,R]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),Y=(0,o.d4)((e=>e.masterMakerLov||{})),x=(0,o.d4)((e=>e.masterMakerLovList||{})),w=(0,o.d4)((e=>e.lovsForMasterName||[])),A=(0,o.d4)((e=>e.lovsForMasterNameSecond||[])),D=(0,o.d4)((e=>e.lovsForMasterNameThird||[])),N=(0,o.d4)((e=>e.currency||[])),I=(0,o.d4)((e=>e.gstStatus||[])),L=(0,o.d4)((e=>e.paymentTerm||[])),E=(0,o.d4)((e=>e.incoterms||[])),k=(0,o.d4)((e=>e.title||[])),C=(0,o.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{r((e=>({...e,...Y})))}),[Y]),(0,a.useEffect)((()=>{i((e=>({...e,...x})))}),[x]),(0,a.useEffect)((()=>{n((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{s((e=>({...e,...A})))}),[A]),(0,a.useEffect)((()=>{c((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{v((e=>({...e,...N})))}),[N]),(0,a.useEffect)((()=>{g((e=>({...e,...I})))}),[I]),(0,a.useEffect)((()=>{b((e=>({...e,...L})))}),[L]),(0,a.useEffect)((()=>{f((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{S((e=>({...e,...k})))}),[k]),(0,a.useEffect)((()=>{R((e=>({...e,...C})))}),[C]),{masterMakerLovs:e,masterMakerLovsList:t,masterMakerOrgType:l,masterMakerOrgTypeSecond:d,masterMakerOrgTypeThird:u,masterMakerCurrency:m,masterMakerGstStatus:q,masterMakerIncoterms:j,masterMakerPaymentTerm:p,masterMakerLovHistory:y,masterMakerTitle:h}}},10748:(e,r,t)=>{t.d(r,{R:()=>i});var a=t(9950),o=t(27081);const i=()=>{const[e,r]=(0,a.useState)({materialObject:{},error:"",loading:!0}),[t,i]=(0,a.useState)({materialObject:{},error:"",loading:!0}),[l,n]=(0,a.useState)({materialDropdownObject:[],error:"",loading:!0}),[d,s]=(0,a.useState)({uomDropdownObject:[],error:"",loading:!0}),[u,c]=(0,a.useState)({materialTypeDropdownObject:[],error:"",loading:!0}),[m,v]=(0,a.useState)({materialHistoryObject:{},error:"",loading:!0}),q=(0,o.d4)((e=>e.material||{})),g=(0,o.d4)((e=>e.materialByIntegrationId||{})),p=(0,o.d4)((e=>e.materialDropdown||[])),b=(0,o.d4)((e=>e.uomDropdown||[])),j=(0,o.d4)((e=>e.materialTypeDropdown||[])),f=(0,o.d4)((e=>e.materialHistory||{}));return(0,a.useEffect)((()=>{r((e=>({...e,...q})))}),[q]),(0,a.useEffect)((()=>{i((e=>({...e,...g})))}),[g]),(0,a.useEffect)((()=>{n((e=>({...e,...p})))}),[p]),(0,a.useEffect)((()=>{s((e=>({...e,...b})))}),[b]),(0,a.useEffect)((()=>{c((e=>({...e,...j})))}),[j]),(0,a.useEffect)((()=>{v((e=>({...e,...f})))}),[f]),{material:e,materialDropdown:l,uomDropdown:d,materialTypeDropdown:u,materialContent:t,materialHistory:m}}},3147:(e,r,t)=>{t.d(r,{E:()=>i});var a=t(9950),o=t(27081);const i=()=>{const[e,r]=(0,a.useState)({organizationStoreObject:{},error:"",loading:!0}),[t,i]=(0,a.useState)({organizationStoreObject:{},error:"",loading:!0}),[l,n]=(0,a.useState)({organizationStoreObject:[],error:"",loading:!0}),[d,s]=(0,a.useState)({organizationStoreDropdownObject:{},error:"",loading:!0}),[u,c]=(0,a.useState)({organizationStoreDropdownSecondObject:{},error:"",loading:!0}),[m,v]=(0,a.useState)({orgStoreDropDownObject:{},error:"",loading:!0}),[q,g]=(0,a.useState)({orgViewStoreDropDownObject:{},error:"",loading:!0}),[p,b]=(0,a.useState)({organizationStoresHistoryObject:{},error:"",loading:!0}),j=(0,o.d4)((e=>e.organizationStores||{})),f=(0,o.d4)((e=>e.organizationStoresAllAccess||{})),h=(0,o.d4)((e=>e.organizationStoresSecond||[])),S=(0,o.d4)((e=>e.organizationStoreDropdown||[])),y=(0,o.d4)((e=>e.organizationStoreDropdownSecond||[])),R=(0,o.d4)((e=>e.orgStoreDropDown||[])),Y=(0,o.d4)((e=>e.orgViewStoreDropDown||[])),x=(0,o.d4)((e=>e.organizationStoresHistory||[]));return(0,a.useEffect)((()=>{r((e=>({...e,...j})))}),[j]),(0,a.useEffect)((()=>{i((e=>({...e,...f})))}),[f]),(0,a.useEffect)((()=>{n((e=>({...e,...h})))}),[h]),(0,a.useEffect)((()=>{s((e=>({...e,...S})))}),[S]),(0,a.useEffect)((()=>{c((e=>({...e,...y})))}),[y]),(0,a.useEffect)((()=>{v((e=>({...e,...R})))}),[R]),(0,a.useEffect)((()=>{g((e=>({...e,...Y})))}),[Y]),(0,a.useEffect)((()=>{b((e=>({...e,...x})))}),[x]),{organizationStores:e,organizationStoresSecond:l,organizationStoresDropdown:d,orgStoreDropDown:m,orgViewStoreDropDown:q,organizationStoresHistory:p,organizationStoresAllAccess:t,organizationStoresDropdownSecond:u}}},80733:(e,r,t)=>{t.d(r,{Y:()=>i});var a=t(9950),o=t(27081);const i=()=>{const[e,r]=(0,a.useState)({projectsObject:{},error:"",loading:!0}),[t,i]=(0,a.useState)({projectDetailsObject:{},error:"",loading:!0}),[l,n]=(0,a.useState)({projectsDropdownObject:[],error:"",loading:!0}),[d,s]=(0,a.useState)({projectsDropdownObject:[],error:"",loading:!0}),[u,c]=(0,a.useState)({projectsObject:[],error:"",loading:!0}),[m,v]=(0,a.useState)({projectsHistoryObject:{},error:"",loading:!0}),q=(0,o.d4)((e=>e.projects||{})),g=(0,o.d4)((e=>e.projectDetails||{})),p=(0,o.d4)((e=>e.projectsDropdown||[])),b=(0,o.d4)((e=>e.allProjectsDropdown||[])),j=(0,o.d4)((e=>e.projectsForRoleOrUser||[])),f=(0,o.d4)((e=>e.projectsHistory||{}));return(0,a.useEffect)((()=>{r((e=>({...e,...q})))}),[q]),(0,a.useEffect)((()=>{i((e=>({...e,...g})))}),[g]),(0,a.useEffect)((()=>{n((e=>({...e,...p})))}),[p]),(0,a.useEffect)((()=>{s((e=>({...e,...b})))}),[b]),(0,a.useEffect)((()=>{c((e=>({...e,...j})))}),[j]),(0,a.useEffect)((()=>{v((e=>({...e,...f})))}),[f]),{projects:e,projectsDropdown:l,allProjectsDropdown:d,projectsHistory:m,projectsGovernForRoleOrUser:u,projectDetails:t}}},38644:(e,r,t)=>{t.r(r),t.d(r,{default:()=>Z});var a=t(4139),o=t(67535),i=t(9950),l=t(9449),n=t(27081),d=t(60666),s=t(26473),u=t(28429),c=t(10748),m=t(80733),v=t(3147),q=t(88848);const g={stockHeaders:[{Header:"Store",accessor:"store.name"},{Header:"Material",accessor:"material.name"},{Header:"Material Code",accessor:"material.code"},{Header:"QTY",accessor:"quantity"},{Header:"UOM",accessor:"uom.name"},{Header:"Rate",accessor:"rate"},{Header:"Value",accessor:"value"}],stockExpandedHeaders:[{Header:"Store Location",accessor:"storeLocation.name"},{Header:"Material Name",accessor:"material.name"},{Header:"Material Code",accessor:"material.code"},{Header:"QTY",accessor:"quantity"},{Header:"UOM",accessor:"uom.name"},{Header:"Rate",accessor:"rate"},{Header:"Value",accessor:"value"}],installerHeaders:[{Header:"Installer",accessor:"installer.name"},{Header:"Material Name",accessor:"material.name"},{Header:"Material Code",accessor:"material.code"},{Header:"QTY",accessor:"quantity"},{Header:"UOM",accessor:"uom.name"},{Header:"Rate",accessor:"rate"},{Header:"Value",accessor:"value"}],viewHeaders:[{Header:"Movement Type",accessor:"transaction_type.name"},{Header:"Document No",accessor:"referenceDocumentNumber"},{Header:"Material Code",accessor:"material.code"},{Header:"Material Name",accessor:"material.name"},{Header:"Store Location",accessor:"organization_store_location.name"},{Header:"QTY",accessor:"quantity"},{Header:"UOM",accessor:"uom.name"},{Header:"Rate",accessor:"rate"},{Header:"Value",accessor:"value"},{Header:"Vendor Name",accessor:"vendorName"},{Header:"Vendor Code",accessor:"vendorCode"},{Header:"Store",accessor:"vendorStoreName"},{Header:"Request Number",accessor:"requestNumber"},{Header:"CreatedBy",accessor:"created.name"},{Header:"Date & Time",accessor:"createdAt"}],serialHeaders:[{Header:"SR No.",accessor:"nos"},{Header:"Serial Number",accessor:"serialNo"},{Header:"Status",accessor:"status",exportAccessor:"isActive"}]};var p=t(62605),b=t(94889),j=t(72906),f=t(57560),h=t(79843),S=t(397),y=t(24965),R=t(10371),Y=t(68605),x=t(22057),w=t(87233),A=t(65669),D=t(14351),N=t(90376),I=t(52867),L=t(88528),E=t(65313),k=t(89649),C=t(71826),z=t(99635),O=t(44414);const _=e=>{let{row:r,index:t,openCloseRow:a}=e;const[o,l]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{r&&r.open&&l(r.open)}),[r]),(0,O.jsx)(O.Fragment,{children:o?(0,O.jsx)(b.A,{onClick:()=>{l(!1),a(t,!1)}}):(0,O.jsx)(h.A,{onClick:()=>{l(!0),a(t,!0)}})})},T=e=>{let{level:r,cols:t,row:a,subCols:o,superSubCols:l,fetchSubData:n,modal:d,allValues:s,setAllTableData:u}=e;const[c,m]=(0,i.useState)([]);return t=2===r?l:1===r?o:t,(0,i.useEffect)((()=>{(async()=>{try{const e=await n(a,!!(a&&a.storeLocation&&a.storeLocation.name&&(a.storeLocation.name.toLowerCase().includes("installer")||a.storeLocation.name.toLowerCase().includes("old")||a.storeLocation.name.toLowerCase().includes("installed"))));m(e)}catch(e){m([])}})()}),[n,a]),(0,O.jsx)(H,{cols:t,data:c,level:r,subCols:o,allValues:s,superSubCols:l,setAllTableData:u,fetchSubData:n,modal:d})},H=e=>{let{data:r,cols:t,subCols:o,superSubCols:l,level:n,setAllTableData:d,modal:s,fetchSubData:u,allValues:c,headTitle:m}=e;const[v,q]=(0,i.useState)([]),[p,b]=(0,i.useState)(!1),[h,M]=(0,i.useState)([]),[$,P]=(0,i.useState)([]),[V,F]=(0,i.useState)(null),[U,Z]=(0,i.useState)(null),[Q,B]=(0,i.useState)(null),[G,W]=(0,i.useState)(!1),[J,K]=(0,i.useState)([]),[X,ee]=(0,i.useState)(""),[re,te]=(0,i.useState)(void 0),{paginations:{pageSize:ae,pageIndex:oe},setPageIndex:ie,setPageSize:le}=(0,k.A)();t=[{Header:" ",accessor:"btn"},...t];const ne={cursor:"pointer",fontSize:20};(0,i.useEffect)((()=>{q(r)}),[r]);const de=(0,i.useCallback)((async e=>{var r;const t=await(0,C.default)("/all-stock-details",{method:"GET",timeoutOverride:12e5,query:{projectId:c.projectId?c.projectId:c.project,storeId:c.storeId?c.storeId:c.store,...c.material&&{materialId:c.material},...e.materialId&&{materialId:e.materialId},...e.storeLocationId&&{storeLocationId:e.storeLocationId},...e.installerId&&{installerId:e.installerId},sort:["createdAt","DESC"]}});if(t.success)return null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.data}),[c]),se=async function(){var e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`Store: ${null===c||void 0===c||null===(e=c.storeDetails)||void 0===e?void 0:e.name}`,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=await de(r);o&&(K((e=>{let r=[];return e&&e.length>0&&e.map((e=>{let t={...e};if(e.other_store&&null!==e.other_store){var a,o,i,l,n,d,s;t.vendorStoreName=(null===(a=e.other_store)||void 0===a?void 0:a.name)+" - "+(null===(o=e.other_store)||void 0===o?void 0:o.code);let r=null===(i=e.other_store)||void 0===i?void 0:i.organization;var u,c;null!==(l=e.other_store)&&void 0!==l&&null!==(n=l.organization)&&void 0!==n&&n.parentId&&null!==(null===(d=e.other_store)||void 0===d||null===(s=d.organization)||void 0===s?void 0:s.parentId)&&(r=null===(u=e.other_store)||void 0===u||null===(c=u.organization)||void 0===c?void 0:c.parent),t.vendorName=r.name,t.vendorCode=r.code}else{let r=(e=>{var r,t,a,o,i,l,n,d;if("bec7c5ef-291f-4147-bb20-88bac5a2aec3"===e.transactionTypeId)return{vendorStoreName:"",vendorName:null===(n=e.organization)||void 0===n?void 0:n.name,vendorCode:null===(d=e.organization)||void 0===d?void 0:d.code};if("3bf4cfe9-0ba0-4ba5-bd66-bfae7eecfeaf"===e.transactionTypeId){var s,u;if(e.requestNumber&&null!==e.requestNumber){var c,m,v,q,g,p,b,j,f,h,S,y,R,Y;let r=null===e||void 0===e||null===(c=e.stock_ledger_detail)||void 0===c||null===(m=c.other_party_store)||void 0===m?void 0:m.organization;return null!==e&&void 0!==e&&null!==(v=e.stock_ledger_detail)&&void 0!==v&&null!==(q=v.other_party_store)&&void 0!==q&&q.parentId&&null!==(null===e||void 0===e||null===(g=e.stock_ledger_detail)||void 0===g||null===(p=g.other_party_store)||void 0===p?void 0:p.parentId)&&(r=null===e||void 0===e||null===(b=e.stock_ledger_detail)||void 0===b||null===(j=b.other_party_store)||void 0===j?void 0:j.parent),{vendorStoreName:(null===e||void 0===e||null===(f=e.stock_ledger_detail)||void 0===f||null===(h=f.other_party_store)||void 0===h?void 0:h.name)+" - "+(null===e||void 0===e||null===(S=e.stock_ledger_detail)||void 0===S||null===(y=S.other_party_store)||void 0===y?void 0:y.code),vendorName:null===(R=r)||void 0===R?void 0:R.name,vendorCode:null===(Y=r)||void 0===Y?void 0:Y.code}}return{vendorStoreName:"",vendorName:null===(s=e.organization)||void 0===s?void 0:s.name,vendorCode:null===(u=e.organization)||void 0===u?void 0:u.code}}if(["5b4e46d5-7bf5-4f42-8c4a-b6337533fdff","160269a8-612a-4827-a21b-166ed33dc773","3ac35029-c4d5-4013-819a-516c707c550f","22ce5829-2a1e-407c-88f6-5ebc38455519","8ae879e6-7b55-4040-8254-7f4420a6a1c1","a4ae48a0-fab0-4450-a369-57f34a20a68a"].includes(e.transactionTypeId))return{vendorStoreName:(null===(r=e.organization_store)||void 0===r?void 0:r.name)+" - "+(null===(t=e.organization_store)||void 0===t?void 0:t.code),vendorName:null===(a=e.organization)||void 0===a?void 0:a.name,vendorCode:null===(o=e.organization)||void 0===o?void 0:o.code};if(["ac909ed3-92c2-4cdf-b463-0e351c42cda2","fc1015da-7db4-4aa6-844d-92a5557f7941","34c8d448-5fbb-4a37-9dce-2d346a77ae97","fadec802-92aa-4127-8ba1-e3d9b6bd4936","c69c9f62-c3fc-4703-95d4-dd3a5227e010"].includes(e.transactionTypeId)&&null!==e&&void 0!==e&&null!==(i=e.stock_ledger_detail)&&void 0!==i&&i.other_party_store&&null!==(null===e||void 0===e||null===(l=e.stock_ledger_detail)||void 0===l?void 0:l.other_party_store)){var x,w,A,D,N,I,L,E,k,C,z,O,_,T;let r=null===e||void 0===e||null===(x=e.stock_ledger_detail)||void 0===x||null===(w=x.other_party_store)||void 0===w?void 0:w.organization;return null!==e&&void 0!==e&&null!==(A=e.stock_ledger_detail)&&void 0!==A&&null!==(D=A.other_party_store)&&void 0!==D&&D.parentId&&null!==(null===e||void 0===e||null===(N=e.stock_ledger_detail)||void 0===N||null===(I=N.other_party_store)||void 0===I?void 0:I.parentId)&&(r=null===e||void 0===e||null===(L=e.stock_ledger_detail)||void 0===L||null===(E=L.other_party_store)||void 0===E?void 0:E.parent),{vendorStoreName:(null===e||void 0===e||null===(k=e.stock_ledger_detail)||void 0===k||null===(C=k.other_party_store)||void 0===C?void 0:C.name)+" - "+(null===e||void 0===e||null===(z=e.stock_ledger_detail)||void 0===z||null===(O=z.other_party_store)||void 0===O?void 0:O.code),vendorName:null===(_=r)||void 0===_?void 0:_.name,vendorCode:null===(T=r)||void 0===T?void 0:T.code}}return{vendorStoreName:"",vendorName:"",vendorCode:""}})(e);t.vendorStoreName=null===r||void 0===r?void 0:r.vendorStoreName,t.vendorName=null===r||void 0===r?void 0:r.vendorName,t.vendorCode=null===r||void 0===r?void 0:r.vendorCode}r.push(t)})),r})(null===o||void 0===o?void 0:o.rows)),ee(t),W(a||!0))},ue=()=>{K([]),ee(" "),W(!1),te(void 0)},ce=(e,t)=>{var a,o,i;null!==t?se(r[t],`Store: ${null===c||void 0===c||null===(a=c.storeDetails)||void 0===a?void 0:a.name} > Material: ${null===(o=r[t])||void 0===o||null===(i=o.material)||void 0===i?void 0:i.name}`,e):se()},me=(e,r,t)=>{var a,o,i,l,n;r&&null!==t?se(r[t],`Store: ${null===c||void 0===c||null===(a=c.storeDetails)||void 0===a?void 0:a.name} > Store Location: ${null===(o=r[t])||void 0===o||null===(i=o.storeLocation)||void 0===i?void 0:i.name} > Material: ${null===(l=r[t])||void 0===l||null===(n=l.material)||void 0===n?void 0:n.name}`,e):se()},ve={fontSize:20},qe=()=>{b(!1),setTimeout((()=>{ie(1),le(25),Z(null),B(null),M([]),P([])}),200)},ge=(0,i.useCallback)(((e,r)=>{const t=[];e&&e.length>0&&e.map((e=>{!0===r?"1"===(null===e||void 0===e?void 0:e.status)&&t.push({nos:(oe*ae-ae+t.length+1).toString(),serialNo:null===e||void 0===e?void 0:e.serialNumber,status:"Active"}):t.push({nos:(oe*ae-ae+t.length+1).toString(),serialNo:null===e||void 0===e?void 0:e.serialNumber,status:"1"===(null===e||void 0===e?void 0:e.status)?"Active":"Inactive"})})),M(t)}),[oe,ae]),pe=(0,i.useCallback)((e=>{const r=[];e&&e.length>0&&e.map((e=>{r.push({nos:(oe*ae-ae+r.length+1).toString(),serialNo:null===e||void 0===e?void 0:e.serialNumber,status:"1"===(null===e||void 0===e?void 0:e.status)?"Active":"Inactive"})})),M(r)}),[oe,ae]),be=(0,i.useCallback)((e=>{const r={};e.map((e=>{var t,a,o;r[null===e||void 0===e||null===(t=e.stock_ledger_detail)||void 0===t?void 0:t.serialNumber]?r[null===e||void 0===e||null===(o=e.stock_ledger_detail)||void 0===o?void 0:o.serialNumber]+=e.quantity:r[null===e||void 0===e||null===(a=e.stock_ledger_detail)||void 0===a?void 0:a.serialNumber]=e.quantity}));const t=[];Object.keys(r).forEach((e=>{r[e]>0&&t.push([...Array(r[e]).fill(e)])}));const a=(0,I.Y6)(t.flat(1/0));F(a.length);let o=[];const i=(oe-1)*ae,l=Math.min(i+ae,a.length);P(a.map(((e,r)=>({nos:r+1,serialNo:null===e||void 0===e?void 0:e.serialNumber,status:"Inactive"})))),a.slice(i,l).map((e=>{o.push({nos:(oe*ae-ae+o.length+1).toString(),serialNo:e,status:"Inactive"})})),M(o)}),[oe,ae]),je=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const t=e=>{let t=r.find((r=>r.serialNumber===e));return t?null===t||void 0===t?void 0:t.status:"0"},a=[];return e&&e.length>0&&e.map((e=>{a.push({serialNumber:e,...r&&r.length>0&&{status:t(e)}})})),a},fe=(0,i.useCallback)(((e,r,t,a)=>{const o=e.length,i=r.length;let l=[];const n=(t-1)*a,d=Math.min(n+a,o);l=e.slice(n,d);const s=a-l.length;if(s>0&&d<o){const t=[...e.slice(d,o),...r];l=[...l,...t.slice(0,s)]}else if(s>0){const e=Math.max(0,n-o),t=Math.min(e+s,i);l=[...l,...r.slice(e,t)]}return{currentPageData:l}}),[]),he=(0,i.useCallback)(((e,r,t,a)=>{let o=Array(r).fill("");return o.splice((t-1)*a,e.length,...e),o}),[]),Se=(0,i.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const{rows:o}=await de(r[e]);let i=null===o||void 0===o?void 0:o.filter((e=>{var r;return null===e||void 0===e||null===(r=e.organization_store_location)||void 0===r?void 0:r.name.toLowerCase().includes("installed")}));if(v&&v[e]&&v[e].material&&v[e].material.isSerialNumber)if(a){const{rows:e}=await de(a);if(e){const r=[];e&&e.length>0&&e.map((e=>{r.push({stockLedgerId:e.id,transaction:e.quantity<0?"debit":"credit"})}));const t=await(0,C.default)("/installed-serial-number",{method:"POST",body:{transactionIdArr:r}});if(t.success){var l;b(!0);let e=(0,I.Y6)(null===t||void 0===t||null===(l=t.data)||void 0===l?void 0:l.serialNumber);const r=(oe-1)*ae,a=Math.min(r+ae,e.length);F(null===e||void 0===e?void 0:e.length),ge(je(e.slice(r,a)),!1),P(e.map(((e,r)=>({nos:r+1,serialNo:null===e||void 0===e?void 0:e.serialNumber,status:"1"===(null===e||void 0===e?void 0:e.status)?"Active":"Inactive"}))))}}}else if(v[e]&&v[e].materialId&&"84b473e1-62bb-4afe-af56-1691bdffbc55"===v[e].materialId)if(b(!0),s)F(1),ge([v[e].stock_ledger_detail],!1),P([v[e].stock_ledger_detail].map(((e,r)=>({nos:r+1,serialNo:null===e||void 0===e?void 0:e.serialNumber,status:"1"===(null===e||void 0===e?void 0:e.status)?"Active":"Inactive"}))));else{const{rows:r}=await de(v[e]);r&&be(r,!1,"stock_ledger_detail")}else{const r={projectId:c.projectId?c.projectId:c.project,storeId:c.storeId?c.storeId:c.store,materialId:v[e].materialId,...v[e].storeLocationId&&{storeLocationId:v[e].storeLocationId},...v[e].installerId&&{installerId:v[e].installerId},...v[e].stockLedgerDetailId&&{stockLedgerId:v[e].id},...t&&{status:t},sort:["serialNumber","ASC"]},a=await(0,C.default)("/serial-number-list",{method:"GET",query:r}),o=await(0,C.default)("/serial-number-list",{method:"GET",query:{...r,rowPerPage:ae,pageNumber:oe}});if(o.success){var d,u,m,q,g,p,j,f;let e=[];if(i&&i.length>0&&0===n){let r=[];i.map((e=>{r.push({stockLedgerId:e.id,transaction:e.quantity<0?"debit":"credit"})}));const t=await(0,C.default)("/installed-serial-number",{method:"POST",body:{transactionIdArr:r}});var h;if(t.success)b(!0),e=null===t||void 0===t||null===(h=t.data)||void 0===h?void 0:h.serialNumber}b(!0);let r=(null===o||void 0===o||null===(d=o.data)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.rows)||[],t=r.map((e=>e.serialNumber)),a=he((0,I.Y6)(t),null===o||void 0===o||null===(m=o.data)||void 0===m||null===(q=m.data)||void 0===q?void 0:q.count,oe,ae);const l=fe(a,(0,I.Y6)(e),oe,ae);var S;if(F((null===o||void 0===o||null===(g=o.data)||void 0===g||null===(p=g.data)||void 0===p?void 0:p.count)+(null===(j=e)||void 0===j?void 0:j.length)),e&&null!==(f=e)&&void 0!==f&&f.length&&0===n)pe(je(null===l||void 0===l||null===(S=l.currentPageData)||void 0===S?void 0:S.filter((e=>""!==e)),r));else ge(r,!1)}if(a.success){var y,R,Y;let e=[];if(i&&i.length>0&&0===n){let r=[];i.map((e=>{r.push({stockLedgerId:e.id,transaction:e.quantity<0?"debit":"credit"})}));const t=await(0,C.default)("/installed-serial-number",{method:"POST",body:{transactionIdArr:r}});var x;if(t.success)e=null===t||void 0===t||null===(x=t.data)||void 0===x?void 0:x.serialNumber}b(!0);let r=(null===a||void 0===a||null===(y=a.data)||void 0===y||null===(R=y.data)||void 0===R?void 0:R.rows)||[];const t=[...r.map((e=>e.serialNumber)).map((e=>"string"===typeof e?{serialNumber:e,status:"active"}:{...e,status:"1"===e.status?"active":"0"===e.status?"inActive":e.status})),...(0,I.Y6)(e).map((e=>({serialNumber:e,status:"inActive"})))];e&&null!==(Y=e)&&void 0!==Y&&Y.length&&0===n?P(t.map(((e,r)=>({nos:r+1,serialNo:null===e||void 0===e?void 0:e.serialNumber,status:null===e||void 0===e?void 0:e.status})))):P([...r.map((e=>"string"===typeof e?{serialNumber:e,status:"active"}:{...e,status:"1"===e.status?"active":"0"===e.status?"inActive":e.status}))].map(((e,r)=>({nos:r+1,serialNo:null===e||void 0===e?void 0:e.serialNumber,status:null===e||void 0===e?void 0:e.status}))))}}}),[ge,be,pe,oe,he,fe,c,ae,n,v,s,r,de]);(0,i.useEffect)((()=>{oe&&ae&&null!==U&&null!==Q&&Se(U,Q,re)}),[oe,ae,U,Q,Se,re]);const ye=s?{height:400,overflow:"auto",paddingRight:60,marginBottom:20}:{};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(D.A,{content:!1,smallTitle:!0,title:m,secondary:1!==n&&2!==n&&(0,O.jsx)(N.pK,{data:L.A.getData(r,t),filename:"expanding-sub-table.csv"}),children:(0,O.jsx)(E.A,{style:ye,children:(0,O.jsxs)(S.A,{children:[(0,O.jsx)(y.A,{style:{position:"sticky",top:-.1,zIndex:2},children:(0,O.jsxs)(R.A,{children:[t&&t.length>0&&t.map((e=>(0,O.jsx)(Y.A,{children:e.Header},e.Header))),0===n&&!s&&(0,O.jsx)(Y.A,{sx:{width:20},children:(0,O.jsx)(j.A,{style:ve,onClick:()=>ce(!0,null)})})]})}),(0,O.jsx)(x.A,{children:v&&v.length>0&&v.map(((e,r)=>(0,O.jsx)(R.A,{children:e.newRow?(0,O.jsx)(Y.A,{colSpan:t.length,children:(0,O.jsx)(T,{cols:t,subCols:o,superSubCols:l,level:n+1,fetchSubData:u,row:v[r-1],showDetails:ce,allValues:c,setAllTableData:d,showSubDetails:me})}):(0,O.jsxs)(O.Fragment,{children:[t&&t.length>0&&t.map((t=>{var a,o;return(0,O.jsx)(Y.A,{children:" "!==t.Header||s?"QTY"===t.Header&&null!==(a=e.material)&&void 0!==a&&a.isSerialNumber?(0,O.jsx)(w.A,{onClick:()=>{var t,a,o,i,l,n,d,u;Z(r),B(s||null!==e&&void 0!==e&&null!==(t=e.storeLocation)&&void 0!==t&&null!==(a=t.name)&&void 0!==a&&a.toLowerCase().includes("installed")?0:1),null!==e&&void 0!==e&&null!==(o=e.storeLocation)&&void 0!==o&&null!==(i=o.name)&&void 0!==i&&i.toLowerCase().includes("installed")?te(e):te(void 0),s?Se(r,0):Se(r,null!==e&&void 0!==e&&null!==(l=e.storeLocation)&&void 0!==l&&null!==(n=l.name)&&void 0!==n&&n.toLowerCase().includes("installed")?0:1,null!==e&&void 0!==e&&null!==(d=e.storeLocation)&&void 0!==d&&null!==(u=d.name)&&void 0!==u&&u.toLowerCase().includes("installed")?e:void 0)},color:"primary",sx:{cursor:"pointer"},children:(0,I.gU)(e,t.accessor)}):e[t.Header]=["Updated On","Created On","Submitted On"].includes(t.Header)||t.Header.includes("Date")?(0,I.YQ)((0,I.gU)(e,t.accessor)):"Rate"===t.Header||"Value"===t.Header?null===(o=(0,I.gU)(e,t.accessor))||void 0===o?void 0:o.toFixed(2):(0,I.gU)(e,t.accessor):(0,O.jsx)(O.Fragment,{children:!e.storeLocation||e.storeLocation&&e.storeLocation.name&&(e.storeLocation.name.toLowerCase().includes("installer")||e.storeLocation.name.toLowerCase().includes("old")||e.storeLocation.name.toLowerCase().includes("installed"))&&!e.installer?(0,O.jsx)(_,{row:e,index:r,openCloseRow:(e,r)=>{((e,r,t)=>{let a=structuredClone(v);a[e].open=r,r?a.splice(e+1,0,{newRow:!0,id:`newRow${e+1}`}):a.splice(e+1,1),q([...a]),0===t&&d([...a])})(e,r,n)}}):(0,O.jsx)(O.Fragment,{children:"\xa0\xa0"})})},e.id+t.Header)})),!s&&(0,O.jsx)(Y.A,{sx:{width:20},children:(0,O.jsx)(j.A,{style:ve,onClick:()=>{0===n?ce(!0,r):me(!0,v,r)}})})]})},e.id)))})]})})}),(0,O.jsx)(A.A,{open:G,onClose:ue,"aria-labelledby":"modal-modal-title",children:(0,O.jsxs)(D.A,{sx:{width:"95%"},modal:!0,darkTitle:!0,content:!1,children:[(0,O.jsx)(a.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mt:0},children:(0,O.jsx)(a.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",padding:"20px"},children:(0,O.jsx)(f.A,{onClick:ue,style:ne})})}),(0,O.jsx)("div",{children:(0,O.jsx)(H,{data:structuredClone(J),allValues:c,cols:g.viewHeaders,headTitle:X,modal:!0})})," "]})}),(0,O.jsx)(A.A,{open:p,onClose:qe,"aria-labelledby":"modal-modal-title",children:(0,O.jsxs)(D.A,{sx:{width:1020},modal:!0,darkTitle:!0,content:!1,children:[(0,O.jsx)(a.Ay,{container:!0,alignItems:"center",sx:{mt:-1,mb:-1},children:(0,O.jsx)(a.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",padding:"20px"},children:(0,O.jsx)(f.A,{onClick:qe,style:ne})})}),(0,O.jsx)(z.default,{data:h||[],allData:$||[],columns:g.serialHeaders,count:V,hideActions:!0,hideAddButton:!0,hideSearch:!0,hideColumnsSelect:!0,title:"Serial Numbers",setPageIndex:ie,setPageSize:le,pageIndex:oe,pageSize:ae})]})})]})},M=e=>{let{data:r,cols:t,subCols:a,superSubCols:o,setAllTableData:i,fetchSubData:l,allValues:n}=e;return(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(H,{cols:t,data:r,subCols:a,superSubCols:o,level:0,headTitle:" ",fetchSubData:l,setAllTableData:i,modal:!1,allValues:n})})};var $=t(96951),P=t(29024),V=t(8790),F=t(84601),U=t(94826);const Z=()=>{var e,r,t;const b=(0,n.wA)(),[j,f]=(0,i.useState)([]),[h,S]=(0,i.useState)([]),[y,R]=(0,i.useState)(!1),[Y,x]=(0,i.useState)(null),[w,A]=(0,i.useState)(null),[N,L]=(0,i.useState)(!1),{pathname:E}=(0,u.zy)();(0,i.useEffect)((()=>{f([])}),[E]);const k=(0,l.mN)({resolver:(0,s.t)(d.Ik().shape({project:F.A.project,storeType:F.A.requiredWithLabel("StoreType"),store:F.A.store})),defaultValues:{},mode:"all"}),{handleSubmit:z,setValue:_}=k;(0,i.useEffect)((()=>{b((0,P._G1)()),b((0,P.wgs)()),b((0,P.uiG)())}),[b]);const{masterMakerLovs:T}=(0,q.$)(),H=(e,r)=>{const t=e&&e.filter((e=>e.name===r));return t&&t.length?t[0].id:null},Z=T.masterMakerLovsObject.rows;(0,i.useEffect)((()=>{b((0,P.qV$)({organizationType:H(Z,"COMPANY")})),b((0,P.QEJ)({organizationType:H(Z,"CONTRACTOR")}))}),[b,Z]);const{stockLedgerMaterialList:Q}=(0,p.t)(),{projectsDropdown:B}=(0,m.Y)(),{organizationStores:G,organizationStoresSecond:W}=(0,v.E)(),{material:J}=(0,c.R)(),K=(e,r,t,a,o)=>(0,O.jsx)($.eu,{name:e,...a&&{onChange:a},label:r,InputLabelProps:{shrink:!0},menus:t||[],...o&&{required:!0}}),X=(null===B||void 0===B?void 0:B.projectsDropdownObject)||[],ee=(null===(e=W.organizationStoreObject)||void 0===e?void 0:e.rows)||[],re=(null===(r=G.organizationStoreObject)||void 0===r?void 0:r.rows)||[],te=null===J||void 0===J||null===(t=J.materialObject)||void 0===t?void 0:t.rows,{trxnData:ae,isLoading:oe}=(0,i.useMemo)((()=>({trxnData:(null===Q||void 0===Q?void 0:Q.stocksObject)||[],isLoading:Q.loading||!1})),[Q]);(0,i.useEffect)((()=>{oe||(L(oe),f(ae))}),[ae,oe]);const ie=g.stockHeaders,le=e=>{"project"===e?(_("storeType",null),_("store",null),_("material",null)):"storeType"===e?(_("store",null),_("material",null)):"store"===e&&_("material",null)},ne=e=>e.map((e=>(e.quantity=0===e.quantity?"0":e.quantity,e)));return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)($.Op,{methods:k,onSubmit:z((async e=>{var r;L(!0),f([]),e.storeDetails=w,e&&e.material&&(e.material=(r=e.material,(te&&te.filter((e=>e.id===r)))[0].id)),x(e),b((0,V.fy)(e)),R(!0)})),children:[(0,O.jsxs)(D.A,{title:"Stock Ledger",children:[(0,O.jsxs)(a.Ay,{container:!0,spacing:4,children:[(0,O.jsx)(a.Ay,{item:!0,xs:3,children:K("project","Project",X,(()=>{le("project")}),!0)}),(0,O.jsx)(a.Ay,{item:!0,xs:3,children:K("storeType","Organization Type",[{id:"Company",name:"Company"},{id:"Contractor",name:"Contractor"}],(e=>{var r;if(null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.value){var t;le("storeType");let r=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value;S("Company"===r?re:"Contractor"===r?ee:[])}}),!0)}),(0,O.jsx)(a.Ay,{item:!0,xs:3,children:K("store","Store",h,(e=>{var r;A(null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.row),le("store")}),!0)}),(0,O.jsx)(a.Ay,{item:!0,xs:3,children:K("material","Material",(0,I.HF)(te),(()=>{}),!1)})]}),(0,O.jsx)(a.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mt:2},children:(0,O.jsx)(a.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px"},children:(0,O.jsx)(o.A,{size:"small",type:"submit",variant:"contained",color:"primary",children:"Proceed"})})})]}),N&&(0,O.jsx)(U.A,{}),y&&(0,O.jsx)(D.A,{children:(0,O.jsx)(M,{data:(e=>{const r=e&&e.length>0?JSON.parse(JSON.stringify(e)):[];return r.map((e=>{e.quantity=0===e.quantity?"0":e.quantity})),r})(j),cols:ie,subCols:g.stockExpandedHeaders,superSubCols:g.installerHeaders,fetchSubData:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(async e=>{var r;const t=await(0,C.default)("/stock-ledger-installer-list",{method:"GET",timeoutOverride:12e5,query:{projectId:null===Y||void 0===Y?void 0:Y.project,storeId:null===Y||void 0===Y?void 0:Y.store,storeLocationId:null===e||void 0===e||null===(r=e.storeLocation)||void 0===r?void 0:r.id,materialId:e.materialId,sort:["createdAt","DESC"]}});var a;if(t.success)return ne(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.installerStock)})(e):(async e=>{const r=await(0,C.default)("/stock-ledger-location-list",{method:"GET",timeoutOverride:12e5,query:{projectId:null===Y||void 0===Y?void 0:Y.project,storeId:null===Y||void 0===Y?void 0:Y.store,materialId:e.materialId,sort:["createdAt","DESC"]}});var t;if(r.success)return ne(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.allStoreLocationTransactionData)})(e)},allValues:Y,setAllTableData:e=>f(e)})})]})})}},62605:(e,r,t)=>{t.d(r,{t:()=>i});var a=t(9950),o=t(27081);const i=()=>{const[e,r]=(0,a.useState)({stocksObject:{},error:"",loading:!0}),[t,i]=(0,a.useState)({transactionObject:{},error:"",loading:!1}),[l,n]=(0,a.useState)({transactionObject:{},error:"",loading:!0}),[d,s]=(0,a.useState)({transactionObject:{},error:"",loading:!0}),[u,c]=(0,a.useState)({transactionObject:{},error:"",loading:!0}),[m,v]=(0,a.useState)({data:{},error:"",loading:!0}),[q,g]=(0,a.useState)({data:{},error:"",loading:!0}),[p,b]=(0,a.useState)({data:{},error:"",loading:!0}),[j,f]=(0,a.useState)({stoDataObject:{},error:"",loading:!0}),[h,S]=(0,a.useState)({refDataObject:{},error:"",loading:!0}),[y,R]=(0,a.useState)({refDataSecondObject:{},error:"",loading:!0}),[Y,x]=(0,a.useState)({refDataThirdObject:{},error:"",loading:!0}),[w,A]=(0,a.useState)({stockLedgerDetailListObject:{},error:"",loading:!0}),[D,N]=(0,a.useState)({storeLocationsTransactionObject:{},error:"",loading:!0}),[I,L]=(0,a.useState)({allStoreLocationsStock:[],error:"",loading:!0}),[E,k]=(0,a.useState)({transactionObject:{},error:"",loading:!1}),[C,z]=(0,a.useState)({transactionObject:{},error:"",loading:!1}),[O,_]=(0,a.useState)({storeLocationsTransactionObject:{},error:"",loading:!0}),[T,H]=(0,a.useState)({storeLocationsTransactionObject:{},error:"",loading:!0}),[M,$]=(0,a.useState)({transactionObject:{},error:"",loading:!1}),P=(0,o.d4)((e=>e.stocks||{})),V=(0,o.d4)((e=>e.transactions||{})),F=(0,o.d4)((e=>e.transactionsSecond||{})),U=(0,o.d4)((e=>e.transactionsQty||{})),Z=(0,o.d4)((e=>e.transactionsSecondQty||{})),Q=(0,o.d4)((e=>e.serialNumbers||{})),B=(0,o.d4)((e=>e.serialNumbersSecond||{})),G=(0,o.d4)((e=>e.allSerialNumbers||{})),W=(0,o.d4)((e=>e.stoData||{})),J=(0,o.d4)((e=>e.refData||{})),K=(0,o.d4)((e=>e.refDataSecond||{})),X=(0,o.d4)((e=>e.refDataThird||{})),ee=(0,o.d4)((e=>e.stockLedgerDetailList||{})),re=(0,o.d4)((e=>e.storeLocationsTransactions||{})),te=(0,o.d4)((e=>e.storeLocationsStock||[])),ae=(0,o.d4)((e=>e.transactionMaterialList||{})),oe=(0,o.d4)((e=>e.txnByMaterial||{})),ie=(0,o.d4)((e=>e.txnByLocationMaterial||{})),le=(0,o.d4)((e=>e.storeStockReport||{})),ne=(0,o.d4)((e=>e.stockLedgerMaterialList||{}));return(0,a.useEffect)((()=>{r((e=>({...e,...P})))}),[P]),(0,a.useEffect)((()=>{i((e=>({...e,...V})))}),[V]),(0,a.useEffect)((()=>{n((e=>({...e,...F})))}),[F]),(0,a.useEffect)((()=>{s((e=>({...e,...U})))}),[U]),(0,a.useEffect)((()=>{c((e=>({...e,...Z})))}),[Z]),(0,a.useEffect)((()=>{v((e=>({...e,...Q})))}),[Q]),(0,a.useEffect)((()=>{g((e=>({...e,...B})))}),[B]),(0,a.useEffect)((()=>{b((e=>({...e,...G})))}),[G]),(0,a.useEffect)((()=>{f((e=>({...e,...W})))}),[W]),(0,a.useEffect)((()=>{S((e=>({...e,...J})))}),[J]),(0,a.useEffect)((()=>{R((e=>({...e,...K})))}),[K]),(0,a.useEffect)((()=>{x((e=>({...e,...X})))}),[X]),(0,a.useEffect)((()=>{A((e=>({...e,...ee})))}),[ee]),(0,a.useEffect)((()=>{N((e=>({...e,...re})))}),[re]),(0,a.useEffect)((()=>{L((e=>({...e,...te})))}),[te]),(0,a.useEffect)((()=>{k((e=>({...e,...ae})))}),[ae]),(0,a.useEffect)((()=>{z((e=>({...e,...oe})))}),[oe]),(0,a.useEffect)((()=>{_((e=>({...e,...ie})))}),[ie]),(0,a.useEffect)((()=>{H((e=>({...e,...le})))}),[le]),(0,a.useEffect)((()=>{$((e=>({...e,...ne})))}),[ne]),{stocks:e,transaction:t,serialNumbers:m,serialNumbersSecond:q,allSerialNumbers:p,stoData:j,refData:h,stockLedgerDetailList:w,storeLocationsTransaction:D,transactionsSecond:l,refDataSecond:y,refDataThird:Y,transactionQty:d,transactionSecondQty:u,storeLocationsStock:I,transactionMaterialList:E,txnByMaterial:C,txnByLocationMaterial:O,storeStockReport:T,stockLedgerMaterialList:M}}},13239:(e,r,t)=>{t.d(r,{A:()=>d});var a=t(89379),o=t(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var l=t(14840),n=function(e,r){return o.createElement(l.A,(0,a.A)((0,a.A)({},e),{},{ref:r,icon:i}))};const d=o.forwardRef(n)},26592:(e,r,t)=>{var a=t(24994);r.A=void 0;var o=a(t(79526)),i=t(44414);r.A=(0,o.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},36089:(e,r,t)=>{var a=t(24994);r.A=void 0;var o=a(t(79526)),i=t(44414);r.A=(0,o.default)((0,i.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined")}}]);