"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[5796,2480],{42480:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var i=l(43858),n=l(72179),r=l(12257),o=l(67535),a=l(95537),s=l(14341),d=l(9950),c=l(9449),u=l(62054),p=l(44414);const h=e=>{var t=e[0].name||e[0].fileName;return t=t.length>10?`${t.slice(0,7)}...${t.slice(-9)}`:t,1===e.length?t:`${t} (+${e.length-1} other)`},v={display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid #1677FF",color:"#1677FF",borderRadius:5,padding:"5px 10px",width:123,cursor:"pointer"},m={margin:"auto 0 auto 10px",cursor:"pointer",color:"rgb(51, 126, 232)"},x={width:"100%","& .MuiFormHelperText-root":{marginLeft:"1px",marginTop:"7px",marginBottom:"10px"},"& .MuiInputBase-root":{display:"none"}},g=e=>{let{label:t,name:l,accept:g,value:f,setValue:j,multiple:A=!1,required:y=!1,...k}=e;const{control:b}=(0,c.xW)(),[w,C]=(0,d.useState)(null);(0,d.useEffect)((()=>{f&&C(f)}),[f]);const F=()=>{C(null),j(l,"")},D=(e,t)=>{const i=t.target.files;C(i);const n=Object.values(i).map((e=>new Promise(((t,l)=>{const i=new FileReader;i.onloadend=()=>t({action:"create",fileName:e.name,fileData:i.result}),i.onerror=l,i.readAsDataURL(e)}))));return Promise.all(n).then((e=>{j(`${l}-paths`,e)})).catch((e=>{F(),(0,u.A)(e.message||"Something wrong happend while picking the file(s)",{variant:"error"})})),e(t)};return b?(0,p.jsx)(c.xI,{name:l,control:b,render:e=>{let{field:{onChange:o,...d},fieldState:{error:c}}=e;return(0,p.jsx)(r.A,{spacing:1,mt:1,children:(0,p.jsxs)(a.A,{children:[(0,p.jsxs)(a.A,{display:"flex",children:[(0,p.jsx)("label",{htmlFor:`${l}-file`,children:(0,p.jsxs)("div",{style:v,children:[(0,p.jsx)(i.A,{}),"\xa0",t,y&&" *"]})}),w&&w.length>0&&(0,p.jsx)(n.A,{onClick:F,style:m})]}),(0,p.jsx)(s.A,{...d,id:`${l}-file`,name:l,helperText:(null===c||void 0===c?void 0:c.message)||w&&w.length>0&&h(w),error:!!c,sx:x,onChange:D.bind(void 0,o),inputProps:{multiple:A,accept:g},type:"file",...k})]})})}}):(0,p.jsx)(r.A,{spacing:1,children:y?(0,p.jsxs)(o.A,{size:"small",variant:"outlined",htmlFor:"files",color:"primary",required:!0,children:[(0,p.jsx)(i.A,{}),"\xa0",t]}):(0,p.jsx)(o.A,{size:"small",variant:"outlined",htmlFor:"files",color:"primary",children:t})})}},95796:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var i=l(9950),n=l(67535),r=l(87233),o=l(86898),a=l(43858),s=l(62054),d=l(42480),c=l(53065),u=l(10158),p=l(2871),h=l(37223),v=l(88694),m=l(93951),x=l(44414);const g=e=>{let{onDownload:t,onDelete:l,onUndo:i,flaggedForDeletion:n,update:r}=e;return(0,x.jsx)(o.A,{children:n?(0,x.jsx)(c.A,{title:"Undo Delete",placement:"top",children:(0,x.jsx)(v.A,{onClick:i,children:(0,x.jsx)(m.A,{children:(0,x.jsx)(p.A,{})})})}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.A,{title:"Download",placement:"top",children:(0,x.jsx)(v.A,{onClick:t,children:(0,x.jsx)(m.A,{children:(0,x.jsx)(h.A,{})})})}),r&&(0,x.jsx)(c.A,{title:"Delete",placement:"top",children:(0,x.jsx)(v.A,{onClick:l,children:(0,x.jsx)(m.A,{children:(0,x.jsx)(u.A,{})})})})]})})};var f=l(52867);const j=e=>{const t=e.replace(/([A-Z])/g," $1");return t.charAt(0).toUpperCase()+t.slice(1)},A=(0,i.lazy)((()=>Promise.all([l.e(3650),l.e(2043),l.e(7477),l.e(9635)]).then(l.bind(l,99635)))),y=(0,i.lazy)((()=>Promise.resolve().then(l.bind(l,22852)))),k=["png","jpeg","jpg","webp","gif","avif","tiff","svg"],b={display:"flex",alignItems:"center",justifyContent:"center",overflow:"scroll"},w={border:"1px solid #1677FF",color:"#1677FF",backgroundColor:"transparent",borderRadius:"5px",padding:"5px 10px",width:125,height:"28px",cursor:"pointer"},C={borderRadius:"10px",width:"85%",height:"80%",backgroundColor:"white",paddingBottom:"3rem",overflow:"scroll"},F={position:"absolute",justifySelf:"end",marginY:"1rem"},D={marginRight:"5px"},S=e=>e.replace("-paths",""),L=[{Header:"Actions",accessor:"actions"},{Header:"File Name",accessor:"fileName"},{Header:"Preview",accessor:"preview"}],M=e=>{let{data:t,tasks:l,setTasks:c,update:u,view:p,setValue:h,fileFields:v}=e;const m=(e=>e?Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return t.includes("-paths")}))):{})((0,f.x5)(t,v)),[M,P]=(0,i.useState)(null),R=()=>{if(p)return void P(null);const{multiple:e,required:t}=M,i=((e,t)=>{var l;if(!e)return 0;const i=t.filter((t=>"delete"===t.action&&t.key===(null===e||void 0===e?void 0:e.key))).length,n=t.filter((t=>"create"===t.action&&t.key===(null===e||void 0===e?void 0:e.key))).length;return((null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.length)||0)+n-i})(M,l);var n;!e&&i>1?(0,s.A)(`Multple ${null===M||void 0===M?void 0:M.title.toLowerCase()} not allowed. Delete the existing or current.`,{variant:"error"}):t&&0===i?(0,s.A)(`Must have at least one ${null===M||void 0===M||null===(n=M.title)||void 0===n?void 0:n.toLowerCase()}`,{variant:"error"}):P(null)},U=(0,i.useCallback)((e=>{c((t=>[...t,{key:null===M||void 0===M?void 0:M.key,action:"delete",filePath:e}]))}),[null===M||void 0===M?void 0:M.key,c]),$=(0,i.useCallback)((e=>l.filter((t=>"object"===typeof t&&t.key===(null===M||void 0===M?void 0:M.key)&&t.filePath===e&&"delete"===t.action)).map((e=>e.filePath)).includes(e)),[null===M||void 0===M?void 0:M.key,l]),z=(0,i.useCallback)((e=>{c(l.filter((t=>!(t.filePath==e&&t.key===(null===M||void 0===M?void 0:M.key)&&"delete"===t.action))))}),[null===M||void 0===M?void 0:M.key,c,l]),O=(0,i.useMemo)((()=>{var e;return null===M||void 0===M||null===(e=M.data)||void 0===e?void 0:e.map((e=>{const t=`/api/v1/files/${e}`,l=e.split("/").pop();return{filePath:e,actions:(0,x.jsx)(g,{flaggedForDeletion:$(e),onDownload:()=>(e=>{let{fileUrl:t,fileName:l}=e;fetch(t,{method:"GET",headers:{"Content-Disposition":"attachment"}}).then((e=>e.blob())).then((e=>{const t=window.URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.setAttribute("download",l),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t)})).catch((e=>{(0,s.A)(e.message||"Something wrong happened while downloading the file",{variant:"error"})}))})({fileUrl:t,fileName:l}),onDelete:()=>U(e),onUndo:()=>z(e),update:u}),fileName:l,preview:(i=e.split(".").pop(),k.includes(i.toLowerCase())?(0,x.jsx)("img",{width:"400px",height:"auto",alt:e,src:t}):"N/A")};var i}))}),[$,U,z,null===M||void 0===M?void 0:M.data,u]);return t?(0,x.jsxs)(x.Fragment,{children:[Object.entries(m).map((e=>{let[t,l]=e;return(0,x.jsxs)(n.A,{disableRipple:!0,sx:w,variant:"outlined",onClick:()=>{const[{required:e,multiple:i,accept:n,label:r}]=v.filter((e=>e.name===S(t)));P({key:t,required:e,multiple:i,accept:n,title:r,data:l})},children:[(0,x.jsx)(a.A,{style:D}),j(S(t))]},t)})),(0,x.jsx)(i.Suspense,{fallback:(0,x.jsx)(x.Fragment,{}),children:M&&(0,x.jsx)(y,{open:!0,sx:b,children:(0,x.jsx)(o.A,{style:C,children:(0,x.jsx)(o.A,{marginTop:"5rem",display:"grid",children:(0,x.jsxs)(o.A,{width:"80%",height:"100%",margin:"auto",display:"grid",children:[(0,x.jsx)(r.A,{gutterBottom:!0,variant:"h3",children:M.title}),(0,x.jsx)(i.Suspense,{fallback:(0,x.jsx)(x.Fragment,{}),children:(0,x.jsx)(A,{hideActions:!0,hideHeader:!0,hidePagination:!0,columns:L,data:O||[],count:(null===O||void 0===O?void 0:O.length)||0})}),(0,x.jsxs)(o.A,{position:"relative",display:"grid",children:[u&&(0,x.jsx)(o.A,{marginY:"1rem",justifySelf:"start",children:(0,x.jsx)(d.default,{name:S(M.key),label:"Add More",accept:null===M||void 0===M?void 0:M.accept,multiple:null===M||void 0===M?void 0:M.multiple,value:l.filter((e=>"create"===e.action&&e.key===(null===M||void 0===M?void 0:M.key))),setValue:(e,t)=>{var i=l.filter((e=>!("create"===e.action&&e.key===(null===M||void 0===M?void 0:M.key))));t&&(i=[...i,...t.map((e=>({...e,key:M.key})))]),c(i),h(S(M.key),"")}})}),p?(0,x.jsx)(n.A,{sx:F,type:"button",variant:"outlined",onClick:R,children:"Close"}):(0,x.jsx)(n.A,{sx:F,type:"button",variant:"contained",onClick:R,children:"Submit"})]})]})})})})})]}):(0,x.jsx)(x.Fragment,{})}},93951:(e,t,l)=>{l.d(t,{A:()=>r});const{IconButton:i,styled:n}=l(505),r=n(i)((e=>{let{theme:t}=e;return{padding:t.spacing(.5),"& .MuiSvgIcon-root":{fontSize:"20px",color:"#3c3c3c"},"&:disabled .MuiSvgIcon-root":{color:"gray"},"&:hover":{backgroundColor:"#E6F4FF"}}}))},88694:(e,t,l)=>{l.d(t,{A:()=>r});var i=l(59254),n=l(67535);const r=(0,i.Ay)(n.A)((e=>{let{margin:t}=e;return{background:"none",border:"none",padding:"3px",margin:t||"-3px",minWidth:"1px","&:hover":{backgroundColor:"#E6F4FF"}}}))},43858:(e,t,l)=>{l.d(t,{A:()=>s});var i=l(89379),n=l(9950);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};var o=l(14840),a=function(e,t){return n.createElement(o.A,(0,i.A)((0,i.A)({},e),{},{ref:t,icon:r}))};const s=n.forwardRef(a)},72179:(e,t,l)=>{var i=l(24994);t.A=void 0;var n=i(l(79526)),r=l(44414);t.A=(0,n.default)((0,r.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined")},10158:(e,t,l)=>{var i=l(24994);t.A=void 0;var n=i(l(79526)),r=l(44414);t.A=(0,n.default)((0,r.jsx)("path",{d:"M16 9v10H8V9zm-1.5-6h-5l-1 1H5v2h14V4h-3.5zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2z"}),"DeleteOutlined")},2871:(e,t,l)=>{var i=l(24994);t.A=void 0;var n=i(l(79526)),r=l(44414);t.A=(0,n.default)((0,r.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"UndoOutlined")}}]);