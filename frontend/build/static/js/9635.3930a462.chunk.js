"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[9635],{65313:(e,t,o)=>{o.d(t,{A:()=>l});const l=(0,o(59254).Ay)("div")({width:"100%",overflowX:"auto",display:"block"})},97969:(e,t,o)=>{o.d(t,{m:()=>r});var l=o(62345),i=o(59254);const n={padding:"10px",fontSize:"22px",marginRight:"7px",animation:"rotate 4s linear infinite","@keyframes rotate":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}},r=(0,i.Ay)(l.A)((e=>{let{theme:t,color:o}=e;return{...n,color:o||t.palette.text.primary}}))},90376:(e,t,o)=>{o.d(t,{ON:()=>ie,Qq:()=>Z,ab:()=>te,ak:()=>le,e6:()=>Y,i$:()=>ne,nB:()=>oe,pK:()=>J,xN:()=>Q});var l=o(80415),i=o(9950),n=o(59254),r=o(14857),a=o(4139),s=o(12257),d=o(87233),c=o(72145),u=o(40736),p=o(27987),h=o(14341),m=o(98279),v=o(10371),x=o(68605),g=o(2660),y=o(51496),A=o(95537),f=o(83563),j=o(53065),b=o(96583),C=o(40033),w=o(79329),k=o(67535),S=o(71849),F=o(89187),I=o(20699),O=o(46411),T=o(89135),D=o(65325),N=o(13239),R=o(98114),M=o(51598),L=o(40841),P=o(9313),B=o(16259),E=o(99882),H=o(52228),U=o(9449),z=o(71826),W=o(62054),V=o(97969),G=o(52867),$=o(50869),q=o(94826),_=o(96951),K=o(44414);const Q=e=>{let{count:t,setPageIndex:o,setPageSize:l,pageSize:n,pageIndex:r,disabled:v,customCount:x,countLoader:g}=e;const[y,A]=(0,i.useState)(!1),f=(e,t)=>{o(t)},j=Math.ceil(t/n),b=(r-1)*n,C=Math.min(b+n-1,t-1);return(0,K.jsxs)(a.Ay,{container:!0,spacing:1,children:[(0,K.jsx)(a.Ay,{item:!0,xs:12,sm:5,lg:4,children:(0,K.jsx)(s.A,{direction:"row",spacing:1,alignItems:"center",children:(0,K.jsxs)(s.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,K.jsx)(d.A,{variant:"h6",color:"secondary",children:"Row per page"}),(0,K.jsx)(c.A,{children:(0,K.jsxs)(u.A,{id:"demo-controlled-open-select",open:y,onClose:()=>{A(!1)},onOpen:()=>{A(!0)},value:n,onChange:e=>{l(+e.target.value)},size:"small",sx:{"& .MuiSelect-select":{py:.75,px:1.25}},disabled:v,children:[(0,K.jsx)(p.A,{value:25,children:"25"}),(0,K.jsx)(p.A,{value:50,children:"50"}),(0,K.jsx)(p.A,{value:100,children:"100"}),(0,K.jsx)(p.A,{value:250,children:"250"}),(0,K.jsx)(p.A,{value:500,children:"500"})]})}),(0,K.jsx)(d.A,{variant:"h6",color:"secondary",children:"Go to"}),(0,K.jsx)(h.A,{size:"small",type:"number",inputProps:{min:1,max:j},value:r,onChange:e=>{const t=e.target.value;t>j||t<1?e.preventDefault():o(+e.target.value)},sx:{"& .MuiOutlinedInput-input":{py:.75,px:1.25,width:36}},disabled:v})]})})}),(0,K.jsx)(a.Ay,{item:!0,xs:12,sm:7,lg:8,children:(0,K.jsx)(a.Ay,{container:!0,spacing:1,sx:{width:"auto",float:"right"},children:x?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(a.Ay,{item:!0,children:(0,K.jsx)(d.A,{variant:"h6",color:"secondary",mt:.5,children:g?"Fetching counts ...":`Total Records: ${t}`})}),(0,K.jsx)(a.Ay,{item:!0,sx:{"& .MuiPaginationItem-root":{display:"none"},"& .MuiPaginationItem-firstLast, .MuiPaginationItem-previousNext, .Mui-selected":{display:"flex"}},children:(0,K.jsx)(m.A,{count:j,page:r,onChange:f,color:"primary",variant:"combined",showFirstButton:!0,showLastButton:!0,disabled:v,boundaryCount:0,siblingCount:0})})]}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(a.Ay,{item:!0,children:(0,K.jsxs)(d.A,{variant:"h6",color:"secondary",mt:.5,children:["Showing ",b+1,"-",C+1," out of ",t," records"]})}),(0,K.jsx)(a.Ay,{item:!0,children:(0,K.jsx)(m.A,{count:j,page:r,onChange:f,color:"primary",variant:"combined",showFirstButton:!0,showLastButton:!0,disabled:v})})]})})})]})},Y=((0,n.Ay)("div")((e=>{let{theme:t,x:o,y:l}=e;return{color:t.palette.text.secondary,position:"fixed",pointerEvents:"none",left:12,top:24,transform:`translate(${o}px, ${l}px)`,opacity:.6}})),e=>{let{index:t,moveRow:o,children:l}=e;const n=(0,i.useRef)(null),r=(0,i.useRef)(null),[,a]=(0,T.H)({accept:"row",hover(e,l){if(!n.current)return;const i=e.index,r=t;if(i===r)return;const a=n.current.getBoundingClientRect(),s=(a.bottom-a.top)/2,d=l.getClientOffset().y-a.top;i<r&&d<s||i>r&&d>s||(o(i,r),e.index=r)}}),[{isDragging:s},d,c]=(0,D.i)({type:"row",item:{index:t},collect:e=>({isDragging:e.isDragging()})}),u=s?0:1;return c(a(n)),d(r),(0,K.jsxs)(v.A,{ref:n,style:{opacity:u,backgroundColor:s?"red":"inherit"},children:[(0,K.jsx)(x.A,{ref:r,sx:{cursor:"pointer",textAlign:"left"},children:(0,K.jsx)(E.A,{style:{color:"grey"}})}),l]})}),X={PaperProps:{style:{maxHeight:224,width:200}}},Z=e=>{let{hiddenColumns:t,setHiddenColumns:o,allColumns:l}=e;const i=(0,r.A)();let n=l.filter((e=>!t.includes(e.id))).length;return(0,K.jsx)(c.A,{sx:{width:170},children:(0,K.jsx)(u.A,{id:"column-hiding",multiple:!0,displayEmpty:!0,value:t,onChange:e=>{const{target:{value:t}}=e;("string"===typeof t?t.split(","):t).length!==l.length?o("string"===typeof t?t.split(","):t):(0,W.A)("Cannot deselect all columns",{variant:"warning"})},input:(0,K.jsx)(g.A,{id:"select-column-hiding",placeholder:"select column"}),renderValue:e=>0===e.length?(0,K.jsx)(d.A,{children:"All column visible"}):e.length>0&&e.length===l.length?(0,K.jsx)(d.A,{children:"No column visible"}):(0,K.jsxs)(d.A,{children:[n," column visible"]}),sx:{height:"35px"},MenuProps:X,children:l.map((e=>{let o="#"===e.id||!(t.indexOf(e.id)>-1);return(0,K.jsxs)(p.A,{value:e.id,sx:{height:"35px","&.Mui-selected ":{bgcolor:"background.paper"},"&.Mui-selected:hover ":{bgcolor:"background.paper"}},children:[(0,K.jsx)(y.A,{checked:o,color:"primary",checkedIcon:(0,K.jsx)(A.A,{className:"icon",sx:{width:13,height:13,border:"1px solid",borderColor:"inherit",borderRadius:.25,position:"relative",backgroundColor:i.palette.primary.main},children:(0,K.jsx)(N.A,{className:"filled",style:{position:"absolute",color:i.palette.common.white}})})}),(0,K.jsx)(f.A,{primary:"string"===typeof e.Header?e.Header:null===e||void 0===e?void 0:e.title})]},e.id)}))})})},J=e=>{let{data:t,filename:o,headers:l,disabled:i,forRejected:n=!1}=e;const r=(0,K.jsx)(R.A,{style:{fontSize:"21px",color:i?"rgb(210, 210, 210)":n?"white":"grey",cursor:i?"not-allowed":"pointer",padding:"5px"}});return i?(0,K.jsx)(j.A,{title:"No data available to export",children:r}):(0,K.jsx)(O.CSVLink,{data:t,filename:o,headers:l,children:(0,K.jsx)(j.A,{title:"CSV Export",children:r})})},ee=(0,n.Ay)(s.A)((e=>{let{theme:t}=e;return{height:"400px","& .ant-empty-img-1":{fill:"light"===t.palette.mode?t.palette.secondary[400]:t.palette.secondary[200]},"& .ant-empty-img-2":{fill:(t.palette.mode,t.palette.secondary.light)},"& .ant-empty-img-3":{fill:"light"===t.palette.mode?t.palette.secondary[200]:t.palette.secondary.A200},"& .ant-empty-img-4":{fill:"light"===t.palette.mode?t.palette.secondary.A100:t.palette.secondary.A300},"& .ant-empty-img-5":{fillOpacity:"light"===t.palette.mode?"0.95":"0.09",fill:"light"===t.palette.mode?t.palette.secondary.light:t.palette.secondary.darker}}})),te=e=>{let{msg:t,colSpan:o}=e;return(0,K.jsx)(v.A,{children:(0,K.jsx)(x.A,{colSpan:o,children:(0,K.jsxs)(ee,{alignItems:"center",justifyContent:"center",spacing:1,children:[(0,K.jsx)("svg",{width:"120",height:"100",viewBox:"0 0 184 152","aria-hidden":!0,focusable:"false",children:(0,K.jsxs)("g",{fill:"none",fillRule:"evenodd",children:[(0,K.jsxs)("g",{transform:"translate(24 31.67)",children:[(0,K.jsx)("ellipse",{className:"ant-empty-img-5",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),(0,K.jsx)("path",{className:"ant-empty-img-1",d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z"}),(0,K.jsx)("path",{className:"ant-empty-img-2",d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z"}),(0,K.jsx)("path",{className:"ant-empty-img-3",d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z"})]}),(0,K.jsx)("path",{className:"ant-empty-img-3",d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z"}),(0,K.jsxs)("g",{className:"ant-empty-img-4",transform:"translate(149.65 15.383)",children:[(0,K.jsx)("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),(0,K.jsx)("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"})]})]})}),(0,K.jsx)(d.A,{align:"center",color:"secondary",children:t})]})})})},oe=e=>{let{columns:t,hiddenColumns:o,searchStringTrimmed:n,disabled:r,isFcMode:a,exportConfig:s,fileNameForExport:d,sort:c,defaultSort:u}=e;const[p,h]=(0,i.useState)(!1);return(0,K.jsx)(j.A,{title:r?"No data available to export":"Export",children:p?(0,K.jsx)(V.m,{color:"gray",className:"rotate"}):(0,K.jsx)(R.A,{onClick:r?()=>{}:async()=>{const e=(e=>{const l=(0,G.gs)(t,o,!0);return 0===l.length?((0,W.A)("No columns are visible",{variant:"warning"}),null):{tableName:e,requiredObject:Object.fromEntries(l.map((e=>{const t=e.Header;return[e.exportAccessor?e.exportAccessor:e.accessor,t]})))}})(s.tableName);if(!e)return;h(!0);const i=Object.keys(e.requiredObject).filter((e=>!["createdAt","updatedAt"].includes(e))),r=await(0,z.default)(s.apiRoute||"/export-excel",{method:"POST",body:s.apiBody?{...a&&{searchString:n,accessors:i},...s.apiBody}:{...e},query:{...s.apiQuery,...n&&{searchString:n,accessors:JSON.stringify(i)},sort:[(null===c||void 0===c?void 0:c[0])||(null===u||void 0===u?void 0:u[0])||l.j7.sortBy,(null===c||void 0===c?void 0:c[1])||(null===u||void 0===u?void 0:u[1])||l.j7.sortOrder]},params:s.apiParams,timeoutOverride:12e5,responseType:"blob"});if(null===r||void 0===r||!r.success)return(0,W.A)("Something wrong happend while processing your request",{variant:"error"}),void h(!1);const p=URL.createObjectURL(r.data),m=document.createElement("a");m.href=p,m.setAttribute("download",d),document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p),h(!1)},style:{fontSize:"21px",color:r?"rgb(210, 210, 210)":"grey",cursor:r?"not-allowed":"pointer",padding:"5px"}})})},le=(0,i.memo)((e=>{let{column:t,columns:o,sort:l,defaultSort:n,setSort:a,enableOfflineSort:s,isFcMode:d,isHistory:c,listType:u}=e;const p=(0,r.A)(),h="function"===typeof a,m=t.id,v=!!t.filterProps,x=(0,i.useCallback)(((e,i)=>{if(!h)return;const r=o.find((t=>t.Header===e));if(!r)return;let s=null;if(s=d?t.Header:r.exportAccessor||r.accessor,i)a("NONE"===i?n||null:"ASC"===i?[s,"ASC",t.id,r.type]:[s,"DESC",t.id,r.type]);else{let e="ASC";if(Array.isArray(l)&&l[0]===s&&"ASC"===l[1])e="DESC";else if(Array.isArray(l)&&l[0]===s&&"DESC"===l[1])return void a(n||null);a([s,e,t.id,r.type])}}),[t.Header,t.id,o,n,d,a,h,l]);return(0,K.jsxs)(K.Fragment,{children:["Actions"!==t.Header&&!c&&(v||!t.disableSortBy&&(h||s))&&(0,K.jsx)($.X,{column:t,shouldUseApiSort:h,handleChangeSort:x,enableOfflineSort:s,sort:l,listType:u,currentAccessor:m,theme:p,filterProps:null===t||void 0===t?void 0:t.filterProps}),(0,K.jsx)(A.A,{sx:{width:"max-content"},children:t.render("Header")})]})})),ie=e=>{let{importConfig:t,isResponse:o,isMasterForm:l,tableName:n,forTraxns:r=!1,apipath:a="",forQA:c=!1,forDep:u=!1,importCompeted:p}=e;const[m,v]=(0,i.useState)(!1),[x,g]=(0,i.useState)(!1),[y,f]=i.useState(!1),[O,T]=(0,i.useState)(null),D=!!t,{apiBody:N}=t||{},R=()=>{setTimeout((()=>{!1!==y&&f(!1),O&&T(null)}),500),v(!1),g(!1)};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(j.A,{title:"Import",children:(0,K.jsx)(M.A,{onClick:()=>o?l?g(!0):(0,W.A)("Import is available for Masters form only.",{variant:"warning"}):g(!0),style:{fontSize:"21px",color:"grey",padding:"5px"}})}),(0,K.jsxs)(b.A,{open:x,onClose:R,fullWidth:!0,maxWidth:"sm",children:[(0,K.jsx)(C.A,{children:(0,K.jsx)(d.A,{gutterBottom:!0,variant:"h3",children:"Import Data"})}),(0,K.jsxs)(w.A,{children:[m&&(0,K.jsx)(q.A,{}),(0,K.jsxs)(s.A,{spacing:3,children:[(0,K.jsxs)(A.A,{children:[(0,K.jsx)(d.A,{variant:"h5",sx:{marginBottom:2},children:"Download Template"}),(0,K.jsx)(k.A,{onClick:async()=>{const e=await(0,z.default)(c?"/qa-master-maker-lov-schema-export":u?"/export-daily-execution-plan-schema":r?"/export-transaction-schema":"/import-excel-export-schema-file",{timeoutOverride:12e5,method:"POST",body:D||u||c?N:r?{transactionName:n}:{tableName:n},responseType:"blob"});var t;if(e.success){const t=e.headers.get("Content-Disposition");let o="file.xlsx";if(t){const e=/filename="?(.+)"?/.exec(t);null!=e&&e[1]&&(o=e[1])}const l=URL.createObjectURL(e.data),i=document.createElement("a");i.href=l,i.setAttribute("download",o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)}else(0,W.A)((null===e||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)||"Something went wrong",{variant:"error"})},fullWidth:!0,variant:"contained",color:"primary",startIcon:(0,K.jsx)(L.A,{style:{fontSize:"20px"}}),children:"Download"})]}),(0,K.jsxs)(A.A,{children:[(0,K.jsx)(d.A,{variant:"h5",sx:{marginBottom:1},children:"Upload File"}),(0,K.jsx)(h.A,{type:"file",InputProps:{inputProps:{accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}},onChange:e=>{T(e.target.files[0])},fullWidth:!0})]}),(0,K.jsx)(k.A,{variant:"contained",color:"primary",onClick:async()=>{var e,o,l,i,s,d,h,m,x,g;if(!O)return void(0,W.A)("No file selected. Please choose a file to import.",{variant:"warning"});const y=new FormData;var A,f,j,b,C,w,k,S,F;(y.append("excelFile",O),D)?"gaa_level_entries"===(null===t||void 0===t||null===(A=t.apiBody)||void 0===A?void 0:A.tableName)||"urban_level_entries"===(null===t||void 0===t||null===(f=t.apiBody)||void 0===f?void 0:f.tableName)?(y.append("levelId",null===N||void 0===N?void 0:N.levelId),y.append("tableName",null===N||void 0===N?void 0:N.tableName)):y.append("formId",null===N||void 0===N?void 0:N.formId):y.append("tableName",n);c&&y.append("masterId",null===t||void 0===t||null===(j=t.apiBody)||void 0===j?void 0:j.masterId);u&&(y.append("projectId",null===t||void 0===t||null===(b=t.apiBody)||void 0===b?void 0:b.projectId),y.append("materialTypeId",null===t||void 0===t||null===(C=t.apiBody)||void 0===C?void 0:C.materialTypeId));null!==t&&void 0!==t&&null!==(e=t.apiBody)&&void 0!==e&&e.projectMasterMakerLov&&(y.append("projectId",null===t||void 0===t||null===(w=t.apiBody)||void 0===w||null===(k=w.projectMasterMakerLov)||void 0===k?void 0:k.projectId),y.append("masterId",null===t||void 0===t||null===(S=t.apiBody)||void 0===S||null===(F=S.projectMasterMakerLov)||void 0===F?void 0:F.masterId));v(!0);const I=await(0,z.default)(null!==t&&void 0!==t&&null!==(o=t.apiBody)&&void 0!==o&&o.projectMasterMakerLov?"/import-project-master-lov":u?"/import-daily-execution-plan":c?"/qa-master-maker-lov-import":r?a:D&&"gaa_level_entries"===(null===t||void 0===t||null===(l=t.apiBody)||void 0===l?void 0:l.tableName)?"/import-excel-import-static-master-schema-file":D&&"urban_level_entries"===(null===t||void 0===t||null===(i=t.apiBody)||void 0===i?void 0:i.tableName)?"/import-excel-import-static-master-schema-file-data":"/import-excel-import-schema-file",{method:"POST",timeoutOverride:72e6,body:y,...(r||u||c||(null===t||void 0===t||null===(s=t.apiBody)||void 0===s?void 0:s.projectMasterMakerLov))&&{responseType:"blob"}});var T;if(null===I||void 0===I||!I.success)return(0,W.A)(u?" Daily Execution Plan Import Failed.":c?"QA Master Maker LOV Import Failed.":r?"Transaction Import Failed.":(null===I||void 0===I||null===(T=I.error)||void 0===T?void 0:T.message)||"Something went wrong during import",{variant:"error"}),void v(!1);if(r||u||c||null!==t&&void 0!==t&&null!==(d=t.apiBody)&&void 0!==d&&d.projectMasterMakerLov){const e=I.headers.get("Content-Disposition");if(e){let t="file.xlsx";const o=/filename="?(.+)"?/.exec(e);null!=o&&o[1]&&(t=o[1]);const l=URL.createObjectURL(I.data),i=document.createElement("a");i.href=l,i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l)}(u||c)&&p(),v(!1)}else if(null!==I&&void 0!==I&&null!==(h=I.data)&&void 0!==h&&h.rejectedFiles&&""!==(null===I||void 0===I||null===(m=I.data)||void 0===m?void 0:m.rejectedFiles)){const{rejectedFiles:e}=I.data,t=await(0,z.default)("/download-rejected-records",{method:"GET",params:e});if(t.success){var M;const{data:e}=t,o=new Blob([e],{type:"text/csv"}),l=window.URL.createObjectURL(o),i=document.createElement("a");i.setAttribute("href",l),i.setAttribute("download",null===I||void 0===I||null===(M=I.data)||void 0===M?void 0:M.rejectedFiles),document.body.appendChild(i),i.click(),document.body.removeChild(i)}}(0,W.A)(D&&null!==I&&void 0!==I&&null!==(x=I.data)&&void 0!==x&&x.message?null===I||void 0===I||null===(g=I.data)||void 0===g?void 0:g.message:"Rows were imported successfully!",{variant:"success"}),R()},fullWidth:!0,startIcon:(0,K.jsx)(P.A,{style:{fontSize:"20px"}}),children:"Import"}),(0,K.jsxs)(S.A,{defaultExpanded:!0,onChange:(B="panel1",(e,t)=>{f(!!t&&B)}),children:[(0,K.jsx)(F.A,{expandIcon:(0,K.jsx)(H.A,{}),children:(0,K.jsx)(d.A,{children:"Instructions"})}),(0,K.jsx)(I.A,{children:(0,K.jsxs)("ul",{children:[(0,K.jsx)("li",{children:"Prepare data correctly as per template to avoid any rejection."}),(0,K.jsx)("li",{children:"Leave the ID column empty when creating a new record. This is for update existing record only."}),(0,K.jsx)("li",{children:"Refer to the reference sheet for dropdown columns and paste the respective UUIDs carefully."}),(0,K.jsx)("li",{children:"Use curly brackets for array-type attributes (e.g. dropdowns, checkboxes, images)."}),(0,K.jsxs)("li",{children:["Ensure Date/Time follows this format: YYYY-MM-DDTHH:MM:SS.sssZ (UTC time)",(0,K.jsx)("br",{}),"e.g. 2024-01-31T11:59:59.000Z, For reference, UTC is IST minus 5:30 hours."]})]})})]})]})]})]})]});var B},ne=e=>{let{importConfig:t,formAttributesArray:o}=e;const[l,n]=(0,i.useState)(!1),[r,a]=(0,i.useState)(!1),[c,u]=i.useState(!1),[p,m]=(0,i.useState)(null),{apiBody:v}=t||{},x=(0,U.mN)(),{handleSubmit:g}=x,y=()=>{setTimeout((()=>{!1!==c&&u(!1),p&&m(null)}),500),n(!1),a(!1)};return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(j.A,{title:"Update",children:(0,K.jsx)(B.A,{onClick:null!==o&&void 0!==o&&o.length?()=>a(!0):()=>{},style:{fontSize:"32px",color:null!==o&&void 0!==o&&o.length?"grey":"rgb(210, 210, 210)",...null!==o&&void 0!==o&&o.length?{cursor:"pointer"}:{cursor:"not-allowed"},padding:"5px"}})}),(0,K.jsxs)(b.A,{open:r,onClose:y,fullWidth:!0,maxWidth:"sm",children:[(0,K.jsx)(C.A,{children:(0,K.jsx)(d.A,{gutterBottom:!0,variant:"h3",children:"Update Data"})}),(0,K.jsxs)(w.A,{children:[l&&(0,K.jsx)(q.A,{}),(0,K.jsxs)(s.A,{spacing:3,children:[(0,K.jsx)(A.A,{children:(0,K.jsxs)(_.Op,{methods:x,onSubmit:g((async e=>{var t;if(null===e||void 0===e||null===(t=e.selectedColumns)||void 0===t||!t.length)return void(0,W.A)("No column selected. Please select atleast one column to update.",{variant:"warning"});const o=await(0,z.default)("/import-excel-export-schema-file",{timeoutOverride:12e5,method:"POST",body:{...v,selectedColumns:null===e||void 0===e?void 0:e.selectedColumns},responseType:"blob"});var l;if(o.success){const e=o.headers.get("Content-Disposition");let t="file.xlsx";if(e){const o=/filename="?(.+)"?/.exec(e);null!=o&&o[1]&&(t=o[1])}const l=URL.createObjectURL(o.data),i=document.createElement("a");i.href=l,i.setAttribute("download",t),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(l),x.reset()}else(0,W.A)((null===o||void 0===o||null===(l=o.error)||void 0===l?void 0:l.message)||"Something went wrong",{variant:"error"})})),children:[(0,K.jsx)(d.A,{variant:"h5",sx:{marginBottom:1},children:"Generate Template"}),(0,K.jsx)(_.Yq,{name:"selectedColumns",onChange:()=>{},menus:o,placeholder:"Select Columns"}),(0,K.jsx)(k.A,{sx:{marginTop:3},type:"submit",fullWidth:!0,variant:"contained",color:"primary",startIcon:(0,K.jsx)(L.A,{style:{fontSize:"20px"}}),children:"Download"})]})}),(0,K.jsxs)(A.A,{children:[(0,K.jsx)(d.A,{variant:"h5",sx:{marginBottom:1},children:"Upload File"}),(0,K.jsx)(h.A,{type:"file",InputProps:{inputProps:{accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}},onChange:e=>{m(e.target.files[0])},fullWidth:!0})]}),(0,K.jsx)(k.A,{variant:"contained",color:"primary",onClick:async()=>{var e,t,o;if(!p)return void(0,W.A)("No file selected. Please choose a file to import.",{variant:"warning"});const l=new FormData;l.append("excelFile",p),l.append("formId",null===v||void 0===v?void 0:v.formId),n(!0);const i=await(0,z.default)("/import-excel-update-bulk-responses",{method:"POST",timeoutOverride:72e6,body:l});var r;if(null===i||void 0===i||!i.success)return(0,W.A)((null===i||void 0===i||null===(r=i.error)||void 0===r?void 0:r.message)||"Something went wrong during update",{variant:"error"}),void n(!1);if(null!==i&&void 0!==i&&null!==(e=i.data)&&void 0!==e&&e.rejectedFiles&&""!==(null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.rejectedFiles)){const{rejectedFiles:e}=i.data,t=await(0,z.default)("/download-rejected-records",{method:"GET",params:e});if(t.success){var a;const{data:e}=t,o=new Blob([e],{type:"text/csv"}),l=window.URL.createObjectURL(o),n=document.createElement("a");n.setAttribute("href",l),n.setAttribute("download",null===i||void 0===i||null===(a=i.data)||void 0===a?void 0:a.rejectedFiles),document.body.appendChild(n),n.click(),document.body.removeChild(n)}}(0,W.A)((null===i||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Rows were updated successfully!",{variant:"success"}),y()},fullWidth:!0,startIcon:(0,K.jsx)(P.A,{style:{fontSize:"20px"}}),children:"Update"}),(0,K.jsxs)(S.A,{defaultExpanded:!0,onChange:(f="panel1",(e,t)=>{u(!!t&&f)}),children:[(0,K.jsx)(F.A,{expandIcon:(0,K.jsx)(H.A,{}),children:(0,K.jsx)(d.A,{children:"Instructions"})}),(0,K.jsx)(I.A,{children:(0,K.jsx)("ul",{children:(0,K.jsx)("li",{children:"This feature is for update existing records. Instructions will be available soon."})})})]})]})]})]})]});var f}},65920:(e,t,o)=>{o.d(t,{A:()=>i});var l=o(9950);const i=e=>{const t=(0,l.useRef)(e);return(0,l.useEffect)((()=>{t.current=e})),t.current}},99635:(e,t,o)=>{o.r(t),o.d(t,{TableSkeleton:()=>$,default:()=>K});var l=o(9950),i=o(59254),n=o(53065),r=o(10371),a=o(68605),s=o(16125),d=o(12257),c=o(4139),u=o(87233),p=o(40736),h=o(27987),m=o(397),v=o(24965),x=o(51496),g=o(22057),y=o(67535),A=o(36089),f=o(26592),j=o(54554),b=o(37150),C=o(75433),w=o(50287),k=o(49985),S=o(67775),F=o(53777),I=o(2043),O=o(98114),T=o(8750),D=o(86263),N=o(90376),R=o(14351),M=o(65313),L=o(50869),P=o(52867),B=o(88528),E=o(30423),H=o(65920),U=o(62054),z=o(33507),W=o(44414);const V=e=>{let{onClick:t,disabled:o}=e;return(0,W.jsx)(n.A,{title:o?"No data available to export":"PDF Export",children:(0,W.jsx)(O.A,{onClick:o?()=>{}:t,style:{fontSize:"25px",color:o?"rgb(210, 210, 210)":"grey",...o&&{cursor:"auto"},padding:"5px"}})})},G=e=>{let{clearAllFilters:t,setSort:o,defaultSort:l}=e;return(0,W.jsx)(n.A,{title:"Reset Sort and Filter",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",onClick:()=>{"function"===typeof t&&t(),"function"===typeof o&&o(l||null)},children:(0,W.jsx)(S.A,{})})})},$=e=>{let{columns:t,hideActions:o}=e;return(0,W.jsx)(W.Fragment,{children:Array.from({length:14}).map(((e,i)=>{var n;return(0,W.jsx)(r.A,{children:null===(n=Array.from({length:t.length}))||void 0===n?void 0:n.map(((e,t)=>(0,W.jsxs)(l.Fragment,{children:[!o&&0===t&&(0,W.jsx)(a.A,{children:(0,W.jsx)(s.A,{})}),(0,W.jsx)(a.A,{children:(0,W.jsx)(s.A,{})})]},t)))},i)}))})},q=(0,i.Ay)("div")((()=>({".header":{position:"sticky",zIndex:1,width:"fit-content"},"& th[data-sticky-td]":{position:"sticky",zIndex:"5 !important"}})));function _(e){var t,o,i,s,S,O,_,K;let{title:Q,columns:Y,data:X,normalDate:Z,hideTopBorder:J,hideAddButton:ee,miniAction:te,fcAction:oe,formAttributesArray:le,selectIcon:ie,isMasterForm:ne,hideEditIcon:re,hideDeleteIcon:ae,showLockIcon:se,hideRestoreIcon:de,hideActions:ce,hideHeader:ue,hideExportButton:pe,hideSearch:he,hideType:me,hideLockType:ve,hideColumnsSelect:xe,disableDeleteIcon:ge,listType:ye,setListType:Ae,lockType:fe,setLockType:je,count:be,onClick:Ce,handleRowDelete:we,handleRowRestore:ke,handleRowUpdate:Se,handleRowHistory:Fe,handleRowView:Ie,handleLockToggle:Oe,hidePagination:Te,setPageIndex:De,setPageSize:Ne,pageIndex:Re,pageSize:Me,showBackButton:Le,subHeader:Pe,source:Be,showCheckbox:Ee,showColumnsCheckbox:He,accessTableOnly:Ue,selectedRecord:ze,setSelectedRecords:We,setSelectedColumns:Ve,hideViewIcon:Ge,hideImportButton:$e,hideUpdateButton:qe,hideHistoryIcon:_e,hideEmptyTable:Ke,enableOfflineSort:Qe,exportPDFOnly:Ye,exportToPdf:Xe,searchConfig:Ze,searchOnClick:Je,sortConfig:et,exportConfig:tt,devolutionExport:ot,importConfig:lt,importDep:it,importQA:nt,hideTitle:rt,importCompeted:at,oldColumns:st,forColumnAccess:dt,isFcMode:ct,isHistory:ut,loadingCondition:pt,cleanupTrigger:ht,allData:mt,LoggedInUserhierarchyType:vt,customCount:xt,countLoader:gt,componentFrom:yt}=e;const[At,ft]=(0,l.useState)([]),[jt,bt]=(0,l.useState)([]),[Ct,wt]=(0,l.useState)(!1),{isCurrentlyFiltering:kt,clearAllFilters:St}=(0,E.bZ)(),Ft=(0,l.useMemo)((()=>L.sB),[]),It=(0,l.useMemo)((()=>({disableFilters:!0,Filter:L.ev})),[]),{getTableProps:Ot,getTableBodyProps:Tt,headerGroups:Dt,rows:Nt,prepareRow:Rt,allColumns:Mt,setHiddenColumns:Lt,state:{globalFilter:Pt,hiddenColumns:Bt},preGlobalFilteredRows:Et,setGlobalFilter:Ht}=(0,I.useTable)({columns:Y,data:X,defaultColumn:It,filterTypes:Ft},I.useFilters,I.useGlobalFilter,I.useSortBy),Ut=(0,l.useMemo)((()=>function(e,t){return"string"===typeof e&&e.trim().length>0?`${e.toLowerCase().replaceAll(" ","-")}.csv`:null!==t&&void 0!==t&&t.fileName?`${t.fileName}.csv`:"csv-export.csv"}(Q,tt)),[Q,tt]),{sort:zt,setSort:Wt,defaultSort:Vt}=et||{},{searchString:Gt,setSearchString:$t,setAccessors:qt,searchStringTrimmed:_t}=Ze||{},Kt=(0,l.useMemo)((()=>!(null===tt||void 0===tt||!tt.tableName)),[tt]),Qt=!(null===zt||void 0===zt||!zt[2]),Yt="function"===typeof $t,Xt=(0,H.A)(ht),Zt=(0,l.useCallback)((e=>{let t=[];t=-1===At.indexOf(e.id)?[...At,e.id]:At.filter((t=>t!==e.id)),ft(t),We(t),t.length===Nt.length?wt(!0):0===t.length&&wt(!1)}),[Nt.length,At,We]),Jt=(0,l.useCallback)((e=>{var t;let o=[];o=-1===jt.indexOf(e.id)?[...jt,e.id]:jt.filter((t=>t!==e.id)),bt(o),Ve(o),o.length===(null===(t=Dt[0])||void 0===t?void 0:t.headers.length)?wt(!0):0===o.length&&wt(!1)}),[Dt,jt,Ve]),eo=(0,l.useCallback)((()=>{if(At.length===Nt.length)ft([]),We([]),wt(!1);else{const e=Nt.map((e=>{var t;return null===e||void 0===e||null===(t=e.original)||void 0===t?void 0:t.id}));ft(e),We(e),wt(!0)}}),[Nt,At.length,We]);(0,l.useEffect)((()=>{ze&&(ft(ze),X.length===ze.length?wt(!0):wt(!1))}),[ze,X]),(0,l.useEffect)((()=>{if("function"!==typeof qt)return;const e=(0,P.gs)(null===Y||void 0===Y?void 0:Y.filter((e=>!("skipSearch"in e))),Bt.concat(["createdAt","updatedAt","lastLogin","Execution Started At","Execution Ended At"]));qt(e)}),[Y,Bt,qt]);const to=(0,l.useCallback)((()=>{"function"===typeof St&&St(),"function"===typeof Wt&&Wt(Vt||null),"function"===typeof $t&&$t(void 0)}),[St,Vt,$t,Wt]);(0,l.useEffect)((()=>{ht&&Xt!==ht&&to()}),[to,ht,Xt]);const{user:oo}=(0,z.A)();return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(R.A,{content:!1,sx:{height:Ue?"76vh":Te&&"payload"!==Q?ut?"100%":"auto":"76vh",borderTopLeftRadius:0,borderTopRightRadius:0,borderTop:J?"none":""},children:[!ue&&(0,W.jsxs)(d.A,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",sx:{padding:"10px 20px",flexDirection:{xs:"column",sm:"row"}},children:[Le&&(0,W.jsx)(c.Ay,{children:(0,W.jsx)(D.A,{onClick:()=>window.history.back(),color:"primary",children:(0,W.jsx)(w.A,{})})}),(0,W.jsx)(u.A,{variant:Pe?"h5":"h4",sx:{position:Le?"absolute":"relative",left:Le?45:0,fontWeight:Pe?400:500},children:rt?"":Q}),(0,W.jsx)(d.A,{direction:"row",spacing:2,alignItems:"center",children:(0,W.jsxs)(d.A,{direction:"row",spacing:2,justifyContent:"space-between",sx:{flexDirection:{xs:"column",sm:"row"},rowGap:{xs:"10px",sm:"0"}},children:[!me&&Ae&&(0,W.jsxs)(p.A,{displayEmpty:!0,value:ye,defaultValue:1,onChange:e=>Ae(e.target.value),sx:{height:"35px",width:100},children:[(0,W.jsx)(h.A,{value:1,children:"Active"}),(0,W.jsx)(h.A,{value:0,children:"Inactive"}),"/form-responses"===Be&&(0,W.jsx)(h.A,{value:3,children:"Duplicate"})]}),!ve&&je&&(0,W.jsxs)(p.A,{displayEmpty:!0,value:fe,defaultValue:1,onChange:e=>je(e.target.value),sx:{height:"35px",width:100},children:[(0,W.jsx)(h.A,{value:1,children:"Unlocked"}),(0,W.jsx)(h.A,{value:0,children:"Locked"})]}),!he&&(0,W.jsx)(L.y4,{count:be,searchOnClick:Je,preGlobalFilteredRows:Et,isApiSearch:Yt,globalFilter:Yt?Gt:Pt,setGlobalFilter:e=>{Yt?$t(e):Ht(e)}}),!xe&&(0,W.jsx)(N.Qq,{hiddenColumns:Bt,setHiddenColumns:Lt,allColumns:Mt}),ct&&lt&&(!(null!==oo&&void 0!==oo&&oo.role)||"a89c1591-ed87-40e5-b89b-e409d647e3e5"===(null===oo||void 0===oo||null===(t=oo.role)||void 0===t?void 0:t.id)||(null===oo||void 0===oo||null===(o=oo.role)||void 0===o?void 0:o.isUpdate))&&!qe&&(0,W.jsx)(N.i$,{importConfig:lt,formAttributesArray:le}),(!(null!==oo&&void 0!==oo&&oo.role)||"a89c1591-ed87-40e5-b89b-e409d647e3e5"===(null===oo||void 0===oo||null===(i=oo.role)||void 0===i?void 0:i.id)||(null===oo||void 0===oo||null===(s=oo.role)||void 0===s?void 0:s.isImport))&&!$e&&(0,W.jsx)(W.Fragment,{children:lt?(0,W.jsx)(W.Fragment,{children:nt?(0,W.jsx)(N.ON,{importConfig:lt,tableName:"QA-Master-Maker-LOV",importCompeted:at,forQA:!0}):it?(0,W.jsx)(N.ON,{importConfig:lt,tableName:"Daily-Execution-Plan",importCompeted:at,forDep:!0}):(0,W.jsx)(N.ON,{importConfig:lt,isMasterForm:ne,isResponse:ct})}):null!==tt&&void 0!==tt&&tt.tableName?(0,W.jsx)(N.ON,{tableName:tt.tableName}):null}),(!(null!==oo&&void 0!==oo&&oo.role)||"a89c1591-ed87-40e5-b89b-e409d647e3e5"===(null===oo||void 0===oo||null===(S=oo.role)||void 0===S?void 0:S.id)||(null===oo||void 0===oo||null===(O=oo.role)||void 0===O?void 0:O.isExport))&&!pe&&(0,W.jsx)(W.Fragment,{children:Kt?(0,W.jsx)(N.nB,{disabled:!(null!==Nt&&void 0!==Nt&&Nt.length),searchStringTrimmed:_t,sort:zt,isFcMode:ct,columns:"/form-responses"===Be?st:Y,hiddenColumns:Bt,exportConfig:tt,defaultSort:Vt,fileNameForExport:Ut}):(0,W.jsx)(W.Fragment,{children:Ye?(0,W.jsx)(V,{disabled:!(null!==Nt&&void 0!==Nt&&Nt.length),onClick:Xe}):(0,W.jsx)(N.pK,{disabled:!(null!==Nt&&void 0!==Nt&&Nt.length),data:"/form-responses"===Be?B.A.getData(Nt.map((e=>e.original)),st):B.A.getData(mt&&mt.length>0?mt:Nt.map((e=>e.original)),Y,ot),filename:Ut})})}),!ee&&(0,W.jsx)(n.A,{title:"Add",children:(0,W.jsx)(T.A,{onClick:()=>{to(),Ce()},style:{fontSize:"25px",color:"grey",padding:"5px"}})})]})})]}),(0,W.jsx)(M.A,{sx:{height:Nt.length?ue?"100%":"88%":"auto",...pt&&{overflow:"hidden"}},children:(0,W.jsx)(q,{children:(0,W.jsxs)(m.A,{stickyHeader:!0,...Ot(),children:[(0,W.jsx)(v.A,{sx:{borderTopWidth:2},children:(0,W.jsxs)(r.A,{...null===(_=Dt[0])||void 0===_?void 0:_.getHeaderGroupProps(),children:[Ee&&We&&(0,W.jsx)(a.A,{sx:{position:"sticky !important",width:50},children:(0,W.jsx)(x.A,{checked:Ct,onChange:eo,indeterminate:At.length>0&&At.length<Nt.length})}),!ce&&(0,W.jsxs)(a.A,{sx:{position:"sticky !important",minWidth:oe?120:te?75:250,width:oe?120:te?75:250,pt:2,pb:2},children:[te?"":"Actions",!ut&&(kt||Qt)&&(0,W.jsx)(G,{clearAllFilters:St,setSort:Wt,defaultSort:Vt})]}),null===Dt||void 0===Dt||null===(K=Dt[0])||void 0===K?void 0:K.headers.map(((e,t)=>(0,W.jsxs)(a.A,{...e.getHeaderProps([{className:e.className}]),sx:"userIcon"===e.className?{}:{position:"sticky !important",minWidth:He?260:e.render("minWidth")||180,width:He?260:e.render("minWidth")||180,pt:2,pb:2,pl:He?0:void 0},children:[He?(0,W.jsxs)(r.A,{sx:{ml:-2},children:[(0,W.jsx)(a.A,{sx:{position:"sticky !important",width:10},children:(0,W.jsx)(x.A,{checked:jt.includes(null===e||void 0===e?void 0:e.id),onChange:()=>Jt(e)})}),(0,W.jsx)(a.A,{sx:{position:"sticky !important",width:180}})]}):null,(0,W.jsxs)(d.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,W.jsx)(N.ak,{column:e,columns:Y,isFcMode:ct,defaultSort:Vt,listType:ye,isHistory:ut,sort:zt,setSort:Wt,enableOfflineSort:Qe}),!ut&&ce&&0===t&&(kt||Qt)&&(0,W.jsx)(G,{clearAllFilters:St,setSort:Wt,defaultSort:Vt})]})]},e.id)))]})}),(0,W.jsx)(g.A,{...Tt(),children:pt?(0,W.jsx)($,{columns:Y,hideActions:ce}):(0,W.jsx)(W.Fragment,{children:Nt.length>0?Nt.map(((e,t)=>{var o,l,i,s,d,c,u,p;return Rt(e),(0,W.jsxs)(r.A,{...e.getRowProps(),children:[Ee&&We&&(0,W.jsx)(a.A,{children:(0,W.jsx)(x.A,{checked:At.includes(null===e||void 0===e||null===(l=e.original)||void 0===l?void 0:l.id),onChange:()=>Zt(null===e||void 0===e?void 0:e.original)})}),!ce&&(0,W.jsxs)(a.A,{children:[!Ge&&(ie?(0,W.jsx)(y.A,{onClick:()=>Ie(null===e||void 0===e?void 0:e.original,t),size:"small",variant:"outlined",color:"primary",children:"Select"}):(0,W.jsx)(n.A,{title:"View",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",onClick:()=>Ie(null===e||void 0===e?void 0:e.original,t),disabled:!("gaa-level-entry"!==yt&&"network-level-entry"!==yt||null===e||void 0===e||null===(i=e.values)||void 0===i||!i.approvalStatus)&&("577b8900-b333-42d0-b7fb-347abc3f0b5c"!==(null===oo||void 0===oo?void 0:oo.id)&&"57436bed-c176-4625-96af-aaeec88cdc90"!==(null===oo||void 0===oo?void 0:oo.id)&&"Approved"===e.values.approvalStatus),children:(0,W.jsx)(k.A,{})})})),!re&&ye?(0,W.jsx)(n.A,{title:"Edit",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",onClick:()=>{var t;return vt&&"network"===vt?(null===e||void 0===e||null===(t=e.original)||void 0===t?void 0:t.hierarchyType)===vt?Se(null===e||void 0===e?void 0:e.original):(0,U.A)("You can't give access to Upper Level hierarchy as you don't have access to it.",{variant:"error"}):Se(null===e||void 0===e?void 0:e.original)},disabled:!("gaa-level-entry"!==yt&&"network-level-entry"!==yt||null===e||void 0===e||null===(s=e.values)||void 0===s||!s.approvalStatus)&&("577b8900-b333-42d0-b7fb-347abc3f0b5c"!==(null===oo||void 0===oo?void 0:oo.id)&&"57436bed-c176-4625-96af-aaeec88cdc90"!==(null===oo||void 0===oo?void 0:oo.id)&&"Approved"===e.values.approvalStatus),children:(0,W.jsx)(A.A,{})})}):(0,W.jsx)(W.Fragment,{}),se?fe?(0,W.jsx)(n.A,{title:"Lock",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",onClick:()=>Oe(null===e||void 0===e?void 0:e.original),children:(0,W.jsx)(j.A,{})})}):(0,W.jsx)(n.A,{title:"Unlock",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",onClick:()=>Oe(null===e||void 0===e?void 0:e.original),children:(0,W.jsx)(b.A,{})})}):(0,W.jsx)(W.Fragment,{}),!ae&&ye&&3!==ye?(0,W.jsx)(n.A,{title:"Delete",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",disabled:ge||((null===e||void 0===e||null===(d=e.original)||void 0===d||null===(c=d.properties)||void 0===c?void 0:c.verifyAttribute)||(null===e||void 0===e||null===(u=e.original)||void 0===u||null===(p=u.properties)||void 0===p?void 0:p.approval)),onClick:()=>{var t,o;return we((null===e||void 0===e||null===(t=e.original)||void 0===t?void 0:t.id)||(null===e||void 0===e||null===(o=e.original)||void 0===o?void 0:o.name)||(null===e||void 0===e?void 0:e.original))},children:(0,W.jsx)(f.A,{})})}):de||3===ye?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(n.A,{title:"Restore",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",onClick:()=>ke(null===e||void 0===e?void 0:e.original),children:(0,W.jsx)(C.A,{})})}),!_e&&(0,W.jsx)(n.A,{title:"History",placement:"bottom",children:(0,W.jsx)(D.A,{color:"secondary",onClick:()=>Fe(null===e||void 0===e?void 0:e.original),children:(0,W.jsx)(F.A,{})})})]}),e.cells.map((t=>{var o,l,i,n;return(0,W.jsx)(a.A,{...t.getCellProps([{className:t.column.className}]),children:dt?t.render("Cell"):t.column.Header.includes(".")&&!t.value&&null!==t&&void 0!==t&&null!==(l=t.row)&&void 0!==l&&null!==(i=l.original)&&void 0!==i&&i[null===t||void 0===t||null===(n=t.column)||void 0===n?void 0:n.Header]?t.row.original[t.column.Header]:null==t.value||""===t.value?"-":["Updated On","Created On","Submitted On","Last Login","Execution Started At","Execution Ended At"].includes(t.column.Header)?Z?t.render("Cell"):(0,P.YQ)(t.value):"Operator"==t.column.Header?(0,P.wG)(t.value):t.column.Header.includes("Date")?Z?t.render("Cell"):(0,P.Yq)(t.value):t.render("Cell")},null===e||void 0===e||null===(o=e.original)||void 0===o?void 0:o.id)}))]},null===e||void 0===e||null===(o=e.original)||void 0===o?void 0:o.id)})):Ke?(0,W.jsx)(W.Fragment,{}):(0,W.jsx)(N.ab,{msg:"No Data",colSpan:7})})})]})})})]}),!Te&&(be>0||xt)&&(0,W.jsx)(R.A,{sx:{width:"100%"},children:(0,W.jsx)(N.xN,{countLoader:gt,customCount:xt,count:be,setPageIndex:De,setPageSize:Ne,pageIndex:Re,pageSize:Me,disabled:pt})})]})}_.defaultProps={hideActions:!1,miniAction:!1,fcAction:!1,hideTopBorder:!1,normalDate:!1,hideAddButton:!1,hidePagination:!1,hideImportButton:!0,hideUpdateButton:!0,hideExportButton:!1,hideSearch:!1,hideColumnsSelect:!1,hideType:!1,hideHeader:!1,disableDeleteIcon:!1,showCheckbox:!1,showColumnsCheckbox:!1,accessTableOnly:!1,showBackButton:!1,subHeader:!1,hideViewIcon:!1,hideEditIcon:!1,isMasterForm:!1,searchOnClick:!1,hideRestoreIcon:!1,hideDeleteIcon:!1,showLockIcon:!1,selectIcon:!1,hideHistoryIcon:!1,hideEmptyTable:!1,exportPDFOnly:!1,devolutionExport:!1,forColumnAccess:!1,enableOfflineSort:!1,isFcMode:!1,loadingCondition:!1,listType:1,customCount:!1,allData:[]};const K=(0,l.memo)(_)},50869:(e,t,o)=>{o.d(t,{X:()=>W,ev:()=>L,sB:()=>B,y4:()=>M});var l=o(9950),i=o(51069),n=o(2660),r=o(14341),a=o(59254),s=o(27987),d=o(40736),c=o(67535),u=o(72145),p=o(53065),h=o(82321),m=o(87299),v=o(51496),x=o(83563),g=o(46483),y=o(19223),A=o(2043),f=o(18091),j=o(9912),b=o(25411),C=o(60767),w=o(77351),k=o(67775),S=o(7148),F=o(86898),I=o(37269),O=o(82150),T=o(20333),D=o(71826),N=(o(86263),o(30423)),R=o(44414);function M(e){let{searchOnClick:t,isApiSearch:o,count:i,preGlobalFilteredRows:r,globalFilter:a,setGlobalFilter:s,...d}=e;const c=i||r.length,[u,p]=(0,l.useState)(a),h=(0,A.useAsyncDebounce)((e=>{s(e||void 0)}),700),m=(0,l.useRef)(u);return(0,l.useEffect)((()=>{o&&(m.current=u)}),[o,u]),(0,l.useEffect)((()=>{o&&a!==m.current&&p(a)}),[a,o]),(0,R.jsx)(n.A,{value:u||"",sx:{height:"35px",width:170},autoComplete:"off",onChange:e=>{var o,l;(p(null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value),t)||h(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)},onKeyDown:e=>{t&&"Enter"===e.key&&h(u)},placeholder:o?"Search...":`Search ${c} records...`,id:"start-adornment-email",startAdornment:(0,R.jsx)(C.A,{onClick:()=>{t&&h(u)},style:{...t?{cursor:"pointer"}:{cursor:"auto"}}}),...d})}function L(e){let{column:{filterValue:t,Header:o,setFilter:l}}=e;return(0,R.jsx)(r.A,{fullWidth:!0,value:t||"",onChange:e=>{var t;l((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||void 0)},placeholder:o,size:"small"})}function P(e,t,o){return(0,f.Ht)(e,o,{keys:[e=>e.values[t]]})}P.autoRemove=e=>!e;const B=()=>({fuzzyText:P,text:(e,t,o)=>{e.filter((e=>{const l=e.values[t];return void 0===l||String(l).toLowerCase().startsWith(String(o).toLowerCase())}))}});const E=(0,a.Ay)(s.A)((e=>{let{theme:t}=e;return{top:0,position:"sticky",backgroundColor:t.palette.background.paper,opacity:1,zIndex:10,width:400,gap:5,paddingLeft:"8px",paddingRight:"8px","&:hover":{backgroundColor:t.palette.background.paper,opacity:1},"&:focus":{opacity:1,backgroundColor:t.palette.background.paper}}})),H=(0,a.Ay)(d.A)({"& .MuiMenu-paper":{maxHeight:180},opacity:0,position:"absolute",pointerEvents:"none",height:0}),U=e=>{let{shouldUseApiSort:t,handleChangeSort:o,column:l,sort:i,currentAccessor:n,theme:r}=e;const a=(null===i||void 0===i?void 0:i[2])===n&&!(null===i||void 0===i||!i[0])&&"DESC"!==(null===i||void 0===i?void 0:i[1]),s=(null===i||void 0===i?void 0:i[2])===n&&"DESC"===(null===i||void 0===i?void 0:i[1]),d=!a&&!s;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(c.A,{fullWidth:!0,variant:a?"contained":"outlined",onClick:()=>o(l.Header,"ASC"),...!a&&{color:"primary"},sx:{color:a?"#FFF":r.palette.primary.main,borderColor:r.palette.primary.main,background:a?r.palette.primary.main:"transparent",...a&&{"&:hover":{background:r.palette.primary.main}}},disabled:!t||a,children:[(0,R.jsx)(I.A,{color:a?r.palette.common.white:r.palette.grey[400]})," Ascending"]}),(0,R.jsxs)(c.A,{fullWidth:!0,variant:s?"contained":"outlined",onClick:()=>o(l.Header,"DESC"),...!s&&{color:"primary"},sx:{color:s?"#FFF":r.palette.primary.main,borderColor:r.palette.primary.main,background:s?r.palette.primary.main:"transparent",...s&&{"&:hover":{background:r.palette.primary.main}}},disabled:!t||s,children:[(0,R.jsx)(O.A,{color:s?r.palette.common.white:r.palette.grey[400]})," Descending"]}),(0,R.jsxs)(c.A,{fullWidth:!0,variant:d?"contained":"outlined",onClick:()=>o(l.Header,"NONE"),...!d&&{color:"secondary"},sx:{color:d?"#FFF":r.palette.secondary.main,borderColor:r.palette.secondary.main,background:d?r.palette.secondary.main:"transparent",...d&&{"&:hover":{background:r.palette.secondary.main}}},disabled:!t||d,children:[(0,R.jsx)(T.A,{color:d?r.palette.common.white:r.palette.grey[400]})," None"]})]})},z=[{name:"(Blanks)",id:"(Blanks)"}],W=(0,l.memo)((e=>{let{column:t,filterProps:o,shouldUseApiSort:r,handleChangeSort:a,enableOfflineSort:d,sort:f,currentAccessor:C,listType:I}=e;const{currentFilter:O,handleSetCurrentFilter:T}=(0,N.bZ)(),{formId:M,apiRouteForFetchOptions:L,tableName:P,getColumn:B,customAccessor:W,projectId:V,levelId:G,masterId:$,filterObjectForApi:q,method:_,gaaLevelFilter:K}=o||{},Q=!!M,Y=Q,X=(null===f||void 0===f?void 0:f[2])===C,Z=!!P,{id:J,Header:ee}=t,te=W||J,oe=(0,l.useMemo)((()=>(null===O||void 0===O?void 0:O[te])||[]),[te,O]),[le,ie]=(0,l.useState)(!1),[ne,re]=(0,l.useState)([]),[ae,se]=(0,l.useState)(0),[de,ce]=(0,l.useState)([]),[ue,pe]=(0,l.useState)(""),[he,me]=(0,l.useState)(1),[ve,xe]=(0,l.useState)(!1),ge=(0,S.A)(),ye=(0,l.useRef)(),Ae=le?de:oe,fe=(0,l.useMemo)((()=>[...Y?z:[],...ne]),[Y,ne]),je=(0,l.useMemo)((()=>le?"":oe.length?`${oe.length} filter${oe.length>1?"s":""} applied`:`Filter ${ee}`),[le,oe.length,ee]),be=(0,l.useCallback)((async(e,t)=>{var o;if(!Z)return[];const l=await(0,D.default)(L||"/distinct-dropdowns-list",{method:_||"GET",timeoutOverride:18e4,["post"===_?"body":"query"]:{...Q&&{formId:M},pageSize:t,isActive:I,pageIndex:e,...ue&&{searchString:ue},...Q?{columnName:P}:{tableName:P},...V&&{projectId:V},...G&&{levelId:G},...$&&{masterId:$},getColumn:B,filterObjectForApi:q,customAccessor:W,gaaLevelFilter:K}});var i,n,r;return null!==l&&void 0!==l&&null!==(o=l.data)&&void 0!==o&&o.data?(se(null!==l&&void 0!==l&&null!==(i=l.data)&&void 0!==i&&null!==(n=i.data)&&void 0!==n&&n.count?parseInt(l.data.data.count):0),null===(r=l.data.data)||void 0===r?void 0:r.rows):[]}),[q,_,Z,L,Q,M,I,ue,P,V,G,$,B,W,K]),Ce=(0,l.useCallback)((()=>{ce(oe),ie(!0)}),[oe]),we=(0,l.useCallback)((()=>{ce([]),pe(""),ie(!1)}),[]),ke=(0,l.useCallback)((()=>{T(de,te),ie(!1)}),[te,T,de]),Se=(0,l.useCallback)((e=>{const t=de.some((t=>t.name===e.name));ce(t?t=>t.filter((t=>t.name!==e.name)):t=>t.concat(e))}),[de]),Fe=(0,l.useCallback)((()=>{T([],te),ce([])}),[te,T]),Ie=(0,l.useCallback)((async function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];xe(!0);const l=(await be(e,t)).map((e=>({...e,id:e.name})));re((e=>o?l:[...e,...l])),xe(!1)}),[be]),Oe=(0,l.useCallback)((e=>{let{visibleStopIndex:t}=e;ye.current===ue?!ve&&ne.length<ae&&t>=ne.length-(Y?5:6)&&(me((e=>e+1)),Ie(he+1,20)):ye.current=ue}),[ue,ve,ne.length,ae,Y,Ie,he]),Te=(0,A.useAsyncDebounce)((()=>{me(1),se(0),Ie(1,20,!0)}),700);return(0,l.useEffect)((()=>{le&&Te()}),[le,ue]),(0,R.jsxs)(u.A,{children:[(0,R.jsx)(p.A,{title:je,children:(0,R.jsx)(F.A,{sx:{fontSize:"1rem",cursor:"pointer"},onClick:Ce,children:(0,R.jsx)(w.A,{twoToneColor:X||null!==oe&&void 0!==oe&&oe.length?ge.palette.error.main:ge.palette.primary.main})})}),(0,R.jsx)(H,{multiple:!0,open:le,onOpen:Ce,onClose:we,value:Ae,renderValue:()=>"",onKeyDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),input:(0,R.jsx)(h.A,{inputComponent:"div"}),children:(0,R.jsxs)(F.A,{style:{...Z&&{height:450},display:"flex",flexDirection:"column"},children:[!t.disableSortBy&&(r||d)&&(0,R.jsx)(E,{onKeyDown:e=>e.stopPropagation(),onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,R.jsx)(U,{shouldUseApiSort:r,handleChangeSort:a,column:t,sort:f,currentAccessor:C,theme:ge})}),Z&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(F.A,{onKeyDown:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),sx:{display:"flex",alignItems:"center",top:0,position:"sticky",backgroundColor:ge.palette.background.paper,zIndex:9,padding:"8px"},children:(0,R.jsx)(p.A,{title:Z?"":"Filtering is unavilable for this column.",children:(0,R.jsx)(n.A,{fullWidth:!0,value:ue||"",onChange:e=>pe(e.target.value),onKeyDown:e=>{e.stopPropagation()},onClick:e=>e.stopPropagation(),placeholder:"Search...",disabled:!Z,style:{...!Z&&{background:"#f0f0f0"}},endAdornment:(0,R.jsx)(g.A,{position:"end",children:(0,R.jsx)(y.A,{style:{fontSize:"18px",color:ge.palette.secondary.dark,cursor:"auto"}})})})})}),Ae.length>0&&(0,R.jsx)(F.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(min(100%, 150px), 1fr))",gap:"8px",padding:"8px",position:"sticky",top:60,backgroundColor:ge.palette.background.paper,zIndex:8,overflowX:"auto",maxHeight:"calc(2 * 38px + 2 * 8px)"},children:Ae.map((e=>(0,R.jsx)(m.A,{label:e.name+(e.code?`-${e.code}`:""),onDelete:()=>{Se(e)},variant:"outlined"},e.id)))}),(0,R.jsxs)(E,{onKeyDown:e=>e.stopPropagation(),onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,R.jsx)(c.A,{fullWidth:!0,disabled:!(null!==ne&&void 0!==ne&&ne.length)&&!(null!==de&&void 0!==de&&de.length),variant:"outlined",color:"primary",onClick:ke,startIcon:(0,R.jsx)(i.A,{}),children:null!==ne&&void 0!==ne&&ne.length||null!==de&&void 0!==de&&de.length?"Apply Filter":"No Options Available"}),(0,R.jsx)(c.A,{fullWidth:!0,disabled:!(null!==Ae&&void 0!==Ae&&Ae.length),color:"secondary",sx:{color:ge.palette.secondary.main},variant:"outlined",onClick:Fe,startIcon:(0,R.jsx)(k.A,{}),children:"Clear Filter"})]}),(0,R.jsx)(F.A,{style:{flex:1,display:"flex"},children:(0,R.jsx)(b.Ay,{children:e=>{let{height:t}=e;return(0,R.jsx)(j.Y1,{height:t,itemCount:fe.length,itemSize:46,width:400,onItemsRendered:Oe,children:e=>{let{index:t,style:o}=e;const l=fe[t];return(0,R.jsxs)(s.A,{style:o,sx:{width:400},onKeyDown:e=>e.stopPropagation(),onClick:e=>{e.stopPropagation(),Se(l)},children:[(0,R.jsx)(v.A,{checked:de.some((e=>e.id===l.id))}),(0,R.jsx)(x.A,{primary:l.name+(l.code?`-${l.code}`:"")})]},l.id)}})}})})]})]})})]})}))},88528:(e,t,o)=>{o.d(t,{A:()=>n});const{formatTimeStamp:l,getValueByAccessor:i}=o(27646),n={getData:function(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[];return e&&e.length>0&&e.map((e=>{let a={};t&&t.length>0&&t.map((t=>{if("Actions"!==t.Header){const r=i(e,t.accessor,o);let s;s=(["Updated On","Created On","Submitted On"].includes(t.Header)||t.Header.includes("Date"))&&r&&null!==r&&!n?l(r):r,a[t.Header]=s}})),r.push(a)})),r}}}}]);