"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[9445],{59445:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var o=a(9950),r=a(27081),i=a(53065),n=a(57073),l=a(4139),s=a(67535),d=a(36089),u=a(26592),c=a(28429),m=a(62375),v=a(62605),x=a(26473),p=a(60666),S=a(87233),j=a(9449),f=a(80733),g=a(29024),y=a(88848),h=a(3147),b=a(12952),I=a(55519),A=a(96951),L=a(14351),k=a(84601),O=a(52867),q=a(44414);const z=e=>{let{disableAll:t,saveData:a,onSelectedStoreLocation:i,setLocations:n}=e;const[d,u]=(0,o.useState)(""),[c,m]=(0,o.useState)([]),[v,z]=(0,o.useState)([]),[C,M]=(0,o.useState)(null),[T,w]=(0,o.useState)(null),[F,N]=(0,o.useState)([]),[E,D]=(0,o.useState)(null),_=(0,j.mN)({resolver:(0,x.t)(p.Ik().shape({projectId:k.A.project,orgTypeId:k.A.organizationType,organization:k.A.organizationId,projectSiteStoreId:k.A.organizationStoreId,toOrganizationStoreLocationId:k.A.requiredWithLabel("Location of transfer")})),defaultValues:{},mode:"all"}),{handleSubmit:P,setValue:$}=_,H=(0,r.wA)();(0,o.useEffect)((()=>{H((0,g._G1)()),H((0,g.rHZ)("ORGANIZATION TYPE")),H((0,g.uiG)()),H((0,g.wgs)())}),[H]);const{masterMakerLovs:{masterMakerLovsObject:{rows:V}},masterMakerOrgTypeSecond:{masterObject:G}}=(0,y.$)(),B=((e,t)=>{const a=e&&e.filter((e=>e.name===t));return a&&a.length?a[0].id:void 0})(V,"LTL"),{projectsDropdown:{projectsDropdownObject:Q}}=(0,f.Y)(),{organizationStores:{organizationStoreObject:{rows:R}}}=(0,h.E)(),{companyStoreLocations:{companyStoreLocationsObject:{rows:U}},firmStoreLocations:{firmStoreLocationsObject:{rows:J}}}=(0,b.V)();(0,o.useEffect)((()=>{N(U)}),[U]),(0,o.useEffect)((()=>{N(J)}),[J]);const{organizationsDropdown:Y,organizationsLocationDropdown:Z}=(0,I.G)(),W=(null===Y||void 0===Y?void 0:Y.organizationDropdownObject)||[],X=(null===Z||void 0===Z?void 0:Z.organizationLocationDropdownObject)||[];(0,o.useEffect)((()=>{if(C){var e;const t=null===R||void 0===R||null===(e=R.find((e=>(null===e||void 0===e?void 0:e.id)===C)))||void 0===e?void 0:e.organization;w(null!==(null===t||void 0===t?void 0:t.parentId)?null===t||void 0===t?void 0:t.parentId:null===t||void 0===t?void 0:t.id)}}),[R,C]);const K=["consumed","billing","installed","old","installer","service-center","service center"];return(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(L.A,{title:"Material Transfer Location To Location",sx:{mb:2},children:(0,q.jsx)(A.Op,{methods:_,children:(0,q.jsxs)(l.Ay,{container:!0,spacing:4,children:[(0,q.jsx)(l.Ay,{item:!0,md:3,xl:2,children:(0,q.jsx)(A.eu,{InputLabelProps:{shrink:!0},name:"projectId",label:"Project",menus:Q||[],disable:t,required:!0,onChange:()=>{$("orgTypeId",null),$("organization",null),$("contractorBranch",null),$("projectSiteStoreId",null),u(""),$("toOrganizationStoreLocationId",null)}})}),(0,q.jsx)(l.Ay,{item:!0,md:3,xl:2,children:(0,q.jsx)(A.eu,{InputLabelProps:{shrink:!0},name:"orgTypeId",label:"Organization Type",menus:G.filter((e=>"420e7b13-25fd-4d23-9959-af1c07c7e94b"===e.id||"decb6c57-6d85-4f83-9cc2-50e0630003df"===e.id)),onChange:e=>{var t,a,o,r,i,n,l,s;null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.value&&(H((0,g.d8s)(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)),H((0,g.Ywh)(null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value)),H((0,g.qV$)({organizationType:null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.value})),"420e7b13-25fd-4d23-9959-af1c07c7e94b"===(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)&&H((0,g.Ru7)({organizationType:null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value})),"decb6c57-6d85-4f83-9cc2-50e0630003df"===(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)&&H((0,g.c1B)({organizationType:null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value})),$("organization",null),$("contractorBranch",null),$("projectSiteStoreId",null),u(""),$("toOrganizationStoreLocationId",null))},disable:t,required:!0})}),(0,q.jsx)(l.Ay,{item:!0,md:3,xl:2,children:(0,q.jsx)(A.eu,{InputLabelProps:{shrink:!0},name:"organization",label:"Organization",menus:(0,O.HF)(W),onChange:e=>{var t;if(null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.value){var a;let t=X.filter((t=>t.parent&&null!==t.parent&&t.parent.id===e.target.value));z(t),D(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value),$("contractorBranch",null),$("projectSiteStoreId",null),u(""),$("toOrganizationStoreLocationId",null)}},disable:t,required:!0})}),(0,q.jsx)(l.Ay,{item:!0,md:3,xl:2,children:(0,q.jsx)(A.eu,{InputLabelProps:{shrink:!0},name:"contractorBranch",label:"Organization Branch",menus:(0,O.HF)(v),onChange:e=>{var t,a;null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.value&&(D(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value),$("projectSiteStoreId",null),u(""),$("toOrganizationStoreLocationId",null))},disable:t,allowClear:!0})}),(0,q.jsx)(l.Ay,{item:!0,xs:12,mb:-4}),(0,q.jsx)(l.Ay,{item:!0,md:3,xl:2,children:(0,q.jsx)(A.eu,{InputLabelProps:{shrink:!0},name:"projectSiteStoreId",label:"Organization Store",menus:null===R||void 0===R?void 0:R.filter((e=>e.organizationId===E)),onChange:e=>{if(e.target.value){var t;M(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value);const a=F&&F.filter((t=>t.organizationStoreId===e.target.value));m(a),n(a);const o=((e,t)=>{const a=e&&e.filter((e=>e.id===t));return a&&a.length?a[0]:{}})(R,e.target.value),r=o.city,i=(o.address,o.address),l=o.pincode?o.pincode:o.pinCode;u(`${i}, ${r.name}, ${r.state.name}, ${r.state.country.name}, ${l}`),$("toOrganizationStoreLocationId",null)}},disable:t,required:!0})}),(0,q.jsxs)(l.Ay,{item:!0,md:6,xl:8,children:[(0,q.jsx)(S.A,{children:"Address: "}),(0,q.jsx)(S.A,{mt:2,children:d})]}),(0,q.jsx)(l.Ay,{item:!0,xs:12,mb:-4}),(0,q.jsx)(l.Ay,{item:!0,md:3,xl:2,children:(0,q.jsx)(A.eu,{InputLabelProps:{shrink:!0},name:"toOrganizationStoreLocationId",label:"Location Of Transfer",menus:c&&c.filter((e=>K.every((t=>!e.name.toLowerCase().includes(t)))))||[],onChange:i,disable:t,required:!0})}),(0,q.jsx)(l.Ay,{item:!0,md:3,xl:2,children:(0,q.jsx)(A.o3,{InputLabelProps:{shrink:!0},name:"remarks",label:"Remarks",type:"text",disabled:t})}),(0,q.jsx)(l.Ay,{container:!0,spacing:4,children:(0,q.jsx)(l.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px",marginTop:2},children:(0,q.jsx)(s.A,{size:"small",variant:"contained",onClick:P((e=>{e.transactionTypeId=B,e.organizationId=T,a(e)})),color:"primary",children:"Next"})})})]})})})})};var C=a(65669),M=a(95615),T=a(14563),w=a(94826);const F={cursor:"pointer",fontSize:24},N=e=>{let{materialData:t,onMaterailsInput:a,storeLocationData:i,view:n,update:d,showData:u,formData:c,selectedItems:m}=e;const[f,y]=(0,o.useState)(!1),[h,b]=(0,o.useState)(null),[I,L]=(0,o.useState)(null),[z,N]=(0,o.useState)([]),[E,D]=(0,o.useState)([]),[_,P]=(0,o.useState)(!1),[$,H]=(0,o.useState)(!1),[V,G]=(0,o.useState)(""),[B,Q]=(0,o.useState)(""),[R,U]=(0,o.useState)(null),[J,Y]=(0,o.useState)([]),[Z,W]=(0,o.useState)(null),[X,K]=(0,o.useState)(null),[ee,te]=(0,o.useState)(!1),[ae,oe]=(0,o.useState)(!1),[re,ie]=(0,o.useState)(!1);(0,o.useEffect)((()=>{y(!!n)}),[n,d]);const ne=(0,j.mN)({resolver:(0,x.t)(p.Ik().shape({materialId:k.A.material,quantity:ae?k.A.checkForInteger("Quantity",Z):k.A.maxQuantity(Z,!0),fromStoreLocationId:k.A.fromStoreLocationId})),defaultValues:{},mode:"all"}),{handleSubmit:le,setValue:se,reset:de,watch:ue}=ne,ce=ue("uom"),me=(0,r.wA)();(0,o.useEffect)((()=>{var e;(n||d)&&(e=u,Object.entries(e).forEach((e=>{let[t,a]=e;se(t,a)})),u&&u.rate&&L(u.rate))}),[n,d,u,se]),(0,o.useEffect)((()=>{var e;(n||d)&&u&&(te(!0),K(u),me((0,g.a2o)({project:null===c||void 0===c?void 0:c.projectId,store:null===c||void 0===c?void 0:c.projectSiteStoreId,storeLocation:null===u||void 0===u?void 0:u.fromStoreLocationId,material:null===u||void 0===u?void 0:u.materialId})),me((0,g.J9T)({project:null===c||void 0===c?void 0:c.projectId,store:null===c||void 0===c?void 0:c.projectSiteStoreId,storeLocation:null===u||void 0===u?void 0:u.fromStoreLocationId,material:null===u||void 0===u?void 0:u.materialId})),e=u,Object.entries(e).forEach((e=>{let[t,a]=e;"actions"!==t&&se(t,a),"uom"===t&&se(t,"string"===typeof a?a:a.name)})))}),[n,d,u,se,c,me]);(0,o.useEffect)((()=>{h&&I&&se("value",parseFloat(h*I).toFixed(2))}),[h,I,se,de]);const ve=(e,t,a,o,r,i)=>(0,q.jsx)(A.eu,{name:e,label:t,onChange:r,InputLabelProps:{shrink:!0},menus:a,...i&&{disable:!0},...o&&{required:!0}}),xe=function(e,t,a,o,r){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],n=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(0,q.jsx)(A.o3,{name:e,type:a,label:t,handleChange:r,InputLabelProps:{shrink:n},...(i||f)&&{disabled:!0},...o&&{required:!0}})},pe=()=>{P(!1)},Se=e=>{N(e)},{txnByLocationMaterial:je,serialNumbers:fe}=(0,v.t)();let{projectSLData:ge}=(0,o.useMemo)((()=>({projectSLData:(null===je||void 0===je?void 0:je.stocksObject)||[],isLoading:je.loading||!1})),[je]);(0,o.useEffect)((()=>{ge&&Y(ge)}),[ge]);const{serialNumbersData:ye}=(0,o.useMemo)((()=>{var e;return{serialNumbersData:(null===fe||void 0===fe?void 0:fe.data)||[],countSN:(null===fe||void 0===fe||null===(e=fe.data)||void 0===e?void 0:e.count)||0}}),[fe]);(0,o.useEffect)((()=>{J&&J.length>0?(se("qtyStk",(0,O.$G)(J[0].quantity)),se("rate",parseFloat(J[0].rate).toFixed(2)),L(parseFloat(J[0].rate).toFixed(2)),se("tax",J[0].tax),se("value",parseFloat(J[0].rate*u.approvedQuantity).toFixed(2)),W((0,O.$G)(J[0].quantity))):(se("qtyStk","0"),se("rate","0"),L(0),se("tax","0"),se("value","0"),W(0))}),[J,se,u]),(0,o.useEffect)((()=>{if(J&&J.length>0&&null!==R){if(ie(!1),m&&X&&X.id&&R&&m[X.id+R]){let e=m[X.id+R];se("qtyStk",(0,O.$G)(J[0].quantity)),se("quantity",e.quantity),N(e.material_serial_numbers)}else se("qtyStk",(0,O.$G)(J[0].quantity)),se("quantity",d&&u&&u.quantity?u.quantity:0),N(d&&u&&u.material_serial_numbers?u.material_serial_numbers:[]);W((0,O.$G)(J[0].quantity)),se("rate",parseFloat(J[0].rate).toFixed(2)),L(parseFloat(J[0].rate).toFixed(2)),se("tax",J[0].tax),se("value",parseFloat(J[0].rate*u.approvedQuantity).toFixed(2))}else ie(!1),se("qtyStk",null!==R?0:null),se("rate","0"),L(0),se("tax","0"),se("value","0"),W(null)}),[J,se,m,d,X,R,u]);const he=["consumed","billing","installed","installer","service-center","service center"];return(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(A.Op,{methods:ne,children:[re&&(0,q.jsx)(w.A,{}),(0,q.jsxs)(l.Ay,{container:!0,spacing:2,sx:{mt:2,mb:2.5},children:[(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:ve("materialId","Material",(0,O.Jw)(t),!0,(e=>{var t;if(null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.value){var a;let t=null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.row;se("name",null===t||void 0===t?void 0:t.name),se("code",null===t||void 0===t?void 0:t.code),se("uom",null===t||void 0===t?void 0:t.uomName),se("fromStoreLocationId",null),U(null),se("quantity",null),W(null),se("qtyStk",null),K(t)}}),!!d)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:xe("code","Code","text",!0,(()=>{}),!0)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:1,style:{display:"none"},children:xe("name","name","text",!0)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:4,children:ve("fromStoreLocationId","From Store Location",i&&i.filter((e=>he.every((t=>!e.name.toLowerCase().includes(t))))),!0,(e=>{var t,a,o,r,i;null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.value&&(ie(!0),N([]),D([]),u.material_serial_numbers=[],se("qtyStk","0"),W("0"),U(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value),Q(null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.name),me((0,g.a2o)({project:null===c||void 0===c?void 0:c.projectId,store:null===c||void 0===c?void 0:c.projectSiteStoreId,storeLocation:null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.value,material:null===X||void 0===X?void 0:X.id})),me((0,g.J9T)({project:null===c||void 0===c?void 0:c.projectId,store:null===c||void 0===c?void 0:c.projectSiteStoreId,storeLocation:null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value,material:null===X||void 0===X?void 0:X.id})))}),!1)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:2,children:xe("quantity","Quantity",(0,O.VF)(ce)?"text":"number",!0,(e=>{(0,O.VF)(ce)?oe(!1):oe(!0),b(e.target.value)}))}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:2,children:xe("qtyStk","Qty In Stock","number",!1,void 0,!0)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:2,children:xe("uom","UOM","text",!0,(()=>{}),!0)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:2,sx:{display:"none"},children:xe("rate","Rate","text",!0,(e=>{var t;L(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}),!0)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:2,sx:{display:"none"},children:xe("tax","Tax%","text",!0,void 0,!0)}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:2,sx:{display:"none"},children:xe("value","Value","number",!0,void 0,!0)}),(0,q.jsxs)(l.Ay,{item:!0,xs:12,sm:2,sx:{textAlign:"center"},children:[((null===X||void 0===X?void 0:X.isSerialNumber)||d&&(null===u||void 0===u?void 0:u.isSerialNumber))&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(S.A,{mb:-1,children:"SerialNumber"})," ",(0,q.jsx)("br",{}),(0,q.jsx)(s.A,{size:"small",onClick:()=>{D(ye[null===X||void 0===X?void 0:X.id]),H(!0)},variant:"contained",color:"primary",children:"View"})]}),V&&""!==V&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)("br",{}),(0,q.jsx)(S.A,{color:"error",sx:{fontSize:12,marginTop:2},children:V})]})]}),(0,q.jsx)(l.Ay,{item:!0,xs:12,sm:2,style:{display:"none"},children:xe("uomId","UOMId","text",!0)}),(0,q.jsxs)(l.Ay,{item:!0,xs:12,sm:2,mt:3.5,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[!n&&(0,q.jsx)(s.A,{size:"small",onClick:le((e=>{X&&null!==X&&void 0!==X&&X.isSerialNumber&&0===z.length?G("Serial Number is required"):X&&null!==X&&void 0!==X&&X.isSerialNumber&&z.length!==e.quantity?G(`Please select a total of ${e.quantity} serial numbers`):(G(!1),z&&(e.material_serial_numbers=z),e.tax=0===e.tax?"0":e.tax,e.fromStoreLocationName=B,a(e,null===X||void 0===X?void 0:X.id,(null===X||void 0===X?void 0:X.id)+R),N([]),D([]),K(null),Y([]),se("qtyStk",null),W(null),te(!1),de())})),variant:"contained",color:"primary",children:ee?"Update":"Add"}),(0,q.jsx)(C.A,{open:_,onClose:pe,"aria-labelledby":"modal-modal-title",children:(0,q.jsx)(T.default,{handleCloseSerial:pe,closeCss:F,quantity:h,setSerialNumbers:Se})}),$&&(0,q.jsx)(M.default,{open:$,onClose:()=>{H(!1)},maxQuantity:h,serialNumberData:E,showCheckboxes:!0,onSave:e=>{Se(e)},selectedSerials:z})]})]})]})})};var E=a(99635),D=a(71826),_=a(62054),P=a(68388);const $=e=>{let{values:t,onEdit:a,onDelete:o,onView:r}=e;return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(i.A,{title:"Edit",placement:"bottom",children:(0,q.jsx)(n.A,{color:"secondary",onClick:()=>a(t),children:(0,q.jsx)(d.A,{})})}),(0,q.jsx)(i.A,{title:"Delete",placement:"bottom",children:(0,q.jsx)(n.A,{color:"secondary",onClick:()=>o(t),children:(0,q.jsx)(u.A,{})})}),(null===t||void 0===t?void 0:t.isSerialNumber)&&(0,q.jsx)(i.A,{title:"View Serial Number",placement:"bottom",children:(0,q.jsx)(n.A,{color:"secondary",onClick:()=>r(t),children:(0,q.jsx)(m.A,{})})})]})},H=[{Header:"Actions",accessor:"actions"},{Header:"Name",accessor:"name"},{Header:"Code",accessor:"code"},{Header:"Quantity",accessor:"quantity"},{Header:"UOM",accessor:"uomName"},{Header:"From Store Location",accessor:"fromStoreLocationName"}],V=()=>{const e=(0,c.Zp)(),[t,a]=(0,o.useState)([]),[i,n]=(0,o.useState)([]),[d,u]=(0,o.useState)({}),[m,x]=(0,o.useState)(!1),[p,S]=(0,o.useState)(!1),[j,f]=(0,o.useState)(!1),[y,h]=(0,o.useState)(null),[b,I]=(0,o.useState)([]),[L,k]=(0,o.useState)({}),[C,T]=(0,o.useState)([]),[w,F]=(0,o.useState)(null),[V,G]=(0,o.useState)(!1),[B,Q]=(0,o.useState)(null),[R,U]=(0,o.useState)([]),J=(0,r.wA)(),Y=b&&b.filter((e=>e.organizationStoreId===(null===y||void 0===y?void 0:y.projectSiteStoreId))),Z=()=>{f(!1),n([]),a([]),n([])},W=e=>{x(!1),f(!0),u(e)},X=e=>{Q(e),G(!0),null!==e&&void 0!==e&&e.material_serial_numbers||F([])};(0,o.useEffect)((()=>{null!==B&&void 0!==B&&B.material_serial_numbers&&F(null===B||void 0===B?void 0:B.material_serial_numbers)}),[B]);const{transactionMaterialList:K}=(0,v.t)(),{materials:ee}=(0,o.useMemo)((()=>{var e;return{materials:(null===K||void 0===K?void 0:K.stocksObject)||[],count:(null===K||void 0===K||null===(e=K.stocksObject)||void 0===e?void 0:e.count)||0}}),[K]);(0,o.useEffect)((()=>{ee&&ee.length>0&&a((e=>{const t=[];return e&&e.map((e=>{t.push({id:e.id,name:e.name,isSerialNumber:e.is_serial_number,quantity:e.quantity,tax:e.tax,value:e.value,uomName:e.uom_name,uomId:e.uom_id,rate:parseFloat(e.rate).toFixed(2),code:e.code,hsnCode:e.hsn_code,uom:e.uom})})),0===t.length&&(0,_.A)("No Material Available",{variant:"error"}),t})(ee))}),[ee]);const te=(0,P.A)({dataObject:K,key:"stocksObject"});return(0,o.useEffect)((()=>{Array.isArray(te)&&0===te.length&&(Z(),(0,_.A)("There are no available materials for your selected combination",{variant:"error"}))}),[te]),(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z,{disableAll:p&&!(null===t||void 0===t||!t.length),onClick:Z,saveData:e=>{e&&e.projectId&&e.projectSiteStoreId&&(J((0,g.UjX)({project:e.projectId,store:e.projectSiteStoreId})),h(e),S(!0))},onSelectedStoreLocation:e=>{var t;null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.value&&I(R.filter((t=>t.id!==e.target.value)))},setLocations:e=>{U(e)}}),t&&p&&t.length>0&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(N,{materialData:t,onMaterailsInput:(e,a,o)=>{((e,a)=>{a&&(t.map((t=>{let o={};if(t.id===e.materialId){o={...t,...e},o.uomId=null===t||void 0===t?void 0:t.uomId,T((e=>[...e,o.fromStoreLocationId]));const r=i.findIndex((t=>t.id===a&&(null===e||void 0===e?void 0:e.fromStoreLocationId)===(null===t||void 0===t?void 0:t.fromStoreLocationId)));if(r>=0){const e=structuredClone(i);e[r]=o,n(e)}else n(i.concat(o))}})),f(!1))})(e,a);const r=L;r[o]||(r[o]={}),r[o]=e,k(r)},storeLocationData:Y,view:m,hideTaxDetails:!0,update:j,showData:d,formData:y,selectedLocations:C,selectedItems:L}),(!i||0===i.length)&&(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(l.Ay,{container:!0,spacing:4,children:(0,q.jsx)(l.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px",mt:3},children:(0,q.jsx)(s.A,{onClick:Z,size:"small",variant:"outlined",color:"primary",children:"Back"})})})})]}),i&&i.length>0&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(E.default,{title:"Material Transfer Location To Location Request",hideHeader:!0,hidePagination:!0,data:(ae=i,ae&&ae.length>0&&ae.map(((e,t)=>({...e,actions:(0,q.jsx)($,{values:e,onEdit:W,onDelete:e=>{((e,t)=>{if(i){const a=i.filter(((t,a)=>a!==e));let o=a.map((e=>e.fromStoreLocationId));n(a),T(o),delete L[t.materialId+t.fromStoreLocationId]}})(t,e)},onView:X})})))),count:i.length,columns:H,hideActions:!0}),V&&B&&w&&(0,q.jsx)(M.default,{open:V,onClose:()=>{G(!1)},serialNumberData:w}),(0,q.jsx)(A.Op,{children:(0,q.jsx)(l.Ay,{container:!0,spacing:4,children:(0,q.jsxs)(l.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px",mt:3},children:[(0,q.jsx)(s.A,{onClick:Z,size:"small",variant:"outlined",color:"primary",children:"Back"}),(0,q.jsx)(s.A,{disabled:j,onClick:async()=>{var t,a,o,r;const n=(e=>{const{transactionTypeId:t,projectId:a,organizationId:o,projectSiteStoreId:r,remarks:n}=e;return{transactionTypeId:t,remarks:n,stock_ledgers:(null===i||void 0===i?void 0:i.map((i=>{const l=i.quantity*i.rate;return{transactionTypeId:t,projectId:a,organizationId:o,storeId:r,storeLocationId:null===e||void 0===e?void 0:e.toOrganizationStoreLocationId,fromStoreLocationId:null===i||void 0===i?void 0:i.fromStoreLocationId,materialId:i.materialId,uomId:i.uomId,quantity:i.quantity,rate:i.rate,value:l,tax:i.tax,remarks:n,serialNumber:i.material_serial_numbers}})))||[]}})(y);if(0===(null===(t=n.stock_ledgers)||void 0===t?void 0:t.length))return void(0,_.A)("Please have atleast one material with some quantity",{variant:"error"});if((0,O.Rh)(null===n||void 0===n?void 0:n.stock_ledgers,"fromStoreLocationId"))return;const l=await(0,D.default)("/location-to-other-location",{method:"POST",body:n,timeoutOverride:12e4});var s;if(!l.success)return void(0,_.A)((null===l||void 0===l||null===(s=l.error)||void 0===s?void 0:s.message)||"Operation failed. Please try again!",{variant:"error"});const d=null!==(a=null===(o=l.data)||void 0===o?void 0:o.data)&&void 0!==a?a:{},u=d.referenceDocumentNumber||(null===(r=d[0])||void 0===r?void 0:r.referenceDocumentNumber);(0,_.A)(u?`Request created with reference number: ${u}`:"Request created successfully!",{variant:"success",autoHideDuration:1e4}),e("/ltl-receipt")},size:"small",variant:"contained",color:"primary",children:"Submit"})]})})})]})]});var ae}},88848:(e,t,a)=>{a.d(t,{$:()=>i});var o=a(9950),r=a(27081);const i=()=>{const[e,t]=(0,o.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[a,i]=(0,o.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[n,l]=(0,o.useState)({masterObject:[],error:"",loading:!0}),[s,d]=(0,o.useState)({masterObject:[],error:"",loading:!0}),[u,c]=(0,o.useState)({masterObject:[],error:"",loading:!0}),[m,v]=(0,o.useState)({currencyObject:[],error:"",loading:!0}),[x,p]=(0,o.useState)({gstStatusObject:[],error:"",loading:!0}),[S,j]=(0,o.useState)({paymentTermObject:[],error:"",loading:!0}),[f,g]=(0,o.useState)({incotermsObject:[],error:"",loading:!0}),[y,h]=(0,o.useState)({titleObject:[],error:"",loading:!0}),[b,I]=(0,o.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),A=(0,r.d4)((e=>e.masterMakerLov||{})),L=(0,r.d4)((e=>e.masterMakerLovList||{})),k=(0,r.d4)((e=>e.lovsForMasterName||[])),O=(0,r.d4)((e=>e.lovsForMasterNameSecond||[])),q=(0,r.d4)((e=>e.lovsForMasterNameThird||[])),z=(0,r.d4)((e=>e.currency||[])),C=(0,r.d4)((e=>e.gstStatus||[])),M=(0,r.d4)((e=>e.paymentTerm||[])),T=(0,r.d4)((e=>e.incoterms||[])),w=(0,r.d4)((e=>e.title||[])),F=(0,r.d4)((e=>e.masterMakerLovHistory||{}));return(0,o.useEffect)((()=>{t((e=>({...e,...A})))}),[A]),(0,o.useEffect)((()=>{i((e=>({...e,...L})))}),[L]),(0,o.useEffect)((()=>{l((e=>({...e,...k})))}),[k]),(0,o.useEffect)((()=>{d((e=>({...e,...O})))}),[O]),(0,o.useEffect)((()=>{c((e=>({...e,...q})))}),[q]),(0,o.useEffect)((()=>{v((e=>({...e,...z})))}),[z]),(0,o.useEffect)((()=>{p((e=>({...e,...C})))}),[C]),(0,o.useEffect)((()=>{j((e=>({...e,...M})))}),[M]),(0,o.useEffect)((()=>{g((e=>({...e,...T})))}),[T]),(0,o.useEffect)((()=>{h((e=>({...e,...w})))}),[w]),(0,o.useEffect)((()=>{I((e=>({...e,...F})))}),[F]),{masterMakerLovs:e,masterMakerLovsList:a,masterMakerOrgType:n,masterMakerOrgTypeSecond:s,masterMakerOrgTypeThird:u,masterMakerCurrency:m,masterMakerGstStatus:x,masterMakerIncoterms:f,masterMakerPaymentTerm:S,masterMakerLovHistory:b,masterMakerTitle:y}}},62375:(e,t,a)=>{var o=a(24994);t.A=void 0;var r=o(a(79526)),i=a(44414);t.A=(0,r.default)((0,i.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);