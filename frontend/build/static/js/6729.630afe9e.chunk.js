"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[6729],{14563:(e,t,i)=>{i.r(t),i.d(t,{default:()=>A});var n=i(57560),r=i(4139),a=i(87233),l=i(64661),o=i(14341),s=i(67535),d=i(9950),c=i(86898),u=i(9912),m=i(25411),x=i(61977),v=i(87125),h=i(44414);const p=(0,d.memo)((e=>{let{index:t,style:i,data:n}=e;const{segments:r,handleOnChange:a,onPaste:l}=n,s=r[t],[c,u]=(0,d.useState)("");(0,d.useEffect)((()=>{u(s)}),[s]);return(0,h.jsxs)(v.tf,{index:t,style:i,children:[(0,h.jsx)(v.VW,{width:"20%",children:t+1}),(0,h.jsx)(v.VW,{width:"80%",children:(0,h.jsx)(o.A,{type:"text",value:c,onChange:e=>{let{value:i}=e.target;i=i.replace(/[^\w]/gi,"").toUpperCase(),u(i),a(i,t)},onPaste:e=>{e.preventDefault();const i=e.clipboardData.getData("Text");if(i.includes("\n"))l(e,t);else{let n=e.target.value+i;n=n.replace(/[^\w]/gi,"").toUpperCase(),u(n),a(n,t)}}})})]},t)}));var y=i(22759),g=i(14351);const f="ENTER_SERIAL_NUMBERS",j="GENERATE_SERIAL_NUMBERS",A=e=>{let{handleCloseSerial:t,closeCss:i,quantity:A,serialNumbers:b,setSerialNumbers:S,hideAuto:I=!1}=e;const[N,C]=(0,d.useState)(f),[w,F]=(0,d.useState)(""),[_,L]=(0,d.useState)(""),[k,D]=(0,d.useState)(""),[R,E]=(0,d.useState)(!1),[T,q]=(0,d.useState)([]),[z,M]=(0,d.useState)([]),O=(e,t)=>{const i=T;i[t]=e,q(i)},W=(e,t)=>{const i=e.clipboardData.getData("text/plain"),n=T.slice();for(let a=0,l=i.split("\n");a<A&&a<l.length&&a+t<T.length;a++){var r;let e=null===(r=l[a])||void 0===r?void 0:r.replace(/[^\w]/gi,"").toUpperCase().trim();n[a+t]=e}q(n)},P=(e,t,i)=>{if(i){const n=parseInt(i)+parseInt(A),r=Array(n-i).fill().map(((n,r)=>`${e}${r+parseInt(i)}${t}`));M(r)}};return(0,d.useEffect)((()=>{null!==b&&void 0!==b&&b.length?q(b):q(Array(parseInt(A)).fill(""))}),[A,b]),(0,h.jsxs)(g.A,{sx:{width:520},modal:!0,darkTitle:!0,content:!1,children:[(0,h.jsx)(r.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mt:-1},children:(0,h.jsx)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",marginRight:1},children:(0,h.jsx)(n.A,{onClick:t,style:i})})}),(0,h.jsxs)(r.Ay,{container:!0,spacing:2,alignItems:"center",sx:{mt:0},children:[(0,h.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",padding:"0px"},children:[(0,h.jsxs)(c.A,{children:[N===f&&(0,h.jsx)(c.A,{position:"absolute",marginLeft:"-61px",children:(0,h.jsx)(x.A,{segments:T,setSegments:q})}),(0,h.jsx)(a.A,{color:N===f?"#FFFFFF":"#111111",onClick:()=>{C(f)},style:{cursor:"pointer",fontWeight:700,padding:10,background:N===f?"#1677FF":"#FFFFFF"},children:"Multiple Serial Number"})]}),!I&&(0,h.jsx)(a.A,{color:N===j?"#FFFFFF":"#111111",onClick:()=>{C(j)},style:{cursor:"pointer",fontWeight:700,padding:10,background:N===j?"#1677FF":"#FFFFFF"},children:"With Serial Number"})]}),N===f&&(0,h.jsx)(r.Ay,{item:!0,xs:12,m:5,mt:1,style:{height:400,display:"flex",flexDirection:"column"},children:(0,h.jsxs)(l.A,{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,h.jsxs)(c.A,{display:"flex",children:[(0,h.jsx)(v.A3,{width:"20%",children:"S.No."}),(0,h.jsx)(v.A3,{width:"80%",children:"Serial Number"})]}),(0,h.jsx)(c.A,{style:{flex:1,display:"flex"},children:(0,h.jsx)(m.Ay,{children:e=>{let{height:t,width:i}=e;return(0,h.jsx)(u.Y1,{height:t,width:i,itemCount:T.length,itemSize:60,itemData:{segments:T,handleOnChange:O,onPaste:W},overscanCount:5,children:p})}})})]})}),N===j&&!I&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(r.Ay,{container:!0,xs:12,m:1,ml:6,mr:6,children:[(0,h.jsx)(r.Ay,{item:!0,xs:2,m:1,children:"Prefix"}),(0,h.jsx)(r.Ay,{item:!0,xs:3,mr:3,children:(0,h.jsx)(o.A,{name:"prefix",value:w,onChange:e=>{if(e.target.value){let t=e.target.value;t=t.replace(/[^\w]/gi,"").toUpperCase(),F(t),P(t,_,k)}else F(""),P("",_,k)}})}),(0,h.jsx)(r.Ay,{item:!0,xs:2,m:1,children:"Suffix"}),(0,h.jsx)(r.Ay,{item:!0,xs:3,children:(0,h.jsx)(o.A,{name:"suffix",value:_,onChange:e=>{if(e.target.value){let t=e.target.value;t=t.replace(/[^\w]/gi,"").toUpperCase(),L(t),P(w,t,k)}else L(""),P(w,"",k)}})})]}),(0,h.jsxs)(r.Ay,{container:!0,xs:12,ml:6,mr:7,pr:.5,children:[(0,h.jsx)(r.Ay,{item:!0,xs:3,p:1,children:"Range From"}),(0,h.jsx)(r.Ay,{item:!0,xs:9,mb:1,children:(0,h.jsx)(o.A,{fullWidth:!0,type:"text",name:"rangeFrom",value:k,onChange:e=>{(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&(D(e.target.value),P(w,_,e.target.value),""===e.target.value&&M([]))}})}),(0,h.jsx)(r.Ay,{item:!0,xs:3,p:1,children:"Range To"}),(0,h.jsx)(r.Ay,{item:!0,xs:9,children:(0,h.jsx)(o.A,{fullWidth:!0,name:"rangeTo",type:"number",value:parseInt(k)+parseInt(A)-1,disabled:!0})})]}),(0,h.jsx)(r.Ay,{item:!0,xs:12,mx:5,mt:1,mb:2,style:{height:300,display:"flex",flexDirection:"column"},children:(0,h.jsxs)(l.A,{style:{flex:1,display:"flex",flexDirection:"column"},children:[(0,h.jsxs)(c.A,{display:"flex",style:{height:45},children:[(0,h.jsx)(v.A3,{width:"20%",children:"S.No."}),(0,h.jsx)(v.A3,{width:"80%",children:"Serial Number"})]}),(0,h.jsx)(c.A,{style:{flex:1,display:"flex"},children:(0,h.jsx)(m.Ay,{children:e=>{let{height:t,width:i}=e;return(0,h.jsx)(u.Y1,{height:t,width:i,itemCount:z.length,itemSize:45,itemData:{originalData:z},overscanCount:5,children:y.Ay})}})})]})})]})]}),R&&(0,h.jsx)(a.A,{m:5,mt:-4,color:"red",children:"Enter valid serial numbers"}),(0,h.jsx)(r.Ay,{item:!0,xs:12,mb:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,h.jsx)(s.A,{size:"small",onClick:()=>{let e=[];e=N===j?z:T.filter((e=>""!==e));const i=e.length!==parseInt(A);E(i),i||(S(e),t(!0))},variant:"contained",color:"primary",children:"Save"})})]})}},16729:(e,t,i)=>{i.r(t),i.d(t,{default:()=>O});var n=i(9950),r=i(27081),a=i(36089),l=i(53065),o=i(57073),s=i(12257),d=i(4139),c=i(74745),u=i(67535),m=i(87233),x=i(60666),v=i(9449),h=i(26473),p=i(28429),y=i(62375),g=i(29024),f=i(80415),j=i(88848),A=i(12952),b=i(65669),S=i(14563),I=i(96951),N=i(84601),C=i(14351),w=i(95615),F=i(52867),_=i(44414);const L={cursor:"pointer",fontSize:24},k=e=>{var t;let{onMaterailsInput:i,view:a,update:l,showData:o,toStoreLocationData:s}=e;const[c,p]=(0,n.useState)(!1),[y,f]=(0,n.useState)(""),[j,A]=(0,n.useState)(o&&o.quantity?null===o||void 0===o?void 0:o.quantity:null),[k,D]=(0,n.useState)([]),[R,E]=(0,n.useState)(!1),[T,q]=(0,n.useState)(!1),z=(0,r.wA)();(0,n.useEffect)((()=>{z((0,g._G1)())}),[z]),(0,n.useEffect)((()=>{p(!!a)}),[a,l]);const M=(0,v.mN)({resolver:(0,h.t)(x.Ik().shape({toStoreLocationId:N.A.toStoreLocationId})),defaultValues:{},mode:"all"}),{handleSubmit:O,setValue:W,reset:P,watch:V}=M,B=V("uom");(0,n.useEffect)((()=>{var e;(a||l)&&o&&(e=o,Object.entries(e).forEach((e=>{let[t,i]=e;"actions"!==t&&W(t,i),"uom"===t&&W(t,i.name)})),A(o.quantity))}),[a,l,o,P,W]);const U=function(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(0,_.jsx)(I.o3,{name:e,type:i,label:t,..."function"===typeof r&&{handleChange:r},InputLabelProps:{shrink:l},...(a||c)&&{disabled:!0},...n&&{required:!0}})},$=()=>{E(!1)},H=["missing","consumed","billing","installed","installer","old","service-center","service center"];return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(C.A,{sx:{mb:2,pb:4},children:(0,_.jsxs)(I.Op,{methods:M,children:[(0,_.jsxs)(d.Ay,{container:!0,spacing:2,sx:{mt:2},children:[(0,_.jsx)(d.Ay,{item:!0,md:4,children:U("material.code","Code","text",!0,void 0,!0)}),(0,_.jsx)(d.Ay,{item:!0,md:4,children:U("material.name","Material","text",!0,void 0,!0)}),(0,_.jsx)(d.Ay,{item:!0,md:4,children:(G="toStoreLocationId",Y="To Store Location",Q=s&&s.filter((e=>H.every((t=>!e.name.toLowerCase().includes(t))))),J=!0,(0,_.jsx)(I.eu,{name:G,label:Y,onChange:X,InputLabelProps:{shrink:!0},menus:Q,...c&&{disable:!0},...J&&{required:!0}}))}),(0,_.jsx)(d.Ay,{item:!0,md:2,children:U("quantity","Quantity",(0,F.VF)(B)?"text":"number",!0,void 0,!0)}),(0,_.jsx)(d.Ay,{item:!0,md:2,children:U("uom","UOM","text",!0,void 0,!0)}),(0,_.jsx)(d.Ay,{item:!0,md:2,style:{display:"none"},children:U("uomId","UOMId","text",!0)}),(0,_.jsx)(d.Ay,{item:!0,md:2,style:{display:"none"},children:U("rate","Rate","text",!0,void 0,!0)}),(0,_.jsx)(d.Ay,{item:!0,md:2,style:{display:"none"},children:U("value","Value","text",!0,void 0,!0)}),(0,_.jsxs)(d.Ay,{item:!0,md:1,sx:{textAlign:"center"},children:[(null===o||void 0===o||null===(t=o.material)||void 0===t?void 0:t.isSerialNumber)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.A,{mb:-1,children:"Serial No"})," ",(0,_.jsx)("br",{}),(0,_.jsx)(u.A,{size:"small",onClick:()=>{(e=>{let t=[];e&&e.length>0&&e.map((e=>{t.push("object"===typeof e?e.serialNumber:e)})),D(t)})(o.material_serial_numbers),q(!0)},variant:"contained",color:"primary",children:"View"})]}),y&&""!==y&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("br",{}),(0,_.jsx)(m.A,{color:"error",sx:{fontSize:12,marginTop:2},children:y})]})]}),(0,_.jsx)(d.Ay,{item:!0,xs:1,mt:3.5,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:!a&&(0,_.jsx)(u.A,{size:"small",onClick:O((e=>{var t;e.toLocation=(t=e.toStoreLocationId,s.filter((e=>e.id===t))[0]),e.quantity=e.quantity>0?e.quantity:"0",e.serialNumbers=JSON.stringify(e.material_serial_numbers),i(e,o.id),f(""),P()})),variant:"contained",color:"primary",children:l?"Update":"Add"})})]}),(0,_.jsx)(b.A,{open:R,onClose:$,"aria-labelledby":"modal-modal-title",children:(0,_.jsx)(S.default,{handleCloseSerial:$,closeCss:L,quantity:j,setSerialNumbers:()=>{}})}),T&&(0,_.jsx)(w.default,{open:T,onClose:()=>{q(!1)},serialNumberData:k})]})})});var G,Y,Q,J,X};var D=i(99635),R=i(62054),E=i(71826),T=i(62472),q=i(52351);const z=e=>{var t;let{values:i,onEdit:n,index:r,onView:s}=e;return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(l.A,{title:"Edit",placement:"bottom",children:(0,_.jsx)(o.A,{color:"secondary",onClick:()=>n(i,r),children:(0,_.jsx)(a.A,{})})}),(null===i||void 0===i||null===(t=i.material)||void 0===t?void 0:t.isSerialNumber)&&(0,_.jsx)(l.A,{title:"View Serial Number",placement:"bottom",children:(0,_.jsx)(o.A,{color:"secondary",onClick:()=>s(i),children:(0,_.jsx)(y.A,{})})})]})},M=[{Header:"Actions",accessor:"actions"},{Header:"Name",accessor:"material.name"},{Header:"Code",accessor:"material.code"},{Header:"Quantity",accessor:"quantity"},{Header:"UOM",accessor:"uom.name"},{Header:"To Store Location",accessor:"toLocation.name"}],O=()=>{const[e,t]=(0,n.useState)([]),[i,a]=(0,n.useState)([]),[l,o]=(0,n.useState)(null),[y,b]=(0,n.useState)(!1),[S,L]=(0,n.useState)(!1),[O,W]=(0,n.useState)(!1),[P,V]=(0,n.useState)(f.j7.pageIndex),[B,U]=(0,n.useState)(f.j7.pageSize),[$,H]=(0,n.useState)(!1),[G,Y]=(0,n.useState)([]),[Q,J]=(0,n.useState)(),[X,Z]=(0,n.useState)(!1),[K,ee]=(0,n.useState)(),[te,ie]=(0,n.useState)(null),[ne,re]=(0,n.useState)(!1),[ae,le]=(0,n.useState)(null),[oe,se]=(0,n.useState)(""),de=(0,p.Zp)(),ce=(0,v.mN)({resolver:(0,h.t)(x.Ik().shape({projectId:N.A.project,vehicleNumber:N.A.vehicleNumberOptional,...!(0,F.g6)(K)&&{eWayBillDate:N.A.requiredWithLabel("E-Way Bill Date")}})),defaultValues:{},mode:"all"}),{handleSubmit:ue,setValue:me,watch:xe}=ce,ve=(0,r.wA)();(0,n.useEffect)((()=>{if(!Q)return;const e=structuredClone(Q);e&&e.map((e=>e.quantity=e.quantity<0?-e.quantity:e.quantity)),t(e),a(e)}),[Q]);const he=Q&&Q[0];(0,n.useEffect)((()=>{var e,t,i;Q&&he&&(i=he,Object.entries(i).forEach((e=>{let[t,i]=e;me(t,"remarks"===t?"":i)})),me("supervisorName",null===he||void 0===he||null===(e=he.contractor_employee)||void 0===e?void 0:e.name),me("contractorName",((e,t)=>{let i=null;var n,r,a,l,o,s,d;return e&&null!==e&&void 0!==e&&e.organization&&(i=null!==e&&void 0!==e&&null!==(n=e.organization)&&void 0!==n&&n.parentId&&null!==(null===e||void 0===e||null===(r=e.organization)||void 0===r?void 0:r.parentId)?"name"===t?null===e||void 0===e||null===(o=e.organization)||void 0===o||null===(s=o.parent)||void 0===s?void 0:s.name:null===e||void 0===e||null===(d=e.organization)||void 0===d?void 0:d.parentId:"name"===t?null===e||void 0===e||null===(a=e.organization)||void 0===a?void 0:a.name:null===e||void 0===e||null===(l=e.organization)||void 0===l?void 0:l.id),i})(null===he||void 0===he?void 0:he.organization_store,"name")),me("vehicleNumber",null===he||void 0===he||null===(t=he.stock_ledger_detail)||void 0===t?void 0:t.vehicleNumber))}),[Q,he,me]);const{companyStoreLocations:pe}=(0,A.V)(),{toStoreLocationData:ye}=(0,n.useMemo)((()=>{var e;return{toStoreLocationData:(null===pe||void 0===pe||null===(e=pe.companyStoreLocationsObject)||void 0===e?void 0:e.rows)||[],isLoading:pe.loading||!1}}),[pe]);(0,n.useEffect)((()=>{const t=ye&&ye.filter((t=>{var i,n;return t.organizationStoreId===(null===(i=e[0])||void 0===i||null===(n=i.other_store)||void 0===n?void 0:n.id)}));var i;Y(t),e&&(i=e,Object.entries(i).forEach((e=>{let[t,i]=e;me(t,i)})))}),[e,ye,me]);const{masterMakerLovs:ge}=(0,j.$)(),fe=ge.masterMakerLovsObject.rows,je=xe("eWayBillNumber");(0,n.useEffect)((()=>{ee(je)}),[je]);const Ae=(e,t)=>{b(!1),L(!0);const n={...e,material_serial_numbers:null===e||void 0===e?void 0:e.material_serial_numbers};H(n),o(i[t].quantity)},be=e=>{le(e),re(!0),null!==e&&void 0!==e&&e.material_serial_numbers||ie([])},Se=e=>{let t=[];return e&&e.length>0&&e.map((e=>{t.push("object"===typeof e?e.serialNumber:e)})),t};(0,n.useEffect)((()=>{if(null!==ae&&void 0!==ae&&ae.material_serial_numbers){let e=Se(null===ae||void 0===ae?void 0:ae.material_serial_numbers);ie(e)}}),[ae]);const Ie=(0,F.x)(fe,"RETURNMRN"),Ne=(0,F.x)(fe,"CANCELMRN"),Ce=e=>{const t=[];return e&&e.length>0&&e.map((e=>t.push(e.id))),t},we=function(e,t,i,n,r,a){let l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return(0,_.jsx)(s.A,{spacing:1,children:(0,_.jsx)(I.o3,{name:e,type:i,label:t,InputLabelProps:{shrink:l},disabled:r,..."function"===typeof a&&{handleChange:a},...n&&{required:!0},...y?{disable:!0}:S?{disable:!1}:{}})})},Fe=(0,F.x)(fe,"COMPANY");(0,n.useEffect)((()=>{Fe&&ve((0,g.Ru7)({organizationType:Fe}))}),[ve,Fe]),(0,n.useEffect)((()=>{ve((0,g._G1)()),ve((0,g.uiG)())}),[ve]);return(0,_.jsxs)(_.Fragment,{children:[X&&(0,_.jsx)(q.A,{}),(0,_.jsx)(I.Op,{methods:ce,onSubmit:ue((async t=>{Z(!0);const i=(t=>{var i,n;const r=[];return e.map((e=>({...e}))).map((e=>{var t,i,n,a,l,o,s,d,c;parseFloat(e.quantity)>0&&r.push({transactionTypeId:Ie,projectId:null===e||void 0===e?void 0:e.projectId,requestNumber:null===e||void 0===e?void 0:e.referenceDocumentNumber,organizationId:null!==e&&void 0!==e&&null!==(t=e.other_store)&&void 0!==t&&null!==(i=t.organization)&&void 0!==i&&i.parentId&&null!==(null===e||void 0===e||null===(n=e.other_store)||void 0===n||null===(a=n.organization)||void 0===a?void 0:a.parentId)?null===e||void 0===e||null===(l=e.other_store)||void 0===l||null===(o=l.organization)||void 0===o?void 0:o.parentId:null===e||void 0===e||null===(s=e.other_store)||void 0===s||null===(d=s.organization)||void 0===d?void 0:d.id,storeId:null===e||void 0===e||null===(c=e.other_store)||void 0===c?void 0:c.id,storeLocationId:null===e||void 0===e?void 0:e.toStoreLocationId,fromStoreLocationId:null===e||void 0===e?void 0:e.storeLocationId,materialId:null===e||void 0===e?void 0:e.materialId,uomId:null===e||void 0===e?void 0:e.uomId,quantity:parseFloat(null===e||void 0===e?void 0:e.quantity),rate:null===e||void 0===e?void 0:e.rate,value:null===e||void 0===e?void 0:e.value,tax:null===e||void 0===e?void 0:e.tax,serialNumber:Se(null===e||void 0===e?void 0:e.material_serial_numbers)})})),{transactionTypeId:Ie,requestNumber:null===(i=e[0])||void 0===i?void 0:i.referenceDocumentNumber,mrnIds:Ce(e),fromStoreId:null===(n=e[0])||void 0===n?void 0:n.storeId,vehicleNumber:t.vehicleNumber,eWayBillNumber:t.eWayBillNumber,eWayBillDate:t.eWayBillDate,remarks:t.remarks,...t.placeOfSupply&&{placeOfSupply:t.placeOfSupply},stock_ledgers:r}})(t);if(!i.stock_ledgers||0===i.stock_ledgers.length)return(0,R.A)("Enter atleast 1 material with some quantity!",{variant:"error"}),void Z(!1);if("yes"===t.accept&&(0,F.Rh)(i.stock_ledgers,"storeLocationId"))Z(!1);else{if(""===t.accept)return se("Accept/Reject is required"),void Z(!1);if(se(""),"yes"===t.accept){var n,r,a,l;const e=await(0,E.default)("/returnmrn-transaction-create",{method:"POST",body:i,timeoutOverride:12e4});var o;if(!e.success)return(0,R.A)((null===e||void 0===e||null===(o=e.error)||void 0===o?void 0:o.message)||"Operation failed. Please try again!",{variant:"error"}),void Z(!1);const t=null!==(n=null===(r=e.data)||void 0===r?void 0:r.data)&&void 0!==n?n:{},s=t.referenceDocumentNumber||(null===(a=t[0])||void 0===a?void 0:a.referenceDocumentNumber),d=null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.referenceDocNo;(0,R.A)(s?`Transaction created with reference number: ${s}`:d&&`Transaction created with reference numbers ${d.MRN} and ${d.RETURNMRN}`||"Transaction created successfully!",{variant:"success",autoHideDuration:1e4}),Z(!1),de("/return-mrn-receipt")}else{var s,d,c,u;let t=(t=>{var i,n;const r=[];return t.map((e=>{r.push({transactionTypeId:Ne,organizationId:e.organizationId,projectId:e.projectId,requestNumber:e.referenceDocumentNumber,storeId:e.storeId,storeLocationId:e.storeLocationId,otherStoreId:e.otherStoreId,otherStoreLocationId:e.otherStoreLocationId,materialId:e.materialId,uomId:e.uomId,quantity:e.quantity,rate:e.rate,value:e.value,tax:e.tax,serialNumber:Se(e.material_serial_numbers)||[]})})),{transactionTypeId:Ne,mrnLedgerIds:Ce(e),mrnLedgerDetailId:null===(i=e[0])||void 0===i||null===(n=i.stock_ledger_detail)||void 0===n?void 0:n.id,stock_ledgers:r}})(e);const i=await(0,E.default)("/cancel-mrn",{method:"POST",body:t,timeoutOverride:12e4});var m;if(!i.success)return(0,R.A)((null===i||void 0===i||null===(m=i.error)||void 0===m?void 0:m.message)||"Operation failed. Please try again!",{variant:"error"}),void Z(!1);const n=null!==(s=null===(d=i.data)||void 0===d?void 0:d.data)&&void 0!==s?s:{},r=n.referenceDocumentNumber||(null===(c=n[0])||void 0===c?void 0:c.referenceDocumentNumber),a=null===i||void 0===i||null===(u=i.data)||void 0===u?void 0:u.referenceDocNo;(0,R.A)(r?`Transaction created with reference number: ${r}`:a&&`Transaction created with reference numbers ${a.MRN} and ${a.RETURNMRN}`||"Transaction created successfully!",{variant:"success",autoHideDuration:1e4}),Z(!1),de("/stock-ledger")}}})),children:(0,_.jsxs)(C.A,{title:"Return MRN (Return Material Return Note)",sx:{mb:2},children:[(0,_.jsx)(T.A,{fromStoreLabel:"Company Store",type:"stockLedger",fromStoreType:"COMPANY",approvedOnly:!0,transactionType:"MRN",disableAll:!(null===Q||void 0===Q||!Q.length),setReqData:J,getFromOtherStore:!0,withSerial:!0}),e&&e.length>0&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(d.Ay,{container:!0,sx:{mt:3,mb:3},children:(0,_.jsx)(d.Ay,{item:!0,md:12,xl:12,children:(0,_.jsx)(c.A,{})})}),(0,_.jsxs)(d.Ay,{container:!0,spacing:4,alignItems:"center",sx:{mb:2},children:[(0,_.jsx)(d.Ay,{item:!0,md:3,xl:2,children:we("contractorName","Contractor","text",!1,!0)}),(0,_.jsx)(d.Ay,{item:!0,md:3,xl:2,children:we("eWayBillNumber","E-Way Bill Number","text",!1)}),(0,_.jsx)(d.Ay,{item:!0,md:3,xl:2,children:we("eWayBillDate","E-Way Bill Date","date",!1,(0,F.g6)(K))}),(0,_.jsx)(d.Ay,{item:!0,md:3,xl:2,children:we("vehicleNumber","Vehicle Number","text",!1)}),(0,_.jsx)(d.Ay,{item:!0,xs:12,md:6,xl:6,children:we("remarks","Remarks","text",!1)})]})]}),e&&e.length>0&&(0,_.jsxs)(_.Fragment,{children:[(y||S)&&(0,_.jsx)(k,{toStoreLocationData:G,onMaterailsInput:i=>{const n=[];e.map((e=>{if(i.id===e.id){let t=e.uom;(e=i).uom=t}n.push(e)})),L(!1),t(n)},maxQuantity:l,view:y,update:S,showData:$}),(0,_.jsx)(D.default,{title:"MRN",hideHeader:!0,hidePagination:!0,data:(_e=e,_e.map((e=>e&&e.serialNumbers?{...e,serialNumbers:JSON.stringify(e.serialNumbers)}:{...e})).map(((e,t)=>({...e,actions:(0,_.jsx)(z,{values:e,index:t,onEdit:Ae,onView:be})})))),count:e.length,columns:M,hideActions:!0,setPageIndex:V,setPageSize:U,pageIndex:P,pageSize:B}),ne&&ae&&te&&(0,_.jsx)(w.default,{open:ne,onClose:()=>{re(!1)},serialNumberData:te}),(0,_.jsx)(d.Ay,{item:!0,md:12,xl:2,sx:{mt:4},children:(0,_.jsxs)(d.Ay,{container:!0,sx:{display:"flex",justifyContent:"flex-end",gap:"20px"},children:[(0,_.jsx)(d.Ay,{item:!0,xs:2.5,sm:1.2,lg:.65,sx:{mt:4.5},children:(0,_.jsx)(u.A,{onClick:()=>{W(!O),b(!1),L(!1),t([]),J(null)},size:"small",variant:"outlined",color:"primary",children:"Back"})}),(0,_.jsxs)(d.Ay,{item:!0,xs:4.2,sm:2.2,lg:1.5,children:[(0,_.jsx)(I.eu,{name:"accept",label:"Accept/Reject",InputLabelProps:{shrink:!0},menus:[{id:"yes",name:"Accept"},{id:"no",name:"Reject"}],required:!0}),oe&&""!==oe&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("br",{}),(0,_.jsx)(m.A,{color:"error",sx:{fontSize:12,marginTop:2},children:oe})]})]}),(0,_.jsx)(d.Ay,{item:!0,xs:2,sm:2,lg:.7,sx:{mt:4.5},children:(0,_.jsx)(u.A,{disabled:S||X,size:"small",type:"submit",variant:"contained",color:"primary",children:"Submit"})})]})})]})]})})]});var _e}},62375:(e,t,i)=>{var n=i(24994);t.A=void 0;var r=n(i(79526)),a=i(44414);t.A=(0,r.default)((0,a.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},64661:(e,t,i)=>{i.d(t,{A:()=>v});var n=i(58168),r=i(98587),a=i(9950),l=i(72004),o=i(88465),s=i(18463),d=i(59254),c=i(86957),u=i(44414);const m=["className","component"],x=(0,d.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),v=a.forwardRef((function(e,t){const i=(0,s.b)({props:e,name:"MuiTableContainer"}),{className:a,component:d="div"}=i,v=(0,r.A)(i,m),h=(0,n.A)({},i,{component:d}),p=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},c.I,t)})(h);return(0,u.jsx)(x,(0,n.A)({ref:t,as:d,className:(0,l.A)(p.root,a),ownerState:h},v))}))},86957:(e,t,i)=>{i.d(t,{A:()=>l,I:()=>a});var n=i(1763),r=i(423);function a(e){return(0,r.Ay)("MuiTableContainer",e)}const l=(0,n.A)("MuiTableContainer",["root"])}}]);