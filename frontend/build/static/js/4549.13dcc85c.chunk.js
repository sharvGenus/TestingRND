"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[4549],{88848:(e,i,l)=>{l.d(i,{$:()=>n});var t=l(9950),a=l(27081);const n=()=>{const[e,i]=(0,t.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[l,n]=(0,t.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[r,d]=(0,t.useState)({masterObject:[],error:"",loading:!0}),[o,s]=(0,t.useState)({masterObject:[],error:"",loading:!0}),[u,m]=(0,t.useState)({masterObject:[],error:"",loading:!0}),[c,v]=(0,t.useState)({currencyObject:[],error:"",loading:!0}),[p,x]=(0,t.useState)({gstStatusObject:[],error:"",loading:!0}),[y,h]=(0,t.useState)({paymentTermObject:[],error:"",loading:!0}),[f,b]=(0,t.useState)({incotermsObject:[],error:"",loading:!0}),[A,j]=(0,t.useState)({titleObject:[],error:"",loading:!0}),[N,g]=(0,t.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),I=(0,a.d4)((e=>e.masterMakerLov||{})),C=(0,a.d4)((e=>e.masterMakerLovList||{})),q=(0,a.d4)((e=>e.lovsForMasterName||[])),S=(0,a.d4)((e=>e.lovsForMasterNameSecond||[])),E=(0,a.d4)((e=>e.lovsForMasterNameThird||[])),O=(0,a.d4)((e=>e.currency||[])),D=(0,a.d4)((e=>e.gstStatus||[])),k=(0,a.d4)((e=>e.paymentTerm||[])),B=(0,a.d4)((e=>e.incoterms||[])),w=(0,a.d4)((e=>e.title||[])),R=(0,a.d4)((e=>e.masterMakerLovHistory||{}));return(0,t.useEffect)((()=>{i((e=>({...e,...I})))}),[I]),(0,t.useEffect)((()=>{n((e=>({...e,...C})))}),[C]),(0,t.useEffect)((()=>{d((e=>({...e,...q})))}),[q]),(0,t.useEffect)((()=>{s((e=>({...e,...S})))}),[S]),(0,t.useEffect)((()=>{m((e=>({...e,...E})))}),[E]),(0,t.useEffect)((()=>{v((e=>({...e,...O})))}),[O]),(0,t.useEffect)((()=>{x((e=>({...e,...D})))}),[D]),(0,t.useEffect)((()=>{h((e=>({...e,...k})))}),[k]),(0,t.useEffect)((()=>{b((e=>({...e,...B})))}),[B]),(0,t.useEffect)((()=>{j((e=>({...e,...w})))}),[w]),(0,t.useEffect)((()=>{g((e=>({...e,...R})))}),[R]),{masterMakerLovs:e,masterMakerLovsList:l,masterMakerOrgType:r,masterMakerOrgTypeSecond:o,masterMakerOrgTypeThird:u,masterMakerCurrency:c,masterMakerGstStatus:p,masterMakerIncoterms:f,masterMakerPaymentTerm:y,masterMakerLovHistory:N,masterMakerTitle:A}}},23882:(e,i,l)=>{l.d(i,{j:()=>n});var t=l(9950),a=l(27081);const n=()=>{const[e,i]=(0,t.useState)({projectMasterMakerObject:{},error:"",loading:!0}),[l,n]=(0,t.useState)({masterMakerProjectsObject:[],error:"",loading:!0}),[r,d]=(0,t.useState)({projectMasterMakerHistoryObject:{},error:"",loading:!0}),o=(0,a.d4)((e=>e.projectMasterMaker||{})),s=(0,a.d4)((e=>e.masterMakerProjects||{})),u=(0,a.d4)((e=>e.projectMasterMakerHistory||{}));return(0,t.useEffect)((()=>{i((e=>({...e,...o})))}),[o]),(0,t.useEffect)((()=>{n((e=>({...e,...s})))}),[s]),(0,t.useEffect)((()=>{d((e=>({...e,...u})))}),[u]),{projectMasterMakers:e,masterMakerProjects:l,projectMasterMakerHistory:r}}},80733:(e,i,l)=>{l.d(i,{Y:()=>n});var t=l(9950),a=l(27081);const n=()=>{const[e,i]=(0,t.useState)({projectsObject:{},error:"",loading:!0}),[l,n]=(0,t.useState)({projectDetailsObject:{},error:"",loading:!0}),[r,d]=(0,t.useState)({projectsDropdownObject:[],error:"",loading:!0}),[o,s]=(0,t.useState)({projectsDropdownObject:[],error:"",loading:!0}),[u,m]=(0,t.useState)({projectsObject:[],error:"",loading:!0}),[c,v]=(0,t.useState)({projectsHistoryObject:{},error:"",loading:!0}),p=(0,a.d4)((e=>e.projects||{})),x=(0,a.d4)((e=>e.projectDetails||{})),y=(0,a.d4)((e=>e.projectsDropdown||[])),h=(0,a.d4)((e=>e.allProjectsDropdown||[])),f=(0,a.d4)((e=>e.projectsForRoleOrUser||[])),b=(0,a.d4)((e=>e.projectsHistory||{}));return(0,t.useEffect)((()=>{i((e=>({...e,...p})))}),[p]),(0,t.useEffect)((()=>{n((e=>({...e,...x})))}),[x]),(0,t.useEffect)((()=>{d((e=>({...e,...y})))}),[y]),(0,t.useEffect)((()=>{s((e=>({...e,...h})))}),[h]),(0,t.useEffect)((()=>{m((e=>({...e,...f})))}),[f]),(0,t.useEffect)((()=>{v((e=>({...e,...b})))}),[b]),{projects:e,projectsDropdown:r,allProjectsDropdown:o,projectsHistory:c,projectsGovernForRoleOrUser:u,projectDetails:l}}},97067:(e,i,l)=>{l.r(i),l.d(i,{default:()=>C});var t=l(9950),a=l(14857),n=l(2683),r=l(4139),d=l(87233),o=l(67535),s=l(74745),u=l(9449),m=l(27081),c=l(60666),v=l(26473),p=l(29024),x=l(96951),y=l(10447),h=l(99635),f=l(64499),b=l(71826),A=l(62054),j=l(84601),N=l(23882),g=l(44414);const I=e=>{const{setInventoryArray:i,columnData:l}=e,t=(0,u.mN)({defaultValues:{},mode:"all"}),{handleSubmit:a}=t;return(0,g.jsx)(x.Op,{methods:t,onSubmit:a((async e=>{e.capitalize&&!e.serialNumberId||!e.capitalize&&e.serialNumberId||e.quantity&&!e.nonSerializeMaterialId||!e.quantity&&e.nonSerializeMaterialId||!e.capitalize&&!e.quantity?(0,A.A)("Please fill all required fields.",{variant:"error",autoHideDuration:3e3}):(e.isActive=!0,i((i=>[...i,{...e,index:i.length}])),t.reset())})),children:(0,g.jsx)(r.Ay,{container:!0,alignItems:"center",sx:{pl:4,pr:4},children:(0,g.jsxs)(r.Ay,{container:!0,spacing:2,mb:1,children:[(0,g.jsxs)(r.Ay,{container:!0,item:!0,spacing:2,md:6.5,children:[(0,g.jsx)(r.Ay,{item:!0,md:4,children:(0,g.jsx)(x.eu,{name:"serialNumberId",placeholder:"Serial Number Field",label:"Serial Number Field",menus:l,required:!0,disable:t.watch("nonSerializeMaterialId")||t.watch("quantity"),allowClear:!0})}),(0,g.jsx)(r.Ay,{item:!0,md:4,children:(0,g.jsx)(x.eu,{name:"capitalize",placeholder:"Capitalize",label:"Capitalize",menus:[{id:"true",name:"Yes"},{id:"false",name:"No"}],required:!0,disable:t.watch("nonSerializeMaterialId")||t.watch("quantity"),allowClear:!0})}),(0,g.jsx)(r.Ay,{item:!0,md:4,children:(0,g.jsx)(x.eu,{name:"brandName",placeholder:"Brand Field",label:"Brand Field",menus:l,disable:t.watch("nonSerializeMaterialId")||t.watch("quantity"),allowClear:!0})})]}),(0,g.jsx)(r.Ay,{item:!0,md:.5,sx:{display:"flex",justifyContent:"center",alignItem:"center",mt:4},children:(0,g.jsx)(d.A,{children:"OR"})}),(0,g.jsx)(r.Ay,{item:!0,md:3,children:(0,g.jsx)(x.eu,{name:"nonSerializeMaterialId",placeholder:"Non-Serial Material Field",label:"Non-Serial Material Field",menus:l,required:!0,disable:t.watch("serialNumberId")||t.watch("capitalize")||t.watch("brandName"),allowClear:!0})}),(0,g.jsx)(r.Ay,{item:!0,md:2,children:(0,g.jsx)(x.eu,{name:"quantity",placeholder:"Quantity Field",label:"Quantity Field",menus:l,required:!0,disable:t.watch("serialNumberId")||t.watch("capitalize")||t.watch("brandName"),allowClear:!0})}),(0,g.jsx)(r.Ay,{item:!0,md:12,sx:{display:"grid",justifyContent:"flex-end"},children:(0,g.jsx)(o.A,{variant:"contained",size:"small",color:"primary",type:"submit",children:"Add"})})]})})})},C=e=>{var i;let{formId:l,screen:C,setScreen:q,columnData:S,formHeaderData:E}=e;const O=(0,m.wA)(),D=(0,a.A)(),[k,B]=(0,t.useState)([]),[w,R]=(0,t.useState)(!1),[T,M]=(0,t.useState)(null),z=(0,u.mN)({resolver:(0,v.t)(c.Ik().shape({consumerName:j.A.other,kNumber:j.A.other,brandMasterId:j.A.other})),defaultValues:{},mode:"all"}),{handleSubmit:V,setValue:F}=z;(0,t.useEffect)((()=>(l&&O((0,p.u44)({formId:l,sortBy:"rank",sortOrder:"ASC"})),()=>{O(y.wF.actions.reset()),O(y.aQ.actions.reset())})),[O,l]),(0,t.useEffect)((()=>{null!==E&&void 0!==E&&E.projectId&&O((0,p.ZwA)({selectedProject:null===E||void 0===E?void 0:E.projectId}))}),[O,E]);const{masterMakerProjects:P}=(0,N.j)(),_=(null===P||void 0===P||null===(i=P.masterMakerProjectsObject)||void 0===i?void 0:i.rows)||[];(0,t.useEffect)((()=>{var e;if(null!==E&&void 0!==E&&null!==(e=E.properties)&&void 0!==e&&e.materialArray){var i;const e=null===(i=E.properties.materialArray)||void 0===i?void 0:i.map(((e,i)=>({...e,index:i})));B(e),F("brandMasterId",E.properties.brandMasterId),F("consumerName",E.properties.consumerName),F("kNumber",E.properties.kNumber)}}),[E,F]);const U=[{Header:"Serial Number",accessor:e=>{var i;return null===S||void 0===S||null===(i=S.find((i=>i.id==e.serialNumberId)))||void 0===i?void 0:i.name}},{Header:"Capitalize",accessor:e=>"true"===e.capitalize?"Yes":"false"===e.capitalize?"No":"-"},{Header:"Brand Name",accessor:e=>{var i;return null===S||void 0===S||null===(i=S.find((i=>i.id==e.brandName)))||void 0===i?void 0:i.name}},{Header:"Non-Serial Material",accessor:e=>{var i;return null===S||void 0===S||null===(i=S.find((i=>i.id==e.nonSerializeMaterialId)))||void 0===i?void 0:i.name}},{Header:"Quantity",accessor:e=>{var i;return null===S||void 0===S||null===(i=S.find((i=>i.id==e.quantity)))||void 0===i?void 0:i.name}}],H=(0,t.useMemo)((()=>k.filter((e=>null===e||void 0===e?void 0:e.isActive))),[k]);return(0,g.jsxs)(n.A,{sx:{maxHeight:"85vh",minHeight:"85vh",overflow:"auto",border:"1px solid",borderRadius:1,borderColor:D.palette.grey.A800,boxShadow:"inherit"},children:[(0,g.jsxs)(x.Op,{methods:z,onSubmit:V((async e=>{var i;e.formId=l,e.properties={projectId:null===E||void 0===E?void 0:E.projectId,installerId:"",brandMasterId:e.brandMasterId,consumerName:e.consumerName,kNumber:e.kNumber,materialArray:null===k||void 0===k||null===(i=k.filter((e=>e.isActive)))||void 0===i?void 0:i.map((e=>{let{brandName:i,...l}=e;return delete l.index,{...l,brandName:""===i?"null":i}}))};const t=await(0,b.default)("/form-update-data-mapping",{method:"PUT",body:e});t.success?((0,A.A)(t.data.message,{variant:"success",autoHideDuration:3e3}),q({...C,default:1,inventoryMapping:0})):(0,A.A)(t.error.message,{variant:"error",autoHideDuration:3e3})})),children:[(0,g.jsxs)(r.Ay,{sx:{position:"absolute",top:0,width:"100%",background:"white",zIndex:10,p:2,pb:0},children:[(0,g.jsx)(r.Ay,{container:!0,children:(0,g.jsxs)(r.Ay,{item:!0,md:12,sx:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsxs)(d.A,{variant:"h4",children:[null===E||void 0===E?void 0:E.name," > Inventory Mapping"]}),(0,g.jsxs)(r.Ay,{item:!0,sx:{display:"flex",gap:2},children:[(0,g.jsx)(o.A,{onClick:()=>q({...C,default:1,inventoryMapping:0}),size:"small",variant:"outlined",color:"primary",children:"Back"}),(0,g.jsx)(o.A,{size:"small",type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})}),(0,g.jsx)(s.A,{sx:{mt:2}})]}),(0,g.jsx)(r.Ay,{container:!0,sx:{pt:2,mt:5}}),(0,g.jsxs)(r.Ay,{container:!0,spacing:4,mt:1,mb:4,sx:{pl:4,pr:4},children:[(0,g.jsx)(r.Ay,{item:!0,md:3,children:(0,g.jsx)(x.eu,{name:"brandMasterId",placeholder:"Select Brand Master",label:"Select Brand Master",menus:_,required:!0,allowClear:!0})}),(0,g.jsx)(r.Ay,{item:!0,md:3,children:(0,g.jsx)(x.eu,{name:"consumerName",placeholder:"Consumer Name Field",label:"Consumer Name Field",menus:null===S||void 0===S?void 0:S.filter((e=>e.isRequired)),required:!0,allowClear:!0})}),(0,g.jsx)(r.Ay,{item:!0,md:3,children:(0,g.jsx)(x.eu,{name:"kNumber",placeholder:"K Number Field",label:"K Number Field",menus:null===S||void 0===S?void 0:S.filter((e=>e.isRequired)),required:!0,allowClear:!0})})]})]}),(0,g.jsx)(I,{setInventoryArray:B,columnData:S}),(0,g.jsx)(r.Ay,{sx:{pl:4,pr:4,pt:2,mb:4},children:(0,g.jsx)(h.default,{hidePagination:!0,hideHistoryIcon:!0,hideViewIcon:!0,hideEditIcon:!0,hideHeader:!0,miniAction:!0,hideEmptyTable:!0,data:H,columns:U,count:null===H||void 0===H?void 0:H.length,handleRowDelete:async e=>{M(e),R(!0)}})}),(0,g.jsx)(f.A,{open:w,handleClose:()=>R(!1),handleConfirm:()=>{const{index:e}=T,i=structuredClone(k);i[e].isActive=null,B(i.map(((e,i)=>({...e,index:i})))),R(!1)},title:"Delete Condition",message:"Are you sure you want to delete?",confirmBtnTitle:"Delete"})]})}},94549:(e,i,l)=>{l.r(i),l.d(i,{default:()=>he});var t=l(9950),a=l(12257),n=l(2683),r=l(4139),d=l(87233),o=l(67535),s=l(74745),u=l(96583),m=l(14857),c=l(9449),v=l(28429),p=l(42074),x=l(27081),y=l(60666),h=l(59767),f=l(72500),b=l(26473),A=l(5731),j=l(57357),N=l(83563),g=l(76300),I=l(29024),C=l(44414);function q(e){var i;const{onCallbackMethod:l,mode:a}=e,n=(0,x.wA)();(0,t.useEffect)((()=>{n((0,I.F34)())}),[n]);const{defaultFormAttributes:r}=(0,g.I)(),d=(null===r||void 0===r||null===(i=r.defaultFormAttributesObject)||void 0===i?void 0:i.rows)||[];return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)(A.A,{sx:{p:2},children:[(0,C.jsx)(N.A,{primary:"Attributes",primaryTypographyProps:{fontWeight:"bold"}}),(0,C.jsx)(s.A,{sx:{mt:1,mb:1.5}}),(0,C.jsx)(N.A,{sx:{pl:1,mb:1},primary:"Basics",primaryTypographyProps:{fontWeight:"bold"}}),d.slice(0,10).map((e=>(0,C.jsx)(j.A,{onClick:()=>{a&&"edit"!==a||l({default:e.name,mode:"create",defaultAttributeId:e.id})},sx:{padding:"4px 4px 4px 16px"},children:(0,C.jsx)(N.A,{primary:e.name,sx:{color:a&&"edit"!==a?"grey":"black"}})},e.id)))]}),(0,C.jsx)(s.A,{sx:{ml:1,mr:1}}),(0,C.jsxs)(A.A,{sx:{p:2},children:[(0,C.jsx)(N.A,{sx:{pl:1,mb:1},primary:"Advanced",primaryTypographyProps:{fontWeight:"bold"}}),d.slice(10).map((e=>(0,C.jsx)(j.A,{onClick:()=>{a&&"edit"!==a||l({default:e.name,mode:"create",defaultAttributeId:e.id})},sx:{padding:"4px 4px 4px 16px"},children:(0,C.jsx)(N.A,{primary:e.name,sx:{color:a&&"edit"!==a?"grey":"black"}})},e.id)))]})]})}var S=l(84601),E=l(96951);const O=e=>{var i,l,n,d;let{modalId:s,mode:u,item:m,isPublished:v,setOpen:p,attributesArray:x,setAttributesArray:h}=e;const f=function(e,i,l,t){var n,r;let d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,disabled:!!(v&&!u&&s&&m.id&&"columnName"==e||null!==m&&void 0!==m&&null!==(n=m.properties)&&void 0!==n&&n.approval&&("name"==e||"columnName"==e)||null!==m&&void 0!==m&&null!==(r=m.properties)&&void 0!==r&&r.verifyAttribute&&("name"==e||"columnName"==e)),label:i,placeholder:d,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),A.setValue(e,l.target.value),(!m.id||m.id&&!v)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();A.setValue("columnName",e),I("columnName")}x.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===m||void 0===m?void 0:m.columnName)))&&g(e,{message:i+" already exists"},{shouldFocus:!0})}})})},A=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:j,setValue:N,setError:g,clearErrors:I,formState:{errors:q}}=A;return(0,t.useEffect)((()=>{u||(N("fieldId",null===m||void 0===m?void 0:m.id),N("name",null===m||void 0===m?void 0:m.name),N("columnName",null===m||void 0===m?void 0:m.columnName),N("required",Boolean("true"===(null===m||void 0===m?void 0:m.isRequired)||!0===(null===m||void 0===m?void 0:m.isRequired))),N("unique",Boolean("true"===(null===m||void 0===m?void 0:m.isUnique)||!0===(null===m||void 0===m?void 0:m.isUnique))),Object.keys((null===m||void 0===m?void 0:m.properties)||{}).forEach((e=>{N(e,null===m||void 0===m?void 0:m.properties[e])})))}),[m,u,N]),(0,C.jsx)(E.Op,{methods:A,onSubmit:j((async e=>{e.type="Text",e.defaultAttributeId=s;const{name:i,defaultAttributeId:l,type:t,required:a,unique:n,columnName:r,mappingColumn:d,...o}=e,u={name:i,type:t,columnName:r,columnType:"text",mappingColumn:d,isRequired:a,isUnique:n,defaultAttributeId:l,properties:o};if(-1!==(null!==u&&void 0!==u&&u.columnName&&(null===u||void 0===u?void 0:u.columnName)!==(null===m||void 0===m?void 0:m.columnName)?x.findIndex((e=>e.columnName===(null===u||void 0===u?void 0:u.columnName))):-1))g("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var c;const e=null!==u&&void 0!==u&&null!==(c=u.properties)&&void 0!==c&&c.fieldId?x.findIndex((e=>{var i;return e.id===(null===u||void 0===u||null===(i=u.properties)||void 0===i?void 0:i.fieldId)})):null!==m&&void 0!==m&&m.name?x.findIndex((e=>e.name===(null===m||void 0===m?void 0:m.name))):-1;-1!==e?x[e]={...x[e],...u}:h([...x,u]),A.reset(),p(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[u?"Add":"Edit"," Text Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:f("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:f("defaultValue","Default Value","text",!1,"Enter Default Value")}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:f("minLength","Min Length","number",!1,"Enter Min Length")}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:f("maxLength","Max Length","number",!1,"Enter Max Length")}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===m||void 0===m?void 0:m.isRequired)||!0===(null===m||void 0===m?void 0:m.isRequired))})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"unique",label:"Unique",value:Boolean("true"===(null===m||void 0===m?void 0:m.isUnique)||!0===(null===m||void 0===m?void 0:m.isUnique))})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===m||void 0===m||null===(i=m.properties)||void 0===i?void 0:i.editable})})]}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"defaultHide",label:"Default Hide",value:null===m||void 0===m||null===(l=m.properties)||void 0===l?void 0:l.defaultHide})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"disableOnSearch",label:"Disable On Search",value:null===m||void 0===m||null===(n=m.properties)||void 0===n?void 0:n.disableOnSearch})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"isMaterial",label:"Material Field",value:null===m||void 0===m||null===(d=m.properties)||void 0===d?void 0:d.isMaterial})})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>p(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(q).length>0,children:u?"Save":"Update"})]})]})})},D=e=>{var i,l,n,d;let{modalId:s,mode:u,item:m,isPublished:v,setOpen:p,attributesArray:x,setAttributesArray:h}=e;const f=function(e,i,l,t){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,multiline:"payload"===e,topError:"payload"===e,label:i,disabled:!(!v||u||!s||!m.id||"columnName"!=e),placeholder:n,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),A.setValue(e,l.target.value),(!m.id||m.id&&!v)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();A.setValue("columnName",e),I("columnName")}if("payload"===e){var t;const e=null===(t=l.target.value)||void 0===t?void 0:t.replace(/\s*(?=\{|}|,|:)\s*/g,"").replace(/\s*(?<=\}|{|,|:)\s*/g,"");A.setValue("payload",e)}x.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===m||void 0===m?void 0:m.columnName)))&&g(e,{message:i+" already exists"},{shouldFocus:!0})}})})},A=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required,payload:y.Yj().test("is-valid-json-object","Invalid JSON object",(e=>{if(!e)return!0;try{return"object"===typeof JSON.parse(e)&&null!==JSON.parse(e)}catch(i){return!1}}))})),mode:"all"}),{handleSubmit:j,setValue:N,setError:g,clearErrors:I,formState:{errors:q}}=A;return(0,t.useEffect)((()=>{var e;u||(N("fieldId",null===m||void 0===m?void 0:m.id),N("name",null===m||void 0===m?void 0:m.name),N("columnName",null===m||void 0===m?void 0:m.columnName),N("required",Boolean("true"===(null===m||void 0===m?void 0:m.isRequired)||!0===(null===m||void 0===m?void 0:m.isRequired))),N("unique",Boolean("true"===(null===m||void 0===m?void 0:m.isUnique)||!0===(null===m||void 0===m?void 0:m.isUnique))),(null===(e=m.properties)||void 0===e?void 0:e.payload)&&N("payload","object"===typeof m.properties.payload?JSON.stringify(m.properties.payload):m.properties.payload),Object.keys((null===m||void 0===m?void 0:m.properties)||{}).forEach((e=>{"payload"!==e&&N(e,m.properties[e])})))}),[m,u,N]),(0,C.jsx)(E.Op,{methods:A,onSubmit:j((async e=>{e.type="Phone",e.defaultAttributeId=s,e.payload=e.payload?JSON.parse(e.payload):e.payload;const{name:i,defaultAttributeId:l,columnName:t,mappingColumn:a,required:n,unique:r,type:d,...o}=e,u={name:i,type:d,columnName:t,columnType:"text",mappingColumn:a,isRequired:n,isUnique:r,defaultAttributeId:l,properties:o},c={name:"Verify "+i,type:"Chip Select",columnName:"v_"+t,columnType:"text",isRequired:!1,defaultAttributeId:"9f9af2b6-1113-48e0-a5c5-0a34e2226937",properties:{attributeName:"Verify "+i,values:"Verified,Not Verified,Refused",defaultValue:"",defaultDataValueInColumn:"Not Verified",editable:!1,defaultHide:!0,verifyAttribute:!0,currentUser:!1}},v={name:"Response "+i,type:"Text",columnName:"vr_"+t,columnType:"text",isRequired:!1,isUnique:!1,defaultAttributeId:"d7268ee9-971a-42e5-bd23-235d86e8b0d9",properties:{attributeName:"Response "+i,editable:!1,defaultHide:!0,disableOnSearch:!1,verifyAttribute:!0,isMaterial:!1}};if(-1!==(null!==u&&void 0!==u&&u.columnName&&(null===u||void 0===u?void 0:u.columnName)!==(null===m||void 0===m?void 0:m.columnName)?x.findIndex((e=>e.columnName===(null===u||void 0===u?void 0:u.columnName))):-1))g("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var y;const e=null!==u&&void 0!==u&&null!==(y=u.properties)&&void 0!==y&&y.fieldId?x.findIndex((e=>{var i;return e.id===(null===u||void 0===u||null===(i=u.properties)||void 0===i?void 0:i.fieldId)})):null!==m&&void 0!==m&&m.name?x.findIndex((e=>e.name===(null===m||void 0===m?void 0:m.name))):-1;var f,b;if(-1!==e)null!==(f=u.properties)&&void 0!==f&&f.doVerify?u.properties.verifyApplied?u.properties.verifyResponseApplied?x[e]={...x[e],...u}:(u.properties.verifyResponseApplied=!0,x[e]={...x[e],...u},h([...x,v])):(u.properties.verifyApplied=!0,u.properties.verifyResponseApplied=!0,x[e]={...x[e],...u},h([...x,c,v])):x[e]={...x[e],...u};else null!==(b=u.properties)&&void 0!==b&&b.doVerify?(u.properties.verifyApplied=!0,u.properties.verifyResponseApplied=!0,h([...x,u,c,v])):h([...x,u]);A.reset(),p(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[u?"Add":"Edit"," Phone Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:f("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:f("endpoint","API Endpoint URL","text",!1,"Enter API Endpoint")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:f("payload","API Payload","text",!1,"Enter API Payload")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("receiverKey","API Receiver Key","text",!1,"Enter API Receiver Key")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("messageKey","API Message Key","text",!1,"Enter API Message Key")}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===m||void 0===m?void 0:m.isRequired)||!0===(null===m||void 0===m?void 0:m.isRequired))})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"unique",label:"Unique",value:Boolean("true"===(null===m||void 0===m?void 0:m.isUnique)||!0===(null===m||void 0===m?void 0:m.isUnique))})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===m||void 0===m||null===(i=m.properties)||void 0===i?void 0:i.editable})})]}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"currentUser",label:"Current User",value:null===m||void 0===m||null===(l=m.properties)||void 0===l?void 0:l.currentUser})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"doVerify",label:"Verify Number",value:null===m||void 0===m||null===(n=m.properties)||void 0===n?void 0:n.doVerify})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"disableOnSearch",label:"Disable On Search",value:null===m||void 0===m||null===(d=m.properties)||void 0===d?void 0:d.disableOnSearch})})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>p(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(q).length>0,children:u?"Save":"Update"})]})]})})},k=e=>{var i,l;let{modalId:n,mode:d,item:s,isPublished:u,setOpen:m,attributesArray:v,setAttributesArray:p}=e;const x=function(e,i,l,t){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:!(!u||d||!n||!s.id||"columnName"!=e),placeholder:r,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),h.setValue(e,l.target.value),(!s.id||s.id&&!u)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();h.setValue("columnName",e),N("columnName")}v.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===s||void 0===s?void 0:s.columnName)))&&j(e,{message:i+" already exists"},{shouldFocus:!0})}})})},h=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:f,setValue:A,setError:j,clearErrors:N,formState:{errors:g}}=h;return(0,t.useEffect)((()=>{d||(A("fieldId",null===s||void 0===s?void 0:s.id),A("name",null===s||void 0===s?void 0:s.name),A("columnName",null===s||void 0===s?void 0:s.columnName),A("required",Boolean("true"===(null===s||void 0===s?void 0:s.isRequired)||!0===(null===s||void 0===s?void 0:s.isRequired))),A("unique",Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))),Object.keys((null===s||void 0===s?void 0:s.properties)||{}).forEach((e=>{A(e,null===s||void 0===s?void 0:s.properties[e])})))}),[s,d,A]),(0,C.jsx)(E.Op,{methods:h,onSubmit:f((async e=>{e.type="Email",e.defaultAttributeId=n;const{name:i,defaultAttributeId:l,columnName:t,mappingColumn:a,required:r,unique:d,type:o,...u}=e,c={name:i,type:o,columnName:t,columnType:"text",mappingColumn:a,isRequired:r,isUnique:d,defaultAttributeId:l,properties:u};if(-1!==(null!==c&&void 0!==c&&c.columnName&&(null===c||void 0===c?void 0:c.columnName)!==(null===s||void 0===s?void 0:s.columnName)?v.findIndex((e=>e.columnName===(null===c||void 0===c?void 0:c.columnName))):-1))j("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var x;const e=null!==c&&void 0!==c&&null!==(x=c.properties)&&void 0!==x&&x.fieldId?v.findIndex((e=>{var i;return e.id===(null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.fieldId)})):null!==s&&void 0!==s&&s.name?v.findIndex((e=>e.name===(null===s||void 0===s?void 0:s.name))):-1;-1!==e?v[e]={...v[e],...c}:p([...v,c]),h.reset(),m(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[d?"Add":"Edit"," Email Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:x("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:x("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:x("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===s||void 0===s?void 0:s.isRequired)||!0===(null===s||void 0===s?void 0:s.isRequired))}),(0,C.jsx)(E.BN,{name:"unique",label:"Unique",value:Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))}),(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.editable}),(0,C.jsx)(E.BN,{name:"disableOnSearch",label:"Disable On Search",value:null===s||void 0===s||null===(l=s.properties)||void 0===l?void 0:l.disableOnSearch})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>m(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(g).length>0,children:d?"Save":"Update"})]})]})})},B=e=>{var i;let{modalId:l,mode:n,item:d,isPublished:s,setOpen:u,attributesArray:m,setAttributesArray:v}=e;const p=function(e,i,t,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:t,label:i,disabled:!(!s||n||!l||!d.id||"columnName"!=e),placeholder:o,...r&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),x.setValue(e,l.target.value),(!d.id||d.id&&!s)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();x.setValue("columnName",e),j("columnName")}m.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===d||void 0===d?void 0:d.columnName)))&&A(e,{message:i+" already exists"},{shouldFocus:!0})}})})},x=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),defaultValues:{imageCount:"1"},mode:"all"}),{handleSubmit:h,setValue:f,setError:A,clearErrors:j,formState:{errors:N}}=x;return(0,t.useEffect)((()=>{n||(f("fieldId",null===d||void 0===d?void 0:d.id),f("name",null===d||void 0===d?void 0:d.name),f("columnName",null===d||void 0===d?void 0:d.columnName),f("required",Boolean("true"===(null===d||void 0===d?void 0:d.isRequired)||!0===(null===d||void 0===d?void 0:d.isRequired))),Object.keys((null===d||void 0===d?void 0:d.properties)||{}).forEach((e=>{f(e,null===d||void 0===d?void 0:d.properties[e])})))}),[d,n,f]),(0,C.jsx)(E.Op,{methods:x,onSubmit:h((async e=>{e.type="Image",e.defaultAttributeId=l;const{name:i,defaultAttributeId:t,columnName:a,required:n,type:r,...o}=e,s={name:i,type:r,columnName:a,columnType:"text",isRequired:n,defaultAttributeId:t,properties:o};if(-1!==(null!==s&&void 0!==s&&s.columnName&&(null===s||void 0===s?void 0:s.columnName)!==(null===d||void 0===d?void 0:d.columnName)?m.findIndex((e=>e.columnName===(null===s||void 0===s?void 0:s.columnName))):-1))A("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var c;const e=null!==s&&void 0!==s&&null!==(c=s.properties)&&void 0!==c&&c.fieldId?m.findIndex((e=>{var i;return e.id===(null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.fieldId)})):null!==d&&void 0!==d&&d.name?m.findIndex((e=>e.name===(null===d||void 0===d?void 0:d.name))):-1;-1!==e?m[e]={...m[e],...s}:v([...m,s]),x.reset(),u(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[n?"Add":"Edit"," Image Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:p("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("maxSize","Max Image Size","number",!1,"Enter Max Size (in MB)")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("imageCount","Number of Images","text",!1,"Enter Number of Images")}),(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===d||void 0===d?void 0:d.isRequired)||!0===(null===d||void 0===d?void 0:d.isRequired))}),(0,C.jsx)(E.BN,{name:"disableLibaray",label:"Disable Library Upload",value:null===d||void 0===d||null===(i=d.properties)||void 0===i?void 0:i.disableLibaray})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>u(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(N).length>0,children:n?"Save":"Update"})]})]})})},w=e=>{let{modalId:i,mode:l,item:n,isPublished:d,setOpen:s,attributesArray:u,setAttributesArray:m}=e;const v=function(e,t,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:r,label:t,disabled:!(!d||l||!i||!n.id||"columnName"!=e),placeholder:s,...o&&{required:!0},onBlur:i=>{if(i.target.value=i.target.value.trim(),p.setValue(e,i.target.value),(!n.id||n.id&&!d)&&"name"===e){const e=i.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();p.setValue("columnName",e),A("columnName")}u.some((l=>e===i.target.name&&(null===l||void 0===l?void 0:l[e])===i.target.value&&(null===l||void 0===l?void 0:l.columnName)!==(null===n||void 0===n?void 0:n.columnName)))&&f(e,{message:t+" already exists"},{shouldFocus:!0})}})})},p=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:x,setValue:h,setError:f,clearErrors:A,formState:{errors:j}}=p;return(0,t.useEffect)((()=>{l||(h("fieldId",null===n||void 0===n?void 0:n.id),h("name",null===n||void 0===n?void 0:n.name),h("columnName",null===n||void 0===n?void 0:n.columnName),h("required",Boolean("true"===(null===n||void 0===n?void 0:n.isRequired)||!0===(null===n||void 0===n?void 0:n.isRequired))),Object.keys((null===n||void 0===n?void 0:n.properties)||{}).forEach((e=>{h(e,null===n||void 0===n?void 0:n.properties[e])})))}),[n,l,h]),(0,C.jsx)(E.Op,{methods:p,onSubmit:x((async e=>{e.type="Document",e.defaultAttributeId=i;const{name:l,defaultAttributeId:t,columnName:a,required:r,type:d,...o}=e,c={name:l,type:d,columnName:a,columnType:"text",isRequired:r,defaultAttributeId:t,properties:o};if(-1!==(null!==c&&void 0!==c&&c.columnName&&(null===c||void 0===c?void 0:c.columnName)!==(null===n||void 0===n?void 0:n.columnName)?u.findIndex((e=>e.columnName===(null===c||void 0===c?void 0:c.columnName))):-1))f("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var v;const e=null!==c&&void 0!==c&&null!==(v=c.properties)&&void 0!==v&&v.fieldId?u.findIndex((e=>{var i;return e.id===(null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.fieldId)})):null!==n&&void 0!==n&&n.name?u.findIndex((e=>e.name===(null===n||void 0===n?void 0:n.name))):-1;-1!==e?u[e]={...u[e],...c}:m([...u,c]),p.reset(),s(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[l?"Add":"Edit"," Document Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:v("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:12,sx:{ml:1},children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===n||void 0===n?void 0:n.isRequired)||!0===(null===n||void 0===n?void 0:n.isRequired))})}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>s(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(j).length>0,children:l?"Save":"Update"})]})]})})},R=e=>{let{modalId:i,mode:l,item:n,isPublished:d,setOpen:s,attributesArray:u,setAttributesArray:m}=e;const v=function(e,t,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:r,label:t,disabled:!(!d||l||!i||!n.id||"columnName"!=e),placeholder:s,...o&&{required:!0},onBlur:i=>{if(i.target.value=i.target.value.trim(),p.setValue(e,i.target.value),(!n.id||n.id&&!d)&&"name"===e){const e=i.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();p.setValue("columnName",e),A("columnName")}u.some((l=>e===i.target.name&&(null===l||void 0===l?void 0:l[e])===i.target.value&&(null===l||void 0===l?void 0:l.columnName)!==(null===n||void 0===n?void 0:n.columnName)))&&f(e,{message:t+" already exists"},{shouldFocus:!0})}})})},p=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:x,setValue:h,setError:f,clearErrors:A,formState:{errors:j}}=p;return(0,t.useEffect)((()=>{l||(h("fieldId",null===n||void 0===n?void 0:n.id),h("name",null===n||void 0===n?void 0:n.name),h("columnName",null===n||void 0===n?void 0:n.columnName),h("required",Boolean("true"===(null===n||void 0===n?void 0:n.isRequired)||!0===(null===n||void 0===n?void 0:n.isRequired))),Object.keys((null===n||void 0===n?void 0:n.properties)||{}).forEach((e=>{h(e,null===n||void 0===n?void 0:n.properties[e])})))}),[n,l,h]),(0,C.jsx)(E.Op,{methods:p,onSubmit:x((async e=>{e.type="Signature",e.defaultAttributeId=i;const{name:l,defaultAttributeId:t,columnName:a,required:r,type:d,...o}=e,c={name:l,type:d,columnName:a,columnType:"text",isRequired:r,defaultAttributeId:t,properties:o};if(-1!==(null!==c&&void 0!==c&&c.columnName&&(null===c||void 0===c?void 0:c.columnName)!==(null===n||void 0===n?void 0:n.columnName)?u.findIndex((e=>e.columnName===(null===c||void 0===c?void 0:c.columnName))):-1))f("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var v;const e=null!==c&&void 0!==c&&null!==(v=c.properties)&&void 0!==v&&v.fieldId?u.findIndex((e=>{var i;return e.id===(null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.fieldId)})):null!==n&&void 0!==n&&n.name?u.findIndex((e=>e.name===(null===n||void 0===n?void 0:n.name))):-1;-1!==e?u[e]={...u[e],...c}:m([...u,c]),p.reset(),s(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[l?"Add":"Edit"," Signature Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:v("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:v("label","Agreement Label","text",!1,"Enter Agreement Label")}),(0,C.jsx)(r.Ay,{item:!0,md:12,sx:{ml:1},children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===n||void 0===n?void 0:n.isRequired)||!0===(null===n||void 0===n?void 0:n.isRequired))})}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>s(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(j).length>0,children:l?"Save":"Update"})]})]})})},T=e=>{var i;let{modalId:l,mode:n,item:s,isPublished:u,setOpen:m,attributesArray:v,setAttributesArray:p,columnData:x}=e;const h=function(e,i,t,r){let d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:t,label:i,disabled:!(!u||n||!l||!s.id||"columnName"!=e),placeholder:d,...r&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),f.setValue(e,l.target.value),(!s.id||s.id&&!u)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();f.setValue("columnName",e),g("columnName")}v.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===s||void 0===s?void 0:s.columnName)))&&N(e,{message:i+" already exists"},{shouldFocus:!0})}})})},f=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,number:S.A.allowedColumns,attributeName:S.A.required})),mode:"all"}),{handleSubmit:A,setValue:j,setError:N,clearErrors:g,formState:{errors:I}}=f;(0,t.useEffect)((()=>{n||(j("fieldId",null===s||void 0===s?void 0:s.id),j("name",null===s||void 0===s?void 0:s.name),j("columnName",null===s||void 0===s?void 0:s.columnName),j("required",Boolean("true"===(null===s||void 0===s?void 0:s.isRequired)||!0===(null===s||void 0===s?void 0:s.isRequired))),j("unique",Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))),Object.keys((null===s||void 0===s?void 0:s.properties)||{}).forEach((e=>{j(e,null===s||void 0===s?void 0:s.properties[e])})))}),[s,n,j]);const q=f.watch("number");return(0,C.jsx)(E.Op,{methods:f,onSubmit:A((async e=>{const i=Object.fromEntries(Object.entries(e).map((i=>{let[l,t]=i;return l.startsWith("separator")&&void 0===e[l]?[l,""]:[l,t]})));i.type="Key Generator",i.defaultAttributeId=l;const{name:t,defaultAttributeId:a,columnName:n,required:r,unique:d,type:o,...u}=i,c={name:t,type:o,columnName:n,columnType:"text",isRequired:r,isUnique:d,defaultAttributeId:a,properties:u};if(-1!==(null!==c&&void 0!==c&&c.columnName&&(null===c||void 0===c?void 0:c.columnName)!==(null===s||void 0===s?void 0:s.columnName)?v.findIndex((e=>e.columnName===(null===c||void 0===c?void 0:c.columnName))):-1))N("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var x;const e=null!==c&&void 0!==c&&null!==(x=c.properties)&&void 0!==x&&x.fieldId?v.findIndex((e=>{var i;return e.id===(null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.fieldId)})):null!==s&&void 0!==s&&s.name?v.findIndex((e=>e.name===(null===s||void 0===s?void 0:s.name))):-1;-1!==e?v[e]={...v[e],...c}:p([...v,c]),f.reset(),m(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[n?"Add":"Edit"," Key Generator Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:h("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:h("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:h("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:h("number","Number of Columns","number",!0,"Enter Number")}),q>=1&&q<=5&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.Ay,{item:!0,md:12,children:(0,C.jsx)(d.A,{children:"Key Format *"})}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,spacing:2,sx:{marginTop:-3},children:[(0,C.jsx)(r.Ay,{item:!0,md:6,children:h("prefix","","text",!1,"Enter Prefix")}),(0,C.jsx)(r.Ay,{item:!0,md:2,children:h("separator0","","text",!1,"Separator")})]})]}),q>=1&&q<=5?Array.from({length:q},((e,i)=>(0,C.jsxs)(r.Ay,{container:!0,item:!0,spacing:2,children:[(0,C.jsx)(r.Ay,{item:!0,md:6,children:(0,C.jsx)(E.eu,{name:`column${i+1}`,placeholder:"Select Column",menus:x,required:!0})}),(0,C.jsx)(r.Ay,{item:!0,md:2,children:h(`separator${i+1}`,"","text",!1,"Separator")})]},i))):null,q>=1&&q<=5&&(0,C.jsx)(r.Ay,{container:!0,item:!0,spacing:2,children:(0,C.jsx)(r.Ay,{item:!0,md:6,children:h("suffix","","text",!1,"Enter suffix")})}),(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(E.BN,{name:"unique",label:"Unique",value:Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))}),(0,C.jsx)(E.BN,{name:"defaultHide",label:"Default Hide",value:null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.defaultHide})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>m(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(I).length>0,children:n?"Save":"Update"})]})]})})},M=e=>{var i;let{modalId:l,mode:n,item:d,isPublished:s,setOpen:u,attributesArray:m,setAttributesArray:v}=e;const p=function(e,i,t,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:t,label:i,disabled:!(!s||n||!l||!d.id||"columnName"!=e),placeholder:o,...r&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),x.setValue(e,l.target.value),(!d.id||d.id&&!s)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();x.setValue("columnName",e),j("columnName")}m.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===d||void 0===d?void 0:d.columnName)))&&A(e,{message:i+" already exists"},{shouldFocus:!0})}})})},x=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:h,setValue:f,setError:A,clearErrors:j,formState:{errors:N}}=x;return(0,t.useEffect)((()=>{n||(f("fieldId",null===d||void 0===d?void 0:d.id),f("name",null===d||void 0===d?void 0:d.name),f("columnName",null===d||void 0===d?void 0:d.columnName),f("required",Boolean("true"===(null===d||void 0===d?void 0:d.isRequired)||!0===(null===d||void 0===d?void 0:d.isRequired))),Object.keys((null===d||void 0===d?void 0:d.properties)||{}).forEach((e=>{f(e,null===d||void 0===d?void 0:d.properties[e])})))}),[d,n,f]),(0,C.jsx)(E.Op,{methods:x,onSubmit:h((async e=>{e.type="GEO Location",e.defaultAttributeId=l;const{name:i,defaultAttributeId:t,columnName:a,required:n,type:r,...o}=e,s={name:i,type:r,columnName:a,columnType:"text",isRequired:n,defaultAttributeId:t,properties:o};if(-1!==(null!==s&&void 0!==s&&s.columnName&&(null===s||void 0===s?void 0:s.columnName)!==(null===d||void 0===d?void 0:d.columnName)?m.findIndex((e=>e.columnName===(null===s||void 0===s?void 0:s.columnName))):-1))A("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var c;const e=null!==s&&void 0!==s&&null!==(c=s.properties)&&void 0!==c&&c.fieldId?m.findIndex((e=>{var i;return e.id===(null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.fieldId)})):null!==d&&void 0!==d&&d.name?m.findIndex((e=>e.name===(null===d||void 0===d?void 0:d.name))):-1;-1!==e?m[e]={...m[e],...s}:v([...m,s]),x.reset(),u(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[n?"Add":"Edit"," Location Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:p("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("accuracyInMeter","Accuracy","text",!1,"Enter Accuracy Within Meters")}),(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===d||void 0===d?void 0:d.isRequired)||!0===(null===d||void 0===d?void 0:d.isRequired))}),(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===d||void 0===d||null===(i=d.properties)||void 0===i?void 0:i.editable})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>u(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(N).length>0,children:n?"Save":"Update"})]})]})})},z=e=>{let{modalId:i,mode:l,item:n,isPublished:d,setOpen:s,attributesArray:u,setAttributesArray:m}=e;const v=function(e,t,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:r,label:t,disabled:!(!d||l||!i||!n.id||"columnName"!=e),placeholder:s,...o&&{required:!0},onBlur:i=>{if(i.target.value=i.target.value.trim(),p.setValue(e,i.target.value),(!n.id||n.id&&!d)&&"name"===e){const e=i.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();p.setValue("columnName",e),A("columnName")}u.some((l=>e===i.target.name&&(null===l||void 0===l?void 0:l[e])===i.target.value&&(null===l||void 0===l?void 0:l.columnName)!==(null===n||void 0===n?void 0:n.columnName)))&&f(e,{message:t+" already exists"},{shouldFocus:!0})}})})},p=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),defaultValues:{networkType:"dbm"},mode:"all"}),{handleSubmit:x,setValue:h,setError:f,clearErrors:A,formState:{errors:j}}=p;(0,t.useEffect)((()=>{l||(h("fieldId",null===n||void 0===n?void 0:n.id),h("name",null===n||void 0===n?void 0:n.name),h("columnName",null===n||void 0===n?void 0:n.columnName),h("required",Boolean("true"===(null===n||void 0===n?void 0:n.isRequired)||!0===(null===n||void 0===n?void 0:n.isRequired))),Object.keys((null===n||void 0===n?void 0:n.properties)||{}).forEach((e=>{h(e,null===n||void 0===n?void 0:n.properties[e])})))}),[n,l,h]);return(0,C.jsx)(E.Op,{methods:p,onSubmit:x((async e=>{e.type="Network Strength",e.defaultAttributeId=i;const{name:l,defaultAttributeId:t,columnName:a,required:r,type:d,...o}=e,c={name:l,type:d,columnName:a,columnType:"text",isRequired:r,defaultAttributeId:t,properties:o};if(-1!==(null!==c&&void 0!==c&&c.columnName&&(null===c||void 0===c?void 0:c.columnName)!==(null===n||void 0===n?void 0:n.columnName)?u.findIndex((e=>e.columnName===(null===c||void 0===c?void 0:c.columnName))):-1))f("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var v;const e=null!==c&&void 0!==c&&null!==(v=c.properties)&&void 0!==v&&v.fieldId?u.findIndex((e=>{var i;return e.id===(null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.fieldId)})):null!==n&&void 0!==n&&n.name?u.findIndex((e=>e.name===(null===n||void 0===n?void 0:n.name))):-1;-1!==e?u[e]={...u[e],...c}:m([...u,c]),p.reset(),s(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[l?"Add":"Edit"," Network Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:v("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:(N="networkType",g="Network Strength",I=[{id:"dbm",name:"Decibel Milliwatts (dBm)"},{id:"Mbps",name:"Megabits Per Second (Mbps)"}],q=!1,O="Select Unit Type",(0,C.jsx)(a.A,{children:(0,C.jsx)(E.eu,{name:N,placeholder:O,label:g,menus:I,...q&&{required:!0}})}))}),(0,C.jsx)(r.Ay,{item:!0,md:12,sx:{ml:1},children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===n||void 0===n?void 0:n.isRequired)||!0===(null===n||void 0===n?void 0:n.isRequired))})}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>s(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(j).length>0,children:l?"Save":"Update"})]})]})});var N,g,I,q,O},V=e=>{var i,l;let{modalId:n,mode:d,item:s,isPublished:u,setOpen:m,attributesArray:v,setAttributesArray:p}=e;const[x,h]=(0,t.useState)(!1),[f,A]=(0,t.useState)(!1),[j,N]=(0,t.useState)(!1),[g,I]=(0,t.useState)(!1),q=function(e,i,l,t){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:!(!u||d||!n||!s.id||"columnName"!=e),placeholder:r,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),O.setValue(e,l.target.value),(!s.id||s.id&&!u)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();O.setValue("columnName",e),w("columnName")}v.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===s||void 0===s?void 0:s.columnName)))&&B(e,{message:i+" already exists"},{shouldFocus:!0})}})})},O=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),defaultValues:{commaType:"Indian",currencyType:"\u20b9",decimalPoints:2},mode:"all"}),{handleSubmit:D,setValue:k,setError:B,clearErrors:w,formState:{errors:R}}=O;(0,t.useEffect)((()=>{if(!d){var e,i,l,t,a,n;if(k("fieldId",null===s||void 0===s?void 0:s.id),k("name",null===s||void 0===s?void 0:s.name),k("columnName",null===s||void 0===s?void 0:s.columnName),k("required",Boolean("true"===(null===s||void 0===s?void 0:s.isRequired)||!0===(null===s||void 0===s?void 0:s.isRequired))),k("unique",Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))),Object.keys((null===s||void 0===s?void 0:s.properties)||{}).forEach((e=>{k(e,null===s||void 0===s?void 0:s.properties[e])})),null!==s&&void 0!==s&&null!==(e=s.properties)&&void 0!==e&&e.comma)h(null===s||void 0===s||null===(t=s.properties)||void 0===t?void 0:t.comma);if(null!==s&&void 0!==s&&null!==(i=s.properties)&&void 0!==i&&i.currency)A(null===s||void 0===s||null===(a=s.properties)||void 0===a?void 0:a.currency);if(null!==s&&void 0!==s&&null!==(l=s.properties)&&void 0!==l&&l.decimal)N(null===s||void 0===s||null===(n=s.properties)||void 0===n?void 0:n.decimal)}}),[s,d,k]);return(0,C.jsx)(E.Op,{methods:O,onSubmit:D((async e=>{e.type="Number",e.defaultAttributeId=n,e.commaType||(e.commaType="Indian"),e.currencyType||(e.currencyType="\u20b9"),e.decimalPoints||(e.decimalPoints=2);const{name:i,defaultAttributeId:l,columnName:t,mappingColumn:a,required:r,unique:d,type:o,...u}=e,c={name:i,type:o,columnName:t,columnType:"text",mappingColumn:a,isRequired:r,isUnique:d,defaultAttributeId:l,properties:u};if(-1!==(null!==c&&void 0!==c&&c.columnName&&(null===c||void 0===c?void 0:c.columnName)!==(null===s||void 0===s?void 0:s.columnName)?v.findIndex((e=>e.columnName===(null===c||void 0===c?void 0:c.columnName))):-1))B("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var x;const e=null!==c&&void 0!==c&&null!==(x=c.properties)&&void 0!==x&&x.fieldId?v.findIndex((e=>{var i;return e.id===(null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.fieldId)})):null!==s&&void 0!==s&&s.name?v.findIndex((e=>e.name===(null===s||void 0===s?void 0:s.name))):-1;-1!==e?v[e]={...v[e],...c}:p([...v,c]),O.reset(),m(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[d?"Add":"Edit"," Number Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:q("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:q("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:q("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:q("defaultValue","Default Value","number",!1,"Enter Default value")}),(0,C.jsxs)(r.Ay,{item:!0,md:12,children:[(T="decimal",M="Decimal Place",z=((e,i)=>{"comma"===e?h(i):"currency"===e?A(i):"decimal"===e&&N(i)}).bind(void 0,"decimal"),V=!1,F=j,(0,C.jsx)(E.SF,{name:T,label:M,value:F,onChange:z,InputLabelProps:{shrink:!0},...V&&{required:!0},sx:{ml:-.5}})),j&&q("decimalPoints","","text",!1,"Round to 2 decimal places (Default)")]}),(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===s||void 0===s?void 0:s.isRequired)||!0===(null===s||void 0===s?void 0:s.isRequired))}),(0,C.jsx)(E.BN,{name:"unique",label:"Unique",value:Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))}),(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.editable}),(0,C.jsx)(E.BN,{name:"disableOnSearch",label:"Disable On Search",value:null===s||void 0===s||null===(l=s.properties)||void 0===l?void 0:l.disableOnSearch})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>m(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(R).length>0,children:d?"Save":"Update"})]})]})});var T,M,z,V,F},F=e=>{var i,l,n;let{modalId:d,mode:s,item:u,isPublished:m,setOpen:v,attributesArray:p,setAttributesArray:x}=e;const[h,f]=(0,t.useState)((null===(i=u.properties)||void 0===i||null===(l=i.values)||void 0===l?void 0:l.split(",").map((e=>({id:e,name:e}))))||[]),A=function(e,i,l,t){var n;let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:!!(m&&!s&&d&&u.id&&"columnName"==e||null!==u&&void 0!==u&&null!==(n=u.properties)&&void 0!==n&&n.verifyAttribute&&("name"==e||"columnName"==e)),placeholder:r,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),j.setValue(e,l.target.value),(!u.id||u.id&&!m)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();j.setValue("columnName",e),q("columnName")}if("values"===e){var t,a,n;const e=null===(t=l.target)||void 0===t||null===(a=t.value)||void 0===a?void 0:a.split(",").map((e=>e.trim())),i=null!==(n=l.target)&&void 0!==n&&n.value?e.map((e=>({id:e,name:e}))):[];f(i)}p.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===u||void 0===u?void 0:u.columnName)))&&I(e,{message:i+" already exists"},{shouldFocus:!0})}})})},j=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:N,setValue:g,setError:I,clearErrors:q,formState:{errors:O}}=j;return(0,t.useEffect)((()=>{s||(g("fieldId",null===u||void 0===u?void 0:u.id),g("name",null===u||void 0===u?void 0:u.name),g("columnName",null===u||void 0===u?void 0:u.columnName),g("required",Boolean("true"===(null===u||void 0===u?void 0:u.isRequired)||!0===(null===u||void 0===u?void 0:u.isRequired))),Object.keys((null===u||void 0===u?void 0:u.properties)||{}).forEach((e=>{g(e,null===u||void 0===u?void 0:u.properties[e])})))}),[u,s,g]),(0,C.jsx)(E.Op,{methods:j,onSubmit:N((async e=>{var i;e.type="Chip Select",e.values=null===(i=e.values)||void 0===i?void 0:i.replace(/,\s*(?=\s*$)|,\s+/g,",").replace(/,\s*$/,""),e.defaultAttributeId=d;const{name:l,defaultAttributeId:t,columnName:a,required:n,type:r,...o}=e,s={name:l,type:r,columnName:a,columnType:"text",isRequired:n,defaultAttributeId:t,properties:o};if(-1!==(null!==s&&void 0!==s&&s.columnName&&(null===s||void 0===s?void 0:s.columnName)!==(null===u||void 0===u?void 0:u.columnName)?p.findIndex((e=>e.columnName===(null===s||void 0===s?void 0:s.columnName))):-1))I("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var m;const e=null!==s&&void 0!==s&&null!==(m=s.properties)&&void 0!==m&&m.fieldId?p.findIndex((e=>{var i;return e.id===(null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.fieldId)})):null!==u&&void 0!==u&&u.name?p.findIndex((e=>e.name===(null===u||void 0===u?void 0:u.name))):-1;-1!==e?p[e]={...p[e],...s}:x([...p,s]),j.reset(),v(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[s?"Add":"Edit"," Chip Select Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:A("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:A("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:A("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:A("values","Values","text",!1,"Enter comma seperated values i.e. Value 1,Value 2,Value 3 ...")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:(D="defaultValue",k="Default Value",B=h,(0,C.jsx)(a.A,{children:(0,C.jsx)(E.eu,{name:D,allowClear:!0,placeholder:R,label:k,onChange:T,InputLabelProps:{shrink:!0},menus:B,...w&&{required:!0}})}))}),(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===u||void 0===u?void 0:u.isRequired)||!0===(null===u||void 0===u?void 0:u.isRequired))}),(0,C.jsx)(E.BN,{name:"defaultHide",label:"Default Hide",value:null===u||void 0===u||null===(n=u.properties)||void 0===n?void 0:n.defaultHide})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>v(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(O).length>0,children:s?"Save":"Update"})]})]})});var D,k,B,w,R,T},P=e=>{var i,l,n;let{modalId:d,mode:s,item:u,isPublished:m,setOpen:v,attributesArray:p,setAttributesArray:x}=e;const[h,f]=(0,t.useState)((null===(i=u.properties)||void 0===i||null===(l=i.values)||void 0===l?void 0:l.split(",").map((e=>({id:e,name:e}))))||[]),[A,j]=(0,t.useState)((null===(n=u.properties)||void 0===n?void 0:n.selectType)||"single"),N=function(e,i,l,t){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:!(!m||s||!d||!u.id||"columnName"!=e),placeholder:n,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),g.setValue(e,l.target.value),(!u.id||u.id&&!m)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();g.setValue("columnName",e),D("columnName")}if("values"===e){var t,a,n;const e=null===(t=l.target)||void 0===t||null===(a=t.value)||void 0===a?void 0:a.split(",").map((e=>e.trim())),i=null!==(n=l.target)&&void 0!==n&&n.value?e.map((e=>({id:e,name:e}))):[];f(i)}p.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===u||void 0===u?void 0:u.columnName)))&&O(e,{message:i+" already exists"},{shouldFocus:!0})}})})},g=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),defaultValues:{selectType:"single"},mode:"all"}),{handleSubmit:I,setValue:q,setError:O,clearErrors:D,formState:{errors:k}}=g;(0,t.useEffect)((()=>{s||(q("fieldId",null===u||void 0===u?void 0:u.id),q("name",null===u||void 0===u?void 0:u.name),q("columnName",null===u||void 0===u?void 0:u.columnName),q("required",Boolean("true"===(null===u||void 0===u?void 0:u.isRequired)||!0===(null===u||void 0===u?void 0:u.isRequired))),Object.keys((null===u||void 0===u?void 0:u.properties)||{}).forEach((e=>{q(e,null===u||void 0===u?void 0:u.properties[e])})))}),[u,s,q]);return(0,C.jsx)(E.Op,{methods:g,onSubmit:I((async e=>{var i;e.type="Checkbox",e.values=null===(i=e.values)||void 0===i?void 0:i.replace(/,\s*(?=\s*$)|,\s+/g,",").replace(/,\s*$/,""),e.defaultAttributeId=d;const{name:l,defaultAttributeId:t,columnName:a,required:n,type:r,...o}=e,s={name:l,type:r,columnName:a,columnType:"text",isRequired:n,defaultAttributeId:t,properties:o};if(-1!==(null!==s&&void 0!==s&&s.columnName&&(null===s||void 0===s?void 0:s.columnName)!==(null===u||void 0===u?void 0:u.columnName)?p.findIndex((e=>e.columnName===(null===s||void 0===s?void 0:s.columnName))):-1))O("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var m;const e=null!==s&&void 0!==s&&null!==(m=s.properties)&&void 0!==m&&m.fieldId?p.findIndex((e=>{var i;return e.id===(null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.fieldId)})):null!==u&&void 0!==u&&u.name?p.findIndex((e=>e.name===(null===u||void 0===u?void 0:u.name))):-1;-1!==e?p[e]={...p[e],...s}:x([...p,s]),g.reset(),v(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[s?"Add":"Edit"," Checkbox Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:N("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:N("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:N("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:N("values","Values","text",!1,"Enter comma seperated values i.e. Value 1,Value 2,Value 3 ...")}),(0,C.jsx)(r.Ay,{item:!0,md:12,sx:{mt:-2,mb:-1},children:(B="selectType",w=[{value:"single",name:"Single Select"},{value:"multi",name:"Multi Select"}],R="",T=e=>{var i;q("defaultValue",null),j(null===(i=e.target)||void 0===i?void 0:i.value)},M=!1,z=!1,(0,C.jsx)(E.gk,{name:B,labels:w,title:R,onChange:T,...M&&{disabled:!0},...z&&{required:!0}}))}),"multi"==A?(0,C.jsx)(r.Ay,{item:!0,md:12,children:(0,C.jsx)(E.Yq,{name:"defaultValue",label:"Default Value",menus:h})}):"single"==A?(0,C.jsx)(r.Ay,{item:!0,md:12,children:((e,i,l,t,n,r)=>(0,C.jsx)(a.A,{children:(0,C.jsx)(E.eu,{name:e,allowClear:!0,placeholder:n,label:i,onChange:r,InputLabelProps:{shrink:!0},menus:l,...t&&{required:!0}})}))("defaultValue","Default Value",h)}):(0,C.jsx)(C.Fragment,{}),(0,C.jsx)(r.Ay,{item:!0,md:12,sx:{ml:1},children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===u||void 0===u?void 0:u.isRequired)||!0===(null===u||void 0===u?void 0:u.isRequired))})}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>v(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(k).length>0,children:s?"Save":"Update"})]})]})});var B,w,R,T,M,z},_=e=>{var i,l,n,d;let{modalId:s,mode:u,item:m,isPublished:v,setOpen:p,attributesArray:x,setAttributesArray:h}=e;const f=function(e,i,l,t){var n;let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:!!(v&&!u&&s&&m.id&&"columnName"==e||null!==m&&void 0!==m&&null!==(n=m.properties)&&void 0!==n&&n.approval&&("name"==e||"columnName"==e)),placeholder:r,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),N.setValue(e,l.target.value),(!m.id||m.id&&!v)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();N.setValue("columnName",e),O("columnName")}x.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===m||void 0===m?void 0:m.columnName)))&&q(e,{message:i+" already exists"},{shouldFocus:!0})}})})},A=(e,i,l,t,a,n)=>(0,C.jsx)(E.gk,{name:e,mini:!0,labels:i,title:l,onChange:t,...a&&{disabled:!0},...n&&{required:!0}}),j=()=>{},N=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),defaultValues:{pickerType:"dateOnly",timeFormat:"12hour"},mode:"all"}),{handleSubmit:g,setValue:I,setError:q,clearErrors:O,formState:{errors:D}}=N;return(0,t.useEffect)((()=>{u||(I("fieldId",null===m||void 0===m?void 0:m.id),I("name",null===m||void 0===m?void 0:m.name),I("columnName",null===m||void 0===m?void 0:m.columnName),I("required",Boolean("true"===(null===m||void 0===m?void 0:m.isRequired)||!0===(null===m||void 0===m?void 0:m.isRequired))),Object.keys((null===m||void 0===m?void 0:m.properties)||{}).forEach((e=>{I(e,null===m||void 0===m?void 0:m.properties[e])})))}),[m,u,I]),(0,C.jsx)(E.Op,{methods:N,onSubmit:g((async e=>{e.type="Date Time",e.defaultAttributeId=s;const{name:i,defaultAttributeId:l,columnName:t,required:a,type:n,...r}=e,d={name:i,type:n,columnName:t,columnType:"text",isRequired:a,defaultAttributeId:l,properties:r};if(-1!==(null!==d&&void 0!==d&&d.columnName&&(null===d||void 0===d?void 0:d.columnName)!==(null===m||void 0===m?void 0:m.columnName)?x.findIndex((e=>e.columnName===(null===d||void 0===d?void 0:d.columnName))):-1))q("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var o;const e=null!==d&&void 0!==d&&null!==(o=d.properties)&&void 0!==o&&o.fieldId?x.findIndex((e=>{var i;return e.id===(null===d||void 0===d||null===(i=d.properties)||void 0===i?void 0:i.fieldId)})):null!==m&&void 0!==m&&m.name?x.findIndex((e=>e.name===(null===m||void 0===m?void 0:m.name))):-1;-1!==e?x[e]={...x[e],...d}:h([...x,d]),N.reset(),p(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[u?"Add":"Edit"," Date Time Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:f("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,sx:{paddingRight:1},md:6,children:f("minDate","Min Date","date",!0,!0)}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:f("maxDate","Max Date","date",!0,!0)}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:A("pickerType",[{value:"dateOnly",name:"Date"},{value:"timeOnly",name:"Time"},{value:"dateTimeBoth",name:"Date Time"},{value:"monthYearBoth",name:"Month Year"}],"Select Picker Type",j,!1,!1)}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:A("timeFormat",[{value:"12hour",name:"12 hour"},{value:"24hour",name:"24 hour"}],"Select Time Format",j,!1,!1)}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"captureCurrentDate",label:"Current Date",value:null===m||void 0===m||null===(i=m.properties)||void 0===i?void 0:i.captureCurrentDate})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===m||void 0===m?void 0:m.isRequired)||!0===(null===m||void 0===m?void 0:m.isRequired))})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===m||void 0===m||null===(l=m.properties)||void 0===l?void 0:l.editable})})]}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"defaultHide",label:"Default Hide",value:null===m||void 0===m||null===(n=m.properties)||void 0===n?void 0:n.defaultHide})}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:(0,C.jsx)(E.BN,{name:"disableOnSearch",label:"Disable On Search",value:null===m||void 0===m||null===(d=m.properties)||void 0===d?void 0:d.disableOnSearch})})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>p(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(D).length>0,children:u?"Save":"Update"})]})]})})};var U=l(80415),H=l(99635),L=l(71826),$=l(62054);const W=e=>{var i,l,n,s,u,m,v,p,h;let{modalId:f,mode:A,item:j,columnData:N,isPublished:q,setOpen:O,attributesArray:D,setAttributesArray:k,projectId:B}=e;const w=(0,x.wA)(),[R,T]=(0,t.useState)([]),[M,z]=(0,t.useState)(""),[V,F]=(0,t.useState)(""),[P,_]=(0,t.useState)(""),[W,K]=(0,t.useState)(""),[Z,G]=(0,t.useState)(""),[Y,Q]=(0,t.useState)([]);(0,t.useEffect)((()=>{w((0,I.tgI)({sortBy:"updatedAt",sortOrder:"DESC",projectId:B}))}),[w,B]);const{forms:J}=(0,g.I)(),X=(null===J||void 0===J||null===(i=J.formDataObject)||void 0===i||null===(l=i.rows)||void 0===l?void 0:l.filter((e=>e.isPublished)).map((e=>({id:e.id,name:e.name,tableName:e.tableName}))))||[],ee=(0,t.useCallback)((async()=>{const e=await(0,L.default)("/form-attributes-list",{method:"GET",query:{formId:Z,sort:["createdAt","ASC"]}});var i,l;if(e.success)return Q((null===(i=e.data)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.rows)||[]);const t=e.error&&e.error.message?e.error.message:e.error;(0,$.A)(t||"Unable to fetch data. Please contact admin",{variant:"error"})}),[Z]);(0,t.useEffect)((()=>{Z&&ee()}),[w,Z,ee]);const ie=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,sourceTable:S.A.required,sourceColumn:S.A.required,attributeName:S.A.required})),defaultValues:{selectType:"single"},mode:"all"}),{handleSubmit:le,setValue:te,setError:ae,clearErrors:ne,formState:{errors:re}}=ie,de=()=>""!==V&&""!==P&&""!==W;(0,t.useEffect)((()=>{w((0,I.rTA)())}),[w]),(0,t.useEffect)((()=>{w((0,I.jKO)(M))}),[w,M]);const{allMastersList:oe,allMastersColumnList:se}=(0,g.I)(),{sourceData:ue,sourceColumnData:me}=(0,t.useMemo)((()=>{var e,i,l,t;return{sourceData:(null===oe||void 0===oe||null===(e=oe.allMastersListObject)||void 0===e||null===(i=e.rows)||void 0===i?void 0:i.filter((e=>e.isMaster)).map((e=>({id:e.id,name:e.visibleName}))))||[],sourceColumnData:(null===se||void 0===se||null===(l=se.allMastersColumnListObject)||void 0===l||null===(t=l.rows)||void 0===t?void 0:t.map((e=>({id:e.id,name:e.visibleName}))))||[]}}),[oe,se]),ce=function(e,i,l,t){var n;let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5?arguments[5]:void 0;return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:!!(q&&!A&&f&&j.id&&"columnName"==e||null!==j&&void 0!==j&&null!==(n=j.properties)&&void 0!==n&&n.approval&&("name"==e||"columnName"==e)),handleChange:d,placeholder:r,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),ie.setValue(e,l.target.value),(!j.id||j.id&&!q)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();ie.setValue("columnName",e),ne("columnName")}D.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===j||void 0===j?void 0:j.columnName)))&&ae(e,{message:i+" already exists"},{shouldFocus:!0})}})})},ve=(e,i,l,t,n,r)=>(0,C.jsx)(a.A,{children:(0,C.jsx)(E.eu,{allowClear:!0,placeholder:n,name:e,label:i,onChange:r,InputLabelProps:{shrink:!0},menus:l,...t&&{required:!0}})});(0,t.useEffect)((()=>{var e,i,l;A||(te("fieldId",null===j||void 0===j?void 0:j.id),te("name",null===j||void 0===j?void 0:j.name),z(null===j||void 0===j||null===(e=j.properties)||void 0===e?void 0:e.sourceTable),G(null===j||void 0===j||null===(i=j.properties)||void 0===i?void 0:i.factoryTable),T(null===j||void 0===j||null===(l=j.properties)||void 0===l?void 0:l.conditions),te("columnName",null===j||void 0===j?void 0:j.columnName),te("required",Boolean("true"===(null===j||void 0===j?void 0:j.isRequired)||!0===(null===j||void 0===j?void 0:j.isRequired))),Object.keys((null===j||void 0===j?void 0:j.properties)||{}).forEach((e=>{te(e,null===j||void 0===j?void 0:j.properties[e])})))}),[j,A,te]);const pe=[{Header:"Column",accessor:e=>{var i;return null===(i=me.find((i=>i.id===e.column)))||void 0===i?void 0:i.name}},{Header:"Operator",accessor:"operation"},{Header:"Value",accessor:"value"}];return(0,C.jsx)(E.Op,{methods:ie,onSubmit:le((async e=>{!0===e.selectType?e.selectType="multi":!1===e.selectType&&(e.selectType="single"),e.type="Dropdown",delete e.column,delete e.operation,delete e.value,e.defaultAttributeId=f,e.conditions=R;const{name:i,defaultAttributeId:l,columnName:t,required:a,type:n,conditions:r,...d}=e,o={name:i,type:n,columnName:t,columnType:"uuid",isRequired:a,defaultAttributeId:l,properties:{...d,conditions:r,type:"AND"}};if(-1!==(null!==o&&void 0!==o&&o.columnName&&(null===o||void 0===o?void 0:o.columnName)!==(null===j||void 0===j?void 0:j.columnName)?D.findIndex((e=>e.columnName===(null===o||void 0===o?void 0:o.columnName))):-1))ae("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var s;const e=null!==o&&void 0!==o&&null!==(s=o.properties)&&void 0!==s&&s.fieldId?D.findIndex((e=>{var i;return e.id===(null===o||void 0===o||null===(i=o.properties)||void 0===i?void 0:i.fieldId)})):null!==j&&void 0!==j&&j.name?D.findIndex((e=>e.name===(null===j||void 0===j?void 0:j.name))):-1;-1!==e?D[e]={...D[e],...o}:k([...D,o]),ie.reset(),O(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2,justifyContent:"space-between"},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[A?"Add":"Edit"," Dropdown Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:ce("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:ce("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:ce("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:ve("sourceTable","Source Table",ue,!0,"Select Table",(e=>{var i;z(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)}))}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:ve("sourceColumn","Source Column",me,!0,"Select Column")}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,spacing:4,children:[(0,C.jsx)(r.Ay,{item:!0,md:4,children:ve("factoryTable","Factory Table",X,!1,"Select Table",(e=>{var i;G(null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.value)}))}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:ve("factoryColumn","Factory Column",Y,!1,"Select Column")}),(0,C.jsx)(r.Ay,{item:!0,md:4,children:ve("linkColumn","Link Column",Y,!1,"Select Column")})]}),(0,C.jsx)(r.Ay,{item:!0,md:12,sx:{mb:-1},children:(0,C.jsx)(d.A,{children:"Add Dependency"})}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:ve("dependency","",N,!1,"Select Dropdown")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:ve("extraColumn","",me,!1,"Select Matching Key")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:(0,C.jsx)(d.A,{children:"Add Condition"})}),(0,C.jsxs)(r.Ay,{container:!0,sx:{pl:2,pr:2,pt:1,justifyContent:"space-between",alignItems:"center"},children:[(0,C.jsx)(r.Ay,{item:!0,md:3,children:ve("column","",me,!1,"Column",(e=>{var i;F(null===(i=e.target)||void 0===i?void 0:i.value)}))}),(0,C.jsx)(r.Ay,{item:!0,md:3,children:ve("operation","",U.we,!1,"Operation",(e=>{var i;_(null===(i=e.target)||void 0===i?void 0:i.value)}))}),(0,C.jsx)(r.Ay,{item:!0,md:3,children:ce("value","","text",!1,"Value",(e=>{var i,l;K(null===(i=e.target)||void 0===i||null===(l=i.value)||void 0===l?void 0:l.trim())}))}),(0,C.jsx)(r.Ay,{item:!0,md:2,children:(0,C.jsx)(o.A,{size:"small",variant:"contained",onClick:()=>{de()&&T([...R,{column:V,operation:P,value:W}]),F(""),_(""),K(""),te("column",""),te("operation",""),te("value","")},disabled:!de(),sx:{mt:1},children:"Add"})}),null!==R&&void 0!==R&&R.length?(0,C.jsx)(r.Ay,{sx:{width:"100%",pt:2},children:(0,C.jsx)(H.default,{hidePagination:!0,hideHeader:!0,hideEditIcon:!0,hideHistoryIcon:!0,hideViewIcon:!0,hideEmptyTable:!0,data:R,columns:pe,count:null===R||void 0===R?void 0:R.length,subTable:!0,handleRowDelete:e=>{const i=R.filter((i=>!(i.column===e.column&&i.operation===e.operation&&i.value===e.value)));T(i)}})}):(0,C.jsx)(C.Fragment,{})]}),(0,C.jsxs)(r.Ay,{container:!0,item:!0,rowSpacing:2,sx:{ml:.5,mt:.5},children:[(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===j||void 0===j?void 0:j.isRequired)||!0===(null===j||void 0===j?void 0:j.isRequired))})}),(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===j||void 0===j||null===(n=j.properties)||void 0===n?void 0:n.editable})}),(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"defaultHide",label:"Default Hide",value:null===j||void 0===j||null===(s=j.properties)||void 0===s?void 0:s.defaultHide})}),(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"selectType",label:"Multi Select",value:"multi"===(null===j||void 0===j||null===(u=j.properties)||void 0===u?void 0:u.selectType)})}),(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"isMaterial",label:"Material Field",value:null===j||void 0===j||null===(m=j.properties)||void 0===m?void 0:m.isMaterial})}),(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"disableOnSearch",label:"Disable On Search",value:null===j||void 0===j||null===(v=j.properties)||void 0===v?void 0:v.disableOnSearch})}),(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"contractor",label:"Organization",value:null===j||void 0===j||null===(p=j.properties)||void 0===p?void 0:p.contractor})}),(0,C.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,C.jsx)(E.BN,{name:"supervisor",label:"Supervisor",value:null===j||void 0===j||null===(h=j.properties)||void 0===h?void 0:h.supervisor})})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>O(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(re).length>0,children:A?"Save":"Update"})]})]})})},K=e=>{var i,l;let{modalId:n,mode:d,item:s,isPublished:u,setOpen:m,attributesArray:v,setAttributesArray:p,columnData:x}=e;const[h,f]=(0,t.useState)(),A=function(e,i,l,t){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:!(!u||d||!n||!s.id||"columnName"!=e),placeholder:r,...t&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),j.setValue(e,l.target.value),(!s.id||s.id&&!u)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();j.setValue("columnName",e),q("columnName")}v.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===s||void 0===s?void 0:s.columnName)))&&I(e,{message:i+" already exists"},{shouldFocus:!0})}})})},j=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),defaultValues:{qrType:"scanner",separatorType:"noSeparator"},mode:"all"}),{handleSubmit:N,setValue:g,setError:I,clearErrors:q,formState:{errors:O}}=j;(0,t.useEffect)((()=>{var e,i;d||(g("fieldId",null===s||void 0===s?void 0:s.id),g("name",null===s||void 0===s?void 0:s.name),f(null===s||void 0===s||null===(e=s.properties)||void 0===e?void 0:e.qrType),g("separatorType",null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.separatorType),g("columnName",null===s||void 0===s?void 0:s.columnName),g("required",Boolean("true"===(null===s||void 0===s?void 0:s.isRequired)||!0===(null===s||void 0===s?void 0:s.isRequired))),g("unique",Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))),Object.keys((null===s||void 0===s?void 0:s.properties)||{}).forEach((e=>{g(e,null===s||void 0===s?void 0:s.properties[e])})))}),[s,d,g]);return(0,C.jsx)(E.Op,{methods:j,onSubmit:N((async e=>{e.type="QR/Bar Code",e.defaultAttributeId=n;const{name:i,defaultAttributeId:l,columnName:t,required:a,unique:r,type:d,...o}=e,u={name:i,type:d,columnName:t,columnType:"text",isRequired:a,isUnique:r,defaultAttributeId:l,properties:o};if(-1!==(null!==u&&void 0!==u&&u.columnName&&(null===u||void 0===u?void 0:u.columnName)!==(null===s||void 0===s?void 0:s.columnName)?v.findIndex((e=>e.columnName===(null===u||void 0===u?void 0:u.columnName))):-1))I("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var c;const e=null!==u&&void 0!==u&&null!==(c=u.properties)&&void 0!==c&&c.fieldId?v.findIndex((e=>{var i;return e.id===(null===u||void 0===u||null===(i=u.properties)||void 0===i?void 0:i.fieldId)})):null!==s&&void 0!==s&&s.name?v.findIndex((e=>e.name===(null===s||void 0===s?void 0:s.name))):-1;-1!==e?v[e]={...v[e],...u}:p([...v,u]),j.reset(),m(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[d?"Add":"Edit"," QR/Bar Code Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:A("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:A("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:A("columnName","DB Column Name","text",!0,"Enter DB Column")}),"generator"==h&&(0,C.jsx)(r.Ay,{item:!0,md:12,children:(0,C.jsx)(E.Yq,{name:"columnList",label:"Select Columns",menus:x,required:!0})}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:(D="separatorType",k="Select Seperator",B=[{id:"noSeparator",name:"None"},{id:"space",name:"Space ( )"},{id:"comma",name:"Comma (,)"},{id:"hyphen",name:"Hyphen (-)"},{id:"underscore",name:"Underscore (_)"},{id:"hash",name:"Hash (#)"},{id:"colon",name:"Colon (:)"},{id:"semiColon",name:"Semi-Colon (;)"},{id:"slash",name:"Slash (/)"}],w=!1,R="Select Seperator",T=e=>{var i;g("separatorType",null===(i=e.target)||void 0===i?void 0:i.value)},(0,C.jsx)(a.A,{children:(0,C.jsx)(E.eu,{name:D,onChange:T,placeholder:R,label:k,menus:B,...w&&{required:!0}})}))}),(0,C.jsx)(r.Ay,{container:!0,item:!0,md:12,sx:{ml:1,flexDirection:"row"},children:(0,C.jsxs)(r.Ay,{item:!0,md:12,children:[(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===s||void 0===s?void 0:s.isRequired)||!0===(null===s||void 0===s?void 0:s.isRequired))}),(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.editable}),(0,C.jsx)(E.BN,{name:"unique",label:"Unique",value:Boolean("true"===(null===s||void 0===s?void 0:s.isUnique)||!0===(null===s||void 0===s?void 0:s.isUnique))}),(0,C.jsx)(E.BN,{name:"isMaterial",label:"Material Field",value:null===s||void 0===s||null===(l=s.properties)||void 0===l?void 0:l.isMaterial})]})}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>m(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(O).length>0,children:d?"Save":"Update"})]})]})});var D,k,B,w,R,T},Z=e=>{let{modalId:i,mode:l,item:n,isPublished:d,setOpen:s,attributesArray:u,setAttributesArray:m}=e;const v=function(e,t,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:r,label:t,disabled:!(!d||l||!i||!n.id||"columnName"!=e),placeholder:s,...o&&{required:!0},onBlur:i=>{if(i.target.value=i.target.value.trim(),p.setValue(e,i.target.value),(!n.id||n.id&&!d)&&"name"===e){const e=i.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();p.setValue("columnName",e),A("columnName")}u.some((l=>e===i.target.name&&(null===l||void 0===l?void 0:l[e])===i.target.value&&(null===l||void 0===l?void 0:l.columnName)!==(null===n||void 0===n?void 0:n.columnName)))&&f(e,{message:"Attribute name already exists"},{shouldFocus:!0})}})})},p=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:x,setValue:h,setError:f,clearErrors:A,formState:{errors:j}}=p;return(0,t.useEffect)((()=>{l||(h("fieldId",null===n||void 0===n?void 0:n.id),h("name",null===n||void 0===n?void 0:n.name),Object.keys((null===n||void 0===n?void 0:n.properties)||{}).forEach((e=>{h(e,null===n||void 0===n?void 0:n.properties[e])})))}),[n,l,h]),(0,C.jsx)(E.Op,{methods:p,onSubmit:x((async e=>{var l;e.type="Section Seperator",e.defaultAttributeId=i;const{name:t,defaultAttributeId:a,columnName:r,required:d,type:o,...c}=e,v={name:t,type:o,columnName:r,columnType:"text",isRequired:d,defaultAttributeId:a,properties:c},x=null!==v&&void 0!==v&&null!==(l=v.properties)&&void 0!==l&&l.fieldId?u.findIndex((e=>{var i;return e.id===(null===v||void 0===v||null===(i=v.properties)||void 0===i?void 0:i.fieldId)})):null!==n&&void 0!==n&&n.name?u.findIndex((e=>e.name===(null===n||void 0===n?void 0:n.name))):-1;-1!==x?u[x]={...u[x],...v}:m([...u,v]),p.reset(),s(!1)})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[l?"Add":"Edit"," Section Separator Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:v("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>s(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(j).length>0,children:l?"Save":"Update"})]})]})})},G=e=>{var i;let{modalId:l,mode:n,item:d,isPublished:s,setOpen:u,attributesArray:m,setAttributesArray:v}=e;const p=function(e,i,t,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:t,label:i,disabled:!(!s||n||!l||!d.id||"columnName"!=e),placeholder:o,...r&&{required:!0},onBlur:l=>{if(l.target.value=l.target.value.trim(),x.setValue(e,l.target.value),(!d.id||d.id&&!s)&&"name"===e){const e=l.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();x.setValue("columnName",e),j("columnName")}m.some((i=>e===l.target.name&&(null===i||void 0===i?void 0:i[e])===l.target.value&&(null===i||void 0===i?void 0:i.columnName)!==(null===d||void 0===d?void 0:d.columnName)))&&A(e,{message:i+" already exists"},{shouldFocus:!0})}})})},x=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:h,setValue:f,setError:A,clearErrors:j,formState:{errors:N}}=x;return(0,t.useEffect)((()=>{n||(f("fieldId",null===d||void 0===d?void 0:d.id),f("name",null===d||void 0===d?void 0:d.name),f("columnName",null===d||void 0===d?void 0:d.columnName),f("required",Boolean("true"===(null===d||void 0===d?void 0:d.isRequired)||!0===(null===d||void 0===d?void 0:d.isRequired))),Object.keys((null===d||void 0===d?void 0:d.properties)||{}).forEach((e=>{f(e,null===d||void 0===d?void 0:d.properties[e])})))}),[d,n,f]),(0,C.jsx)(E.Op,{methods:x,onSubmit:h((async e=>{e.type="OCR",e.defaultAttributeId=l;const{name:i,defaultAttributeId:t,columnName:a,required:n,type:r,...o}=e,s={name:i,type:r,columnName:a,columnType:"text",isRequired:n,defaultAttributeId:t,properties:o};if(-1!==(null!==s&&void 0!==s&&s.columnName&&(null===s||void 0===s?void 0:s.columnName)!==(null===d||void 0===d?void 0:d.columnName)?m.findIndex((e=>e.columnName===(null===s||void 0===s?void 0:s.columnName))):-1))A("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var c;const e=null!==s&&void 0!==s&&null!==(c=s.properties)&&void 0!==c&&c.fieldId?m.findIndex((e=>{var i;return e.id===(null===s||void 0===s||null===(i=s.properties)||void 0===i?void 0:i.fieldId)})):null!==d&&void 0!==d&&d.name?m.findIndex((e=>e.name===(null===d||void 0===d?void 0:d.name))):-1;-1!==e?m[e]={...m[e],...s}:v([...m,s]),x.reset(),u(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[n?"Add":"Edit"," OCR Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:p("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:p("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:p("defaultValue","Default Value","text",!1,"Enter Default Value")}),(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{ml:1},children:[(0,C.jsx)(E.BN,{name:"required",label:"Required",value:Boolean("true"===(null===d||void 0===d?void 0:d.isRequired)||!0===(null===d||void 0===d?void 0:d.isRequired))}),(0,C.jsx)(E.BN,{name:"editable",label:"Editable",value:null===d||void 0===d||null===(i=d.properties)||void 0===i?void 0:i.editable})]}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>u(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(N).length>0,children:n?"Save":"Update"})]})]})})},Y=e=>{let{modalId:i,mode:l,item:n,isPublished:d,setOpen:s,attributesArray:u,setAttributesArray:m}=e;const v=function(e,t,r,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:r,label:t,disabled:!(!d||l||!i||!n.id||"columnName"!=e),placeholder:s,...o&&{required:!0},onBlur:i=>{if(i.target.value=i.target.value.trim(),p.setValue(e,i.target.value),(!n.id||n.id&&!d)&&"name"===e){const e=i.target.value.replace(/[^A-Za-z ]/g,"").replace(/ +/g,"_").replace(/_+/g,"_").slice(0,16).toLowerCase();p.setValue("columnName",e),A("columnName")}u.some((l=>e===i.target.name&&(null===l||void 0===l?void 0:l[e])===i.target.value&&(null===l||void 0===l?void 0:l.columnName)!==(null===n||void 0===n?void 0:n.columnName)))&&f(e,{message:t+" already exists"},{shouldFocus:!0})}})})},p=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.attributeTitle,columnName:S.A.dbColumn,attributeName:S.A.required})),mode:"all"}),{handleSubmit:x,setValue:h,setError:f,clearErrors:A,formState:{errors:j}}=p;return(0,t.useEffect)((()=>{l||(h("fieldId",null===n||void 0===n?void 0:n.id),h("name",null===n||void 0===n?void 0:n.name),h("columnName",null===n||void 0===n?void 0:n.columnName),Object.keys((null===n||void 0===n?void 0:n.properties)||{}).forEach((e=>{h(e,null===n||void 0===n?void 0:n.properties[e])})))}),[n,l,h]),(0,C.jsx)(E.Op,{methods:p,onSubmit:x((async e=>{e.type="Reference Code",e.defaultAttributeId=i,e.editable=!1;const{name:l,defaultAttributeId:t,columnName:a,type:r,...d}=e,o={name:l,type:r,columnName:a,columnType:"text",defaultAttributeId:t,isRequired:!0,isUnique:!0,properties:d};if(-1!==(null!==o&&void 0!==o&&o.columnName&&(null===o||void 0===o?void 0:o.columnName)!==(null===n||void 0===n?void 0:n.columnName)?u.findIndex((e=>e.columnName===(null===o||void 0===o?void 0:o.columnName))):-1))f("columnName",{message:"Column Name already exists"},{shouldFocus:!0});else{var c;const e=null!==o&&void 0!==o&&null!==(c=o.properties)&&void 0!==c&&c.fieldId?u.findIndex((e=>{var i;return e.id===(null===o||void 0===o||null===(i=o.properties)||void 0===i?void 0:i.fieldId)})):null!==n&&void 0!==n&&n.name?u.findIndex((e=>e.name===(null===n||void 0===n?void 0:n.name))):-1;-1!==e?u[e]={...u[e],...o}:m([...u,o]),p.reset(),s(!1)}})),children:(0,C.jsxs)(r.Ay,{container:!0,spacing:2,sx:{p:2},children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{fontSize:22,fontWeight:"bold"},children:[l?"Add":"Edit"," Reference Code Field"]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:v("name","Display Name","text",!0,"Enter Display Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("attributeName","Attribute Name","text",!0,"Enter Attribute Name")}),(0,C.jsx)(r.Ay,{item:!0,md:6,children:v("columnName","DB Column Name","text",!0,"Enter DB Column")}),(0,C.jsxs)(r.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:2},children:[(0,C.jsx)(o.A,{size:"small",variant:"outlined",onClick:()=>s(!1),children:"Cancel"}),(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",disabled:Object.keys(j).length>0,children:l?"Save":"Update"})]})]})})};var Q=l(397),J=l(24965),X=l(10371),ee=l(68605),ie=l(22057),le=l(2043),te=l(25984),ae=l.n(te),ne=l(14351),re=l(65313),de=l(90376);const oe=e=>{let{columns:i,data:l,setAttributesArray:a,hideInactiveRows:n=!1}=e;const r=(0,t.useCallback)((e=>null===e||void 0===e?void 0:e.rank),[]),{getTableProps:d,getTableBodyProps:o,headerGroups:s,rows:u,prepareRow:m}=(0,le.useTable)({data:(e=>{var i;return null===(i=structuredClone(e))||void 0===i?void 0:i.map(((e,i)=>e?(e.rank||(e.rank=i+1),e):{}))})(l),columns:i,getRowId:r}),c=(e,i)=>{const t=l[e];a(ae()(l,{$splice:[[e,1],[i,0,t]]}))};return(0,C.jsx)(re.A,{children:(0,C.jsx)(ne.A,{content:!1,children:(0,C.jsxs)(Q.A,{...d(),children:[(0,C.jsx)(J.A,{sx:{borderTopWidth:2},children:s.map(((e,i)=>(0,C.jsxs)(X.A,{...e.getHeaderGroupProps(),children:[(0,C.jsx)(ee.A,{sx:{position:"sticky !important",minWidth:180,width:180,pt:2,pb:2},children:"Reorder"}),e.headers.map(((e,i)=>(0,C.jsx)(ee.A,{...e.getHeaderProps([{className:e.className}]),sx:{position:"sticky !important",minWidth:180,width:180,pt:2,pb:2},children:e.render("Header")},i)))]},i)))}),(0,C.jsx)(ie.A,{...o(),children:u.map(((e,i)=>{var l;return m(e),(0,C.jsx)(C.Fragment,{children:n?"1"===(null===(l=e.original)||void 0===l?void 0:l.isActive)?(0,C.jsx)(de.e6,{index:i,moveRow:c,...e.getRowProps(),children:e.cells.map((i=>{var l;return(0,C.jsx)(ee.A,{...i.getCellProps([{className:i.column.className}]),children:i.render("Cell")},null===e||void 0===e||null===(l=e.original)||void 0===l?void 0:l.id)}))},e):(0,C.jsx)(C.Fragment,{}):(0,C.jsx)(de.e6,{index:i,moveRow:c,...e.getRowProps(),children:e.cells.map((i=>{var l;return(0,C.jsx)(ee.A,{...i.getCellProps([{className:i.column.className}]),children:i.render("Cell")},null===e||void 0===e||null===(l=e.original)||void 0===l?void 0:l.id)}))},e)})}))})]})})})};var se=l(97067),ue=l(80461),me=l(81505),ce=l(88848),ve=l(80733),pe=l(10447),xe=l(64499),ye=l(72578);const he=()=>{var e,i,l,A;const j=(0,x.wA)(),N=(0,m.A)(),U=(0,v.Zp)(),{formId:Q,mode:J}=(0,v.g)(),[X,ee]=(0,t.useState)({default:1,dataMapping:0,inventoryMapping:0}),[ie,le]=(0,t.useState)(!1),[te,ae]=(0,t.useState)(),[re,de]=(0,t.useState)([]),[he,fe]=(0,t.useState)(!1),[be,Ae]=(0,t.useState)(!1),[je,Ne]=(0,t.useState)(!1),[ge,Ie]=(0,t.useState)(null),[Ce,qe]=(0,t.useState)(!1);(0,t.useEffect)((()=>{Q&&X.default&&(j((0,me.u4)({formId:Q,sortBy:"rank",sortOrder:"ASC",listType:2})),j((0,me.Ki)(Q)))}),[j,Q,X]),(0,t.useEffect)((()=>{if(X.default)return j((0,I.uiG)()),j((0,I.VOH)("FORM_TYPES")),()=>{j(pe.wF.actions.reset()),j(pe.aQ.actions.reset())}}),[j,X]);const{masterMakerOrgType:Se}=(0,ce.$)(),Ee=null===Se||void 0===Se?void 0:Se.masterObject,{projectsDropdown:Oe}=(0,ve.Y)(),De=null===Oe||void 0===Oe?void 0:Oe.projectsDropdownObject,{formAttributes:ke,formDetail:Be}=(0,g.I)(),we=(0,t.useMemo)((()=>{var e;return(null===ke||void 0===ke||null===(e=ke.formAttributesObject)||void 0===e?void 0:e.rows)||[]}),[ke]),Re=we.filter((e=>null!==e.mappingColumnId)).map((e=>({formAttributeId:e.id,mappingColumnId:e.mappingColumnId})));(0,t.useEffect)((()=>{de([...we])}),[we]);const Te=(0,t.useMemo)((()=>(null===Be||void 0===Be?void 0:Be.formDetailObject)||[]),[Be]),Me=(0,c.mN)({resolver:(0,b.t)(y.Ik().shape({name:S.A.formTitle,formTypeId:S.A.other,projectId:S.A.other})),mode:"all"}),{handleSubmit:ze,setValue:Ve}=Me;(0,t.useEffect)((()=>{Ve("name",null===Te||void 0===Te?void 0:Te.name),Ve("projectId",null===Te||void 0===Te?void 0:Te.projectId),Ve("formTypeId",null===Te||void 0===Te?void 0:Te.formTypeId)}),[Te,Ve]);const Fe={formId:null===Te||void 0===Te?void 0:Te.id},Pe=async e=>{Ie(e),fe(!0)},_e=e=>{ae(e),le(!0)},Ue=(e,i,l,t,n)=>(0,C.jsx)(a.A,{children:(0,C.jsx)(E.eu,{name:e,disable:null===Te||void 0===Te?void 0:Te.isPublished,placeholder:n,label:i,InputLabelProps:{shrink:!0},menus:l,...t&&{required:!0}})}),He=()=>(0,C.jsx)(C.Fragment,{}),Le={modalId:null===te||void 0===te?void 0:te.defaultAttributeId,mode:null===te||void 0===te?void 0:te.mode,item:te,isPublished:null===Te||void 0===Te?void 0:Te.isPublished,setOpen:le,attributesArray:re,setAttributesArray:de},$e=(0,t.useMemo)((()=>[{Header:"Display Name",accessor:"name"},{Header:"DB Column",accessor:"columnName"},{Header:"Field Type",accessor:e=>e.type||e.default_attribute.name}]),[]),We=(0,t.useMemo)((()=>[{Header:"Display Name",accessor:"name"},{Header:"DB Column",accessor:"columnName"},{Header:"Field Type",accessor:e=>e.type||e.default_attribute.name},{Header:"Req",accessor:e=>{var i;return["Key Generator","Reference Code","Section Seperator"].includes((null===(i=e.default_attribute)||void 0===i?void 0:i.name)||e.type)?(0,C.jsx)("input",{type:"radio",disabled:!0}):(0,C.jsx)("input",{type:"radio",checked:!0===e.isRequired,readOnly:!0})},minWidth:10},{Header:"Uni",accessor:e=>{var i;return["Text","Number","Email","Phone","Key Generator","QR/Bar Code"].includes((null===(i=e.default_attribute)||void 0===i?void 0:i.name)||e.type)?(0,C.jsx)("input",{type:"radio",checked:!0===e.isUnique,readOnly:!0}):(0,C.jsx)("input",{type:"radio",disabled:!0})},minWidth:10},{Header:"Edit",accessor:e=>{var i,l;return["Text","Number","Email","Phone","Dropdown","Date Time","GEO Location","OCR","QR/Bar Code"].includes((null===(i=e.default_attribute)||void 0===i?void 0:i.name)||e.type)?(0,C.jsx)("input",{type:"radio",checked:!1!==(null===(l=e.properties)||void 0===l?void 0:l.editable),readOnly:!0}):(0,C.jsx)("input",{type:"radio",disabled:!0})},minWidth:10},{Header:"Hide",accessor:e=>{var i,l;return["Text","Date Time","Key Generator","Chip Select","Dropdown"].includes((null===(i=e.default_attribute)||void 0===i?void 0:i.name)||e.type)?(0,C.jsx)("input",{type:"radio",checked:!0===(null===(l=e.properties)||void 0===l?void 0:l.defaultHide),readOnly:!0}):(0,C.jsx)("input",{type:"radio",disabled:!0})},minWidth:10}]),[]),Ke=Q?async e=>{qe(!0),e.formId=Q;const i=re.map(((e,i)=>({...e,rank:i+1})));e.attributesArray=i;const l=await(0,L.default)("/form-update",{method:"PUT",body:e});var t;l.success?(U("/form-configurator"),(0,$.A)(l.data.message,{variant:"success",autoHideDuration:1e4}),qe(!1)):((0,$.A)((null===l||void 0===l||null===(t=l.error)||void 0===t?void 0:t.message)||"Operation failed. Please try again.",{variant:"error"}),qe(!1))}:async e=>{qe(!0),re.forEach(((e,i)=>{e.rank=i+1})),e.attributesArray=re;const i=await(0,L.default)("/form-create",{method:"POST",body:e});var l;i.success?(U("/form-configurator"),(0,$.A)(i.data.message,{variant:"success",autoHideDuration:1e4}),qe(!1)):((0,$.A)((null===i||void 0===i||null===(l=i.error)||void 0===l?void 0:l.message)||"Operation failed. Please try again.",{variant:"error"}),qe(!1))};return(0,C.jsx)(C.Fragment,{children:X.default?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(E.Op,{methods:Me,onSubmit:ze(Ke),children:(0,C.jsx)(n.A,{sx:{padding:"16px 0px 0px 16px",position:"relative",border:"1px solid",borderRadius:1,borderColor:N.palette.grey.A800,boxShadow:"inherit"},children:(0,C.jsxs)(r.Ay,{container:!0,children:[(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{display:"flex",justifyContent:"space-between"},children:[(0,C.jsx)(r.Ay,{children:(0,C.jsxs)(d.A,{variant:"h4",children:[Q?"Edit Form":"Create New Form",Q&&(null===Fe||void 0===Fe?void 0:Fe.formId)&&"edit"!==J&&0!==(null===(e=re.filter((e=>!["0",0].includes(e.isActive))))||void 0===e?void 0:e.length)&&(null!==Te&&void 0!==Te&&Te.isPublished?(0,C.jsx)(o.A,{size:"small",variant:"outlined",color:"primary",onClick:()=>(0,$.A)("Form is already published.",{variant:"warning",autoHideDuration:1e4}),sx:{ml:2},children:"Published"}):(0,C.jsx)(o.A,{size:"small",variant:"contained",color:"primary",onClick:()=>Ne(!0),sx:{ml:2},children:"Publish"}))]})}),(0,C.jsxs)(r.Ay,{item:!0,sx:{display:"flex",gap:2,mr:2},children:[(0,C.jsx)(o.A,{component:p.N_,to:"/form-configurator",size:"small",variant:"outlined",color:"primary",children:"Back"}),!Q||null===re||void 0===re||!re.length||"edit"!==J||null!==re&&void 0!==re&&null!==(i=re.filter((e=>e.columnName.startsWith("l_b"))))&&void 0!==i&&i.length?(0,C.jsx)(C.Fragment,{}):(0,C.jsx)(o.A,{onClick:()=>Ae(!0),size:"small",variant:"outlined",color:"primary",children:"Add Approval Level"}),Q&&"edit"!==J&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.A,{onClick:()=>ee({...X,default:0,inventoryMapping:1}),size:"small",variant:"outlined",color:"primary",children:"Inventory Mapping"}),(0,C.jsx)(o.A,{onClick:()=>ee({...X,default:0,dataMapping:1}),size:"small",variant:"outlined",color:"primary",children:"Data Mapping"}),(0,C.jsx)(o.A,{component:p.N_,to:"/form-integration-rules/"+Q,size:"small",variant:"outlined",color:"primary",children:"API Integration"}),(0,C.jsx)(o.A,{component:p.N_,to:"/form-validation-rules/"+Q,size:"small",variant:"outlined",color:"primary",children:"Validation"}),(0,C.jsx)(o.A,{component:p.N_,to:"/form-visibility-rules/"+Q,size:"small",variant:"outlined",color:"primary",children:"Visibility"})]}),Q?(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",color:"primary",disabled:Ce,children:"Update"}):(0,C.jsx)(o.A,{size:"small",type:"submit",variant:"contained",color:"primary",disabled:Ce,children:"Save"})]})]}),(0,C.jsx)(r.Ay,{item:!0,md:12,children:(0,C.jsx)(s.A,{sx:{margin:"16px -20px 0px"}})}),(0,C.jsxs)(r.Ay,{container:!0,sx:{height:"77vh"},children:[(0,C.jsx)(r.Ay,{container:!0,item:!0,md:9.5,sx:{height:"100%",overflowY:"auto"},children:(0,C.jsxs)(r.Ay,{item:!0,md:12,sx:{mb:4},children:[(0,C.jsx)(ne.A,{sx:{mr:2,mt:4,minHeight:"120px"},children:(0,C.jsxs)(r.Ay,{container:!0,spacing:4,alignItems:"center",children:[(0,C.jsx)(r.Ay,{item:!0,md:5.5,children:function(e,i,l,t){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return(0,C.jsx)(a.A,{spacing:1,children:(0,C.jsx)(E.o3,{name:e,type:l,label:i,disabled:null===Te||void 0===Te?void 0:Te.isPublished,placeholder:n,InputLabelProps:{shrink:r},...t&&{required:!0}})})}("name","Form Name","text",!0,"Enter Form Name")}),(0,C.jsx)(r.Ay,{item:!0,md:3.25,children:Ue("projectId","Project",De,!1,"Select Project")}),(0,C.jsx)(r.Ay,{item:!0,md:3.25,children:Ue("formTypeId","Type",Ee,!1,"Select Type")})]})}),(0,C.jsx)(h.Q,{backend:f.t2,children:(0,C.jsx)(r.Ay,{item:!0,md:12,sx:{mr:2,mt:4},children:J&&"edit"!==J?(0,C.jsx)(oe,{data:re,columns:$e,hideInactiveRows:!0,handleRowDelete:Pe,handleRowUpdate:_e,setAttributesArray:de}):(0,C.jsx)(H.default,{hidePagination:!0,hideHistoryIcon:!0,hideViewIcon:!0,hideEmptyTable:!0,hideHeader:!0,fcAction:!0,data:re.filter((e=>0!=(null===e||void 0===e?void 0:e.isActive))),columns:We,count:re.filter((e=>0!=(null===e||void 0===e?void 0:e.isActive))).length,handleRowDelete:Pe,handleRowUpdate:_e})})})]})}),(0,C.jsx)(r.Ay,{item:!0,md:2.5,sx:{height:"100%",overflowY:"auto"},children:(0,C.jsx)(q,{onCallbackMethod:e=>{Q?(ae(e),le(!0)):(0,$.A)("Please save the form before adding attributes.",{variant:"warning",autoHideDuration:5e3})},mode:J})})]})]})})}),(0,C.jsx)(u.A,{open:ie,onClose:()=>le(!1),scroll:"paper",PaperProps:{sx:{maxWidth:"Dropdown"===(null===te||void 0===te?void 0:te.default)||"Key Generator"===(null===te||void 0===te?void 0:te.default)||"Dropdown"===(null===te||void 0===te?void 0:te.type)||"Key Generator"===(null===te||void 0===te?void 0:te.type)||"Dropdown"===(null===te||void 0===te||null===(l=te.default_attribute)||void 0===l?void 0:l.name)||"Key Generator"===(null===te||void 0===te||null===(A=te.default_attribute)||void 0===A?void 0:A.name)?"850px":"625px"}},disableEscapeKeyDown:!0,children:(()=>{var e;switch((null===te||void 0===te?void 0:te.type)||(null===te||void 0===te||null===(e=te.default_attribute)||void 0===e?void 0:e.name)||(null===te||void 0===te?void 0:te.default)){case"Text":return(0,C.jsx)(O,{...Le});case"Email":return(0,C.jsx)(k,{...Le});case"Phone":return(0,C.jsx)(D,{...Le});case"Image":return(0,C.jsx)(B,{...Le});case"Document":return(0,C.jsx)(w,{...Le});case"Signature":return(0,C.jsx)(R,{...Le});case"Key Generator":return(0,C.jsx)(T,{...Le,columnData:null===we||void 0===we?void 0:we.filter((e=>"1"===e.isActive))});case"GEO Location":return(0,C.jsx)(M,{...Le});case"Network Strength":return(0,C.jsx)(z,{...Le});case"Number":return(0,C.jsx)(V,{...Le});case"Chip Select":return(0,C.jsx)(F,{...Le});case"Checkbox":return(0,C.jsx)(P,{...Le});case"Date Time":return(0,C.jsx)(_,{...Le});case"Dropdown":return(0,C.jsx)(W,{...Le,columnData:null===we||void 0===we?void 0:we.filter((e=>"1"===e.isActive)),projectId:(null===Te||void 0===Te?void 0:Te.projectId)||Me.watch("projectId"),formId:Q});case"QR/Bar Code":return(0,C.jsx)(K,{...Le,columnData:null===we||void 0===we?void 0:we.filter((e=>"1"===e.isActive))});case"Section Seperator":return(0,C.jsx)(Z,{...Le});case"OCR":return(0,C.jsx)(G,{...Le});case"Reference Code":return(0,C.jsx)(Y,{...Le});default:return(0,C.jsx)(He,{})}})()}),(0,C.jsx)(xe.A,{open:he,handleClose:()=>fe(!1),handleConfirm:()=>{de(re.map((e=>({...e,isActive:(null===e||void 0===e?void 0:e.id)===ge||(null===e||void 0===e?void 0:e.name)===ge?0:e.isActive})))),fe(!1)},title:"Delete Field",message:"Are you sure you want to delete?",confirmBtnTitle:"Delete"}),(0,C.jsx)(xe.A,{open:je,handleClose:()=>Ne(!1),handleConfirm:async()=>{const e=await(0,L.default)("/form-publish",{method:"POST",body:Fe});var i;e.success?(U("/form-configurator"),(0,$.A)(e.data.message,{variant:"success",autoHideDuration:1e4})):(0,$.A)((null===e||void 0===e||null===(i=e.error)||void 0===i?void 0:i.message)||"Operation failed. Please try again.",{variant:"error"})},title:"Confirm Publish",message:"Please update changes if any, before publish.",confirmBtnTitle:"Publish"}),(0,C.jsx)(xe.A,{open:be,handleClose:()=>Ae(!1),handleConfirm:()=>{const{nextLetter:e,nextCount:i}=(()=>{const e=null===re||void 0===re?void 0:re.filter((e=>e.columnName.startsWith("l_"))).map((e=>e.columnName.charAt(2)));if(e&&e.length>0){const i=[...new Set(e)];let l=null,t=-1;i.forEach((e=>{const i=e.charCodeAt(0);i>t&&(t=i,l=e)}));let a=1;"z"!==l&&(a=l.charCodeAt(0)-"a".charCodeAt(0)+2);let n="a";return a<=26&&(n=String.fromCharCode("a".charCodeAt(0)+a-1)),{nextLetter:n,nextCount:a}}return{nextLetter:"a",nextCount:1}})(),l=null===re||void 0===re?void 0:re.some((e=>["is_resurvey","resurvey_by"].includes(e.columnName))),t=ye.$4.map((l=>({...l,columnName:l.columnName.replace("*",e),name:l.name.replace("*",i)})));e?de(l?[...re,...t]:[...re,...t,...ye.eL]):alert("All letters from a to z are used for l_* columns."),Ae(!1)},title:"Confirm Add Level",message:"Are you sure you want to add approval level?",confirmBtnTitle:"Add"})]}):X.inventoryMapping?(0,C.jsx)(se.default,{formId:Q,screen:X,setScreen:ee,formHeaderData:Te,columnData:we}):X.dataMapping?(0,C.jsx)(ue.default,{formId:Q,screen:X,setScreen:ee,formHeaderData:Te,mappingArrayData:Re}):(0,C.jsx)(C.Fragment,{})})}},25984:(e,i,l)=>{var t=l(85224);function a(e){return"object"!==typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(i,"__esModule",{value:!0});var n="object"===typeof t&&!0;function r(e,i){if(!e){if(n)throw new Error("Invariant failed");throw new Error(i())}}i.invariant=r;var d=Object.prototype.hasOwnProperty,o=Array.prototype.splice,s=Object.prototype.toString;function u(e){return s.call(e).slice(8,-1)}var m=Object.assign||function(e,i){return c(i).forEach((function(l){d.call(i,l)&&(e[l]=i[l])})),e},c="function"===typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function v(e){return Array.isArray(e)?m(e.constructor(e.length),e):"Map"===u(e)?new Map(e):"Set"===u(e)?new Set(e):e&&"object"===typeof e?m(Object.create(Object.getPrototypeOf(e)),e):e}var p=function(){function e(){this.commands=m({},x),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,i){return e===i},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,i){this.commands[e]=i},e.prototype.update=function(e,i){var l=this,t="function"===typeof i?{$apply:i}:i;Array.isArray(e)&&Array.isArray(t)||r(!Array.isArray(t),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),r("object"===typeof t&&null!==t,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(l.commands).join(", ")+"."}));var a=e;return c(t).forEach((function(i){if(d.call(l.commands,i)){var n=e===a;a=l.commands[i](t[i],a,t,e),n&&l.isEquals(a,e)&&(a=e)}else{var r="Map"===u(e)?l.update(e.get(i),t[i]):l.update(e[i],t[i]),o="Map"===u(a)?a.get(i):a[i];l.isEquals(r,o)&&("undefined"!==typeof r||d.call(e,i))||(a===e&&(a=v(e)),"Map"===u(a)?a.set(i,r):a[i]=r)}})),a},e}();i.Context=p;var x={$push:function(e,i,l){return h(i,l,"$push"),e.length?i.concat(e):i},$unshift:function(e,i,l){return h(i,l,"$unshift"),e.length?e.concat(i):i},$splice:function(e,i,l,t){return function(e,i){r(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+a(e)})),b(i.$splice)}(i,l),e.forEach((function(e){b(e),i===t&&e.length&&(i=v(t)),o.apply(i,e)})),i},$set:function(e,i,l){return function(e){r(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(l),e},$toggle:function(e,i){f(e,"$toggle");var l=e.length?v(i):i;return e.forEach((function(e){l[e]=!i[e]})),l},$unset:function(e,i,l,t){return f(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(i,e)&&(i===t&&(i=v(t)),delete i[e])})),i},$add:function(e,i,l,t){return A(i,"$add"),f(e,"$add"),"Map"===u(i)?e.forEach((function(e){var l=e[0],a=e[1];i===t&&i.get(l)!==a&&(i=v(t)),i.set(l,a)})):e.forEach((function(e){i!==t||i.has(e)||(i=v(t)),i.add(e)})),i},$remove:function(e,i,l,t){return A(i,"$remove"),f(e,"$remove"),e.forEach((function(e){i===t&&i.has(e)&&(i=v(t)),i.delete(e)})),i},$merge:function(e,i,l,t){var n,d;return n=i,r((d=e)&&"object"===typeof d,(function(){return"update(): $merge expects a spec of type 'object'; got "+a(d)})),r(n&&"object"===typeof n,(function(){return"update(): $merge expects a target of type 'object'; got "+a(n)})),c(e).forEach((function(l){e[l]!==i[l]&&(i===t&&(i=v(t)),i[l]=e[l])})),i},$apply:function(e,i){var l;return r("function"===typeof(l=e),(function(){return"update(): expected spec of $apply to be a function; got "+a(l)+"."})),e(i)}},y=new p;function h(e,i,l){r(Array.isArray(e),(function(){return"update(): expected target of "+a(l)+" to be an array; got "+a(e)+"."})),f(i[l],l)}function f(e,i){r(Array.isArray(e),(function(){return"update(): expected spec of "+a(i)+" to be an array; got "+a(e)+". Did you forget to wrap your parameter in an array?"}))}function b(e){r(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+a(e)+". Did you forget to wrap your parameters in an array?"}))}function A(e,i){var l=u(e);r("Map"===l||"Set"===l,(function(){return"update(): "+a(i)+" expects a target of type Set or Map; got "+a(l)}))}i.isEquals=y.update.isEquals,i.extend=y.extend,i.default=y.update,i.default.default=e.exports=m(i.default,i)}}]);