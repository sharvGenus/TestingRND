"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[7325],{88848:(e,t,r)=>{r.d(t,{$:()=>o});var s=r(9950),a=r(27081);const o=()=>{const[e,t]=(0,s.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[r,o]=(0,s.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[i,n]=(0,s.useState)({masterObject:[],error:"",loading:!0}),[l,c]=(0,s.useState)({masterObject:[],error:"",loading:!0}),[d,u]=(0,s.useState)({masterObject:[],error:"",loading:!0}),[m,g]=(0,s.useState)({currencyObject:[],error:"",loading:!0}),[v,f]=(0,s.useState)({gstStatusObject:[],error:"",loading:!0}),[S,p]=(0,s.useState)({paymentTermObject:[],error:"",loading:!0}),[k,b]=(0,s.useState)({incotermsObject:[],error:"",loading:!0}),[y,L]=(0,s.useState)({titleObject:[],error:"",loading:!0}),[M,O]=(0,s.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),j=(0,a.d4)((e=>e.masterMakerLov||{})),h=(0,a.d4)((e=>e.masterMakerLovList||{})),A=(0,a.d4)((e=>e.lovsForMasterName||[])),T=(0,a.d4)((e=>e.lovsForMasterNameSecond||[])),N=(0,a.d4)((e=>e.lovsForMasterNameThird||[])),w=(0,a.d4)((e=>e.currency||[])),E=(0,a.d4)((e=>e.gstStatus||[])),D=(0,a.d4)((e=>e.paymentTerm||[])),C=(0,a.d4)((e=>e.incoterms||[])),H=(0,a.d4)((e=>e.title||[])),P=(0,a.d4)((e=>e.masterMakerLovHistory||{}));return(0,s.useEffect)((()=>{t((e=>({...e,...j})))}),[j]),(0,s.useEffect)((()=>{o((e=>({...e,...h})))}),[h]),(0,s.useEffect)((()=>{n((e=>({...e,...A})))}),[A]),(0,s.useEffect)((()=>{c((e=>({...e,...T})))}),[T]),(0,s.useEffect)((()=>{u((e=>({...e,...N})))}),[N]),(0,s.useEffect)((()=>{g((e=>({...e,...w})))}),[w]),(0,s.useEffect)((()=>{f((e=>({...e,...E})))}),[E]),(0,s.useEffect)((()=>{p((e=>({...e,...D})))}),[D]),(0,s.useEffect)((()=>{b((e=>({...e,...C})))}),[C]),(0,s.useEffect)((()=>{L((e=>({...e,...H})))}),[H]),(0,s.useEffect)((()=>{O((e=>({...e,...P})))}),[P]),{masterMakerLovs:e,masterMakerLovsList:r,masterMakerOrgType:i,masterMakerOrgTypeSecond:l,masterMakerOrgTypeThird:d,masterMakerCurrency:m,masterMakerGstStatus:v,masterMakerIncoterms:k,masterMakerPaymentTerm:S,masterMakerLovHistory:M,masterMakerTitle:y}}},55176:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(9950),a=r(27081),o=r(28429),i=r(29024),n=r(52867),l=r(99635),c=r(89649),d=r(14846),u=r(3252),m=r(83456),g=r(39225),v=r(62605),f=r(88848),S=r(44414);const p=(0,u.A)((0,s.lazy)((()=>r.e(8820).then(r.bind(r,46439))))),k=[{Header:"Actions",accessor:"actionButtons"},{Header:"Project",accessor:"stock_ledgers[0].project.name"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Receiving Organization",accessor:"stock_ledgers[0].organization.name"},{Header:"Receiving Store",accessor:"stock_ledgers[0].organization_store.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}];const b=()=>{var e,t,r;const u=(0,a.wA)(),{transactionId:b}=(0,o.g)(),[y,L]=(0,s.useState)("closed"),[M,O]=(0,s.useState)(null),[j,h]=(0,s.useState)(null),[A,T]=(0,s.useState)(null),{paginations:{pageSize:N,pageIndex:w,forceUpdate:E},setPageIndex:D,setPageSize:C}=(0,c.A)(),{searchString:H,setSearchString:P,accessorsRef:x,setAccessors:_,forceSearch:B,searchStringTrimmed:I}=(0,g.A)(),{stockLedgerDetailList:z}=(0,v.t)(),{masterMakerOrgType:R}=(0,f.$)(),F=null===R||void 0===R?void 0:R.masterObject,{data:W,count:U}=(0,s.useMemo)((()=>{var e,t;return{data:(0,n.yN)(null===z||void 0===z||null===(e=z.stockLedgerDetailListObject)||void 0===e?void 0:e.rows).map(((e,t)=>{var r,s,a,o,i,n,l,c;return{...e,...!0===(null===e||void 0===e||null===(r=e.stock_ledgers[0])||void 0===r?void 0:r.isCancelled)?{status:"Cancelled"}:!0===(null===e||void 0===e||null===(s=e.stock_ledgers[0])||void 0===s?void 0:s.isProcessed)?{status:"Processed"}:{status:null},serialNumber:(w*N-N+t+1).toString(),actionButtons:(0,S.jsx)(d.w,{openPreview:()=>Q(t),initiatePrint:()=>q(t),initiateDownload:()=>V(t),viewSerialNumbers:()=>{h(t)},disablePrint:+e.sumOfAmounts>(null===(a=e.stock_ledgers)||void 0===a||null===(o=a[0])||void 0===o||null===(i=o.project)||void 0===i?void 0:i.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:+e.sumOfAmounts>(null===(n=e.stock_ledgers)||void 0===n||null===(l=n[0])||void 0===l||null===(c=l.project)||void 0===c?void 0:c.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}}))||[],count:null===z||void 0===z||null===(t=z.stockLedgerDetailListObject)||void 0===t?void 0:t.count,isLoading:null===z||void 0===z?void 0:z.loading,error:null===z||void 0===z?void 0:z.error}}),[z,w,N]),Y=(null===W||void 0===W||null===(e=W[j])||void 0===e?void 0:e.materialData)||[],$=null===W||void 0===W||null===(t=W[M])||void 0===t?void 0:t.id,G=null===W||void 0===W||null===(r=W[M])||void 0===r?void 0:r.referenceDocumentNumber,J=(0,s.useMemo)((()=>F?function(e,t){for(let r=0;r<e.length;r++)if(e[r].name===t)return e[r].id;return null}(F,"LTL"):null),[F]);(0,s.useEffect)((()=>{u((0,i.VOH)("TRANSACTION TYPE"))}),[u]),(0,s.useEffect)((()=>{J&&u((0,i.rYL)({pageIndex:w,pageSize:N,transactionTypeId:J,...I&&{searchString:I,accessors:JSON.stringify(x.current)},sortBy:(null===A||void 0===A?void 0:A[0])||"createdAt",sortOrder:(null===A||void 0===A?void 0:A[1])||"DESC"}))}),[u,b,w,N,E,J,I,A,x,B]);const Q=e=>{L("view"),O(e)},V=e=>{L("download"),O(e)},q=e=>{L("print"),O(e)};return(0,S.jsxs)(S.Fragment,{children:["closed"!==y&&(0,S.jsx)(p,{fetchFromRoute:"/ltl-receipt",apiParams:$,previewAction:y,onClose:()=>{L("hidden"),O(null)},fileNameForDownload:G}),null!==j&&(0,S.jsx)(m.A,{selectedMaterialList:Y,onClose:()=>{h(null)}}),(0,S.jsx)(l.default,{title:"LTL Receipt",setPageIndex:D,setPageSize:C,pageIndex:w,pageSize:N,columns:k,data:J?W:[],count:J?U:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:H,searchStringTrimmed:I,setSearchString:P,setAccessors:_},sortConfig:{sort:A,setSort:T},exportConfig:{tableName:"ltl_receipt",apiQuery:{transactionTypeId:J}}})]})}}}]);