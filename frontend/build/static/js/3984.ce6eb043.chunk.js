"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[3984],{73961:(e,t,n)=>{n.d(t,{A:()=>U});var a=n(9950),i=n(81095),r=n(80294),o=n(93245),s=n(60158),l=n(44813),c=n(16335),d=n(25102),h=n(85706),u=n(67628),x=n(12257),p=n(95537),g=n(87233),m=n(57073),A=n(92089),j=n(27987),f=n(14195),v=n(7233),y=n(51496),C=n(99624),b=n(77340),S=n(18655),D=n(71201),w=n(55271),k=n(34691),_=n(59019),$=n(81052),E=n.n($),T=n(47751),M=n(3379),H=n(78581),W=n(14351),F=n(62054),I=n(33507),N=n(52867),P=n(44414);const z=["#8884d8","#82ca9d","#ffc658","#ff8042","#8dd1e1","#a4de6c","#d0ed57","#ffc0cb"],U=e=>{let{chartData:t,xAxis:n,title:$,height:U}=e;const{user:B}=(0,I.A)(),[G,L]=(0,a.useState)(null),[O,R]=(0,a.useState)([]),[K,V]=(0,a.useState)(!1),X=(0,a.useRef)();if(!t||!t.length)return(0,P.jsx)(M.A,{title:$});const Y=Object.keys(t[0]).filter((e=>e!==n)),q=Y.length<=2?z.slice(0,2):z,Z=(()=>{var e;const n=null===(e=Object.keys(t[0]))||void 0===e?void 0:e.filter((e=>e!==Y&&!(null!==O&&void 0!==O&&O.includes(e))));return 0===(null===n||void 0===n?void 0:n.length)?1/0:Math.max(...t.map((e=>n.reduce(((t,n)=>{const a=parseInt(e[n],10);return t+(isNaN(a)?0:a)}),0))))})(),Q=Z+Math.ceil(.1*Z),J=Math.ceil(Q/6),ee=()=>{L(null)},te=()=>{const e=new Date,t=new Date(e.getTime()+198e5),n=t.getUTCFullYear(),a=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),r=String(t.getUTCHours()).padStart(2,"0"),o=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...n]=e.trim().split(" "),a=n.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return a?`${t} ${a}`:t})(null===B||void 0===B?void 0:B.name)}_${n}-${a}-${i}_${r}-${o}-${s} IST`},ne=t.length>15,ae=t.length>15?15:50;return(0,P.jsxs)(W.A,{sx:{height:500,width:"100%"},children:[$&&(0,P.jsx)(x.A,{sx:{border:"1px solid #97E7E1"},children:(0,P.jsxs)(p.A,{sx:{backgroundColor:H.H_,py:.7,display:"flex",flexDirection:"row",alignItems:"center",px:2},children:["none"!==$&&(0,P.jsx)(p.A,{sx:{flex:1,display:"flex",justifyContent:"center"},children:(0,P.jsx)(g.A,{variant:"h6",color:"common.white",children:$})}),(0,P.jsx)(m.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{L(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,P.jsx)(C.A,{})}),(0,P.jsxs)(A.A,{id:"menu",anchorEl:G,keepMounted:!0,open:Boolean(G),onClose:ee,children:[(0,P.jsxs)(j.A,{onClick:()=>{const e=te();if(X.current){const t=document.createElement("div");t.style.position="relative",t.style.width=`${X.current.clientWidth}px`,t.style.height=`${X.current.clientHeight+50}px`,t.style.backgroundColor="white";const n=document.createElement("div");n.style.textAlign="center",n.style.marginBottom="10px",n.innerHTML=`<h2>${$}</h2>`,t.appendChild(n);const a=X.current.cloneNode(!0);t.appendChild(a),document.body.appendChild(t),(0,T.$E)(t,{cacheBust:!0}).then((n=>{(0,k.saveAs)(n,`${$.replace(/\s+/g,"_")}_${e}.png`),(0,F.A)("Chart exported as PNG successfully.",{variant:"success",autoHideDuration:1e3}),document.body.removeChild(t)})).catch((e=>{(0,F.A)(e.message||"Can't export as PNG.",{variant:"error",autoHideDuration:1e3}),document.body.removeChild(t)}))}else(0,F.A)("Can't export as PNG.",{variant:"error",autoHideDuration:1e3});ee()},children:[(0,P.jsx)(f.A,{children:(0,P.jsx)(b.A,{fontSize:"small"})}),"Export as PNG"]}),(0,P.jsxs)(j.A,{onClick:()=>{const e=te();setTimeout((()=>{X.current&&X.current instanceof Node?E()(X.current).then((t=>{const n=new _.jsPDF;n.text($,n.internal.pageSize.getWidth()/2,20,{align:"center"});const a=t.toDataURL("image/png"),i=n.getImageProperties(a),r=n.internal.pageSize.getWidth(),o=i.height*r/i.width;n.addImage(a,"PNG",0,30,r,o),n.save(`${$.replace(/\s+/g,"_")}_${e}.pdf`),(0,F.A)("Chart exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})})).catch((e=>{(0,F.A)(e.message||"Can't export as PDF.",{variant:"error",autoHideDuration:1e3})})):(0,F.A)("Can't export as PDF.",{variant:"error",autoHideDuration:1e3})}),1e3),ee()},children:[(0,P.jsx)(f.A,{children:(0,P.jsx)(S.A,{fontSize:"small"})}),"Export as PDF"]}),(0,P.jsxs)(j.A,{onClick:()=>{const e=te(),a=O.length>0?Y.filter((e=>!O.includes(e))):Y,i=t.map((e=>a.reduce(((t,a)=>(t[n]=e[n],t[a]=e[a],t)),{}))),r=w.Wp.json_to_sheet(i),o=[Array(a.length+1).fill("")];o[0][0]=$,w.Wp.sheet_add_aoa(r,o,{origin:"A1"}),r["!merges"]=[{s:{r:0,c:0},e:{r:0,c:a.length}}];const s=[n,...a].map((e=>e.charAt(0).toUpperCase()+e.slice(1)));w.Wp.sheet_add_aoa(r,[s],{origin:"A2"}),w.Wp.sheet_add_json(r,i,{origin:"A3",skipHeader:!0});const l=w.Wp.book_new();w.Wp.book_append_sheet(l,r,"Data"),w._h(l,`${$.replace(/\s+/g,"_")}_${e}.xlsx`),(0,F.A)("Chart exported as XLSX successfully.",{variant:"success",autoHideDuration:1e3}),ee()},children:[(0,P.jsx)(f.A,{children:(0,P.jsx)(D.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,P.jsxs)(p.A,{sx:{position:"relative",mt:4},children:[(0,P.jsx)(v.A,{control:(0,P.jsx)(y.A,{checked:K,onChange:()=>V(!K),name:"showValues",color:"primary"}),label:"Show Values",sx:{display:"none",justifyContent:"flex-end",alignItems:"center",pr:"20px"}}),(0,P.jsx)(i.u,{width:"100%",height:U,ref:X,children:(0,P.jsxs)(r.E,{width:"100%",height:U,ref:X,data:t,children:[(0,P.jsx)(o.d,{strokeDasharray:"3 3"}),(0,P.jsx)(s.W,{dataKey:n,angle:ne?-45:0,textAnchor:ne?"end":"middle",padding:{left:10,right:10},height:200,interval:0,tickFormatter:N.XV}),(0,P.jsx)(l.h,{allowDecimals:!1,ticks:(()=>{const e=[];let t=Q;for(;t>=0;)e.push(t),t-=J;return e.includes(0)||e.push(0),e})(),domain:[0,Q]}),(0,P.jsx)(c.m,{}),(0,P.jsx)(d.s,{layout:"horizontal",verticalAlign:"top",align:"center",onClick:e=>{return t=e.dataKey,void R((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},iconType:"square",wrapperStyle:{display:"flex",justifyContent:"center",fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},formatter:(e,t)=>{const n=O.includes(e);return(0,P.jsx)("span",{style:{color:n?"gray":t.color},children:e})}}),Y.map(((e,t)=>(0,P.jsx)(h.y,{dataKey:e,fill:q[t%q.length],hide:O.includes(e),maxBarSize:ae,stackId:"a",children:K&&(0,P.jsx)(u.Z,{dataKey:e,position:"top",fill:"black",fontSize:10,offset:10})},e)))]})})]})]})}},6944:(e,t,n)=>{n.d(t,{A:()=>j});var a=n(16125),i=n(95537),r=n(4139),o=n(87233),s=n(14857),l=n(52867),c=n(44414);const d=e=>{let{title:t}=e;return(0,c.jsx)(o.A,{sx:{textTransform:"uppercase",textAlign:"center",fontSize:"0.75rem",fontWeight:"bold"},children:t})},h=e=>{let{value:t,loadingCondition:n,valueColor:i}=e;return(0,c.jsx)(o.A,{color:i,style:{fontSize:"1rem"},...!i&&{fontWeight:"bold"},children:n?(0,c.jsx)(a.A,{variant:"text",width:50}):(0,l.Le)(t)})},u=e=>{let{item:t,index:n,palette:a,loadingCondition:r,dataLength:o,valueColor:l,reducedHeight:u}=e;const x=(0,s.A)();return(0,c.jsxs)(i.A,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",sx:{px:.5,py:u?.5:1,gap:x.spacing(.5),backgroundColor:a[n%a.length],width:100/o+"%"},children:[t.title&&(0,c.jsx)(d,{title:t.title}),(0,c.jsx)(h,{value:t.value,loadingCondition:r,valueColor:l})]})},x=e=>{let{blocksForDisplay:t,palette:n,loadingCondition:a,valueColor:i,reducedHeight:o}=e;const l=(0,s.A)();return t.map(((e,t)=>(0,c.jsxs)(r.Ay,{item:!0,xs:2,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",sx:{px:.5,py:o?.5:1,gap:l.spacing(.5),backgroundColor:n[t%n.length]},children:[e.title&&(0,c.jsx)(d,{title:e.title}),(0,c.jsx)(h,{value:e.value,loadingCondition:a,valueColor:i})]},e.id||e.title)))},p=["#3B8BD5","#D5D3D3","#92D050","#3B8BD5","#6BA1D2","#30A743","#00ea00","#F075E7","#B4C6E7","#97A723","#CB536A","#9BC2E6"],g=["#2F75B5","#F4B084","#8EA9DB","#A8CF8D","#9DC3E6"],m=Array(12).fill({title:(0,c.jsx)(a.A,{variant:"text",width:100}),value:(0,c.jsx)(a.A,{variant:"text",width:50})}).map(((e,t)=>({id:t,...e,bgColor:p[t%p.length],note:9===t||10===t?{value:(0,c.jsx)(a.A,{variant:"text",width:80}),color:"green"}:void 0}))),A=e=>!isNaN(e)&&e%2!==0,j=e=>{let{data:t,reducedHeight:n,valueColor:a,expectedLength:o,loadingCondition:s,palette:l}=e;const d=s?m:t||m;let h=d;return s||0!==h.length||isNaN(o)||0===o?isNaN(o)||0===o||(h=d.slice(0,o)):h=Array.from({length:o},((e,t)=>({id:`empty-block-${t}`,title:"-",value:"#",bgColor:"#f0f0f0",note:{value:"No data available",color:"red"}}))),A(o)||A(h.length)?(0,c.jsx)(i.A,{display:"flex",justifyContent:"center",minHeight:n?42:84,children:h.map(((e,t)=>(0,c.jsx)(u,{dataLength:h.length,item:e,index:t,palette:l||g,loadingCondition:s,valueColor:a,reducedHeight:n},e.id||e.title)))}):(0,c.jsx)(r.Ay,{container:!0,minHeight:n?42:84,spacing:0,children:(0,c.jsx)(x,{blocksForDisplay:h,palette:l||p,loadingCondition:s,valueColor:a,reducedHeight:n})})}},74288:(e,t,n)=>{n.d(t,{A:()=>F,Q:()=>W});var a=n(10371),i=n(68605),r=n(12257),o=n(95537),s=n(87233),l=n(57073),c=n(92089),d=n(27987),h=n(14195),u=n(64661),x=n(35661),p=n(397),g=n(24965),m=n(22057),A=n(99624),j=n(77340),f=n(18655),v=n(71201),y=n(55271),C=n(34691),b=n(59019),S=n(81052),D=n.n(S),w=n(16125),k=n(9950),_=n(3379),$=n(52867),E=n(14351),T=n(62054),M=n(33507),H=n(44414);const W=e=>{let{columns:t}=e;return(0,H.jsx)(H.Fragment,{children:Array.from({length:10}).map(((e,n)=>(0,H.jsx)(a.A,{sx:{height:"24px"},children:t.map(((e,t)=>(0,H.jsx)(i.A,{sx:{padding:"4px"},children:(0,H.jsx)(w.A,{variant:"text",width:"100%"})},t)))},n)))})},F=e=>{let{minWidth:t=750,containerSx:n={},data:S=[],columns:w=[],highlightedColumnsCount:F=0,loadingCondition:I,size:N,title:P,backgroundColor:z}=e;const{user:U}=(0,M.A)(),[B,G]=(0,k.useState)(null),L=`dashboard-table-${P}`;if(!S||0===S.length)return(0,H.jsx)(_.A,{title:P});const O=()=>{G(null)},R=()=>{const e=new Date,t=new Date(e.getTime()+198e5),n=t.getUTCFullYear(),a=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),r=String(t.getUTCHours()).padStart(2,"0"),o=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...n]=e.trim().split(" "),a=n.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return a?`${t} ${a}`:t})(null===U||void 0===U?void 0:U.name)}_${n}-${a}-${i}_${r}-${o}-${s} IST`};return(0,H.jsxs)(E.A,{children:[P&&(0,H.jsx)(r.A,{sx:{border:"1px solid #97E7E1"},children:(0,H.jsxs)(o.A,{sx:{backgroundColor:z,py:.7,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"none"!==P?"normal":"flex-end",px:2},children:["none"!==P&&(0,H.jsx)(o.A,{sx:{flex:1,display:"flex",justifyContent:"center"},children:(0,H.jsx)(s.A,{variant:"h6",color:"common.white",children:P})}),(null===S||void 0===S?void 0:S.length)>0&&(0,H.jsx)(l.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{G(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,H.jsx)(A.A,{})}),(0,H.jsxs)(c.A,{id:"menu",anchorEl:B,keepMounted:!0,open:Boolean(B),onClose:O,children:[(0,H.jsxs)(d.A,{onClick:async()=>{const e=R(),t=document.getElementById(L);if(t)try{const n=await D()(t),a=n.width,i=n.height,r="none"!==P?50:0,o=document.createElement("canvas");o.width=a,o.height=i+r;const s=o.getContext("2d");"none"!==P&&(s.fillStyle="#FFFFFF",s.fillRect(0,0,o.width,r),s.fillStyle="#000000",s.font="bold 24px Arial",s.textAlign="center",s.textBaseline="middle",s.fillText(P,o.width/2,r/2)),s.drawImage(n,0,r);const l=o.toDataURL("image/png"),c=document.createElement("a");c.href=l,c.download="none"===P?`${e}.png`:`${P.replace(/\s+/g,"_")}_${e}.png`,c.click(),(0,T.A)("Table exported as PNG successfully.",{variant:"success",autoHideDuration:1e3})}catch(n){(0,T.A)(n.message||"Can't export as PNG.",{variant:"error",autoHideDuration:1e3})}finally{O()}},children:[(0,H.jsx)(h.A,{children:(0,H.jsx)(j.A,{fontSize:"small"})}),"Export as PNG"]}),(0,H.jsxs)(d.A,{onClick:async()=>{const e=R(),t=document.getElementById(L);if(t)try{const n=await D()(t),a=n.toDataURL("image/png"),i=new b.jsPDF;"none"!==P&&(i.setFontSize(24),i.setFont("Arial","bold"),i.text(P,i.internal.pageSize.getWidth()/2,20,{align:"center"})),i.addImage(a,"PNG",10,30,190,190*n.height/n.width),i.save("none"===P?`${e}.pdf`:`${P.replace(/\s+/g,"_")}_${e}.pdf`),(0,T.A)("Table exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})}catch(n){(0,T.A)(n.message||"Can't export as PDF.",{variant:"error",autoHideDuration:1e3})}finally{O()}},children:[(0,H.jsx)(h.A,{children:(0,H.jsx)(f.A,{fontSize:"small"})}),"Export as PDF"]}),(0,H.jsxs)(d.A,{onClick:()=>{const e=R(),t=y.Wp.json_to_sheet([]),n=y.Wp.book_new();let a=0;if("none"!==P){y.Wp.sheet_add_aoa(t,[[P]],{origin:"A1"});const e=w.length-1;t["!merges"]=[{s:{r:a,c:0},e:{r:a,c:e}}],a+=1}y.Wp.sheet_add_aoa(t,[w.map((e=>e.Header))],{origin:`A${a+1}`}),a+=1,y.Wp.sheet_add_json(t,S,{skipHeader:!0,origin:`A${a+1}`}),y.Wp.book_append_sheet(n,t,"Dashboard Data");const i=y.M9(n,{bookType:"xlsx",type:"array"}),r=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,C.saveAs)(r,"none"===P?`${e}.xlsx`:`${P.replace(/\s+/g,"_")}_${e}.xlsx`),(0,T.A)("Table exported as XLSX successfully.",{variant:"success",autoHideDuration:1e3}),O()},children:[(0,H.jsx)(h.A,{children:(0,H.jsx)(v.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,H.jsx)(u.A,{id:L,component:x.A,sx:{maxWidth:"100%",overflowX:"auto",...n},children:(0,H.jsxs)(p.A,{size:N,stickyHeader:!0,"aria-label":"customized table",sx:{minWidth:t},children:[(0,H.jsx)(g.A,{children:(0,H.jsx)(a.A,{children:w.map((e=>(0,H.jsx)(i.A,{sx:{backgroundColor:"#C6E0B4",paddingX:"6px",paddingY:"6px",fontSize:"0.6rem",fontWeight:"bold",lineHeight:"1.2"},align:e.align||"left",children:e.Header},e.accessor)))})}),(0,H.jsx)(m.A,{children:I?(0,H.jsx)(W,{columns:w}):S.length>0?S.map(((e,t)=>(0,H.jsx)(a.A,{sx:{height:"24px"},children:w.map(((t,n)=>(0,H.jsx)(i.A,{sx:{paddingX:"6px",paddingY:"4px",fontSize:"0.7rem",...(F?n+1<=F:0===n)&&{backgroundColor:"#FFF2CC"}},align:t.align||"left",children:t.Header.match(/date/i)?(0,$.jC)(e[t.accessor]):e[t.accessor]},t.accessor)))},t))):null})]})})]})}},43997:(e,t,n)=>{n.d(t,{i:()=>r});var a=n(9950),i=n(62054);const r=e=>{(0,a.useEffect)((()=>{e&&(0,i.A)(e,{variant:"error"})}),[e])}},53984:(e,t,n)=>{n.r(t),n.d(t,{CenteredMainCardTitle:()=>oe,CustomMainCard:()=>se,default:()=>ce});var a=n(87233),i=n(59254),r=n(4139),o=n(95537),s=n(9950),l=n(9449),c=n(60666),d=n(26473),h=n(27081),u=n(6944),x=n(74288),p=n(81095),g=n(80294),m=n(93245),A=n(60158),j=n(44813),f=n(16335),v=n(25102),y=n(85706),C=n(67628),b=n(12257),S=n(57073),D=n(92089),w=n(27987),k=n(14195),_=n(7233),$=n(51496),E=n(99624),T=n(77340),M=n(18655),H=n(71201),W=n(55271),F=n(34691),I=n(59019),N=n(81052),P=n.n(N),z=n(47751),U=n(1092),B=n(3379),G=n(14351),L=n(78581),O=n(33507),R=n(62054),K=n(44414);const V=[...U.H,"#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2"],X=[...U.H,"#1f77b4","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94","#f7b6d2","#9edae5","#ff9896","#c7c7c7","#dbdb8d","#9edae5","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94"],Y=e=>{let{x:t,y:n,width:i,height:r,labelHeader:o,value:s,isSmallStack:l}=e;if(l)return null;const c=t+i/2,d=n+r/2+8;return(0,K.jsx)("foreignObject",{x:c-i/2,y:d-20,width:i,height:r+6,children:(0,K.jsx)(a.A,{component:"span",sx:{color:"white",textShadow:"1px 1px 1px gray",fontSize:"14px",fontWeight:550,textAlign:"center",display:"block",width:"100%"},children:o?`${o} (${s})`:s})})},q=e=>{let{data:t=[],title:n}=e;const[i,r]=(0,s.useState)(null),[l,c]=(0,s.useState)([]),[d,h]=(0,s.useState)(!1),u=(0,s.useRef)(),{user:x}=(0,O.A)();if(0===t.length)return(0,K.jsx)(B.A,{title:n});const N=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e=t<=7?V:X,e.slice(0,Math.min(t,e.length))}(t.length),[U,q,Z]=Object.keys(t[0]),Q=t.reduce(((e,t)=>{const n=e.find((e=>e[U]===t[U]));return n?n[t[q]]=t[Z]:e.push({[U]:t[U],[t[q]]:t[Z]}),e}),[]),J=(()=>{var e;const t=null===(e=Object.keys(Q[0]))||void 0===e?void 0:e.filter((e=>e!==U&&!(null!==l&&void 0!==l&&l.includes(e))));return 0===(null===t||void 0===t?void 0:t.length)?1/0:Math.max(...Q.map((e=>t.reduce(((t,n)=>{const a=parseInt(e[n],10);return t+(isNaN(a)?0:a)}),0))))})(),ee=J+Math.ceil(.1*J),te=Math.ceil(ee/6),ne=()=>{r(null)},ae=()=>{const e=new Date,t=new Date(e.getTime()+198e5),n=t.getUTCFullYear(),a=String(t.getUTCMonth()+1).padStart(2,"0"),i=String(t.getUTCDate()).padStart(2,"0"),r=String(t.getUTCHours()).padStart(2,"0"),o=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...n]=e.trim().split(" "),a=n.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return a?`${t} ${a}`:t})(null===x||void 0===x?void 0:x.name)}_${n}-${a}-${i}_${r}-${o}-${s} IST`};return(0,K.jsxs)(G.A,{children:[(0,K.jsx)(b.A,{sx:{border:"1px solid #97E7E1"},children:(0,K.jsxs)(o.A,{sx:{backgroundColor:L.H_,py:.7,display:"flex",flexDirection:"row",alignItems:"center",px:2},children:[(0,K.jsx)(o.A,{sx:{flex:1,display:"flex",justifyContent:"center",textAlign:"center"},children:(0,K.jsx)(a.A,{variant:"h6",color:"common.white",children:n})}),(0,K.jsx)(S.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{r(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,K.jsx)(E.A,{})}),(0,K.jsxs)(D.A,{id:"menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:ne,children:[(0,K.jsxs)(w.A,{onClick:()=>{const e=ae();if(u.current){const t=document.createElement("div");t.style.position="relative",t.style.width=`${u.current.clientWidth}px`,t.style.height=`${u.current.clientHeight+50}px`,t.style.backgroundColor="white";const a=document.createElement("div");a.style.textAlign="center",a.style.marginBottom="10px",a.innerHTML=`<h2>${n}</h2>`,t.appendChild(a);const i=u.current.cloneNode(!0);t.appendChild(i),document.body.appendChild(t),(0,z.$E)(t,{cacheBust:!0}).then((a=>{(0,F.saveAs)(a,`${n.replace(/\s+/g,"_")}_${e}.png`),(0,R.A)("Chart Exported as PNG successfully.",{variant:"success",autoHideDuration:1e3}),document.body.removeChild(t)})).catch((()=>{(0,R.A)("Failed to export chart as PNG.",{variant:"error",autoHideDuration:1e3}),document.body.removeChild(t)}))}ne()},children:[(0,K.jsx)(k.A,{children:(0,K.jsx)(T.A,{fontSize:"small"})}),"Export as PNG"]}),(0,K.jsxs)(w.A,{onClick:()=>{const e=ae();u.current&&P()(u.current).then((t=>{const a=new I.jsPDF;a.text(n,a.internal.pageSize.getWidth()/2,20,{align:"center"});const i=t.toDataURL("image/png"),r=a.getImageProperties(i),o=a.internal.pageSize.getWidth(),s=r.height*o/r.width;a.addImage(i,"PNG",0,30,o,s),a.save(`${n.replace(/\s+/g,"_")}_${e}.pdf`),(0,R.A)("Chart Exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})})).catch((()=>{(0,R.A)("Failed to export chart as PDF.",{variant:"error",autoHideDuration:1e3})})),ne()},children:[(0,K.jsx)(k.A,{children:(0,K.jsx)(M.A,{fontSize:"small"})}),"Export as PDF"]}),(0,K.jsxs)(w.A,{onClick:()=>{const e=ae(),t=Object.keys(Q[0]).filter((e=>e!==U)),a=l.length>0?t.filter((e=>!l.includes(e))):t,i=[U,...a.map((e=>e.charAt(0).toUpperCase()+e.slice(1)))],r=Q.map((e=>i.reduce(((t,n)=>(t[n]=e[n]||"",t)),{}))),o=W.Wp.json_to_sheet(r),s=Array(i.length).fill("");s[0]=n,W.Wp.sheet_add_aoa(o,[s],{origin:"A1"}),o["!merges"]=[{s:{r:0,c:0},e:{r:0,c:i.length-1}}],W.Wp.sheet_add_aoa(o,[i],{origin:"A2"});const c=r.map((e=>i.map((t=>e[t]||""))));W.Wp.sheet_add_aoa(o,c,{origin:"A3"});const d=W.Wp.book_new(),h=n.length>31?n.substring(0,31):n;W.Wp.book_append_sheet(d,o,h),W._h(d,`${n.replace(/\s+/g,"_")}_${e}.xlsx`),(0,R.A)("Chart Exported as Excel successfully.",{variant:"success",autoHideDuration:1e3}),ne()},children:[(0,K.jsx)(k.A,{children:(0,K.jsx)(H.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,K.jsx)(o.A,{sx:{p:2,display:"none",justifyContent:"flex-end",alignItems:"center"},children:(0,K.jsx)(_.A,{control:(0,K.jsx)($.A,{checked:d,onChange:e=>h(e.target.checked)}),label:"Show Values"})}),(0,K.jsx)(p.u,{width:"100%",height:250,ref:u,children:(0,K.jsxs)(g.E,{width:500,height:250,data:Q,barCategoryGap:"10%",maxBarSize:50,children:[(0,K.jsx)(m.d,{strokeDasharray:"3 3"}),(0,K.jsx)(A.W,{dataKey:U}),(0,K.jsx)(j.h,{domain:[0,ee],ticks:(()=>{const e=[];let t=ee;for(;t>=0;)e.push(t),t-=te;return e.includes(0)||e.push(0),e})()}),(0,K.jsx)(f.m,{}),(0,K.jsx)(v.s,{layout:"horizontal",verticalAlign:"top",align:"center",onClick:e=>{return t=e.dataKey,void c((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},iconType:"square",wrapperStyle:{display:"flex",justifyContent:"center",fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},formatter:(e,t)=>{const n=l.includes(e);return(0,K.jsx)("span",{style:{color:n?"gray":t.color},children:e})}}),Object.keys(Q[0]).map(((e,t)=>e===U?null:(0,K.jsx)(y.y,{dataKey:e,hide:l.includes(e),stackId:"a",fill:N[t%N.length],children:d&&(0,K.jsx)(C.Z,{dataKey:e,position:"middle",content:e=>(0,K.jsx)(Y,{...e})})},e)))]})})]})};var Z=n(73961),Q=n(35377),J=n(80733),ee=n(96951),te=n(84601),ne=n(29024),ae=n(94826),ie=n(40761),re=n(43997);const oe=e=>{let{title:t}=e;return(0,K.jsx)(a.A,{variant:"h5",align:"center",children:t})},se=(0,i.Ay)(G.A)((e=>{let{theme:t}=e;return{"& .MuiCardHeader-root":{paddingTop:t.spacing(.9),paddingBottom:t.spacing(.9)},"& .MuiCardContent-root":{paddingTop:t.spacing(1),paddingBottom:t.spacing(1),paddingLeft:t.spacing(2),paddingRight:t.spacing(2)}}})),le={contractorSummary:{},contractorSummaryMainTable:[],plannedVsActualInstallationStatus:[],regionWisePercentage:[],circleWiseData:[],mainExecutiveData:[],mainExecutiveDataSummary:[]},ce=()=>{var e,t,n,a,i,p,g,m,A,j,f,v;const y=(0,l.mN)({resolver:(0,d.t)(c.Ik().shape({projectId:te.A.project})),defaultValues:{},mode:"all"}),{setValue:C,watch:b}=y,[S]=b(["projectId"]),D=(0,h.wA)(),[w,k]=[null===(e=(0,J.Y)())||void 0===e||null===(t=e.projectsDropdown)||void 0===t?void 0:t.projectsDropdownObject,null===(n=(0,J.Y)())||void 0===n||null===(a=n.projectsDropdown)||void 0===a?void 0:a.loading],[_,$,E]=[{...le,...null===(i=(0,ie.r)())||void 0===i||null===(p=i.executiveDashboard)||void 0===p?void 0:p.executiveDashboardObject},null===(g=(0,ie.r)())||void 0===g||null===(m=g.executiveDashboard)||void 0===m?void 0:m.loading,null===(A=(0,ie.r)())||void 0===A||null===(j=A.executiveDashboard)||void 0===j?void 0:j.error],T=null===(f=(0,J.Y)())||void 0===f||null===(v=f.projectDetails)||void 0===v?void 0:v.projectDetailsObject,M=(0,s.useMemo)((()=>(null===T||void 0===T?void 0:T.id)===S?T:null),[T,S]);(0,re.i)(E);const H=!k&&0===w.length,{contractorSummary:W,contractorSummaryMainTable:F,plannedVsActualInstallationStatus:I,regionWisePercentage:N,zoneWisePercentage:P,circleWiseData:z,mainExecutiveData:G}=_,O=(0,s.useMemo)((()=>(0,L.VD)(W)),[W]),R=(0,s.useMemo)((()=>(0,L.qU)(F||[])),[F]),V=(0,s.useMemo)((()=>(0,L.pc)(I||[])),[I]),X=(0,s.useMemo)((()=>(0,L.EN)(N||[])),[N]),Y=(0,s.useMemo)((()=>(0,L.EN)(P||[])),[P]),ce=(0,s.useMemo)((()=>(0,L.I1)(z||[])),[z]),de=(0,s.useMemo)((()=>(0,L.Qv)(G||[])),[G]),he=(0,s.useMemo)((()=>(0,L.ol)(G||[],M||{})),[G,M]),ue=(0,s.useMemo)((()=>(0,L.v2)(F||[])),[F]),xe=(0,s.useMemo)((()=>(0,L.xH)(F||[])),[F]),pe=(0,s.useCallback)((async()=>{S&&D((0,ne.T9O)({projectId:S}))}),[D,S]);return(0,s.useEffect)((()=>{w.length>0&&C("projectId",w[0].id)}),[w,C]),(0,s.useEffect)((()=>{pe()}),[pe]),(0,s.useEffect)((()=>{D((0,ne.uiG)())}),[D]),(0,s.useEffect)((()=>{S&&D((0,ne.ESv)(S))}),[S,D]),(0,K.jsxs)(K.Fragment,{children:[(w&&w.length>1||H)&&(0,K.jsx)(se,{title:oe({title:"Executive Dashboard"}),sx:{mb:2,pb:1},children:(0,K.jsx)(ee.Op,{methods:y,children:(0,K.jsx)(r.Ay,{container:!0,spacing:2,children:(0,K.jsx)(r.Ay,{item:!0,xs:12,md:3,children:(0,K.jsx)(ee.eu,{name:"projectId",label:"Project",menus:w,required:!0})})})})}),!S&&$&&(0,K.jsx)(o.A,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,K.jsx)(ae.A,{})}),S&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(se,{title:oe({title:"Executive Dashboard"}),sx:{mb:2},children:[(0,K.jsx)(o.A,{sx:{mb:1},children:(0,K.jsx)(u.A,{data:he})}),(0,K.jsx)(o.A,{children:(0,K.jsx)(x.A,{backgroundColor:L.H_,data:de,columns:L.pA,highlightedColumnsCount:2,loadingCondition:$,title:"none"})})]}),(0,K.jsx)(se,{title:oe({title:"Total Meter Installed"}),sx:{mb:2},children:(0,K.jsxs)(r.Ay,{container:!0,spacing:1,children:[(0,K.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(o.A,{width:"100%",children:(0,K.jsx)(U.A,{data:X,nameKey:"label",title:"Total Meter Installed (Region Wise)"})})}),(0,K.jsx)(r.Ay,{item:!0,xs:12,md:6,children:(0,K.jsx)(o.A,{width:"100%",children:(0,K.jsx)(U.A,{data:Y,nameKey:"label",title:"Total Meter Installed (Zone Wise)"})})}),(0,K.jsx)(r.Ay,{item:!0,xs:12,children:(0,K.jsx)(o.A,{children:(0,K.jsx)(q,{data:z,title:"Total Meter Installed (Circle Wise)"})})}),(0,K.jsx)(r.Ay,{item:!0,xs:12,children:(0,K.jsx)(o.A,{width:"100%",children:(0,K.jsx)(Q.A,{chartData:ce,yAxis:"Meter Type",title:"Total Meter Installed (Meter Type Wise)",height:300})})})]})}),(0,K.jsx)(se,{title:oe({title:"Plan Vs Actual Meter Installation Status"}),sx:{mb:2,height:460},children:(0,K.jsx)(r.Ay,{container:!0,spacing:1,children:Array.isArray(V)&&V.length>0?V.map((e=>(0,K.jsx)(r.Ay,{item:!0,xs:12,children:(0,K.jsx)(Z.A,{xAxis:e.xAxis,chartData:e.chartData,title:null===e||void 0===e?void 0:e.title,height:520})},e.id))):(0,K.jsx)(r.Ay,{item:!0,xs:12,children:(0,K.jsx)(o.A,{sx:{height:300},children:(0,K.jsx)(B.A,{})})})})}),(0,K.jsxs)(se,{title:oe({title:"Contractor Summary"}),sx:{mb:2},children:[(0,K.jsx)(o.A,{sx:{mb:1},children:(0,K.jsx)(u.A,{data:O,expectedLength:5})}),(0,K.jsx)(o.A,{sx:{mb:.7},children:(0,K.jsx)(x.A,{backgroundColor:L.H_,data:ue.data,columns:L.O0,loadingCondition:$,title:"Contractor Summary"})}),(0,K.jsx)(o.A,{sx:{mb:.7},children:(0,K.jsx)(x.A,{backgroundColor:L.H_,data:R.data,columns:L.tU,loadingCondition:$,title:"Contractor Wise Material Details"})}),(0,K.jsx)(o.A,{sx:{mb:.7},children:(0,K.jsx)(x.A,{backgroundColor:L.H_,data:xe.data,columns:L.SE,title:"Contractor Wise Material Aging Details"})})]})]})]})}},64661:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(58168),i=n(98587),r=n(9950),o=n(72004),s=n(88465),l=n(18463),c=n(59254),d=n(86957),h=n(44414);const u=["className","component"],x=(0,c.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),p=r.forwardRef((function(e,t){const n=(0,l.b)({props:e,name:"MuiTableContainer"}),{className:r,component:c="div"}=n,p=(0,i.A)(n,u),g=(0,a.A)({},n,{component:c}),m=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},d.I,t)})(g);return(0,h.jsx)(x,(0,a.A)({ref:t,as:c,className:(0,o.A)(m.root,r),ownerState:g},p))}))},86957:(e,t,n)=>{n.d(t,{A:()=>o,I:()=>r});var a=n(1763),i=n(423);function r(e){return(0,i.Ay)("MuiTableContainer",e)}const o=(0,a.A)("MuiTableContainer",["root"])}}]);