"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[9585],{10748:(e,o,t)=>{t.d(o,{R:()=>n});var r=t(9950),a=t(27081);const n=()=>{const[e,o]=(0,r.useState)({materialObject:{},error:"",loading:!0}),[t,n]=(0,r.useState)({materialObject:{},error:"",loading:!0}),[i,s]=(0,r.useState)({materialDropdownObject:[],error:"",loading:!0}),[l,d]=(0,r.useState)({uomDropdownObject:[],error:"",loading:!0}),[c,u]=(0,r.useState)({materialTypeDropdownObject:[],error:"",loading:!0}),[m,p]=(0,r.useState)({materialHistoryObject:{},error:"",loading:!0}),g=(0,a.d4)((e=>e.material||{})),S=(0,a.d4)((e=>e.materialByIntegrationId||{})),f=(0,a.d4)((e=>e.materialDropdown||[])),j=(0,a.d4)((e=>e.uomDropdown||[])),y=(0,a.d4)((e=>e.materialTypeDropdown||[])),b=(0,a.d4)((e=>e.materialHistory||{}));return(0,r.useEffect)((()=>{o((e=>({...e,...g})))}),[g]),(0,r.useEffect)((()=>{n((e=>({...e,...S})))}),[S]),(0,r.useEffect)((()=>{s((e=>({...e,...f})))}),[f]),(0,r.useEffect)((()=>{d((e=>({...e,...j})))}),[j]),(0,r.useEffect)((()=>{u((e=>({...e,...y})))}),[y]),(0,r.useEffect)((()=>{p((e=>({...e,...b})))}),[b]),{material:e,materialDropdown:i,uomDropdown:l,materialTypeDropdown:c,materialContent:t,materialHistory:m}}},12952:(e,o,t)=>{t.d(o,{V:()=>n});var r=t(9950),a=t(27081);const n=()=>{const[e,o]=(0,r.useState)({companyStoreLocationsObject:{},error:"",loading:!0}),t=(0,a.d4)((e=>e.companyStoreLocations||{}));(0,r.useEffect)((()=>{o((e=>({...e,...t})))}),[t]);const[n,i]=(0,r.useState)({firmStoreLocationsObject:{},error:"",loading:!0}),s=(0,a.d4)((e=>e.firmStoreLocations||{}));(0,r.useEffect)((()=>{i((e=>({...e,...s})))}),[s]);const[l,d]=(0,r.useState)({organizationStoreLocationsHistoryObject:{},error:"",loading:!0}),c=(0,a.d4)((e=>e.organizationStoreLocationsHistory||[]));return(0,r.useEffect)((()=>{d((e=>({...e,...c})))}),[c]),{companyStoreLocations:e,firmStoreLocations:n,organizationStoreLocationsHistory:l}}},3147:(e,o,t)=>{t.d(o,{E:()=>n});var r=t(9950),a=t(27081);const n=()=>{const[e,o]=(0,r.useState)({organizationStoreObject:{},error:"",loading:!0}),[t,n]=(0,r.useState)({organizationStoreObject:{},error:"",loading:!0}),[i,s]=(0,r.useState)({organizationStoreObject:[],error:"",loading:!0}),[l,d]=(0,r.useState)({organizationStoreDropdownObject:{},error:"",loading:!0}),[c,u]=(0,r.useState)({organizationStoreDropdownSecondObject:{},error:"",loading:!0}),[m,p]=(0,r.useState)({orgStoreDropDownObject:{},error:"",loading:!0}),[g,S]=(0,r.useState)({orgViewStoreDropDownObject:{},error:"",loading:!0}),[f,j]=(0,r.useState)({organizationStoresHistoryObject:{},error:"",loading:!0}),y=(0,a.d4)((e=>e.organizationStores||{})),b=(0,a.d4)((e=>e.organizationStoresAllAccess||{})),x=(0,a.d4)((e=>e.organizationStoresSecond||[])),D=(0,a.d4)((e=>e.organizationStoreDropdown||[])),w=(0,a.d4)((e=>e.organizationStoreDropdownSecond||[])),v=(0,a.d4)((e=>e.orgStoreDropDown||[])),z=(0,a.d4)((e=>e.orgViewStoreDropDown||[])),h=(0,a.d4)((e=>e.organizationStoresHistory||[]));return(0,r.useEffect)((()=>{o((e=>({...e,...y})))}),[y]),(0,r.useEffect)((()=>{n((e=>({...e,...b})))}),[b]),(0,r.useEffect)((()=>{s((e=>({...e,...x})))}),[x]),(0,r.useEffect)((()=>{d((e=>({...e,...D})))}),[D]),(0,r.useEffect)((()=>{u((e=>({...e,...w})))}),[w]),(0,r.useEffect)((()=>{p((e=>({...e,...v})))}),[v]),(0,r.useEffect)((()=>{S((e=>({...e,...z})))}),[z]),(0,r.useEffect)((()=>{j((e=>({...e,...h})))}),[h]),{organizationStores:e,organizationStoresSecond:i,organizationStoresDropdown:l,orgStoreDropDown:m,orgViewStoreDropDown:g,organizationStoresHistory:f,organizationStoresAllAccess:t,organizationStoresDropdownSecond:c}}},29585:(e,o,t)=>{t.r(o),t.d(o,{default:()=>z});var r=t(9950),a=t(27081),n=t(4139),i=t(67535),s=t(60666),l=t(9449),d=t(26473),c=t(8008),u=t(96951),m=t(14351),p=t(84601),g=t(29024),S=t(52867),f=t(99635),j=t(89649),y=t(88848),b=t(80733),x=t(3147),D=t(12952),w=t(10748),v=t(44414);const z=()=>{var e,o,t,z;const{paginations:{pageSize:h,pageIndex:O},setPageIndex:A,setPageSize:E}=(0,j.A)(),[I,L]=(0,r.useState)(0),[k,H]=(0,r.useState)([]),[P,C]=(0,r.useState)(0),[R,T]=(0,r.useState)(!1),N=(0,a.wA)(),q=(0,l.mN)({resolver:(0,d.t)(s.Ik().shape({projectId:p.A.project,storeId:p.A.store,fromDate:p.A.fromDate,toDate:p.A.toDate,trxnType:p.A.transaction})),defaultValues:{},mode:"all"}),{handleSubmit:V}=q,{projectsDropdown:B}=(0,b.Y)(),{masterMakerLovs:M}=(0,y.$)(),{materialDropdown:_}=(0,w.R)(),{organizationStores:W,organizationStoresSecond:Q}=(0,x.E)(),{firmStoreLocations:F}=(0,D.V)(),G=null===B||void 0===B?void 0:B.projectsDropdownObject,Y=null===_||void 0===_?void 0:_.materialDropdownObject,$=null===(e=M.masterMakerLovsObject)||void 0===e?void 0:e.rows,J=null===W||void 0===W||null===(o=W.organizationStoreObject)||void 0===o?void 0:o.rows,K=null===Q||void 0===Q||null===(t=Q.organizationStoreObject)||void 0===t?void 0:t.rows,U=null===F||void 0===F||null===(z=F.firmStoreLocationsObject)||void 0===z?void 0:z.rows,{deliveryReports:X}=(0,c.r)(),{data:Z,count:ee}=(0,r.useMemo)((()=>{var e,o;return{data:(null===(e=X.deliveryReportsObject)||void 0===e?void 0:e.rows)||[],count:(null===(o=X.deliveryReportsObject)||void 0===o?void 0:o.count)||0,isLoading:X.loading||!1}}),[X]);(0,r.useEffect)((()=>{if(Z){const e=Z.map((e=>{let o=0;return null===e||void 0===e||e.stock_ledgers.map((e=>o+=e.quantity<0?-e.quantity:e.quantity)),o}));L(...e);const o=Z.map((e=>{let o=0;return null===e||void 0===e||e.stock_ledgers.map((e=>o+=e.value)),o}));C(...o),H(structuredClone(Z))}}),[Z]),k.map((e=>{e.eWayBillQty=I,e.totalChallanValue=P}));const oe=(0,r.useMemo)((()=>[{Header:"MIV No",accessor:"referenceDocumentNumber"},{Header:"Date",accessor:"createdAt"},{Header:"Name of Contractors",accessor:"stock_ledgers[2].organization_store.name"},{Header:"E-Way Bill No",accessor:"eWayBillNumber"},{Header:"E-Way Bill Qty",accessor:"eWayBillQty"},{Header:"Total Value of Challan ",accessor:"totalChallanValue"},{Header:"MatMovementType",accessor:"stock_ledgers[1].transaction_type.name"},{Header:"ReferenceDocNo",accessor:"ReferenceDocNo"}]),[]);return(0,r.useEffect)((()=>{N((0,g.uiG)()),N((0,g._G1)()),N((0,g.NNK)())}),[N]),(0,r.useEffect)((()=>{N((0,g.qV$)({organizationType:(0,S.x)($,"COMPANY")})),N((0,g.QEJ)({organizationType:(0,S.x)($,"CONTRACTOR")})),N((0,g.c1B)({organizationType:(0,S.x)($,"CONTRACTOR")}))}),[N,$]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(u.Op,{methods:q,onSubmit:V((async e=>{e.pageSize=h,e.pageIndex=O,N((0,g.ylP)(e)),T(!R)})),children:(0,v.jsxs)(m.A,{title:"DashBoard Report",sx:{mb:2},children:[(0,v.jsxs)(n.Ay,{container:!0,spacing:4,children:[(0,v.jsx)(n.Ay,{item:!0,md:3,xl:2,children:(0,v.jsx)(u.eu,{name:"fromStoreId",label:"From Store",InputLabelProps:{shrink:!0},menus:J,required:!0})}),(0,v.jsx)(n.Ay,{item:!0,md:3,xl:2,children:(0,v.jsx)(u.eu,{name:"toStoreId",label:"Receiving Store",InputLabelProps:{shrink:!0},menus:K,required:!0})}),(0,v.jsx)(n.Ay,{item:!0,md:3,xl:2,children:(0,v.jsx)(u.eu,{name:"materialId",label:"Material",InputLabelProps:{shrink:!0},menus:Y,required:!0})}),(0,v.jsx)(n.Ay,{item:!0,md:3,xl:2,children:(0,v.jsx)(u.eu,{name:"storeLocationId",label:"Storage Location",InputLabelProps:{shrink:!0},menus:U,required:!0})}),(0,v.jsx)(n.Ay,{item:!0,md:3,xl:2,children:(0,v.jsx)(u.eu,{name:"projectId",label:"Project",InputLabelProps:{shrink:!0},menus:G,required:!0})}),(0,v.jsx)(n.Ay,{item:!0,md:3,xl:2,children:(0,v.jsx)(u.o3,{name:"fromDate",type:"date",label:"From Date",InputLabelProps:{shrink:!0},required:!0})}),(0,v.jsx)(n.Ay,{item:!0,md:3,xl:2,children:(0,v.jsx)(u.o3,{name:"toDate",type:"date",label:"To Date",InputLabelProps:{shrink:!0},required:!0})}),(0,v.jsx)(n.Ay,{container:!0,spacing:2,alignItems:"end",sx:{mt:2},children:(0,v.jsx)(n.Ay,{item:!0,xs:12,sx:{display:"flex",justifyContent:"flex-end",gap:"20px",mb:"15px"},children:(0,v.jsx)(i.A,{type:"submit",size:"small",variant:"contained",color:"primary",children:"Proceed"})})})]}),R?(0,v.jsx)(f.default,{title:"DashBoard Report",data:k,count:ee,setPageIndex:A,setPageSize:E,pageIndex:O,pageSize:h,columns:oe,hideActions:!0}):null]})})})}}}]);