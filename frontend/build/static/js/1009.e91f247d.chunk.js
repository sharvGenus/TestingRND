"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[1009],{31009:(e,r,t)=>{t.r(r),t.d(r,{default:()=>K});var o=t(95537),s=t(4139),a=t(17808),n=t(13081),i=t(9950),l=t(27081),d=t(26473),c=t(9449),u=t(60666),g=t(67535);const v=[{id:"62568519-0974-459f-9a65-c3df82950433",name:"Contractor Store"},{id:"c5fe7300-7256-4738-b84b-3bcd3dbb9a65",name:"Company Store"},{id:"dae4d7a2-a7b9-4f59-82bc-5f0d5523a991",name:"Customer Store"},{id:"d375c6e5-1a46-4d5f-81ff-d6c7bb10f3eb",name:"Supplier Repair Center"}];var h=t(84601),m=t(96951),p=t(29024),j=t(88848),A=t(80733),I=t(66004),f=t(71826),b=t(62054),x=t(3147),y=t(79033),S=t(55519),z=t(52867),O=t(44414);const w=e=>{let{rightsData:r,rightsFor:t,setAllData:o,resetTable:a}=e;const n=(0,l.wA)(),[w,F]=(0,i.useState)(null),[T,k]=(0,i.useState)([]),[D,L]=(0,i.useState)(""),[P,E]=(0,i.useState)(""),[M,R]=(0,i.useState)(""),[G,C]=(0,i.useState)(!1),[B,H]=(0,i.useState)(""),[W,N]=(0,i.useState)(null),[U,q]=(0,i.useState)(null),[V,$]=(0,i.useState)(""),{users:_}=(0,I.k)(),{userData:Y}=(0,i.useMemo)((()=>{var e,r;return{userData:(null===(e=_.usersObject)||void 0===e?void 0:e.rows)||[],count:(null===(r=_.usersObject)||void 0===r?void 0:r.count)||0,isLoading:_.loading||!1}}),[_]),{projectsDropdown:Z,projectsGovernForRoleOrUser:J}=(0,A.Y)(),K=(null===Z||void 0===Z?void 0:Z.projectsDropdownObject)||[],Q=(null===J||void 0===J?void 0:J.projectsObject)||[],{orgStoreDropDown:X}=(0,x.E)(),{orgStoreData:ee}=(0,i.useMemo)((()=>{var e,r;return{orgStoreData:(null===X||void 0===X||null===(e=X.orgStoreDropDownObject)||void 0===e?void 0:e.rows)||[],count:(null===X||void 0===X||null===(r=X.orgStoreDropDownObject)||void 0===r?void 0:r.count)||0,isLoading:X.loading||!1}}),[X]),re=e=>{let r=[];return e&&e.length>0&&e.map((e=>{r.push({...e,name:(null===e||void 0===e?void 0:e.name)+" - "+(null===e||void 0===e?void 0:e.code)})})),r};(0,i.useEffect)((()=>{k(ee)}),[ee]),(0,i.useEffect)((()=>{n((0,p.VOH)("ORGANIZATION TYPE"))}),[n]);const te=(0,c.mN)({resolver:(0,d.t)(u.Ik().shape("Roles"===V&&"Menu"===t?{governType:h.A.requiredWithLabel("Govern"),projectId:h.A.accessProject,roleId:h.A.requiredWithLabel("RoleId")}:"Roles"===V&&""!==D?{governType:h.A.requiredWithLabel("Govern"),projectId:h.A.accessProject,roleId:h.A.requiredWithLabel("RoleId"),rightsFor:h.A.rightsFor,storesId:"Store"===D?h.A.accessStore:h.A.accessStoreLocationId}:"Roles"!==V||"GAA & Network"!==P&&"Mobile-Forms"!==P&&"Web-Forms"!==P&&"Web-Reports"!==P?"Roles"===V?{governType:h.A.requiredWithLabel("Govern"),projectId:h.A.accessProject,roleId:h.A.requiredWithLabel("RoleId"),rightsFor:h.A.rightsFor}:"Users"===V&&"Menu"===t?{governType:h.A.requiredWithLabel("Govern"),organizationType:h.A.organizationType,organizationId:h.A.accessOrganizationId,userId:h.A.accessUser}:"Users"===V&&""!==D?{governType:h.A.requiredWithLabel("Govern"),organizationType:h.A.organizationType,organizationId:h.A.accessOrganizationId,userId:h.A.accessUseorgnTyper,rightsFor:h.A.rightsFor,storesId:"Store"===D?h.A.accessStore:h.A.accessStoreLocationId}:"Users"!==V||"GAA & Network"!==P&&"Mobile-Forms"!==P&&"Web-Forms"!==P&&"Web-Reports"!==P?"Users"===V?{governType:h.A.requiredWithLabel("Govern"),organizationType:h.A.organizationType,organizationId:h.A.accessOrganizationId,userId:h.A.accessUser,rightsFor:h.A.rightsFor}:{}:{governType:h.A.requiredWithLabel("Govern"),organizationType:h.A.organizationType,organizationId:h.A.accessOrganizationId,userId:h.A.accessUser,rightsFor:h.A.rightsFor,projectGovernId:h.A.requiredWithLabel("Govern Project")}:{governType:h.A.requiredWithLabel("Govern"),projectId:h.A.accessProject,roleId:h.A.requiredWithLabel("RoleId"),rightsFor:h.A.rightsFor,projectGovernId:h.A.requiredWithLabel("Govern Project")})),defaultValues:{},mode:"all"}),{handleSubmit:oe,setValue:se,reset:ae}=te;(0,i.useEffect)((()=>{se("organizationId",null),se("organisationBranchId",null),se("userId",null),se("rightsFor",null),ae(),n((0,p._G1)())}),[n,se,ae]);const{masterMakerLovs:ne,masterMakerOrgType:ie}=(0,j.$)(),le=ie.masterObject,de=ne.masterMakerLovsObject.rows,{roles:ce}=(0,y.z)(),{rolesData:ue}=(0,i.useMemo)((()=>{var e,r;return{rolesData:(null===(e=ce.rolesObject)||void 0===e?void 0:e.rows)||[],count:(null===(r=ce.rolesObject)||void 0===r?void 0:r.count)||0,isLoading:ce.loading||!1}}),[ce]),ge=async function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=await(0,f.default)(e,{method:"GET",params:r,query:t},!1);if(o.success)return o.data;{const e=o.error&&o.error.message?o.error.message:o.error;(0,b.A)(e||"Operation failed. Please try again!",{variant:"error"})}},ve=(e,r,t,o,s)=>(0,O.jsx)(m.eu,{name:e,label:r,..."function"===typeof s&&{onChange:s},InputLabelProps:{shrink:!0},menus:t||[],...o&&{required:!0}}),he=e=>{"govern"===e&&se("organizationType",null),"govern"!==e&&"orgType"!==e||se("organizationId",null),"govern"!==e&&"orgType"!==e&&"org"!==e||se("organisationBranchId",null),"govern"!==e&&"orgType"!==e&&"org"!==e&&"orgBranch"!==e||se("userId",null),"govern"!==e&&"orgType"!==e&&"org"!==e&&"orgBranch"!==e&&"user"!==e||se("projectId",null),"govern"!==e&&"orgType"!==e&&"org"!==e&&"orgBranch"!==e&&"user"!==e&&"project"!==e||se("roleId",null),"govern"!==e&&"orgType"!==e&&"org"!==e&&"orgBranch"!==e&&"user"!==e&&"project"!==e&&"role"!=e||se("rightsFor",null),"govern"!==e&&"orgType"!==e&&"org"!==e&&"orgBranch"!==e&&"user"!==e&&"project"!==e&&"role"!=e&&"rights"!==e||se("storesId",null),"govern"!==e&&"orgType"!==e&&"org"!==e&&"orgBranch"!==e&&"user"!==e&&"project"!==e&&"role"!=e&&"rights"!==e&&"store"!==e||se("projectGovernId",null),"govern"!==e&&"orgType"!==e&&"org"!==e&&"orgBranch"!==e&&"user"!==e||F(null),o({})},{organizations:me,organizationsLocByParent:pe}=(0,S.G)(),{orgData:je}=(0,i.useMemo)((()=>{var e;return{orgData:!me.loading&&(null===(e=me.organizationObject)||void 0===e?void 0:e.rows)||[],isLoading:me.loading||!1}}),[me]),{organizationBranchData:Ae}=(0,i.useMemo)((()=>{var e;return{organizationBranchData:(null===pe||void 0===pe||null===(e=pe.organizationObject)||void 0===e?void 0:e.rows)||[],isLoading:pe.loading||!1}}),[pe]);return(0,O.jsxs)(m.Op,{methods:te,children:[""!==t&&(0,O.jsx)(s.Ay,{item:!0,xs:12,mt:-5,children:(0,O.jsx)(g.A,{variant:"contained",onClick:oe((async e=>{let r="Roles"===V?e.roleId:e.userId;if(e.rightsFor&&"stores"!==e.rightsFor&&"storesLocation"!==e.rightsFor?r+="/"+e.rightsFor:r+="/"+e.storesId,"Supplier"===B||"Customer"===B||"Company"===B||"Contractor"===B){R("");const t=((e,r)=>{const t=e&&e.filter((e=>e.name===r));return t&&t.length?t[0].id:null})(de,B.toUpperCase());e.orgType=t,r="stores"===e.rightsFor||"a8bbb41a-57d4-443d-ac6c-784dc1f0d1cb"===e.rightsFor||"storesLocation"===e.rightsFor?"stores"===e.rightsFor?("Roles"===V?e.roleId:e.userId)+"/"+e.storesId+"/"+t+"/"+t:"a8bbb41a-57d4-443d-ac6c-784dc1f0d1cb"===e.rightsFor?("Roles"===V?e.roleId:e.userId)+"/"+e.rightsFor+"/"+e.storesId+"/"+t:("Roles"===V?e.roleId:e.userId)+"/"+e.storesId+"/"+t+"/null":r+"/"+t+"/null"}else"stores"===e.rightsFor||"a8bbb41a-57d4-443d-ac6c-784dc1f0d1cb"===e.rightsFor||"storesLocation"===e.rightsFor?(r="stores"===e.rightsFor?("Roles"===V?e.roleId:e.userId)+"/"+e.storesId+"/"+M+"/"+M:"a8bbb41a-57d4-443d-ac6c-784dc1f0d1cb"===e.rightsFor?("Roles"===V?e.roleId:e.userId)+"/"+e.rightsFor+"/"+e.storesId+"/"+M:("Roles"===V?e.roleId:e.userId)+"/"+e.storesId+"/"+M+"/null",e.orgType=M):r+="/null/null";if("Menu"===t){const r=await ge("/get-masters",null!=e.roleId?e.roleId:e.userId,{sort:["rank","ASC"]});r&&r.data&&o({userId:null!=e.roleId?null:e.userId,roleId:null!=e.userId?null:e.roleId,data:r.data})}else if("Masters"===t){"GAA & Network"!==P&&"Web-Forms"!==P&&"Web-Reports"!==P&&"Mobile-Forms"!==P||(r=("Roles"===V?e.roleId:e.userId)+"/"+e.rightsFor+"/"+e.projectGovernId+"/null");const t=await ge("/get-lovs",r);let s={userId:null!=e.roleId?null:e.userId,roleId:null!=e.userId?null:e.roleId,masterId:"stores"===e.rightsFor||"storesLocation"===e.rightsFor?e.storesId:e.rightsFor,..."a8bbb41a-57d4-443d-ac6c-784dc1f0d1cb"===e.rightsFor&&{storesOrgType:e.orgType},data:null===t||void 0===t?void 0:t.data};"GAA & Network"!==P&&"Web-Forms"!==P&&"Web-Reports"!==P&&"Mobile-Forms"!==P||(s.forGAA=!0,s.projectId=e.projectGovernId),t&&t.data&&t.data.length>=0&&o(s)}})),sx:{mt:4,float:"right"},children:"Proceed"})}),(0,O.jsxs)(s.Ay,{container:!0,spacing:4,alignItems:"center",sx:{mb:2},children:[(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("governType","Govern",[{id:"Users",name:"Users"},{id:"Roles",name:"Roles"}],!0,(e=>{var r,t,o,s;null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.value&&("Roles"===(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)?(n((0,p.uiG)()),se("userId",null)):"Users"===(null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value)&&se("roleId",null),he("govern"),$(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))}))}),"Users"===V&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("organizationType","Organization Type",le,!0,(e=>{var r,t,o;null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.value&&(q(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value),he("orgType"),n((0,p.h6R)({transactionTypeId:null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value})))}))}),(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("organizationId","Organization",re(je),!0,(e=>{var r,t,o;(a([]),null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.value)&&(se("code",""),se("mobileNumber",""),se("email",""),F(null),he("org"),n((0,p.VRs)({params:U+"/"+(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)})),n((0,p.loF)({all:!0,organizationId:null===e||void 0===e||null===(o=e.target)||void 0===o?void 0:o.value})))}))}),(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("organisationBranchId","Organization Branch",re(Ae),!1,(e=>{var r;he("orgBranch"),n((0,p.loF)({all:!0,organisationBranchId:null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.value}))}))}),(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("userId","User",(0,z.HF)(Y),!0,(e=>{var r,t;(a([]),null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.row)&&(he("user"),F(e.target.row),N({userId:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value}))}))})]}),"Roles"===V&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("projectId","Project",K,!0,(e=>{var r,t;null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.value&&(he("project"),n((0,p.O0z)({projectId:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value})))}))}),(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("roleId","Roles",ue,!0,(e=>{var r,t;null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.value&&(he("role"),N({roleId:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value}),F(null))}))})]}),"Menu"!==t?(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("rightsFor","Rights For",r,!0,(e=>{var r,t,o,s,i,l,d,c,u,g,h,m,j,A;if(a([]),he("rights"),se("projectGovernId",null),se("levelId",null),se("storesId",null),C(!1),null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.value&&"View Stores"===(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.name))k(v),L("Store"),E("");else if(null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&o.value&&"stores"===(null===e||void 0===e||null===(s=e.target)||void 0===s?void 0:s.value))k(v),L("Store"),E("");else if(null!==e&&void 0!==e&&null!==(i=e.target)&&void 0!==i&&i.value&&"storesLocation"===(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value))n((0,p.rlE)(W?W.userId?W.userId:W.roleId?W.roleId:null:null)),L("Store"),E("");else if(null!==e&&void 0!==e&&null!==(d=e.target)&&void 0!==d&&d.name&&"GAA & Network"===(null===e||void 0===e||null===(c=e.target)||void 0===c?void 0:c.name))E("GAA & Network"),n((0,p.Gn8)(W)),C(!0),k([]),L("");else if(null===e||void 0===e||null===(u=e.target)||void 0===u||!u.name||"Mobile-Forms"!==(null===e||void 0===e||null===(g=e.target)||void 0===g?void 0:g.name)&&"Web-Forms"!==(null===e||void 0===e||null===(h=e.target)||void 0===h?void 0:h.name)&&"Web-Reports"!==(null===e||void 0===e||null===(m=e.target)||void 0===m?void 0:m.name))k([]),L(""),E(""),C(!1);else{var I;C(!0),n((0,p.Gn8)(W)),k([]),L(""),E(null===e||void 0===e||null===(I=e.target)||void 0===I?void 0:I.name)}null!==e&&void 0!==e&&null!==(j=e.target)&&void 0!==j&&j.name&&H(null===e||void 0===e||null===(A=e.target)||void 0===A?void 0:A.name)}))}):(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2}),"Masters"===t&&T&&T.length>0&&(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("storesId",D,T,!0,(e=>{var r,t,o,s,n,i;if(a([]),he("store"),null!==e&&void 0!==e&&null!==(r=e.target)&&void 0!==r&&r.name){var l;let r=null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.name;H(null===r||void 0===r?void 0:r.split(" ")[0])}null!==e&&void 0!==e&&e.target&&null!==e&&void 0!==e&&null!==(t=e.target)&&void 0!==t&&t.row&&null!==e&&void 0!==e&&null!==(o=e.target)&&void 0!==o&&null!==(s=o.row)&&void 0!==s&&s.organizationType&&R(null===e||void 0===e||null===(n=e.target)||void 0===n||null===(i=n.row)||void 0===i?void 0:i.organizationType)}))}),"Masters"===t&&G&&(0,O.jsx)(s.Ay,{item:!0,md:3,xl:2,children:ve("projectGovernId","Govern Project",Q,!0,(()=>{a([])}))}),""!==t&&(0,O.jsx)(O.Fragment,{children:null!==w&&Y.length>0&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s.Ay,{item:!0,xs:12,mt:-5}),(0,O.jsx)(s.Ay,{item:!0,xs:3,children:(0,O.jsx)(m.o3,{name:"code",value:w.code,type:"text",label:"Code",disabled:!0})}),(0,O.jsx)(s.Ay,{item:!0,xs:3,children:(0,O.jsx)(m.o3,{name:"mobileNumber",value:w.mobileNumber,type:"text",label:"Mobile Number",disabled:!0})}),(0,O.jsx)(s.Ay,{item:!0,xs:3,children:(0,O.jsx)(m.o3,{name:"email",value:w.email,type:"text",label:"Email",disabled:!0})})," "]})})]})]})};var F=t(45281),T=t(77335),k=t(397),D=t(24965),L=t(10371),P=t(68605),E=t(22057);const M=e=>{let{check:r,onCheck:t}=e;const[o,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{s(r)}),[r]);return(0,O.jsx)(T.A,{checked:o,onChange:e=>{s(e.target.checked),t(e.target.checked)},inputProps:{"aria-label":"controlled"}})},R=e=>{let{data:r,userId:t,roleId:o}=e;const[a,n]=(0,i.useState)([]),[l,d]=(0,i.useState)([]),[c,u]=(0,i.useState)({}),[v,h]=(0,i.useState)(!1),m=(0,i.useCallback)(((e,r)=>{e&&e.length>0&&e.map((e=>{r[e.id]||(r[e.id]=e),e.child&&e.child.length>0&&m(e.child,r),e.subChild&&e.subChild.length>0&&m(e.subChild,r)})),u(r)}),[]),p=(0,i.useCallback)(((e,r)=>(e&&e.length>0&&e.map((e=>{if(e.child&&e.child.length>0){let t=p(e.child,r);r=t}else if(e.subChild&&e.subChild.length>0){let t=p(e.subChild,r);r=t}else{let t={...e};r=[...r,{...t}]}})),r)),[]),j=e=>{var r;return null===(r=c[e])||void 0===r?void 0:r.visibleName},A=e=>{let r=!1;if(e&&e.length>0){let t=e.filter((e=>!1===e.isAccess));t&&t.length>0&&(r=!0),h(!r)}},I=(0,i.useCallback)((e=>{let r=[];return e&&e.length>0&&e.map((e=>{r.push({...e,greatGrandParentId:e.grandParentId&&null!==e.grandParentId?c[e.grandParentId].parentId:null})})),r}),[c]);return(0,i.useEffect)((()=>{n([]),d([]),m(r,{});let e=p(r,[]),t=null===e||void 0===e?void 0:e.filter((e=>"roles"!==(null===e||void 0===e?void 0:e.name)));A(t),d(t)}),[r,p,m]),(0,i.useEffect)((()=>{if(l&&l.length>0){let e=I(l),r=null===e||void 0===e?void 0:e.filter((e=>"roles"!==(null===e||void 0===e?void 0:e.name)));n(r)}}),[l,I]),(0,O.jsxs)(O.Fragment,{children:[a&&a.length>0&&(0,O.jsx)(s.Ay,{container:!0,spacing:1,mb:3,children:(0,O.jsx)(s.Ay,{item:!0,xs:12,sx:{textAlign:"right"},children:a&&a.length>0&&(0,O.jsx)(g.A,{variant:"contained",onClick:async()=>{const e=[],r={},s=a.filter((e=>!0===e.isAccess));s&&s.length>0&&s.map((e=>{r[e.id]||(r[e.id]={masterId:e.id,masterRoute:e.masterRoute}),null===e.parentId||r[e.parentId]||(r[e.parentId]={masterId:e.parentId,masterRoute:c[e.parentId].masterRoute}),null===e.grandParentId||r[e.grandParentId]||(r[e.grandParentId]={masterId:e.grandParentId,masterRoute:c[e.grandParentId].masterRoute}),null===e.greatGrandParentId||r[e.greatGrandParentId]||(r[e.greatGrandParentId]={masterId:e.greatGrandParentId,masterRoute:c[e.greatGrandParentId].masterRoute})})),Object.keys(r).map((t=>{e.push(r[t])}));const n={userId:t,roleId:o,menuArray:e},i=await(0,f.default)("/govern-user-menus",{method:"POST",body:n});if(i.success){const e="Rights updated successfully!";(0,b.A)(e,{variant:"success",autoHideDuration:1e4})}else{var l;(0,b.A)((null===i||void 0===i||null===(l=i.error)||void 0===l?void 0:l.message)||"Operation failed. Please try again.",{variant:"error"})}},children:"Save"})})}),a&&a.length>0&&(0,O.jsx)("div",{style:{maxHeight:"550px",overflow:"auto"},children:(0,O.jsxs)(k.A,{children:[(0,O.jsx)(D.A,{children:(0,O.jsxs)(L.A,{children:[(0,O.jsx)(P.A,{children:"Rights For"}),(0,O.jsx)(P.A,{children:(0,O.jsx)(M,{check:v,onCheck:e=>{var r,t;r=e,t=a,n([]),t&&t.length>0&&t.map((e=>e.isAccess=r)),n(t),h(r)},sx:{margin:"auto"}})})]})}),(0,O.jsx)(E.A,{children:a&&a.length>0&&a.map(((e,r)=>(0,O.jsxs)(L.A,{children:[(0,O.jsx)(P.A,{children:(0,O.jsxs)(L.A,{children:[e&&e.greatGrandParentId&&null!==e.greatGrandParentId&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P.A,{sx:{pt:1},children:j(e.greatGrandParentId)}),(0,O.jsx)(P.A,{sx:{pt:1},children:(0,O.jsx)(F.A,{style:{fontSize:20,color:"#1890ff"}})})," "]}),e&&e.grandParentId&&null!==e.grandParentId&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P.A,{sx:{pt:1},children:j(e.grandParentId)}),(0,O.jsx)(P.A,{sx:{pt:1},children:(0,O.jsx)(F.A,{style:{fontSize:20,color:"#1890ff"}})})," "]}),e&&e.parentId&&null!==e.parentId&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(P.A,{sx:{pt:1},children:j(e.parentId)}),(0,O.jsx)(P.A,{sx:{pt:1},children:(0,O.jsx)(F.A,{style:{fontSize:20,color:"#1890ff"}})})," "]}),(0,O.jsx)(P.A,{sx:{pt:1},children:e.visibleName})]})}),(0,O.jsx)(P.A,{children:(0,O.jsx)(M,{check:e.isAccess,onCheck:t=>{e.isAccess=t;let o=structuredClone(a);o[r]=e,n(o),A(o)},sx:{margin:"auto"}})})]},e.id)))})]})})]})};var G=t(99635);const C=e=>{let{data:r,userId:t,masterId:o,roleId:a,storeOrgId:n}=e;const[l,d]=(0,i.useState)([]);(0,i.useEffect)((()=>{if(r&&r.length>0){const e=[];r.map((r=>{!0===r.isAccess&&e.push(r.id)})),d(e)}}),[r]);const c=async(e,r,t)=>{if(r&&r.length>0){e.lovArray=r.splice(0,t),e.storeOrgTypeId=n;const s=await(0,f.default)("/govern-user-rows",{method:"POST",body:e});var o;if(s.success)c(e,r,t);else(0,b.A)((null===s||void 0===s||null===(o=s.error)||void 0===o?void 0:o.message)||"Operation failed. Please try again.",{variant:"error"})}else{const e="Rights updated successfully!";(0,b.A)(e,{variant:"success",autoHideDuration:1e4})}};return(0,O.jsxs)(O.Fragment,{children:[r&&r.length>0&&(0,O.jsx)(s.Ay,{container:!0,spacing:1,mb:3,children:(0,O.jsx)(s.Ay,{item:!0,xs:12,sx:{textAlign:"right"},children:r&&r.length>0&&(0,O.jsx)(g.A,{variant:"contained",onClick:async()=>{const e={userId:t,roleId:a,masterId:o};if(l.length>2e3)c(e,l,2e3);else{e.lovArray=l,e.storeOrgTypeId=n;const t=await(0,f.default)("/govern-user-rows",{method:"POST",body:e});if(t.success){const e="Rights updated successfully!";(0,b.A)(e,{variant:"success",autoHideDuration:1e4})}else{var r;(0,b.A)((null===t||void 0===t||null===(r=t.error)||void 0===r?void 0:r.message)||"Operation failed. Please try again.",{variant:"error"})}}},children:"Save"})})}),r&&r.length>0&&(0,O.jsx)("div",{style:{maxHeight:"550px",overflow:"auto"},children:(0,O.jsx)(G.default,{title:"",hideAddButton:!0,hideExportButton:!0,hideActions:!0,data:r||[],columns:[{Header:"Name",accessor:"name"},{Header:"Code",accessor:"code"}],count:r.length||0,showCheckbox:!0,accessTableOnly:!0,hidePagination:!0,selectedRecord:l,setSelectedRecords:d})})]})};var B=t(94889),H=t(79843),W=t(59254),N=t(87233);const U=e=>{let{check:r,onCheck:t}=e;const[o,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{s(r)}),[r]);return(0,O.jsx)(T.A,{checked:o,onChange:e=>{s(e.target.checked),t(e.target.checked)},inputProps:{"aria-label":"controlled"}})},q=(0,W.Ay)("div")((()=>({marginLeft:-10,paddingLeft:10,paddingTop:5,paddingBottom:5,cursor:"pointer",":hover":{background:"rgba(0, 0, 0, 0.06)",borderRadius:5}}))),V=e=>{let{setShowHide:r,level:t,val:o}=e;const[a,n]=(0,i.useState)(!1);return(0,O.jsx)(q,{style:{marginTop:5},onClick:()=>{var e;n(e=!a),r(e)},children:(0,O.jsxs)(s.Ay,{container:!0,spacing:1,pl:.1,pt:.3,pb:.3,children:[t>0&&(0,O.jsx)(s.Ay,{item:!0,xs:.2*t,children:"\xa0\xa0"}),(0,O.jsx)(s.Ay,{item:!0,xs:.2,children:o&&o.child&&o.child.length>0&&(0,O.jsx)(O.Fragment,{children:a?(0,O.jsx)(B.A,{}):(0,O.jsx)(H.A,{})})}),(0,O.jsx)(s.Ay,{item:!0,children:(0,O.jsx)(N.A,{children:o.name})})]})})},$=e=>{let{data:r,userId:t,roleId:o,projectId:a,masterId:n}=e;const[l,d]=(0,i.useState)([]),[c,u]=(0,i.useState)([null]),v=(0,i.useCallback)(((e,r,t,o)=>(e&&e.length>0&&e.map((e=>{o.push({...e,level:r,parentId:t}),d(o),e.child&&e.child.length>0&&v(e.child,r+1,e.id,o)})),o)),[]),h=(e,r)=>{let t=r;return e.child&&e.child.length>0&&e.child.map((e=>{t.push(e.id),h(e,t)})),t},m=(e,r,t)=>{let o=r;if(t){o.push(null===e||void 0===e?void 0:e.parentId);let r=l.filter((r=>(null===r||void 0===r?void 0:r.id)===(null===e||void 0===e?void 0:e.parentId)));r&&r.length>0&&m(r[0],o,!0)}return o.filter((e=>null!==e))};return(0,i.useEffect)((()=>{let e=v(r,0,null,[]);d(e)}),[r,v]),(0,O.jsxs)(O.Fragment,{children:[l&&l.length>0&&(0,O.jsx)(s.Ay,{container:!0,spacing:1,mb:3,children:(0,O.jsx)(s.Ay,{item:!0,xs:12,sx:{textAlign:"right"},children:l&&l.length>0&&(0,O.jsx)(g.A,{variant:"contained",onClick:async()=>{const e={userId:t,roleId:o,projectId:a,masterId:n};e.lovArray=(()=>{let e=l.filter((e=>!0===e.isAccess)),r=[];return e&&e.length&&e.map((e=>{r.push({id:e.id,isAccess:e.isAccess,...e.isAll&&{isAll:e.isAll}})})),r})();const r=await(0,f.default)("/govern-user-rows",{method:"POST",body:e});if(r.success){const e="Rights updated successfully!";(0,b.A)(e,{variant:"success",autoHideDuration:1e4})}else{var s;(0,b.A)((null===r||void 0===r||null===(s=r.error)||void 0===s?void 0:s.message)||"Operation failed. Please try again.",{variant:"error"})}},children:"Save"})})}),l&&l.length>0&&l.map((e=>(0,O.jsx)(O.Fragment,{children:c.includes(e.parentId)&&(0,O.jsxs)(s.Ay,{container:!0,spacing:1,children:[(0,O.jsx)(s.Ay,{item:!0,xs:11,children:(0,O.jsx)(V,{val:e,level:e.level,setShowHide:r=>{let t=h(e,[]);if(r)u(c.concat(e.id));else{let r=c.filter((r=>r!==e.id&&!t.includes(r)));u(r)}}})}),(0,O.jsx)(s.Ay,{item:!0,xs:1,children:(0,O.jsx)(U,{check:e.isAccess,onCheck:r=>{e.isAccess=r,(e=>{let r=h(e,[]),t=m(e,[],e.isAccess),o=[...l];o.map((o=>{r.includes(o.id)&&(o.isAccess=e.isAccess),t.includes(o.id)&&e.isAccess&&(o.isAccess=e.isAccess,o.isAll=e.isAccess)})),d(o)})(e)}})})]})})))]})};var _=t(14351),Y=t(76300);function Z(e){let{children:r,value:t,index:s,...a}=e;return(0,O.jsx)("div",{role:"tabpanel",hidden:t!==s,id:`simple-tabpanel-${s}`,"aria-labelledby":`simple-tab-${s}`,...a,children:t===s&&(0,O.jsx)(o.A,{sx:{pt:2},children:r})})}function J(e){return{id:`simple-tab-${e}`,"aria-controls":`simple-tabpanel-${e}`}}const K=()=>{const e=(0,l.wA)(),[r,t]=(0,i.useState)([]),[d,c]=(0,i.useState)(!1),[u,g]=(0,i.useState)("Menu"),[v,h]=(0,i.useState)(null),[m,j]=(0,i.useState)(null),[A,I]=(0,i.useState)(null),[f,b]=(0,i.useState)(null),[x,y]=(0,i.useState)(null),[S,z]=(0,i.useState)(null),[F,T]=(0,i.useState)(0);(0,i.useEffect)((()=>{e((0,p.NPt)()),c(!1)}),[e]);const{allRights:k}=(0,Y.I)(),{rightsData:D}=(0,i.useMemo)((()=>({rightsData:(null===k||void 0===k?void 0:k.allRightsObject)||[]})),[k]),L=e=>{setTimeout((()=>{t(e.data),h(e.userId),j(e.roleId),e.masterId&&I(e.masterId),e.storesOrgType&&b(e.storesOrgType),c(!0),e&&e.forGAA?(t(e.data),z(e.projectId),y(!0)):(z(null),y(!1))}),200)},P=(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(_.A,{title:"",children:(0,O.jsx)(s.Ay,{container:!0,spacing:1,children:(0,O.jsx)(s.Ay,{item:!0,xs:12,children:""!==u&&(0,O.jsx)(w,{rightsFor:u,rightsData:null===D||void 0===D?void 0:D.filter((e=>"d4dc5b2c-8c9c-4bd9-93e3-f9f3d42f5cc7"!==(null===e||void 0===e?void 0:e.id)&&"GAA & Network"!==(null===e||void 0===e?void 0:e.name))),setAllData:L,resetTable:t})})})})}),E=(0,O.jsx)(_.A,{title:"",children:(0,O.jsx)(s.Ay,{container:!0,spacing:1,children:(0,O.jsx)(s.Ay,{item:!0,xs:12,children:d&&"Menu"===u?(0,O.jsx)(R,{data:r||[],userId:v,roleId:m}):d&&"Masters"===u&&!x?(0,O.jsx)(C,{data:r||[],userId:v,masterId:A,roleId:m,storeOrgId:f}):d&&"Masters"===u&&x?(0,O.jsx)($,{data:r||[],userId:v,masterId:A,projectId:S,roleId:m}):(0,O.jsx)(O.Fragment,{})})})});return(0,O.jsx)(s.Ay,{container:!0,spacing:1,children:(0,O.jsx)(s.Ay,{item:!0,xs:12,children:(0,O.jsxs)(o.A,{sx:{width:"100%"},children:[(0,O.jsx)(o.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,O.jsxs)(a.A,{value:F,onChange:(e,r)=>{T(r),0===r&&"Menu"!==u?(g("Menu"),L([]),c(!1)):1===r&&"Masters"!==u&&(g("Masters"),L([]),c(!1))},"aria-label":"basic tabs example",children:[(0,O.jsx)(n.A,{label:"Menu",...J(0)}),(0,O.jsx)(n.A,{label:"Masters",...J(1)})]})}),P,(0,O.jsx)(Z,{value:F,index:0,children:E}),(0,O.jsx)(Z,{value:F,index:1,children:E})]})})})}},88848:(e,r,t)=>{t.d(r,{$:()=>a});var o=t(9950),s=t(27081);const a=()=>{const[e,r]=(0,o.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[t,a]=(0,o.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[n,i]=(0,o.useState)({masterObject:[],error:"",loading:!0}),[l,d]=(0,o.useState)({masterObject:[],error:"",loading:!0}),[c,u]=(0,o.useState)({masterObject:[],error:"",loading:!0}),[g,v]=(0,o.useState)({currencyObject:[],error:"",loading:!0}),[h,m]=(0,o.useState)({gstStatusObject:[],error:"",loading:!0}),[p,j]=(0,o.useState)({paymentTermObject:[],error:"",loading:!0}),[A,I]=(0,o.useState)({incotermsObject:[],error:"",loading:!0}),[f,b]=(0,o.useState)({titleObject:[],error:"",loading:!0}),[x,y]=(0,o.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),S=(0,s.d4)((e=>e.masterMakerLov||{})),z=(0,s.d4)((e=>e.masterMakerLovList||{})),O=(0,s.d4)((e=>e.lovsForMasterName||[])),w=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),F=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),T=(0,s.d4)((e=>e.currency||[])),k=(0,s.d4)((e=>e.gstStatus||[])),D=(0,s.d4)((e=>e.paymentTerm||[])),L=(0,s.d4)((e=>e.incoterms||[])),P=(0,s.d4)((e=>e.title||[])),E=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,o.useEffect)((()=>{r((e=>({...e,...S})))}),[S]),(0,o.useEffect)((()=>{a((e=>({...e,...z})))}),[z]),(0,o.useEffect)((()=>{i((e=>({...e,...O})))}),[O]),(0,o.useEffect)((()=>{d((e=>({...e,...w})))}),[w]),(0,o.useEffect)((()=>{u((e=>({...e,...F})))}),[F]),(0,o.useEffect)((()=>{v((e=>({...e,...T})))}),[T]),(0,o.useEffect)((()=>{m((e=>({...e,...k})))}),[k]),(0,o.useEffect)((()=>{j((e=>({...e,...D})))}),[D]),(0,o.useEffect)((()=>{I((e=>({...e,...L})))}),[L]),(0,o.useEffect)((()=>{b((e=>({...e,...P})))}),[P]),(0,o.useEffect)((()=>{y((e=>({...e,...E})))}),[E]),{masterMakerLovs:e,masterMakerLovsList:t,masterMakerOrgType:n,masterMakerOrgTypeSecond:l,masterMakerOrgTypeThird:c,masterMakerCurrency:g,masterMakerGstStatus:h,masterMakerIncoterms:A,masterMakerPaymentTerm:p,masterMakerLovHistory:x,masterMakerTitle:f}}},3147:(e,r,t)=>{t.d(r,{E:()=>a});var o=t(9950),s=t(27081);const a=()=>{const[e,r]=(0,o.useState)({organizationStoreObject:{},error:"",loading:!0}),[t,a]=(0,o.useState)({organizationStoreObject:{},error:"",loading:!0}),[n,i]=(0,o.useState)({organizationStoreObject:[],error:"",loading:!0}),[l,d]=(0,o.useState)({organizationStoreDropdownObject:{},error:"",loading:!0}),[c,u]=(0,o.useState)({organizationStoreDropdownSecondObject:{},error:"",loading:!0}),[g,v]=(0,o.useState)({orgStoreDropDownObject:{},error:"",loading:!0}),[h,m]=(0,o.useState)({orgViewStoreDropDownObject:{},error:"",loading:!0}),[p,j]=(0,o.useState)({organizationStoresHistoryObject:{},error:"",loading:!0}),A=(0,s.d4)((e=>e.organizationStores||{})),I=(0,s.d4)((e=>e.organizationStoresAllAccess||{})),f=(0,s.d4)((e=>e.organizationStoresSecond||[])),b=(0,s.d4)((e=>e.organizationStoreDropdown||[])),x=(0,s.d4)((e=>e.organizationStoreDropdownSecond||[])),y=(0,s.d4)((e=>e.orgStoreDropDown||[])),S=(0,s.d4)((e=>e.orgViewStoreDropDown||[])),z=(0,s.d4)((e=>e.organizationStoresHistory||[]));return(0,o.useEffect)((()=>{r((e=>({...e,...A})))}),[A]),(0,o.useEffect)((()=>{a((e=>({...e,...I})))}),[I]),(0,o.useEffect)((()=>{i((e=>({...e,...f})))}),[f]),(0,o.useEffect)((()=>{d((e=>({...e,...b})))}),[b]),(0,o.useEffect)((()=>{u((e=>({...e,...x})))}),[x]),(0,o.useEffect)((()=>{v((e=>({...e,...y})))}),[y]),(0,o.useEffect)((()=>{m((e=>({...e,...S})))}),[S]),(0,o.useEffect)((()=>{j((e=>({...e,...z})))}),[z]),{organizationStores:e,organizationStoresSecond:n,organizationStoresDropdown:l,orgStoreDropDown:g,orgViewStoreDropDown:h,organizationStoresHistory:p,organizationStoresAllAccess:t,organizationStoresDropdownSecond:c}}},55519:(e,r,t)=>{t.d(r,{G:()=>a});var o=t(9950),s=t(27081);const a=()=>{const[e,r]=(0,o.useState)({organizationObject:{},error:"",loading:!0}),[t,a]=(0,o.useState)({organizationObject:{},error:"",loading:!0}),[n,i]=(0,o.useState)({organizationObject:{},error:"",loading:!0}),[l,d]=(0,o.useState)({organizationObject:{},error:"",loading:!0}),[c,u]=(0,o.useState)({organizationObject:{},error:"",loading:!0}),[g,v]=(0,o.useState)({organizationLocationObject:{},error:"",loading:!0}),[h,m]=(0,o.useState)({organizationGetListObject:{},error:"",loading:!0}),[p,j]=(0,o.useState)({organizationDropdownObject:[],error:"",loading:!0}),[A,I]=(0,o.useState)({organizationLocationDropdownObject:[],error:"",loading:!0}),[f,b]=(0,o.useState)({organizationDropdownSecondObject:[],error:"",loading:!0}),[x,y]=(0,o.useState)({organizationLocationDropdownObject:[],error:"",loading:!0}),[S,z]=(0,o.useState)({organizationObject:{},error:"",loading:!0}),[O,w]=(0,o.useState)({organizationObject:{},error:"",loading:!0}),[F,T]=(0,o.useState)({organizationHistoryObject:{},error:"",loading:!0}),k=(0,s.d4)((e=>e.organization||[])),D=(0,s.d4)((e=>e.organizationAllData||[])),L=(0,s.d4)((e=>e.organizationAllDataSecond||[])),P=(0,s.d4)((e=>e.organizationLocationByParent||[])),E=(0,s.d4)((e=>e.organizationLocationByParentSecond||[])),M=(0,s.d4)((e=>e.organizationLocation||[])),R=(0,s.d4)((e=>e.organizationListData||[])),G=(0,s.d4)((e=>e.organizationList||[])),C=(0,s.d4)((e=>e.organizationDropdown||[])),B=(0,s.d4)((e=>e.organizationLocationDropdown||[])),H=(0,s.d4)((e=>e.organizationLocationDropdownSecond||[])),W=(0,s.d4)((e=>e.organizationDropdownSecond||[])),N=(0,s.d4)((e=>e.organizationListSecond||[])),U=(0,s.d4)((e=>e.organizationHistory||[]));return(0,o.useEffect)((()=>{r((e=>({...e,...k})))}),[k]),(0,o.useEffect)((()=>{a((e=>({...e,...D})))}),[D]),(0,o.useEffect)((()=>{i((e=>({...e,...L})))}),[L]),(0,o.useEffect)((()=>{d((e=>({...e,...P})))}),[P]),(0,o.useEffect)((()=>{u((e=>({...e,...E})))}),[E]),(0,o.useEffect)((()=>{v((e=>({...e,...M})))}),[M]),(0,o.useEffect)((()=>{m((e=>({...e,...R})))}),[R]),(0,o.useEffect)((()=>{j((e=>({...e,...C})))}),[C]),(0,o.useEffect)((()=>{I((e=>({...e,...B})))}),[B]),(0,o.useEffect)((()=>{y((e=>({...e,...H})))}),[H]),(0,o.useEffect)((()=>{b((e=>({...e,...W})))}),[W]),(0,o.useEffect)((()=>{z((e=>({...e,...G})))}),[G]),(0,o.useEffect)((()=>{w((e=>({...e,...N})))}),[N]),(0,o.useEffect)((()=>{T((e=>({...e,...U})))}),[U]),{organizations:e,organizationsAllData:t,organizationsAllDataSecond:n,organizationsLocByParent:l,organizationsLocByParentSecond:c,organizationsGetListData:h,organizationsDropdown:p,organizationsDropdownSecond:f,organizationsList:S,organizationsListSecond:O,organizationHistory:F,organizationsLocation:g,organizationsLocationDropdown:A,organizationsLocationDropdownSecond:x}}},79033:(e,r,t)=>{t.d(r,{z:()=>a});var o=t(9950),s=t(27081);const a=()=>{const[e,r]=(0,o.useState)({rolesObject:{},error:"",loading:!0}),[t,a]=(0,o.useState)({roleProjectsObject:[],error:"",loading:!0}),[n,i]=(0,o.useState)({rolesHistoryObject:{},error:"",loading:!0}),l=(0,s.d4)((e=>e.roles||{})),d=(0,s.d4)((e=>e.roleProjects||[])),c=(0,s.d4)((e=>e.rolesHistory||{}));return(0,o.useEffect)((()=>{r((e=>({...e,...l})))}),[l]),(0,o.useEffect)((()=>{a((e=>({...e,...d})))}),[d]),(0,o.useEffect)((()=>{i((e=>({...e,...c})))}),[c]),{roles:e,roleProjects:t,rolesHistory:n}}},66004:(e,r,t)=>{t.d(r,{k:()=>s});var o=t(27081);const s=()=>({users:(0,o.d4)((e=>e.users)),usersByPermission:(0,o.d4)((e=>e.usersByPermission)),usersWithForms:(0,o.d4)((e=>e.usersWithForms)),usersSecond:(0,o.d4)((e=>e.usersSecond)),usersHistory:(0,o.d4)((e=>e.usersHistory)),supervisorUsers:(0,o.d4)((e=>e.supervisorUsers))})}}]);