"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[8381],{94908:(e,r,t)=>{t.d(r,{O:()=>o});var a=t(9950),s=t(27081);const o=()=>{const[e,r]=(0,a.useState)({approversObject:{},error:"",loading:!0}),[t,o]=(0,a.useState)({approversListObject:[],error:"",loading:!0}),[i,l]=(0,a.useState)({approversListObject:[],error:"",loading:!0}),n=(0,s.d4)((e=>e.approvers||[])),d=(0,s.d4)((e=>e.getAllApproversList||[])),c=(0,s.d4)((e=>e.getAllApproversData||[]));return(0,a.useEffect)((()=>{r((e=>({...e,...n})))}),[n]),(0,a.useEffect)((()=>{o((e=>({...e,...d})))}),[d]),(0,a.useEffect)((()=>{l((e=>({...e,...c})))}),[c]),{approvers:e,approversList:t,reqApproversList:i}}},88848:(e,r,t)=>{t.d(r,{$:()=>o});var a=t(9950),s=t(27081);const o=()=>{const[e,r]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[t,o]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[i,l]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[n,d]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[c,u]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[v,p]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[m,g]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[f,S]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[b,k]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[O,y]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[L,j]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),h=(0,s.d4)((e=>e.masterMakerLov||{})),A=(0,s.d4)((e=>e.masterMakerLovList||{})),M=(0,s.d4)((e=>e.lovsForMasterName||[])),N=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),D=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),E=(0,s.d4)((e=>e.currency||[])),w=(0,s.d4)((e=>e.gstStatus||[])),T=(0,s.d4)((e=>e.paymentTerm||[])),x=(0,s.d4)((e=>e.incoterms||[])),H=(0,s.d4)((e=>e.title||[])),P=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{r((e=>({...e,...h})))}),[h]),(0,a.useEffect)((()=>{o((e=>({...e,...A})))}),[A]),(0,a.useEffect)((()=>{l((e=>({...e,...M})))}),[M]),(0,a.useEffect)((()=>{d((e=>({...e,...N})))}),[N]),(0,a.useEffect)((()=>{u((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{p((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{g((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{S((e=>({...e,...T})))}),[T]),(0,a.useEffect)((()=>{k((e=>({...e,...x})))}),[x]),(0,a.useEffect)((()=>{y((e=>({...e,...H})))}),[H]),(0,a.useEffect)((()=>{j((e=>({...e,...P})))}),[P]),{masterMakerLovs:e,masterMakerLovsList:t,masterMakerOrgType:i,masterMakerOrgTypeSecond:n,masterMakerOrgTypeThird:c,masterMakerCurrency:v,masterMakerGstStatus:m,masterMakerIncoterms:b,masterMakerPaymentTerm:f,masterMakerLovHistory:L,masterMakerTitle:O}}},74712:(e,r,t)=>{t.r(r),t.d(r,{default:()=>L});var a=t(96583),s=t(9950),o=t(27081),i=t(28429),l=t(88848),n=t(62605),d=t(94908),c=t(29024),u=t(52867),v=t(99635),p=t(89649),m=t(14846),g=t(3252),f=t(75682),S=t(83456),b=t(39225),k=t(44414);const O=(0,g.A)((0,s.lazy)((()=>t.e(8820).then(t.bind(t,46439))))),y=[{Header:"Actions",accessor:"actionButtons"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"stock_ledgers[0].project.name"},{Header:"From Organization",accessor:"stock_ledgers[0].organization.name"},{Header:"From Store",accessor:"stock_ledgers[0].organization_store.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"E-Way Bill Number",accessor:"eWayBillNumber"},{Header:"E-Way Bill Date",accessor:"eWayBillDate"},{Header:"Place Of Supply",accessor:"placeOfSupply"},{Header:"Vehicle Number",accessor:"vehicleNumber"},{Header:"Work Order Number",accessor:"poNumber"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}],L=()=>{var e,r,t,g,L,j,h;const A=(0,o.wA)(),{transactionId:M}=(0,i.g)(),[N,D]=(0,s.useState)("closed"),[E,w]=(0,s.useState)(null),[T,x]=(0,s.useState)(null),[H,P]=(0,s.useState)(!1),[B,I]=(0,s.useState)(!1),[C,W]=(0,s.useState)(null),[F,_]=(0,s.useState)(null),{paginations:{pageSize:z,pageIndex:R,forceUpdate:q},setPageIndex:G,refreshPagination:Q,setPageSize:U}=(0,p.A)(),{searchString:V,setSearchString:Y,accessorsRef:$,setAccessors:J,forceSearch:K,searchStringTrimmed:X}=(0,b.A)(),{stockLedgerDetailList:Z}=(0,n.t)(),{masterMakerOrgType:ee}=(0,l.$)(),{approvers:re,reqApproversList:te}=(0,d.O)(),ae=!re.loading&&(null===re||void 0===re||null===(e=re.approversObject)||void 0===e?void 0:e.rows),se=!te.loading&&(null===te||void 0===te||null===(r=te.approversListObject)||void 0===r?void 0:r.rows),oe=null===ee||void 0===ee?void 0:ee.masterObject,ie=(0,s.useMemo)((()=>{var e,r,t;if(!se||0===se.length||!ae||0===ae.length)return;const a=null===(e=se.reduce(((e,r)=>r.rank>e.rank?r:e),se[0]))||void 0===e?void 0:e.approverId;return null===(r=ae.find((e=>e.id===a)))||void 0===r||null===(t=r.user)||void 0===t?void 0:t.name}),[ae,se]),{data:le,count:ne}=(0,s.useMemo)((()=>{var e,r;return{data:(0,u.yN)(null===Z||void 0===Z||null===(e=Z.stockLedgerDetailListObject)||void 0===e?void 0:e.rows).map(((e,r)=>{var t,a,s,o,i,l,n,d;return{...e,...!0===(null===e||void 0===e||null===(t=e.stock_ledgers[0])||void 0===t?void 0:t.isCancelled)?{status:"Cancelled"}:!0===(null===e||void 0===e||null===(a=e.stock_ledgers[0])||void 0===a?void 0:a.isProcessed)?{status:"Processed"}:{status:null},serialNumber:(R*z-z+r+1).toString(),highestRankedApprover:ie,actionButtons:(0,k.jsx)(m.w,{editButton:!0,openPreview:()=>me(r),initiatePrint:()=>Se(r),initiateDownload:()=>fe(r),updateReceipt:()=>ge(e),viewSerialNumbers:()=>{x(r)},disablePrint:parseFloat(e.sumOfAmounts)>parseFloat(null===(s=e.stock_ledgers)||void 0===s||null===(o=s[0])||void 0===o||null===(i=o.project)||void 0===i?void 0:i.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:parseFloat(e.sumOfAmounts)>parseFloat(null===(l=e.stock_ledgers)||void 0===l||null===(n=l[0])||void 0===n||null===(d=n.project)||void 0===d?void 0:d.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}}))||[],count:null===Z||void 0===Z||null===(r=Z.stockLedgerDetailListObject)||void 0===r?void 0:r.count,isLoading:null===Z||void 0===Z?void 0:Z.loading,error:null===Z||void 0===Z?void 0:Z.error}}),[ie,R,z,null===Z||void 0===Z?void 0:Z.error,null===Z||void 0===Z?void 0:Z.loading,null===Z||void 0===Z||null===(t=Z.stockLedgerDetailListObject)||void 0===t?void 0:t.count,null===Z||void 0===Z||null===(g=Z.stockLedgerDetailListObject)||void 0===g?void 0:g.rows]),de=(null===le||void 0===le||null===(L=le[T])||void 0===L?void 0:L.materialDataNegativeQty)||[],ce=null===le||void 0===le||null===(j=le[E])||void 0===j?void 0:j.id,ue=null===le||void 0===le||null===(h=le[E])||void 0===h?void 0:h.referenceDocumentNumber,ve=(0,u.x)(oe,"MIN"),pe=(0,u.x)(oe,"GRN");(0,s.useEffect)((()=>{A((0,c.VOH)("TRANSACTION TYPE"))}),[A]),(0,s.useEffect)((()=>{ve&&A((0,c.rYL)({pageIndex:R,pageSize:z,transactionTypeId:ve,...X&&{searchString:X,accessors:JSON.stringify($.current)},sortBy:(null===F||void 0===F?void 0:F[0])||"createdAt",sortOrder:(null===F||void 0===F?void 0:F[1])||"DESC"}))}),[A,M,R,z,q,q,ve,X,F,$,K]);const me=e=>{D("view"),w(e)},ge=e=>{W(e),P(!0),I(!0)},fe=e=>{D("download"),w(e)},Se=e=>{D("print"),w(e)};return(0,k.jsxs)(k.Fragment,{children:["closed"!==N&&(0,k.jsx)(O,{fetchFromRoute:"/min-receipt",apiParams:ce,previewAction:N,onClose:()=>{D("hidden"),w(null)},fileNameForDownload:ue}),null!==T&&(0,k.jsx)(S.A,{selectedMaterialList:de,onClose:()=>{x(null)}}),H&&(0,k.jsx)(a.A,{open:B,onClose:()=>{I(!1)},scroll:"paper",maxWidth:"xs",disableEscapeKeyDown:!0,children:(0,k.jsx)(f.W,{rowData:C,setOpen:I,refreshPagination:Q,grnTransactionTypeId:pe,editPlaceOfSupply:!0,title:"MIN"})}),(0,k.jsx)(v.default,{title:"MIN Receipt",setPageIndex:G,setPageSize:U,pageIndex:R,pageSize:z,columns:y,data:ve?le:[],count:ve?ne:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:V,searchStringTrimmed:X,setSearchString:Y,setAccessors:J},sortConfig:{sort:F,setSort:_},exportConfig:{tableName:"min_receipt",apiQuery:{transactionTypeId:ve}}})]})}}}]);