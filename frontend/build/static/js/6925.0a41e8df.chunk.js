(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[6925],{3379:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(12257),n=a(95537),o=a(87233),l=a(23263),s=a(78581),i=a(14351),d=a(44414);const c=e=>{let{title:t}=e;return(0,d.jsxs)(i.A,{sx:{height:400},children:[t&&"none"!==t&&(0,d.jsx)(r.A,{sx:{border:"1px solid #97E7E1"},children:(0,d.jsx)(n.A,{sx:{backgroundColor:s.H_,py:.7,display:"flex",alignItems:"center",width:"100%",px:2,justifyContent:"center"},children:(0,d.jsx)(o.A,{variant:"h6",color:"common.white",textAlign:"center",children:t})})}),(0,d.jsxs)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:345,backgroundColor:"#f2f2f2",borderRadius:"10px",flexDirection:"column",padding:2},children:[(0,d.jsx)(l.A,{sx:{fontSize:56,color:"lightgray"}}),(0,d.jsx)(o.A,{variant:"h4",component:"h2",sx:{color:"#b7b7b7",mt:2,fontSize:16},children:"No results!"})]})]})}},1092:(e,t,a)=>{"use strict";a.d(t,{A:()=>P,H:()=>F});var r=a(9950),n=a(81095),o=a(67360),l=a(16335),s=a(25102),i=a(54203),d=a(72528),c=a(12257),u=a(95537),p=a(87233),h=a(57073),x=a(92089),m=a(27987),g=a(14195),v=a(7233),y=a(51496),A=a(99624),f=a(77340),j=a(18655),C=a(71201),b=a(55271),S=a(34691),D=a(59019),T=a(81052),I=a.n(T),E=a(47751),k=a(3379),M=a(14351),_=a(78581),H=a(33507),$=a(62054),w=a(44414);const F=["#4472C4","#5B9BD5","#ED7D31","#A5A5A5","#FFC000"],L=[...F,"#70AD47","#264478","#FF6EB4","#FFD966","#A64D79","#FF5733","#6C757D","#FFC0CB","#FFD700","#00FF00"],P=e=>{let{data:t,nameKey:a="name",title:T}=e;const[F,P]=(0,r.useState)(null),[W,O]=(0,r.useState)([]),[N,z]=(0,r.useState)(!1),U=(0,r.useRef)(),{user:R}=(0,H.A)(),B=t&&t.length>0?Object.keys(t[0]).filter((e=>"name"!==e)):[];if(!t||0===t.length||(null===t||void 0===t?void 0:t.every((e=>B.every((t=>{const a=e[t];return 0===a||"NaN"===a||"number"===typeof a&&isNaN(a)}))))))return(0,w.jsx)(k.A,{title:T});const G=()=>{P(null)},q=()=>{const e=new Date,t=new Date(e.getTime()+198e5),a=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),o=String(t.getUTCHours()).padStart(2,"0"),l=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...a]=e.trim().split(" "),r=a.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return r?`${t} ${r}`:t})(null===R||void 0===R?void 0:R.name)}_${a}-${r}-${n}_${o}-${l}-${s} IST`},Y=()=>t.map((e=>({...e,hide:W.includes(e[a])})));return(0,w.jsxs)(M.A,{children:[(0,w.jsx)(c.A,{sx:{border:"1px solid #97E7E1"},children:(0,w.jsxs)(u.A,{sx:{backgroundColor:_.H_,py:.7,display:"flex",flexDirection:"row",alignItems:"center",px:2},children:[(0,w.jsx)(u.A,{sx:{flex:1,display:"flex",justifyContent:"center",textAlign:"center"},children:(0,w.jsx)(p.A,{variant:"h6",color:"common.white",children:T})}),(0,w.jsx)(h.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{P(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,w.jsx)(A.A,{})}),(0,w.jsxs)(x.A,{id:"menu",anchorEl:F,keepMounted:!0,open:Boolean(F),onClose:G,children:[(0,w.jsxs)(m.A,{onClick:()=>{const e=q();if(U.current){const t=document.createElement("div");t.style.position="relative",t.style.width=`${U.current.clientWidth}px`,t.style.height=`${U.current.clientHeight+50}px`,t.style.backgroundColor="white";const a=document.createElement("div");a.style.textAlign="center",a.style.marginBottom="10px",a.innerHTML=`<h2>${T}</h2>`,t.appendChild(a);const r=U.current.cloneNode(!0);t.appendChild(r),document.body.appendChild(t),(0,E.$E)(t,{cacheBust:!0}).then((a=>{(0,S.saveAs)(a,`${T.replace(/\s+/g,"_")}_${e}.png`),(0,$.A)("Chart Exported as PNG successfully.",{variant:"success",autoHideDuration:1e3}),document.body.removeChild(t)})).catch((()=>{document.body.removeChild(t),(0,$.A)("Failed to export chart as PNG.",{variant:"error",autoHideDuration:1e3})}))}G()},children:[(0,w.jsx)(g.A,{children:(0,w.jsx)(f.A,{fontSize:"small"})}),"Export as PNG"]}),(0,w.jsxs)(m.A,{onClick:()=>{const e=q();U.current&&I()(U.current).then((t=>{const a=new D.jsPDF;a.text(T,a.internal.pageSize.getWidth()/2,20,{align:"center"});const r=t.toDataURL("image/png"),n=a.getImageProperties(r),o=a.internal.pageSize.getWidth(),l=n.height*o/n.width;a.addImage(r,"PNG",0,30,o,l),a.save(`${T.replace(/\s+/g,"_")}_${e}.pdf`),(0,$.A)("Chart Exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})})).catch((()=>{(0,$.A)("Failed to export chart as PDF.",{variant:"error",autoHideDuration:1e3})})),G()},children:[(0,w.jsx)(g.A,{children:(0,w.jsx)(j.A,{fontSize:"small"})}),"Export as PDF"]}),(0,w.jsxs)(m.A,{onClick:()=>{const e=q(),r=e=>e.charAt(0).toUpperCase()+e.slice(1),n=[r(a),"Value"],o=t.filter((e=>!W.includes(e[a]))).map((e=>({[r(a)]:e[a],Value:e.value}))),l=b.Wp.json_to_sheet(o),s=Array(n.length).fill("");s[0]=T,b.Wp.sheet_add_aoa(l,[s],{origin:"A1"}),l["!merges"]=[{s:{r:0,c:0},e:{r:0,c:n.length-1}}],b.Wp.sheet_add_aoa(l,[n],{origin:"A2"});const i=o.map((e=>n.map((t=>e[t]||""))));b.Wp.sheet_add_aoa(l,i,{origin:"A3"});const d=b.Wp.book_new(),c=T.length>31?T.substring(0,31):T;b.Wp.book_append_sheet(d,l,c),b._h(d,`${T.replace(/\s+/g,"_")}_${e}.xlsx`),(0,$.A)("Chart Exported as Excel successfully.",{variant:"success",autoHideDuration:1e3}),G()},children:[(0,w.jsx)(g.A,{children:(0,w.jsx)(C.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,w.jsx)(u.A,{sx:{p:2,display:"none",justifyContent:"flex-end",alignItems:"center"},children:(0,w.jsx)(v.A,{control:(0,w.jsx)(y.A,{checked:N,onChange:e=>z(e.target.checked)}),label:"Show Values"})}),(0,w.jsx)(n.u,{width:"100%",height:267,ref:U,children:(0,w.jsxs)(o.r,{children:[(0,w.jsx)(l.m,{formatter:(e,a)=>[`${e} (${(e/t.reduce(((e,t)=>e+t.value),0)*100).toFixed(2)}%)`,a]}),(0,w.jsx)(s.s,{layout:"vertical",verticalAlign:"left",align:"flex-start",iconType:"square",onClick:e=>{return t=e.value,void O((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},wrapperStyle:{display:"flex",justifyContent:"space-evenly",fontSize:"14px",fontWeight:"bold",marginTop:"5px"},formatter:(e,t)=>{const a=W.includes(e);return(0,w.jsx)("span",{style:{color:a?"gray":t.color},children:e})}}),(0,w.jsx)(i.F,{data:Y(),dataKey:"value",nameKey:a,cx:"50%",cy:"50%",outerRadius:105,fill:"#8884d8",label:N?e=>{let{value:t,percent:a}=e;return`${t} (${(100*a).toFixed(2)}%)`}:null,children:Y().map(((e,t)=>(0,w.jsx)(d.f,{fill:L[t%L.length],style:{display:e.hide?"none":"block"}},`cell-${t}`)))})]})})]})}},74288:(e,t,a)=>{"use strict";a.d(t,{A:()=>F,Q:()=>w});var r=a(10371),n=a(68605),o=a(12257),l=a(95537),s=a(87233),i=a(57073),d=a(92089),c=a(27987),u=a(14195),p=a(64661),h=a(35661),x=a(397),m=a(24965),g=a(22057),v=a(99624),y=a(77340),A=a(18655),f=a(71201),j=a(55271),C=a(34691),b=a(59019),S=a(81052),D=a.n(S),T=a(16125),I=a(9950),E=a(3379),k=a(52867),M=a(14351),_=a(62054),H=a(33507),$=a(44414);const w=e=>{let{columns:t}=e;return(0,$.jsx)($.Fragment,{children:Array.from({length:10}).map(((e,a)=>(0,$.jsx)(r.A,{sx:{height:"24px"},children:t.map(((e,t)=>(0,$.jsx)(n.A,{sx:{padding:"4px"},children:(0,$.jsx)(T.A,{variant:"text",width:"100%"})},t)))},a)))})},F=e=>{let{minWidth:t=750,containerSx:a={},data:S=[],columns:T=[],highlightedColumnsCount:F=0,loadingCondition:L,size:P,title:W,backgroundColor:O}=e;const{user:N}=(0,H.A)(),[z,U]=(0,I.useState)(null),R=`dashboard-table-${W}`;if(!S||0===S.length)return(0,$.jsx)(E.A,{title:W});const B=()=>{U(null)},G=()=>{const e=new Date,t=new Date(e.getTime()+198e5),a=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),o=String(t.getUTCHours()).padStart(2,"0"),l=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...a]=e.trim().split(" "),r=a.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return r?`${t} ${r}`:t})(null===N||void 0===N?void 0:N.name)}_${a}-${r}-${n}_${o}-${l}-${s} IST`};return(0,$.jsxs)(M.A,{children:[W&&(0,$.jsx)(o.A,{sx:{border:"1px solid #97E7E1"},children:(0,$.jsxs)(l.A,{sx:{backgroundColor:O,py:.7,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"none"!==W?"normal":"flex-end",px:2},children:["none"!==W&&(0,$.jsx)(l.A,{sx:{flex:1,display:"flex",justifyContent:"center"},children:(0,$.jsx)(s.A,{variant:"h6",color:"common.white",children:W})}),(null===S||void 0===S?void 0:S.length)>0&&(0,$.jsx)(i.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{U(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,$.jsx)(v.A,{})}),(0,$.jsxs)(d.A,{id:"menu",anchorEl:z,keepMounted:!0,open:Boolean(z),onClose:B,children:[(0,$.jsxs)(c.A,{onClick:async()=>{const e=G(),t=document.getElementById(R);if(t)try{const a=await D()(t),r=a.width,n=a.height,o="none"!==W?50:0,l=document.createElement("canvas");l.width=r,l.height=n+o;const s=l.getContext("2d");"none"!==W&&(s.fillStyle="#FFFFFF",s.fillRect(0,0,l.width,o),s.fillStyle="#000000",s.font="bold 24px Arial",s.textAlign="center",s.textBaseline="middle",s.fillText(W,l.width/2,o/2)),s.drawImage(a,0,o);const i=l.toDataURL("image/png"),d=document.createElement("a");d.href=i,d.download="none"===W?`${e}.png`:`${W.replace(/\s+/g,"_")}_${e}.png`,d.click(),(0,_.A)("Table exported as PNG successfully.",{variant:"success",autoHideDuration:1e3})}catch(a){(0,_.A)(a.message||"Can't export as PNG.",{variant:"error",autoHideDuration:1e3})}finally{B()}},children:[(0,$.jsx)(u.A,{children:(0,$.jsx)(y.A,{fontSize:"small"})}),"Export as PNG"]}),(0,$.jsxs)(c.A,{onClick:async()=>{const e=G(),t=document.getElementById(R);if(t)try{const a=await D()(t),r=a.toDataURL("image/png"),n=new b.jsPDF;"none"!==W&&(n.setFontSize(24),n.setFont("Arial","bold"),n.text(W,n.internal.pageSize.getWidth()/2,20,{align:"center"})),n.addImage(r,"PNG",10,30,190,190*a.height/a.width),n.save("none"===W?`${e}.pdf`:`${W.replace(/\s+/g,"_")}_${e}.pdf`),(0,_.A)("Table exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})}catch(a){(0,_.A)(a.message||"Can't export as PDF.",{variant:"error",autoHideDuration:1e3})}finally{B()}},children:[(0,$.jsx)(u.A,{children:(0,$.jsx)(A.A,{fontSize:"small"})}),"Export as PDF"]}),(0,$.jsxs)(c.A,{onClick:()=>{const e=G(),t=j.Wp.json_to_sheet([]),a=j.Wp.book_new();let r=0;if("none"!==W){j.Wp.sheet_add_aoa(t,[[W]],{origin:"A1"});const e=T.length-1;t["!merges"]=[{s:{r:r,c:0},e:{r:r,c:e}}],r+=1}j.Wp.sheet_add_aoa(t,[T.map((e=>e.Header))],{origin:`A${r+1}`}),r+=1,j.Wp.sheet_add_json(t,S,{skipHeader:!0,origin:`A${r+1}`}),j.Wp.book_append_sheet(a,t,"Dashboard Data");const n=j.M9(a,{bookType:"xlsx",type:"array"}),o=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});(0,C.saveAs)(o,"none"===W?`${e}.xlsx`:`${W.replace(/\s+/g,"_")}_${e}.xlsx`),(0,_.A)("Table exported as XLSX successfully.",{variant:"success",autoHideDuration:1e3}),B()},children:[(0,$.jsx)(u.A,{children:(0,$.jsx)(f.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,$.jsx)(p.A,{id:R,component:h.A,sx:{maxWidth:"100%",overflowX:"auto",...a},children:(0,$.jsxs)(x.A,{size:P,stickyHeader:!0,"aria-label":"customized table",sx:{minWidth:t},children:[(0,$.jsx)(m.A,{children:(0,$.jsx)(r.A,{children:T.map((e=>(0,$.jsx)(n.A,{sx:{backgroundColor:"#C6E0B4",paddingX:"6px",paddingY:"6px",fontSize:"0.6rem",fontWeight:"bold",lineHeight:"1.2"},align:e.align||"left",children:e.Header},e.accessor)))})}),(0,$.jsx)(g.A,{children:L?(0,$.jsx)(w,{columns:T}):S.length>0?S.map(((e,t)=>(0,$.jsx)(r.A,{sx:{height:"24px"},children:T.map(((t,a)=>(0,$.jsx)(n.A,{sx:{paddingX:"6px",paddingY:"4px",fontSize:"0.7rem",...(F?a+1<=F:0===a)&&{backgroundColor:"#FFF2CC"}},align:t.align||"left",children:t.Header.match(/date/i)?(0,k.jC)(e[t.accessor]):e[t.accessor]},t.accessor)))},t))):null})]})})]})}},89649:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(9950),n=a(80415);function o(){const[e,t]=(0,r.useState)({pageIndex:n.j7.pageIndex,pageSize:n.j7.pageSize,forceUpdate:!0}),a=(0,r.useCallback)((function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.pageIndex,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pageSize;t((e=>({pageIndex:a,pageSize:r,forceUpdate:!e.forceUpdate})))}),[e]),o=(0,r.useCallback)((()=>{t((e=>({pageIndex:n.j7.pageIndex,pageSize:n.j7.pageSize,forceUpdate:!e.forceUpdate})))}),[]);return{paginations:e,setPageIndex:e=>t((t=>({...t,pageIndex:e,forceUpdate:!t.forceUpdate}))),setPageSize:e=>t((t=>({pageIndex:n.j7.pageIndex,pageSize:e,forceUpdate:!t.forceUpdate}))),refreshPagination:o,setPaginationsFunctions:a}}},43997:(e,t,a)=>{"use strict";a.d(t,{i:()=>o});var r=a(9950),n=a(62054);const o=e=>{(0,r.useEffect)((()=>{e&&(0,n.A)(e,{variant:"error"})}),[e])}},14260:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ye});var r=a(9950),n=a(4139),o=a(67535),l=a(98623),s=a(87233),i=a(95537),d=a(9449),c=a(27081),u=a(60666),p=a(26473),h=a(78581),x=a(85706),m=a(56473),g=a(44813),v=a(81095),y=a(34508),A=a(60158),f=a(16335),j=a(25102),C=a(93245),b=a(11942),S=a.n(b),D=a(12257),T=a(57073),I=a(92089),E=a(27987),k=a(14195),M=a(7233),_=a(51496),H=a(99624),$=a(77340),w=a(18655),F=a(71201),L=a(55271),P=a(34691),W=a(59019),O=a(81052),N=a.n(O),z=a(47751),U=a(3379),R=a(52867),B=a(14351),G=a(33507),q=a(62054),Y=a(44414);const V=(0,r.memo)((e=>{let{x:t,y:a,stroke:r,value:n}=e;return(0,Y.jsx)("text",{x:t,y:a,dy:-7,fill:r,fontSize:14,textAnchor:"middle",style:{textShadow:"1px 1px 2px white, -1px -1px 2px white, 1px -1px 2px white, -1px 1px 2px white"},children:n})})),K=(0,r.memo)((e=>{let{x:t,y:a,stroke:r,value:n}=e;return(0,Y.jsx)("text",{x:t,y:a,dy:-4,dx:10,fill:r,fontSize:14,textAnchor:"middle",style:{textShadow:"1px 1px 2px white, -1px -1px 2px white, 1px -1px 2px white, -1px 1px 2px white"},children:n})})),X={x:S().number.isRequired,y:S().number.isRequired,stroke:S().string.isRequired,value:S().string.isRequired};V.propTypes=X,K.propTypes=X;const Q=e=>Array.isArray(e)?e.map((e=>Q(e))):"object"===typeof e?Object.fromEntries(Object.entries(e).map((e=>{let[t,a]=e;return[t,(r=a,Number.isNaN(r)&&"string"===typeof r?Number(r):r)];var r}))):e,J=e=>{let{data:t,chartConfig:a,title:n}=e;const o=(0,r.useRef)(),[l,d]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[p,b]=(0,r.useState)(!1),{user:S}=(0,G.A)(),O=Q(t);if(!O||0===O.length)return(0,Y.jsx)(U.A,{title:n});const{xAxisComponents:X,chartComponents:J}=((e,t,a,r)=>{const n=[],o=[],l=[];for(const p in e)if(!a.includes(p)){const{type:t,color:a}=e[p];let s;"bar"===t?(o.push(p),s=(0,Y.jsx)(x.y,{dataKey:p,barSize:20,fill:a,label:r?(0,Y.jsx)(K,{}):null,yAxisId:"left"},p)):"line"===t&&(l.push(p),s=(0,Y.jsx)(m.N,{type:"monotone",dataKey:p,stroke:a,strokeWidth:1.5,label:r?(0,Y.jsx)(V,{}):null,yAxisId:"right"},p)),n.push(s)}const s=Math.max(...t.map((e=>Math.max(...Object.values(e).filter((e=>"number"===typeof e)))))),i=s+Math.ceil(.1*s),d=Math.ceil(i/6),c=(()=>{const e=[];let t=i;for(;t>=0;)e.push(t),t-=d;return e.includes(0)||e.push(0),e})(),u=[];return o.length>0&&u.push((0,Y.jsx)(g.h,{yAxisId:"left",orientation:"left",dataKey:"value",ticks:c,domain:[0,i],allowDecimals:!1},"left")),l.length>0&&u.push((0,Y.jsx)(g.h,{yAxisId:"right",orientation:"right",dataKey:"value",ticks:c,domain:[0,i],allowDecimals:!1},"right")),{xAxisComponents:u,chartComponents:n}})(a,O,c,p),Z=O.reduce(((e,t)=>Math.max(e,t.name.length)),0),[ee,te]=(0,R.fP)(Z),ae=()=>{d(null)},re=()=>{const e=new Date,t=new Date(e.getTime()+198e5),a=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),o=String(t.getUTCHours()).padStart(2,"0"),l=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...a]=e.trim().split(" "),r=a.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return r?`${t} ${r}`:t})(null===S||void 0===S?void 0:S.name)}_${a}-${r}-${n}_${o}-${l}-${s} IST`};return(0,Y.jsxs)(B.A,{children:[(0,Y.jsx)(D.A,{sx:{border:"1px solid #97E7E1"},children:(0,Y.jsxs)(i.A,{sx:{backgroundColor:h.H_,py:.7,display:"flex",flexDirection:"row",alignItems:"center",px:2},children:[(0,Y.jsx)(i.A,{sx:{flex:1,display:"flex",justifyContent:"center"},children:(0,Y.jsx)(s.A,{variant:"h6",color:"common.white",children:n})}),(0,Y.jsx)(T.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{d(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,Y.jsx)(H.A,{})}),(0,Y.jsxs)(I.A,{id:"menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:ae,children:[(0,Y.jsxs)(E.A,{onClick:()=>{const e=re();if(o.current){const t=document.createElement("div");t.style.position="relative",t.style.width=`${o.current.clientWidth}px`,t.style.height=`${o.current.clientHeight+50}px`,t.style.backgroundColor="white";const a=document.createElement("div");a.style.textAlign="center",a.style.marginBottom="10px",a.innerHTML=`<h2>${n}</h2>`,t.appendChild(a);const r=o.current.cloneNode(!0);t.appendChild(r),document.body.appendChild(t),(0,z.$E)(t,{cacheBust:!0}).then((a=>{(0,P.saveAs)(a,`${n.replace(/\s+/g,"_")}_${e}.png`),(0,q.A)("Chart exported as PNG successfully.",{variant:"success",autoHideDuration:1e3}),document.body.removeChild(t)})).catch((e=>{(0,q.A)(e.message||"Can't export as PNG.",{variant:"error",autoHideDuration:1e3}),document.body.removeChild(t)}))}else(0,q.A)("Can't export as PNG.",{variant:"error",autoHideDuration:1e3});ae()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)($.A,{fontSize:"small"})}),"Export as PNG"]}),(0,Y.jsxs)(E.A,{onClick:()=>{const e=re();setTimeout((()=>{o.current&&o.current instanceof Node?N()(o.current).then((t=>{const a=new W.jsPDF;a.text(n,a.internal.pageSize.getWidth()/2,20,{align:"center"});const r=t.toDataURL("image/png"),o=a.getImageProperties(r),l=a.internal.pageSize.getWidth(),s=o.height*l/o.width;a.addImage(r,"PNG",0,30,l,s),a.save(`${n.replace(/\s+/g,"_")}_${e}.pdf`),(0,q.A)("Chart exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})})).catch((e=>{(0,q.A)(e.message||"Can't export as PDF.",{variant:"error",autoHideDuration:1e3})})):(0,q.A)("Can't export as PDF.",{variant:"error",autoHideDuration:1e3})}),1e3),ae()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)(w.A,{fontSize:"small"})}),"Export as PDF"]}),(0,Y.jsxs)(E.A,{onClick:()=>{const e=re(),t=X,a=Object.keys(O[0]).filter((e=>e!==t)),r=c.length>0?a.filter((e=>!c.includes(e))):a,o=O.map((e=>{const t={};return r.forEach((a=>{if(a in e){const r=e[a];t[a]="object"===typeof r&&null!==r?JSON.stringify(r):r}})),t})),l=L.Wp.json_to_sheet(o),s=[Array(r.length+1).fill("")];s[0][0]=n,L.Wp.sheet_add_aoa(l,s,{origin:"A1"}),l["!merges"]=[{s:{r:0,c:0},e:{r:0,c:r.length}}];const i=[t,...r];Array.isArray(i[0])&&i.shift();const d=i.map((e=>"string"===typeof e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e));L.Wp.sheet_add_aoa(l,[d],{origin:"A2"}),i.forEach(((e,t)=>{const a=l[L.Wp.encode_cell({r:1,c:t})];a&&(a.s={alignment:{horizontal:"center"}})})),L.Wp.sheet_add_json(l,o,{origin:"A3",skipHeader:!0});const u=L.Wp.book_new();L.Wp.book_append_sheet(u,l,"Data"),L._h(u,`${n.replace(/\s+/g,"_")}_${e}.xlsx`),(0,q.A)("Chart exported as XLSX successfully.",{variant:"success",autoHideDuration:1e3}),ae()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)(F.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,Y.jsxs)(i.A,{sx:{position:"relative",mt:4},children:[(0,Y.jsx)(M.A,{control:(0,Y.jsx)(_.A,{checked:p,onChange:()=>b(!p),name:"showValues",color:"primary"}),label:"Show Values",sx:{display:"none",justifyContent:"flex-end",alignItems:"center",pr:"20px"}}),(0,Y.jsx)(v.u,{width:"100%",height:300,ref:o,children:(0,Y.jsxs)(y.X,{data:O,margin:{top:10,right:20,bottom:te+10,left:ee},children:[(0,Y.jsx)(A.W,{dataKey:"name",angle:-34,textAnchor:"end",dy:2,tickFormatter:R.XV,tick:{fontSize:14}}),X,(0,Y.jsx)(f.m,{}),(0,Y.jsx)(j.s,{layout:"horizontal",verticalAlign:"top",align:"center",onClick:e=>{let{value:t}=e;return a=t,void u((e=>e.includes(a)?e.filter((e=>e!==a)):[...e,a]));var a},payload:Object.keys(a).map((e=>({value:e,type:a[e].type,color:a[e].color}))),wrapperStyle:{display:"flex",justifyContent:"center",fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},formatter:(e,t)=>{const a=c.includes(e);return(0,Y.jsx)("span",{style:{color:a?"gray":t.color},children:e})}}),(0,Y.jsx)(C.d,{stroke:"#f5f5f5"}),J]})})]})]})};var Z=a(80294),ee=a(67628);const te=e=>{let{chartData:t,xAxis:a="key",title:n}=e;const[o,l]=(0,r.useState)(null),[d,c]=(0,r.useState)([]),[u,p]=(0,r.useState)(!1),m=(0,r.useRef)(),{user:y}=(0,G.A)();if(!t||0===t.length)return(0,Y.jsx)(U.A,{title:n});const b=Object.keys(t[0]).find((e=>e!==a)),S=Math.max(...t.map((e=>e[b]))),O=S+Math.ceil(.1*S),V=Math.ceil(O/6),K=Math.max(...t.map((e=>e[a].length))),[X,Q]=(0,R.fP)(K),J=t.length>5,te=()=>{l(null)},ae=()=>{const e=new Date,t=new Date(e.getTime()+198e5),a=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),o=String(t.getUTCHours()).padStart(2,"0"),l=String(t.getUTCMinutes()).padStart(2,"0"),s=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...a]=e.trim().split(" "),r=a.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return r?`${t} ${r}`:t})(null===y||void 0===y?void 0:y.name)}_${a}-${r}-${n}_${o}-${l}-${s} IST`};return(0,Y.jsxs)(B.A,{children:[(0,Y.jsx)(D.A,{sx:{border:"1px solid #97E7E1"},children:(0,Y.jsxs)(i.A,{sx:{backgroundColor:h.H_,py:.7,display:"flex",flexDirection:"row",alignItems:"center",px:2},children:[(0,Y.jsx)(i.A,{sx:{flex:1,display:"flex",justifyContent:"center",textAlign:"center"},children:(0,Y.jsx)(s.A,{variant:"h6",color:"common.white",children:n})}),(0,Y.jsx)(T.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{l(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,Y.jsx)(H.A,{})}),(0,Y.jsxs)(I.A,{id:"menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:te,children:[(0,Y.jsxs)(E.A,{onClick:()=>{const e=ae();if(m.current){const t=document.createElement("div");t.style.position="relative",t.style.width=`${m.current.clientWidth}px`,t.style.height=`${m.current.clientHeight+50}px`,t.style.backgroundColor="white";const a=document.createElement("div");a.style.textAlign="center",a.style.marginBottom="10px",a.innerHTML=`<h2>${n}</h2>`,t.appendChild(a);const r=m.current.cloneNode(!0);t.appendChild(r),document.body.appendChild(t),(0,z.$E)(t,{cacheBust:!0}).then((a=>{(0,P.saveAs)(a,`${n.replace(/\s+/g,"_")}_${e}.png`),(0,q.A)("Exported as PNG successfully.",{variant:"success",autoHideDuration:1e3}),document.body.removeChild(t)})).catch((()=>{(0,q.A)("Failed to export PNG.",{variant:"error",autoHideDuration:1e3}),document.body.removeChild(t)}))}te()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)($.A,{fontSize:"small"})}),"Export as PNG"]}),(0,Y.jsxs)(E.A,{onClick:()=>{const e=ae();m.current&&N()(m.current).then((t=>{const a=new W.jsPDF;a.text(n,a.internal.pageSize.getWidth()/2,20,{align:"center"});const r=t.toDataURL("image/png"),o=a.getImageProperties(r),l=a.internal.pageSize.getWidth(),s=o.height*l/o.width;a.addImage(r,"PNG",0,30,l,s),a.save(`${n.replace(/\s+/g,"_")}_${e}.pdf`),(0,q.A)("Exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})})).catch((()=>{(0,q.A)("Failed to export PDF.",{variant:"error",autoHideDuration:1e3})})),te()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)(w.A,{fontSize:"small"})}),"Export as PDF"]}),(0,Y.jsxs)(E.A,{onClick:()=>{const e=ae(),r=Object.keys(t[0]).filter((e=>e!==a)),o=d.length>0?r.filter((e=>!d.includes(e))):r,l=[a,...o.map((e=>e.charAt(0).toUpperCase()+e.slice(1)))],s=t.map((e=>l.reduce(((t,a)=>(t[a]=e[a]||"",t)),{}))),i=L.Wp.json_to_sheet(s),c=Array(l.length).fill("");c[0]=n,L.Wp.sheet_add_aoa(i,[c],{origin:"A1"}),i["!merges"]=[{s:{r:0,c:0},e:{r:0,c:l.length-1}}],L.Wp.sheet_add_aoa(i,[l],{origin:"A2"});const u=s.map((e=>l.map((t=>e[t]||""))));L.Wp.sheet_add_aoa(i,u,{origin:"A3"});const p=(e,t)=>{const a=L.Wp.decode_range(t);for(let r=a.s.r;r<=a.e.r;++r)for(let t=a.s.c;t<=a.e.c;++t){const a=L.Wp.encode_cell({r:r,c:t});e[a]||(e[a]={}),e[a].s={alignment:{horizontal:"center",vertical:"center"}}}};p(i,"A1:"+L.Wp.encode_col(l.length-1)+"1"),p(i,"A2:"+L.Wp.encode_col(l.length-1)+"2"),p(i,"A3:"+L.Wp.encode_col(l.length-1)+(s.length+2));const h=L.Wp.book_new();L.Wp.book_append_sheet(h,i,"Data"),L._h(h,`${n.replace(/\s+/g,"_")}_${e}.xlsx`),(0,q.A)("Chart exported as XLSX successfully.",{variant:"success",autoHideDuration:1e3}),te()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)(F.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,Y.jsx)(i.A,{sx:{p:2,display:"none",justifyContent:"flex-end",alignItems:"center"},children:(0,Y.jsx)(M.A,{control:(0,Y.jsx)(_.A,{checked:u,onChange:e=>p(e.target.checked)}),label:"Show Values"})}),(0,Y.jsx)(v.u,{width:"100%",height:250,ref:m,children:(0,Y.jsxs)(Z.E,{width:500,height:250,data:t,layout:"horizontal",margin:{left:J?X:0,bottom:J?Q:0,right:10,top:5},children:[(0,Y.jsx)(C.d,{strokeDasharray:"3 3"}),(0,Y.jsx)(A.W,{dataKey:a}),(0,Y.jsx)(g.h,{domain:[0,O],ticks:(()=>{const e=[];let t=O;for(;t>=0;)e.push(t),t-=V;return e.includes(0)||e.push(0),e})()}),(0,Y.jsx)(f.m,{}),(0,Y.jsx)(j.s,{layout:"horizontal",verticalAlign:"top",align:"center",onClick:e=>{return t=e.dataKey,void c((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},iconType:"square",wrapperStyle:{display:"flex",justifyContent:"center",fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},formatter:(e,t)=>{const a=d.includes(e);return(0,Y.jsx)("span",{style:{color:a?"gray":t.color},children:e})}}),(0,Y.jsx)(x.y,{dataKey:b,hide:d.includes(b),fill:"#0097A7",maxBarSize:30,stackId:"a",children:u&&(0,Y.jsx)(ee.Z,{dataKey:b,position:"top",fill:"black",fontSize:10,offset:10})})]})})]})};var ae=a(1092);const re=[...ae.H,"#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2"],ne=[...ae.H,"#1f77b4","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#aec7e8","#ffbb78","#98df8a","#ff9896","#c5b0d5","#c49c94"],oe=e=>{let{data:t=[],yAxisKey:a,title:n}=e;const{user:o}=(0,G.A)(),[l,d]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[p,m]=(0,r.useState)(!1),y=(0,r.useRef)();if(0===t.length)return(0,Y.jsx)(U.A,{title:n});const b=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return e=t<=7?re:ne,e.slice(0,Math.min(t,e.length))}(t.length),[S]=Object.keys(t[0]),O=a||S,V=()=>{d(null)},K=()=>{const e=new Date,t=new Date(e.getTime()+198e5),a=t.getUTCFullYear(),r=String(t.getUTCMonth()+1).padStart(2,"0"),n=String(t.getUTCDate()).padStart(2,"0"),l=String(t.getUTCHours()).padStart(2,"0"),s=String(t.getUTCMinutes()).padStart(2,"0"),i=String(t.getUTCSeconds()).padStart(2,"0");return`${(e=>{const[t,...a]=e.trim().split(" "),r=a.map((e=>{var t;return null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()})).join("");return r?`${t} ${r}`:t})(null===o||void 0===o?void 0:o.name)}_${a}-${r}-${n}_${l}-${s}-${i} IST`};return(0,Y.jsxs)(B.A,{children:[(0,Y.jsx)(D.A,{sx:{border:"1px solid #97E7E1"},children:(0,Y.jsxs)(i.A,{sx:{backgroundColor:h.H_,py:.7,display:"flex",flexDirection:"row",alignItems:"center",px:2},children:[(0,Y.jsx)(i.A,{sx:{flex:1,display:"flex",justifyContent:"center"},children:(0,Y.jsx)(s.A,{variant:"h6",color:"common.white",children:n})}),(0,Y.jsx)(T.A,{"aria-label":"export options","aria-controls":"menu","aria-haspopup":"true",onClick:e=>{d(e.currentTarget)},sx:{color:"white",display:"none"},children:(0,Y.jsx)(H.A,{})}),(0,Y.jsxs)(I.A,{id:"menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:V,children:[(0,Y.jsxs)(E.A,{onClick:()=>{const e=K();if(y.current){const t=document.createElement("div");t.style.position="relative",t.style.width=`${y.current.clientWidth}px`,t.style.height=`${y.current.clientHeight+50}px`,t.style.backgroundColor="white";const a=document.createElement("div");a.style.textAlign="center",a.style.marginBottom="10px",a.innerHTML=`<h2>${n}</h2>`,t.appendChild(a);const r=y.current.cloneNode(!0);t.appendChild(r),document.body.appendChild(t),(0,z.$E)(t,{cacheBust:!0}).then((a=>{(0,P.saveAs)(a,`${n.replace(/\s+/g,"_")}_${e}.png`),(0,q.A)("Chart exported as PNG successfully.",{variant:"success",autoHideDuration:1e3}),document.body.removeChild(t)})).catch((e=>{(0,q.A)(e.message||"Can't export as PNG.",{variant:"error",autoHideDuration:1e3}),document.body.removeChild(t)}))}else(0,q.A)("Can't export as PNG.",{variant:"error",autoHideDuration:1e3});V()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)($.A,{fontSize:"small"})}),"Export as PNG"]}),(0,Y.jsxs)(E.A,{onClick:()=>{const e=K();setTimeout((()=>{y.current&&y.current instanceof Node?N()(y.current).then((t=>{const a=new W.jsPDF;a.text(n,a.internal.pageSize.getWidth()/2,20,{align:"center"});const r=t.toDataURL("image/png"),o=a.getImageProperties(r),l=a.internal.pageSize.getWidth(),s=o.height*l/o.width;a.addImage(r,"PNG",0,30,l,s),a.save(`${n.replace(/\s+/g,"_")}_${e}.pdf`),(0,q.A)("Chart exported as PDF successfully.",{variant:"success",autoHideDuration:1e3})})).catch((e=>{(0,q.A)(e.message||"Can't export as PDF.",{variant:"error",autoHideDuration:1e3})})):(0,q.A)("Can't export as PDF.",{variant:"error",autoHideDuration:1e3})}),1e3),V()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)(w.A,{fontSize:"small"})}),"Export as PDF"]}),(0,Y.jsxs)(E.A,{onClick:()=>{const e=K(),a=Object.keys(t[0]).filter((e=>e!==O)),r=c.length>0?a.filter((e=>!c.includes(e))):a,o=t.map((e=>r.reduce(((t,a)=>(t[O]=e[O],t[a]=e[a],t)),{}))),l=L.Wp.json_to_sheet(o),s=[Array(r.length+1).fill("")];s[0][0]=n,L.Wp.sheet_add_aoa(l,s,{origin:"A1"}),l["!merges"]=[{s:{r:0,c:0},e:{r:0,c:r.length}}];const i=[O,...r];L.Wp.sheet_add_aoa(l,[i],{origin:"A2"});const d=L.Wp.book_new();L.Wp.book_append_sheet(d,l,"Data"),L._h(d,`${n.replace(/\s+/g,"_")}_${e}.xlsx`),(0,q.A)("Chart exported as XLSX successfully.",{variant:"success",autoHideDuration:1e3}),V()},children:[(0,Y.jsx)(k.A,{children:(0,Y.jsx)(F.A,{fontSize:"small"})}),"Export as Excel"]})]})]})}),(0,Y.jsxs)(i.A,{sx:{position:"relative",mt:4},children:[(0,Y.jsx)(M.A,{control:(0,Y.jsx)(_.A,{checked:p,onChange:()=>m(!p),name:"showValues",color:"primary"}),label:"Show Values",sx:{display:"none",justifyContent:"flex-end",alignItems:"center",pr:"20px"}}),(0,Y.jsx)(v.u,{width:"100%",height:300,ref:y,children:(0,Y.jsxs)(Z.E,{layout:"vertical",data:t,ref:y,children:[(0,Y.jsx)(C.d,{strokeDasharray:"3 3"}),(0,Y.jsx)(A.W,{type:"number"}),(0,Y.jsx)(g.h,{type:"category",dataKey:O,tickFormatter:R.XV,width:150}),(0,Y.jsx)(f.m,{}),(0,Y.jsx)(j.s,{layout:"horizontal",verticalAlign:"top",align:"center",onClick:e=>{return t=e.dataKey,void u((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},iconType:"square",wrapperStyle:{display:"flex",justifyContent:"center",fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},formatter:(e,t)=>{const a=c.includes(e);return(0,Y.jsx)("span",{style:{color:a?"gray":t.color},children:e})}}),Object.keys(t[0]).filter((e=>e!==O)).map(((e,t)=>{const a=c.includes(e);return(0,Y.jsx)(x.y,{dataKey:e,stackId:"a",fill:b[t],opacity:a?.3:1,children:p&&(0,Y.jsx)(ee.Z,{dataKey:e,position:"center"})},e)}))]})})]})]})};var le=a(96951),se=a(80733),ie=a(29024),de=a(84601),ce=a(74288),ue=a(76300),pe=a(40761),he=a(43997),xe=a(24618),me=a(87713);const ge=[{Header:"Activity Type",accessor:"Activity Type"},{Header:"Name",accessor:"Form Name"},{Header:"Scope",accessor:"Scope"},{Header:"Actual",accessor:"Actual"},{Header:"L1 Approval Pending",accessor:"L1 Approval Pending"},{Header:"L1 Approved",accessor:"L1 Approved"},{Header:"L1 Rejected",accessor:"L1 Rejected"},{Header:"L1 On-Hold",accessor:"L1 On-Hold"},{Header:"L2 Approval Pending",accessor:"L2 Approval Pending"},{Header:"L2 Approved",accessor:"L2 Approved"},{Header:"L2 Rejected",accessor:"L2 Rejected"},{Header:"L2 On-Hold",accessor:"L2 On-Hold"}],ve=[{id:"gaa",name:"GAA"}];const ye=()=>{var e,t,a,x,m,g,v,y,A,f,j,C;const b=(0,c.wA)(),S=null===(e=(0,se.Y)())||void 0===e||null===(t=e.projectsDropdown)||void 0===t?void 0:t.projectsDropdownObject,D=(0,pe.r)(),[T,I,E]=[null===D||void 0===D||null===(a=D.areaWiseProgressDashboard)||void 0===a?void 0:a.areaWiseProgressDashboardObject,null===D||void 0===D||null===(x=D.areaWiseProgressDashboard)||void 0===x?void 0:x.loading,null===D||void 0===D||null===(m=D.areaWiseProgressDashboard)||void 0===m?void 0:m.error],k=(0,xe.L)(),[M,_,H,$]=[null===k||void 0===k||null===(g=k.projectAreaLevels)||void 0===g||null===(v=g.projectAreaLevelsObject)||void 0===v||null===(y=v[0])||void 0===y?void 0:y.gaaLevels,null===k||void 0===k||null===(A=k.projectAreaLevels)||void 0===A?void 0:A.accessRank,null===k||void 0===k||null===(f=k.projectAreaLevels)||void 0===f?void 0:f.loading,null===k||void 0===k||null===(j=k.projectAreaLevels)||void 0===j?void 0:j.error],w=!!Object.keys(T).length;(0,he.i)($),(0,he.i)(E);const F=(0,d.mN)({resolver:(0,p.t)(u.Ik().shape({projectId:de.A.other,toDate:de.A.toDate,...(0,me.generateAreaLevelsValidation)(M,_)})),defaultValues:{gaaLevelEntryId0:[]},mode:"all"}),{handleSubmit:L,watch:P,setValue:W}=F,[O,N,z,U]=P(["projectId","hierarchyType","fromDate","toDate"]),G=(0,r.useCallback)((async e=>{const{activityType:t}=e,{errorFlag:a,newLevelFilter:r}=(0,R.Wr)({areaLevelsData:M,values:e,methods:F,accessRank:_});a||b((0,ie.j8f)({gaaLevelDetails:r,projectId:O,fromDate:z,toDate:U,activityType:"all"!==t?t:null}))}),[_,M,b,z,F,O,U]),q=(0,r.useCallback)(((e,t)=>{var a;const r=t-1;return null!==(a=P())&&void 0!==a&&a[`gaaLevelEntryId${r}`]?e.gaa_level_entries.filter((e=>{var t,a;return null===(t=P())||void 0===t||null===(a=t[`gaaLevelEntryId${r}`])||void 0===a?void 0:a.includes(null===e||void 0===e?void 0:e.parentId)})):e.gaa_level_entries}),[P]),V=(0,r.useCallback)(((e,t,a,r,n)=>{(a=structuredClone(a))[`gaaLevelEntryId${e}`]=n;let o=e;for(;o<(r?t.length-1:t.length);){var l,s,i;const e=`gaaLevelEntryId${o+1}`,r=`gaaLevelEntryId${o}`,n=t[o+1],d=null!==(l=a)&&void 0!==l&&l[r]&&null!==n&&void 0!==n&&n.gaa_level_entries?null===n||void 0===n||null===(s=n.gaa_level_entries)||void 0===s?void 0:s.filter((e=>{var t,n;return null===(t=a)||void 0===t||null===(n=t[r])||void 0===n?void 0:n.includes(null===e||void 0===e?void 0:e.parentId)})):(null===n||void 0===n?void 0:n.gaa_level_entries)||[],c=Array.isArray(a[e])&&(null===(i=a[e])||void 0===i?void 0:i.filter((e=>d.some((t=>t.id===e)))))||[];W(e,c),a[e]=c,o+=1}}),[W]),K=(0,r.useCallback)((e=>{L(G)({activityType:e.target.value})}),[L,G]),X=(0,h.v2)((null===T||void 0===T?void 0:T.contractorSummaryMainTable)||[]),Q=(0,h.xH)((null===T||void 0===T?void 0:T.contractorSummaryMainTable)||[]),{webforms:Z}=(0,ue.I)(),ee=[{id:"all",name:"All"},...(0,R.wn)(Z||[])];(0,r.useEffect)((()=>{b((0,ie.uiG)())}),[b]),(0,r.useEffect)((()=>{var e;null!==ve&&void 0!==ve&&null!==(e=ve[0])&&void 0!==e&&e.id&&W("hierarchyType",ve[0].id)}),[W]),(0,r.useEffect)((()=>{O&&b((0,ie.aT5)({projectId:O,isAccessForAllResponses:"1"}))}),[O,b]),(0,r.useEffect)((()=>{O&&b((0,ie.XXG)({typeId:["30ea8a65-ff5b-4bff-b1a1-892204e23669","1d75feca-2e64-4b95-900d-fcd53446ddeb"],sortBy:"updatedAt",sortOrder:"DESC",projectId:O,accessSource:"Form Responses"}))}),[b,O]);const ae=(0,r.useMemo)((()=>X),[X]),re=(0,r.useMemo)((()=>Q),[Q]);return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(B.A,{title:"Area Wise Progress Dashboard",children:[(0,Y.jsx)(le.Op,{methods:F,onSubmit:L(G),children:(0,Y.jsxs)(n.Ay,{container:!0,spacing:2,children:[(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:3,children:(0,Y.jsx)(le.eu,{name:"projectId",label:"Project",menus:S,required:!0})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:3,children:(0,Y.jsx)(le.eu,{name:"hierarchyType",label:"Hierarchy Type",menus:ve})}),"gaa"===N&&(null===M||void 0===M?void 0:M.length)>0&&(null===M||void 0===M?void 0:M.map(((e,t)=>{var a,r;return(0,Y.jsx)(n.Ay,{item:!0,md:3,xl:3,children:(0,Y.jsx)(le.Yq,{name:`gaaLevelEntryId${t}`,label:e.name,onChange:V.bind(null,t,M,P(),!0),menus:q(e,t),disable:0!==t&&!(null!==(a=P())&&void 0!==a&&null!==(r=a["gaaLevelEntryId"+(t-1)])&&void 0!==r&&r.length),required:0===t})},e.id)}))),(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:3,children:(0,Y.jsx)(le.o3,{name:"fromDate",label:"From Date",type:"date"})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:3,children:(0,Y.jsx)(le.o3,{name:"toDate",label:"To Date",type:"date"})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,sx:{mt:2,display:"flex",justifyContent:"flex-end"},children:(0,Y.jsx)(o.A,{disabled:H||I,type:"submit",variant:"contained",color:"primary",startIcon:I?(0,Y.jsx)(l.A,{size:20,color:"inherit"}):null,children:"Proceed"})})]})}),w&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(s.A,{sx:{backgroundColor:h.Yx,py:.5,mt:2,fontSize:"1rem",fontWeight:"bold"},color:"common.white",textAlign:"center",children:"Today's Status"}),(0,Y.jsxs)(n.Ay,{container:!0,spacing:1,sx:{mb:1,mt:.5},children:[(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:6,children:(0,Y.jsx)(i.A,{width:"100%",sx:{height:400},children:(0,Y.jsx)(te,{chartData:null===T||void 0===T?void 0:T.todaysProgressCi,xAxis:"Form Name",title:"Consumer Indexing"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:6,children:(0,Y.jsx)(i.A,{width:"100%",sx:{height:400},children:(0,Y.jsx)(te,{chartData:null===T||void 0===T?void 0:T.todaysProgressMi,xAxis:"Form Name",title:"Meter Installation"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{width:"100%",sx:{height:400},children:(0,Y.jsx)(te,{chartData:null===T||void 0===T?void 0:T.todaysProgressOAndM,xAxis:"Form Name",title:"Operation & Maintenance"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{sx:{height:500},children:(0,Y.jsx)(oe,{data:null===T||void 0===T?void 0:T.todaysStatusContractorWise,yAxisKey:"Organization Name",title:"Active Workforce"})})})]}),(0,Y.jsx)(s.A,{sx:{backgroundColor:h.Yx,py:.5,mt:2,fontSize:"1rem",fontWeight:"bold"},color:"common.white",textAlign:"center",children:"All Time Status"}),(0,Y.jsxs)(n.Ay,{container:!0,spacing:1,sx:{mb:1,mt:.5},children:[(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:6,children:(0,Y.jsx)(i.A,{width:"100%",sx:{height:400,mb:2},children:(0,Y.jsx)(te,{chartData:null===T||void 0===T?void 0:T.allTimeProgressCi,xAxis:"Form Name",title:"Consumer Indexing"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,md:6,children:(0,Y.jsx)(i.A,{width:"100%",sx:{height:400,mb:2},children:(0,Y.jsx)(te,{chartData:null===T||void 0===T?void 0:T.allTimeProgressMi,xAxis:"Form Name",title:"Meter Installation"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{width:"100%",sx:{height:400,mb:2},children:(0,Y.jsx)(te,{chartData:null===T||void 0===T?void 0:T.allTimeProgressOAndM,xAxis:"Form Name",title:"Operation & Maintenance"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{sx:{height:400,mb:2},children:(0,Y.jsx)(oe,{data:null===T||void 0===T?void 0:T.allTimeStatusContractorWise,yAxisKey:"Organization Name",title:"Active Workforce"})})})]}),(0,Y.jsx)(i.A,{sx:{mb:1,mt:.5},children:(0,Y.jsx)(ce.A,{backgroundColor:h.H_,highlightedColumnsCount:2,data:(null===T||void 0===T?void 0:T.cumulativeStatus)||[],columns:ge,title:"Cumulative Status"})}),(0,Y.jsx)(s.A,{sx:{backgroundColor:h.Yx,py:.5,mt:2,fontSize:"1rem",fontWeight:"bold"},color:"common.white",textAlign:"center",children:"All Time Progress"}),(0,Y.jsx)(B.A,{children:(0,Y.jsx)(le.Op,{methods:F,children:(0,Y.jsxs)(n.Ay,{container:!0,alignItems:"center",spacing:1,children:[(0,Y.jsx)(n.Ay,{item:!0,children:(0,Y.jsx)(s.A,{variant:"h5",noWrap:!0,children:"Activity Type"})}),(0,Y.jsx)(n.Ay,{item:!0,xs:3,children:(0,Y.jsx)(le.eu,{name:"activityType",onChange:K,label:"",menus:ee,fullWidth:!0,defaultValue:null===(C=ee[0])||void 0===C?void 0:C.id})})]})})}),(0,Y.jsxs)(n.Ay,{container:!0,sx:{mt:.5},children:[(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{sx:{border:"1px solid #97E7E1"},height:460,children:(0,Y.jsx)(J,{data:null===T||void 0===T?void 0:T.allDateWiseData,chartConfig:{"Consumer Indexing":{type:"bar",color:"#FFC000"},"Meter Installation":{type:"bar",color:"#00B050"},"CI Workforce":{type:"line",color:"#FFC000"},"MI Workforce":{type:"line",color:"#00B050"}},title:"Date Wise"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{sx:{border:"1px solid #97E7E1"},height:460,children:(0,Y.jsx)(J,{data:(ne=null===T||void 0===T?void 0:T.allMonthWiseData,[...ne].sort(((e,t)=>{const[a,r]=e.name.split("-"),[n,o]=t.name.split("-"),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=l.indexOf(a),i=l.indexOf(n);return r!==o?r-o:s-i}))),chartConfig:{"Consumer Indexing":{type:"bar",color:"#FFC000"},"Meter Installation":{type:"bar",color:"#00B050"},"CI Workforce":{type:"line",color:"#FFC000"},"MI Workforce":{type:"line",color:"#00B050"}},title:"Month Wise"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{sx:{border:"1px solid #97E7E1"},height:460,children:(0,Y.jsx)(J,{data:null===T||void 0===T?void 0:T.allCircleWiseData,chartConfig:{"Consumer Indexing":{type:"bar",color:"#ED7D31"},"Meter Installation":{type:"bar",color:"#5B9BD5"},"CI Workforce":{type:"line",color:"#A5A5A5"},"MI Workforce":{type:"line",color:"#FFC000"}},title:"Circle Wise"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{sx:{border:"1px solid #97E7E1"},height:460,children:(0,Y.jsx)(J,{data:null===T||void 0===T?void 0:T.allDivisionWiseData,chartConfig:{"Consumer Indexing":{type:"bar",color:"#4472C4"},"Meter Installation":{type:"bar",color:"#70AD47"},"CI Workforce":{type:"line",color:"#FFC000"},"MI Workforce":{type:"line",color:"#43682B"}},title:"Division Wise"})})}),(0,Y.jsx)(n.Ay,{item:!0,xs:12,children:(0,Y.jsx)(i.A,{sx:{border:"1px solid #97E7E1"},height:460,children:(0,Y.jsx)(J,{data:null===T||void 0===T?void 0:T.allSubDivisionWiseData,chartConfig:{"Consumer Indexing":{type:"bar",color:"#FFC000"},"Meter Installation":{type:"bar",color:"#ED7D31"},"CI Workforce":{type:"line",color:"#70AD47"},"MI Workforce":{type:"line",color:"#9E480E"}},title:"Sub Division Wise"})})})]}),(0,Y.jsx)(i.A,{sx:{mb:1,mt:.5},children:(0,Y.jsx)(ce.A,{title:"All Time Progress",backgroundColor:h.H_,data:null===ae||void 0===ae?void 0:ae.data,columns:h.O0})}),(0,Y.jsx)(i.A,{sx:{mb:1,mt:.5},children:(0,Y.jsx)(ce.A,{title:"Contractor Wise Material Aging Details",backgroundColor:h.H_,data:null===re||void 0===re?void 0:re.data,columns:h.SE})})]})]})});var ne}},78581:(e,t,a)=>{"use strict";a.d(t,{EN:()=>m,H_:()=>o,I1:()=>g,O0:()=>f,Qv:()=>v,SE:()=>j,VD:()=>p,Yx:()=>n,ol:()=>A,pA:()=>y,pc:()=>x,qU:()=>c,tU:()=>u,v2:()=>i,xH:()=>d});var r=a(52867);const n="#1890FF",o="#1F4E78",l=e=>isNaN(e)?e:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return parseFloat(parseFloat(e).toFixed(t))}(e),s=e=>Object.fromEntries(Object.entries(e).map((e=>{let[t,a]=e;return[t,l(a)]})));function i(e){return{data:e.map((e=>({nameOfContractor:e["Name Of Contractor"],totalTeam:e["Total Team"],activeTeamToday:e["Active Team Today"],totalInstallation:e["Total Installation"],totalSyncedToMDM:e["Total Synced To MDM"]})))}}function d(e){return{data:e.map((e=>s({contractorName:e["Name Of Contractor"],meterAvailableAtContractor:e["Meter Available At Contractor"],meter7Days:e["7 Days"],meter8To15Days:e["8 to 15 Days"],meter16To30Days:e["16 to 30 Days"],meterOver30Days:e["> 30 Days"]})))}}function c(e){return{data:e.map((e=>s({contractorName:e["Name Of Contractor"],meterIssuedToContractor:e["Meter Issued To Contractor"],meterAvailableAtContractor:e["Meter Available At Contractor"],meterIssuedToInstaller:e["Meter Issued To Installer"],totalInstallation:e["Total Installation"],meterAvailableAtInstaller:e["Meter Available At Installer"]})))}}const u=[{Header:"Contractor Name",accessor:"contractorName"},{Header:"Meter Issued to Contractor",accessor:"meterIssuedToContractor"},{Header:"Meter Available at Contractor",accessor:"meterAvailableAtContractor"},{Header:"Meter Issued to Installer",accessor:"meterIssuedToInstaller"},{Header:"Total Installation",accessor:"totalInstallation"},{Header:"Meter Available at Installer",accessor:"meterAvailableAtInstaller"}];function p(e){var t;return[{title:"TOTAL CONTRACTOR",value:e["Total Contractor"]},{title:"Total Team",value:e["Total Team"]},{title:"Active Team Today",value:e["Active Team Today"]},{title:"Total Installation",value:null===(t=e["Total Installation"])||void 0===t?void 0:t.toString()},{title:"Total Synced To MDM",value:e["Total Synced To MDM"]}]}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r={};e.forEach((e=>{const t=e["Month-Year"];r[t]||(r[t]=Object.keys(r).length)}));const n=new Array(Object.keys(r).length).fill(0),o=new Array(Object.keys(r).length).fill(0);e.forEach((e=>{const t=e["Month-Year"],a=r[t];n[a]=e["Planned Quantity"],o[a]=e["Installed Quantity"]}));const l="Month-Year";return{id:a+1,title:t,chartData:Object.keys(r).sort(((e,t)=>{const[,a]=e.split("-"),[,n]=t.split("-");return a!==n?a-n:r[e]-r[t]})).map((e=>({[l]:e,plan:n[r[e]],actual:o[r[e]]}))),xAxis:l}}function x(e){return Object.values(Object.fromEntries(Object.entries(e.reduce(((e,t)=>(e[t["Meter Type"]]||(e[t["Meter Type"]]=[]),e[t["Meter Type"]].push({"Month-Year":t["Month-Year"],"Planned Quantity":t["Planned Quantity"],"Installed Quantity":t["Installed Quantity"]}),e)),{})).map(((e,t)=>{let[a,r]=e;return[a,h(r,a,t)]}))))}function m(e){return e.map((e=>({value:parseFloat(e.InstalledQuantity),label:e["GAA Entry Name"]})))}const g=e=>Object.entries(e.reduce(((e,t)=>(e[t["Meter Type"]]||(e[t["Meter Type"]]=0),e[t["Meter Type"]]+=Number(t["Installed Quantity"]),e)),{})).map((e=>{let[t,a]=e;return{"Meter Type":t,"Installed Quantity":a}})),v=e=>e.map((e=>({...e,"Material Type":e["Material Type"]||"N/A","Start Date":e["Start Date"]||"N/A","End Date":e["End Date"]||"N/A"}))),y=[{Header:"Installation Type",accessor:"Meter Type"},{Header:"Material Type",accessor:"Material Type"},{Header:"Start Date",accessor:"Start Date"},{Header:"End Date",accessor:"End Date"},{Header:"Total Scope",accessor:"Total Scope"},{Header:"Supplied",accessor:"Supplied Quantity"},{Header:"Installed",accessor:"Installed Quantity"},{Header:"Synced To MDM",accessor:"Synced To MDM"},{Header:"Total SAT",accessor:"Total SAT"},{Header:"IIR (Per Day)",accessor:"IIR (Per Day)"},{Header:"CMIR (Per Day)",accessor:"CMIR (Per Day)"},{Header:"RIR (Per Day)",accessor:"RIR (Per Day)"},{Header:"Remaining Time",accessor:"Remaining Time"}],A=(e,t)=>{var a,n;let o=0,l=0,s=0,i=0,d=0,c=0,u=0,p=0;return e.forEach((e=>{o+=Math.abs(e["Total Scope"]),l+=Math.abs(e["Supplied Quantity"]),s+=Math.abs(e["Installed Quantity"]),i+=Math.abs(e["Synced To MDM"]),d+=Math.abs(e["Total SAT"]),c+=Math.abs(e["IIR (Per Day)"]),u+=Math.abs(e["CMIR (Per Day)"]),p+=Math.abs(e["RIR (Per Day)"])})),[{title:"Last updated on",value:(new Date).toLocaleString("en-GB",{dateStyle:"short",timeStyle:"short"}).replace(",","").replaceAll("/","-")},{title:"Start Date",value:(null===t||void 0===t?void 0:t.closureDate)&&(null===(a=new Date(null===t||void 0===t?void 0:t.closureDate))||void 0===a?void 0:a.toLocaleDateString("en-GB").replaceAll("/","-"))||"N/A"},{title:"End Date",value:(null===t||void 0===t?void 0:t.poEndDate)&&(null===(n=new Date(null===t||void 0===t?void 0:t.poEndDate))||void 0===n?void 0:n.toLocaleDateString("en-GB").replaceAll("/","-"))||"N/A"},{title:"Total Scope",value:o.toString()},{title:"Supplied",value:l.toString()},{title:"Installed",value:s.toString()},{title:"Synced to MDM",value:i.toString()},{title:"Total SAT",value:d.toString()},{title:"IIR (PER DAY)",value:c.toString()},{title:"CMIR (PER DAY)",value:u.toString()},{title:"RIR (PER DAY)",value:p.toString()},{title:"Remaining Time",value:(()=>{if(null===t||void 0===t||!t.poEndDate)return"N/A";return(0,r.SK)(t.poEndDate)})()}]},f=[{Header:"Name Of Contractor",accessor:"nameOfContractor"},{Header:"Total Team",accessor:"totalTeam"},{Header:"Active Team Today",accessor:"activeTeamToday"},{Header:"Total Installation",accessor:"totalInstallation"},{Header:"Total Synced To MDM",accessor:"totalSyncedToMDM"}],j=[{Header:"Contractor Name",accessor:"contractorName"},{Header:"Meter Available at Contractor",accessor:"meterAvailableAtContractor"},{Header:"7 Days",accessor:"meter7Days"},{Header:"8 to 15 Days",accessor:"meter8To15Days"},{Header:"16 to 30 Days",accessor:"meter16To30Days"},{Header:"> 30 Days",accessor:"meterOver30Days"}]},24618:(e,t,a)=>{"use strict";a.d(t,{L:()=>o});var r=a(9950),n=a(27081);const o=()=>{const[e,t]=(0,r.useState)({gaaObject:{},error:"",loading:!0}),[a,o]=(0,r.useState)({gaaProjectsObject:[],error:"",loading:!0}),[l,s]=(0,r.useState)({gaaLevelProjectsObject:[],error:"",loading:!0}),[i,d]=(0,r.useState)({gaaLevelParentsObject:[],error:"",loading:!0}),[c,u]=(0,r.useState)({projectAreaLevelsObject:[],error:"",loading:!1}),[p,h]=(0,r.useState)({gaaHistoryObject:{},error:"",loading:!0}),[x,m]=(0,r.useState)({gaaLevelEntryHistoryObject:{},error:"",loading:!0}),g=(0,n.d4)((e=>e.gaa||{})),v=(0,n.d4)((e=>e.gaaProjects||{})),y=(0,n.d4)((e=>e.gaaLevelProjects||{})),A=(0,n.d4)((e=>e.gaaLevelParents||{})),f=(0,n.d4)((e=>e.projectAreaLevels||{})),j=(0,n.d4)((e=>e.gaaHistory||{})),C=(0,n.d4)((e=>e.gaaLevelEntryHistory||{}));return(0,r.useEffect)((()=>{t((e=>({...e,...g})))}),[g]),(0,r.useEffect)((()=>{o((e=>({...e,...v})))}),[v]),(0,r.useEffect)((()=>{s((e=>({...e,...y})))}),[y]),(0,r.useEffect)((()=>{d((e=>({...e,...A})))}),[A]),(0,r.useEffect)((()=>{u((e=>({...e,...f})))}),[f]),(0,r.useEffect)((()=>{h((e=>({...e,...j})))}),[j]),(0,r.useEffect)((()=>{m((e=>({...e,...C})))}),[C]),{gaa:e,gaaProjects:a,gaaLevelProjects:l,gaaLevelParents:i,projectAreaLevels:c,gaaHistory:p,gaaLevelEntryHistory:x}}},88848:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(9950),n=a(27081);const o=()=>{const[e,t]=(0,r.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[a,o]=(0,r.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[l,s]=(0,r.useState)({masterObject:[],error:"",loading:!0}),[i,d]=(0,r.useState)({masterObject:[],error:"",loading:!0}),[c,u]=(0,r.useState)({masterObject:[],error:"",loading:!0}),[p,h]=(0,r.useState)({currencyObject:[],error:"",loading:!0}),[x,m]=(0,r.useState)({gstStatusObject:[],error:"",loading:!0}),[g,v]=(0,r.useState)({paymentTermObject:[],error:"",loading:!0}),[y,A]=(0,r.useState)({incotermsObject:[],error:"",loading:!0}),[f,j]=(0,r.useState)({titleObject:[],error:"",loading:!0}),[C,b]=(0,r.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),S=(0,n.d4)((e=>e.masterMakerLov||{})),D=(0,n.d4)((e=>e.masterMakerLovList||{})),T=(0,n.d4)((e=>e.lovsForMasterName||[])),I=(0,n.d4)((e=>e.lovsForMasterNameSecond||[])),E=(0,n.d4)((e=>e.lovsForMasterNameThird||[])),k=(0,n.d4)((e=>e.currency||[])),M=(0,n.d4)((e=>e.gstStatus||[])),_=(0,n.d4)((e=>e.paymentTerm||[])),H=(0,n.d4)((e=>e.incoterms||[])),$=(0,n.d4)((e=>e.title||[])),w=(0,n.d4)((e=>e.masterMakerLovHistory||{}));return(0,r.useEffect)((()=>{t((e=>({...e,...S})))}),[S]),(0,r.useEffect)((()=>{o((e=>({...e,...D})))}),[D]),(0,r.useEffect)((()=>{s((e=>({...e,...T})))}),[T]),(0,r.useEffect)((()=>{d((e=>({...e,...I})))}),[I]),(0,r.useEffect)((()=>{u((e=>({...e,...E})))}),[E]),(0,r.useEffect)((()=>{h((e=>({...e,...k})))}),[k]),(0,r.useEffect)((()=>{m((e=>({...e,...M})))}),[M]),(0,r.useEffect)((()=>{v((e=>({...e,..._})))}),[_]),(0,r.useEffect)((()=>{A((e=>({...e,...H})))}),[H]),(0,r.useEffect)((()=>{j((e=>({...e,...$})))}),[$]),(0,r.useEffect)((()=>{b((e=>({...e,...w})))}),[w]),{masterMakerLovs:e,masterMakerLovsList:a,masterMakerOrgType:l,masterMakerOrgTypeSecond:i,masterMakerOrgTypeThird:c,masterMakerCurrency:p,masterMakerGstStatus:x,masterMakerIncoterms:y,masterMakerPaymentTerm:g,masterMakerLovHistory:C,masterMakerTitle:f}}},87713:(e,t,a)=>{"use strict";a.r(t),a.d(t,{approvalLevels:()=>b,createClearFieldSubscription:()=>D,default:()=>T,generateAreaLevelsValidation:()=>S,hierarchyData:()=>C});var r=a(9950),n=a(9449),o=a(26473),l=a(60666),s=a(27081),i=a(4139),d=a(67535),c=a(14351),u=a(84601),p=a(89649),h=a(99635),x=a(96951),m=a(29024),g=a(80733),v=a(76300),y=a(52867),A=a(71826),f=a(88848),j=a(44414);const C=[{id:"gaa",name:"GAA"}],b=[{name:"L1",value:"l1"},{name:"L2",value:"l2"}],S=(e,t)=>Array.from({length:10}).reduce(((a,r,n)=>(a[`gaaLevelEntryId${n}`]=l.YO().test("required-test","This field is required",((a,r)=>{var o;return!(r.path.includes("gaaLevelEntryId0")||(null===e||void 0===e||null===(o=e[n])||void 0===o?void 0:o.rank)<=t)||a&&a.length>0})),a)),{}),D=e=>{let{watch:t,allFields:a,setShowTable:r,resetField:n}=e;return t(((e,t)=>{let{name:o,type:l}=t;if("change"!==l)return;let s=!1;a.slice(1+a.indexOf(o)).forEach((e=>{"function"!==typeof r||s||(r(!1),s=!0),n(e)}))}))};const T=function(){var e,t,a,D,T;const{paginations:{pageSize:I,pageIndex:E},setPageIndex:k,setPageSize:M}=(0,p.A)(),_=(0,s.wA)(),[H,$]=(0,r.useState)(!1),[w,F]=(0,r.useState)(null===(e=b[0])||void 0===e?void 0:e.value),[L,P]=(0,r.useState)(null===(t=C[0])||void 0===t?void 0:t.id),[W,O]=(0,r.useState)(),[N,z]=(0,r.useState)([]),[U,R]=(0,r.useState)(null),[B,G]=(0,r.useState)(0),[q,Y]=(0,r.useState)(-1),[V,K]=(0,r.useState)(null),[X,Q]=(0,r.useState)(!1),J=null===(a=(0,g.Y)())||void 0===a||null===(D=a.projectsDropdown)||void 0===D?void 0:D.projectsDropdownObject,Z=(0,n.mN)({resolver:(0,o.t)(l.Ik().shape({projectId:u.A.project,formTypeId:u.A.formType,formId:u.A.form,...S(V,q)}))}),{handleSubmit:ee,watch:te,setValue:ae,getValues:re,formState:{errors:ne}}=Z,[oe,le,se,ie,de]=te(["projectId","formTypeId","formId","dateFrom","dateTo"]),{masterMakerOrgType:ce}=(0,f.$)(),ue=null===ce||void 0===ce?void 0:ce.masterObject,pe=(null===(T=ue.find((e=>e.id===le)))||void 0===T?void 0:T.name)||"",{webforms:he}=(0,v.I)(),xe=(0,r.useMemo)((()=>[{Header:"Customer",accessor:"Customer"},{Header:"Project",accessor:"Project"},{Header:"Date",accessor:"Date"},{Header:`Type Of ${pe}`,accessor:"Type of Survey"},{Header:`${pe} Completed`,accessor:"Survey Completed"},{Header:`${w.toUpperCase()} Level - Approved`,accessor:`${w.toUpperCase()} Level - Approved`},{Header:`${w.toUpperCase()} Level - Rejected`,accessor:`${w.toUpperCase()} Level - Rejected`},{Header:`${w.toUpperCase()} Level - On-Hold`,accessor:`${w.toUpperCase()} Level - On-Hold`}]),[pe,w]),me=(0,y.wn)(he),ge=(0,r.useCallback)((e=>{let t={},a=!1;if(V){var r;for(let a=(null===V||void 0===V?void 0:V.length)-1;a>=0;a--){var n;if(null!==(n=e[`gaaLevelEntryId${a}`])&&void 0!==n&&n.length){t[`${V[a].columnName}`]=e[`gaaLevelEntryId${a}`];break}}null!==(r=e.gaaLevelEntryId0)&&void 0!==r&&r.length||(Z.setError("gaaLevelEntryId0",{message:"This field is required"},{shouldFocus:!0}),a=!0);for(let t=1;t<V.length;t++){var o;const{rank:r}=V[t];r<=q&&(null===(o=e[`gaaLevelEntryId${t}`])||void 0===o||!o.length)&&(Z.setError(`gaaLevelEntryId${t}`,{message:"This field is required"},{shouldFocus:!0}),a=!0)}}if(a)return;$(!0),O(t);const l={projectId:oe,formId:se,formType:pe,pageSize:I,pageIndex:E,approver:null===w||void 0===w?void 0:w.toUpperCase(),gaaLevelDetails:t,dateFrom:ie,dateTo:de,setReportData:z,setCount:G};null!==oe&&void 0!==oe&&oe.length&&JSON.stringify(l)!==JSON.stringify(U)&&(R(l),_((0,m.wFo)(l)))}),[V,oe,se,pe,I,E,w,ie,de,U,_,Z,q]);(0,r.useEffect)((()=>{if(!oe||!le||!se||!H)return;const e=re();ge(e)}),[se,le,re,ge,oe,H]),(0,r.useEffect)((()=>{_((0,m.uiG)()),_((0,m.VOH)("FORM_TYPES"))}),[_,oe]),(0,r.useEffect)((()=>{oe&&le&&_((0,m.XXG)({projectId:oe,typeId:le.replace(" - O&M",""),accessSource:"Form Responses"}))}),[_,le,oe]);const ve=(0,r.useCallback)((async()=>{Q(!0);const e=await(0,A.default)("/area-project-level",{method:"GET",params:se,query:{formId:se,sort:["rank","ASC"]}});if(e.success){const{data:a,accessRank:r}=e.data;var t;if(Y(r),a)K(null===(t=a[0])||void 0===t?void 0:t.gaaLevels);else K(null)}Q(!1)}),[se]);(0,r.useEffect)((()=>{se&&ve()}),[se,ve]);const ye=(0,r.useCallback)(((e,t)=>{var a;const r=t-1;return null!==(a=te())&&void 0!==a&&a[`gaaLevelEntryId${r}`]?e.gaa_level_entries.filter((e=>{var t,a;return null===(t=te())||void 0===t||null===(a=t[`gaaLevelEntryId${r}`])||void 0===a?void 0:a.includes(null===e||void 0===e?void 0:e.parentId)})):e.gaa_level_entries}),[te]),Ae=(0,r.useCallback)(((e,t,a,r,n)=>{(a=structuredClone(a))[`gaaLevelEntryId${e}`]=n;let o=e;for(;o<(r?t.length-1:t.length);){var l,s,i;const e=`gaaLevelEntryId${o+1}`,r=`gaaLevelEntryId${o}`,n=t[o+1],d=null!==(l=a)&&void 0!==l&&l[r]&&null!==n&&void 0!==n&&n.gaa_level_entries?null===n||void 0===n||null===(s=n.gaa_level_entries)||void 0===s?void 0:s.filter((e=>{var t;return(null===(t=a)||void 0===t?void 0:t[r])===(null===e||void 0===e?void 0:e.parentId)})):(null===n||void 0===n?void 0:n.gaa_level_entries)||[],c=Array.isArray(a[e])&&(null===(i=a[e])||void 0===i?void 0:i.filter((e=>d.some((t=>t.id===e)))))||[];ae(e,c),a[e]=c,o+=1}z([]),$(!1)}),[ae]);return(0,j.jsxs)(c.A,{title:"Validation Status Report",children:[(0,j.jsx)(x.Op,{methods:Z,onSubmit:ee((()=>{$(!0)})),children:(0,j.jsxs)(i.Ay,{container:!0,spacing:4,mb:3,children:[(0,j.jsx)(i.Ay,{item:!0,md:3,xl:3,children:(0,j.jsx)(x.eu,{name:"projectId",label:"Project",menus:J||[],required:!0,onChange:()=>{ae("formTypeId",""),ae("formId",""),z([]),$(!1)}})}),(0,j.jsx)(i.Ay,{item:!0,md:3,xl:3,children:(0,j.jsx)(x.eu,{name:"formTypeId",label:"Form Type",menus:ue,required:!0,onChange:()=>{ae("formId",""),z([]),$(!1)}})}),(0,j.jsx)(i.Ay,{item:!0,md:3,xl:3,children:(0,j.jsx)(x.eu,{name:"formId",label:"Type",menus:me||[],required:!0,onChange:()=>{z([]),$(!1)}})}),(0,j.jsx)(i.Ay,{item:!0,xs:3,md:3,children:(0,j.jsx)(x.gk,{name:"approvalLevels",title:"Select Approval Levels",singleLineRadio:"true",labels:b,onChange:e=>{var t;F(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},style:{"& label":{marginTop:"0",width:"33%"},marginTop:"10px !important",padding:"3px 0"},required:!0,defaultValue:b[0].value})}),(0,j.jsx)(i.Ay,{item:!0,md:3,xl:3,children:(0,j.jsx)(x.eu,{name:"hierarchyType",label:"Hierarchy Type",menus:C,required:!1,onChange:e=>{var t;return P(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},defaultValue:C[0].id})}),"gaa"===L&&se&&(null===V||void 0===V?void 0:V.length)>0&&(null===V||void 0===V?void 0:V.map(((e,t)=>{var a,r,n;return(0,j.jsx)(i.Ay,{item:!0,md:3,xl:3,children:(0,j.jsx)(x.Yq,{required:0===t||e.rank<=q,name:`gaaLevelEntryId${t}`,label:e.name,onChange:Ae.bind(null,t,V,te(),!0),menus:ye(e,t),disable:0!==t&&e.rank>q&&!(null!==(a=te())&&void 0!==a&&null!==(r=a["gaaLevelEntryId"+(t-1)])&&void 0!==r&&r.length),errorMessage:null===(n=ne[`gaaLevelEntryId${t}`])||void 0===n?void 0:n.message})},e.id)}))),(0,j.jsx)(i.Ay,{item:!0,md:3,xl:3,children:(0,j.jsx)(x.o3,{name:"dateFrom",disabled:!1,type:"date",label:"Date From",InputLabelProps:{shrink:!0},required:!0})}),(0,j.jsx)(i.Ay,{item:!0,md:3,xl:3,children:(0,j.jsx)(x.o3,{name:"dateTo",disabled:!1,type:"date",label:"Date To",InputLabelProps:{shrink:!0},required:!0})}),(0,j.jsx)(i.Ay,{item:!0,xs:12,sx:{mt:2,display:"flex",justifyContent:"flex-end",gap:"20px"},children:(0,j.jsx)(d.A,{disabled:X,type:"submit",size:"small",variant:"contained",color:"primary",children:"Proceed"})})]})}),H&&(0,j.jsx)(h.default,{hideColumnsSelect:!0,hideSearch:!0,hideAddButton:!0,loadingCondition:0===(null===N||void 0===N?void 0:N.length),title:"Validation Status Report",data:N,count:B,setPageIndex:k,setPageSize:M,pageIndex:E,pageSize:I,columns:xe,hideActions:!0,exportConfig:{tableName:"validation_status_report",apiQuery:{projectId:oe,formId:se,formType:pe,pageSize:I,pageIndex:E,approver:w.toUpperCase(),gaaLevelDetails:W,dateFrom:ie,dateTo:de}}})]})}},83686:()=>{}}]);