"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[1669],{64499:(e,l,o)=>{o.d(l,{A:()=>f});var i=o(9950),t=o(65669),n=o(43263),r=o(57191),a=o(95537),d=o(67535),u=o(87233),s=o(44414);f.defaultProps={title:"Confirm Action",message:"Are you sure to perform this action",closeBtnTitle:"Cancel",confirmBtnTitle:"Ok"};const c={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:350,bgcolor:"background.paper",borderRadius:"10px",p:3},p={display:"flex",flexDirection:"row",padding:"15px 0"},m={display:"flex",justifyContent:"flex-end",gap:2},v={marginTop:2,display:"flex",fontSize:"14px"};function f(e){let{open:l,handleClose:o,title:f,message:h,closeBtnTitle:y,confirmBtnTitle:g,handleConfirm:b,confirmColor:x}=e;const[A,j]=(0,i.useState)(null);return(0,i.useEffect)((()=>{j(null)}),[l]),(0,s.jsx)("div",{children:(0,s.jsx)(t.A,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:l,closeAfterTransition:!0,slots:{backdrop:n.A},slotProps:{backdrop:{timeout:500}},children:(0,s.jsx)(r.A,{in:l,children:(0,s.jsxs)(a.A,{sx:c,children:[(0,s.jsx)(u.A,{id:"transition-modal-title",variant:"h4",children:f}),(0,s.jsx)(u.A,{id:"transition-modal-title",variant:"h6",sx:p,children:h}),(0,s.jsxs)(a.A,{sx:m,children:[!!o&&(0,s.jsx)(d.A,{onClick:o,size:"small",variant:"outlined",color:"primary",children:y}),!!b&&(0,s.jsx)(d.A,{onClick:b,size:"small",variant:"contained",color:x||"error",children:g})]}),A&&(0,s.jsx)(u.A,{variant:"p",color:"red",sx:v,children:A})]})})})})}},15999:(e,l,o)=>{o.d(l,{A:()=>g});var i=o(9950),t=o(80678),n=o(41787),r=o(81831),a=o(72145),d=o(12257),u=o(87233),s=o(14341),c=o(94641),p=o(9449),m=o(43974),v=o(30545),f=o(19673),h=o(22580),y=o(44414);const g=e=>{let{name:l,label:o,onChange:g,disabled:b,required:x=!1,...A}=e;const{control:j}=(0,p.xW)(),{errorMessage:_,timeFormat:N,pickerType:w,minDate:C,maxDate:T,setInsideErrors:S}=A,O=e=>(0,m.A)(new Date(e).getTime()-198e5,"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'"),I=(0,i.useCallback)((e=>{let l="";return T&&e>new Date(`${T}T23:59:00Z`)?l=`Maximum date should be ${(0,m.A)(new Date(T),"dd/MM/yyyy")}`:e<new Date(`${C}`)&&(l=`Minimum date should be ${(0,m.A)(new Date(C),"dd/MM/yyyy")}`),l}),[C,T]),k=(0,i.useRef)();return(0,i.useEffect)((()=>{if(k.current)k.current=!1;else{var e,o,i;if(null!==j&&void 0!==j&&null!==(e=j._fields)&&void 0!==e&&null!==(o=e[l])&&void 0!==o&&null!==(i=o._f)&&void 0!==i&&i.value){var t,n,r;let e=I(new Date(null===j||void 0===j||null===(t=j._fields)||void 0===t||null===(n=t[l])||void 0===n||null===(r=n._f)||void 0===r?void 0:r.value));e&&S&&S((o=>({...o,[l]:e})))}k.current=!0}}),[l,j,I,S]),(0,y.jsx)(r.$,{dateAdapter:n.h,children:(0,y.jsx)(p.xI,{name:l,control:j,defaultValue:null,render:e=>{var i;let{field:n,formState:{errors:r}}=e;return(0,y.jsx)(a.A,{fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:r[l]?"#ff4d4f":""}}},children:(0,y.jsxs)(d.A,{spacing:1,children:[(0,y.jsxs)(u.A,{children:[o,x&&!(null!==o&&void 0!==o&&o.includes(" *"))&&" *"]}),"dateTimeBoth"===w?(0,y.jsx)(t.K,{...n,disabled:b,value:n.value?new Date(n.value):null,onChange:e=>{if(e){let o=I(e);S&&S((e=>({...e,[l]:o})))}const o=O(e);g&&"function"===typeof g&&g(o),n.onChange(o)},format:"12hour"===N?"dd/MM/yyyy hh:mm a":"dd/MM/yyyy HH:mm",renderInput:e=>(0,y.jsx)(s.A,{...e}),ampm:"12hour"===N}):"dateOnly"===w?(0,y.jsx)(v.T,{inputFormat:"dd/MM/yyyy",value:n.value?new Date(n.value):null,onChange:e=>{if(e){let o=I(e);S&&S((e=>({...e,[l]:o})))}const o=O(e);g&&"function"===typeof g&&g(o),n.onChange(o)},renderInput:e=>(0,y.jsx)(s.A,{...e})}):"monthYearBoth"===w?(0,y.jsx)(f.l,{inputFormat:"MM-yyyy",views:["month","year"],value:n.value?new Date(n.value):null,onChange:e=>{if(e){let o=I(e);S&&S((e=>({...e,[l]:o})))}const o=O(e);g&&"function"===typeof g&&g(o),n.onChange(o)},renderInput:e=>(0,y.jsx)(s.A,{...e})}):(0,y.jsx)(h.A,{value:n.value?new Date(n.value):null,onChange:e=>{const l=O(e);g&&"function"===typeof g&&g(l),n.onChange(l)},renderInput:e=>(0,y.jsx)(s.A,{...e}),ampm:"12hour"===N}),(0,y.jsx)(c.A,{sx:{position:"absolute",top:60,left:3,color:"#ff4d4f"},children:(null===(i=r[l])||void 0===i?void 0:i.message)||_})]})})}})})}},89649:(e,l,o)=>{o.d(l,{A:()=>n});var i=o(9950),t=o(80415);function n(){const[e,l]=(0,i.useState)({pageIndex:t.j7.pageIndex,pageSize:t.j7.pageSize,forceUpdate:!0}),o=(0,i.useCallback)((function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.pageIndex,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pageSize;l((e=>({pageIndex:o,pageSize:i,forceUpdate:!e.forceUpdate})))}),[e]),n=(0,i.useCallback)((()=>{l((e=>({pageIndex:t.j7.pageIndex,pageSize:t.j7.pageSize,forceUpdate:!e.forceUpdate})))}),[]);return{paginations:e,setPageIndex:e=>l((l=>({...l,pageIndex:e,forceUpdate:!l.forceUpdate}))),setPageSize:e=>l((l=>({pageIndex:t.j7.pageIndex,pageSize:e,forceUpdate:!l.forceUpdate}))),refreshPagination:n,setPaginationsFunctions:o}}},31669:(e,l,o)=>{o.r(l),o.d(l,{default:()=>$});var i=o(9950),t=o(4139),n=o(57073),r=o(87233),a=o(67535),d=o(2660),u=o(46483),s=o(12257),c=o(14341),p=o(96583),m=o(9449),v=o(28429),f=o(27081),h=o(12563),y=o(62375),g=o(26592),b=o(15999),x=o(50287),A=o(60767),j=o(76300),_=o(71826),N=o(2606),w=o(56334),C=o(62054),T=o(44414);const S=e=>{let{columnName:l,multiple:o,maxCount:t,maxSize:r,remCount:a,inputs:d,setInputs:u,isDocument:s}=e;const c=(0,i.useRef)(null);return(0,T.jsxs)(i.Fragment,{children:[(0,T.jsx)("input",{ref:c,type:"file",multiple:o,accept:s?"application/pdf":"image/jpeg, image/jpg, image/png",style:{display:"none"},onChange:e=>{var o;const i=Array.from(e.target.files),n=null===i||void 0===i?void 0:i.filter((e=>s?!["application/pdf"].includes(e.type):!["image/jpeg","image/jpg","image/png"].includes(e.type))),c=1024*(r||0)*1024,p=i.filter((e=>e.size>c));if(r&&(null===p||void 0===p?void 0:p.length)>0)return e.target.value=null,(0,C.A)(`File(s) exceed the maximum size limit of ${r} MB.`,{variant:"warning"});if((null===i||void 0===i?void 0:i.length)>a)return e.target.value=null,(0,C.A)(`Number of images exceeds the limit (up to ${t} allowed).`,{variant:"warning"});if((null===n||void 0===n?void 0:n.length)>0)return e.target.value=null,s?(0,C.A)("Please select only PDF files.",{variant:"warning"}):(0,C.A)("Please select only JPG/JPEG or PNG files.",{variant:"warning"});const m=structuredClone(d);m[l]&&null!==(o=m[l])&&void 0!==o&&o[0]||(m[l]=[]),i.forEach((e=>{const o=e.name.replace(/\s+/g,"_"),i=new File([e],o,{type:e.type});m[l].push(i)})),u(m)}}),(0,T.jsx)(n.A,{onClick:()=>{var e;null===c||void 0===c||null===(e=c.current)||void 0===e||e.click()},color:"primary",children:(0,T.jsx)(w.A,{})})]})};var O=o(99635),I=o(89649),k=o(96951),D=o(14351),E=o(29024),M=o(33507),F=o(52867),R=o(64499),z=o(52351),P=o(50684);const q={},L=/^l_[a-z]_approver_name$/,V=/^l_[a-z]_approval_date$/,H={et:(e,l)=>Array.isArray(e)?e.some((e=>e===l)):e===l,net:(e,l)=>Array.isArray(e)?!e.some((e=>e===l)):e!==l,gt:(e,l)=>Array.isArray(e)?e.some((e=>e>l)):e>l,lt:(e,l)=>Array.isArray(e)?e.some((e=>e<l)):e<l,gte:(e,l)=>Array.isArray(e)?e.some((e=>e>=l)):e>=l,lte:(e,l)=>Array.isArray(e)?e.some((e=>e<=l)):e<=l},B={and:Array.prototype.every,or:Array.prototype.some},K=(e,l)=>"number"===l?Number(e):e,$=()=>{const e=(0,f.wA)(),l=(0,i.useRef)(!1),{user:o}=(0,M.A)(),{formId:w,responseId:$,mode:U}=(0,v.g)(),{formAttributes:W,dropdownLov:Y}=(0,j.I)(),[G,J]=(0,i.useState)(),[Z,X]=(0,i.useState)({}),[Q,ee]=(0,i.useState)({}),[le,oe]=i.useState({}),[ie,te]=(0,i.useState)(""),[ne,re]=(0,i.useState)(""),[ae,de]=(0,i.useState)([]),[ue,se]=(0,i.useState)([]),[ce,pe]=(0,i.useState)([]),[me,ve]=(0,i.useState)(!1),fe=(0,i.useRef)(!1),[he,ye]=(0,i.useState)({}),[ge,be]=(0,i.useState)(),[xe,Ae]=(0,i.useState)([]),[je,_e]=(0,i.useState)(!1),[Ne,we]=(0,i.useState)(""),[Ce,Te]=(0,i.useState)([]),[Se,Oe]=(0,i.useState)(!1),[Ie,ke]=(0,i.useState)(!1),{paginations:{pageSize:De,pageIndex:Ee},setPageIndex:Me,setPageSize:Fe}=(0,I.A)(),{formFieldsData:Re,isMapping:ze}=(0,i.useMemo)((()=>{var e;if(!W||!W.formAttributesObject)return[];const l=W.formAttributesObject.rows||[],o=null===(e=W.formAttributesObject.formsData)||void 0===e?void 0:e.mappingTableId;return{formFieldsData:l.filter((e=>e.view||e.update)),isMapping:o}}),[W]),Pe=(0,i.useCallback)(((e,l)=>{if(ge&&e in ge){const i=ge[e];for(let e=0;e<i.length;e++){var o;if((null===(o=i[e].name)||void 0===o?void 0:o.toLowerCase())===l.toLowerCase())return i[e].id}}return null}),[ge]),qe=(0,i.useMemo)((()=>{var e,l;return{l_a_approval_status:(null===Z||void 0===Z||null===(e=Z.l_a_approval_status)||void 0===e?void 0:e[0])||void 0,l_b_approval_status:(null===Z||void 0===Z||null===(l=Z.l_b_approval_status)||void 0===l?void 0:l[0])||void 0}}),[Z]),{dynamicKeys:Le,dependencies:Ve,requiredFields:He,allColumnsWithId:Be,allDepenedentColumnsById:Ke,defaultHidden:$e,inputeTypes:Ue,formValidationsForReqruired:We,isDeleted:Ye,dependentDropdownsFields:Ge,dynamicKeysByName:Je,disableOnSearch:Ze,editableFields:Xe}=(0,i.useMemo)((()=>{const e={dependentDropdownsFields:[],dynamicKeysByName:{},dynamicKeys:{},dependencies:{},requiredFields:{},allColumnsWithId:{},allDepenedentColumnsById:{},inputeTypes:{},defaultHidden:[],formValidationsForReqruired:[],isDeleted:[],disableOnSearch:[],editableFields:[]};return Re&&Re.length>0?Re.reduce(((e,l)=>{var o,i,t,n,r,a,d,u;(e.dynamicKeys[l.columnName]=(null===(o=l.name)||void 0===o?void 0:o.replace(/\s/g,""))+"Data",e.dynamicKeysByName[l.name]=(null===(i=l.name)||void 0===i?void 0:i.replace(/\s/g,""))+"Data",e.allColumnsWithId[l.id]=l.columnName,e.allDepenedentColumnsById[l.columnName]=l.properties.dependency,e.inputeTypes[l.columnName]=l.default_attribute.inputType,!l.properties.defaultHide||!l.columnName.match(L)&&!l.columnName.match(V)&&l.columnName.startsWith("l_")||["is_resurvey","resurveyor_org_type","resurveyor_org_id","resurvey_by"].includes(l.columnName)||e.defaultHidden.push(l.columnName),l.isRequired&&"1"===l.isActive&&"ref_code"!==(null===(t=l.default_attribute)||void 0===t?void 0:t.inputType)&&e.formValidationsForReqruired.push(l.columnName),"1"!==l.isActive&&e.isDeleted.push(l.columnName),null!==(n=l.properties)&&void 0!==n&&n.dependency)&&(e.dependencies[l.columnName]=null===(d=l.properties)||void 0===d?void 0:d.dependency,e.requiredFields[l.columnName]=l.isRequired||(null===l||void 0===l||null===(u=l.properties)||void 0===u?void 0:u.factoryTable));return"dropdown"===l.default_attribute.inputType&&e.dependentDropdownsFields.push(l),null!==(r=l.properties)&&void 0!==r&&r.disableOnSearch&&e.disableOnSearch.push(l.columnName),null!==(a=l.properties)&&void 0!==a&&a.editable&&e.editableFields.push(l.columnName),e}),e):e}),[Re]);(0,i.useEffect)((()=>{Te(Xe)}),[Xe]),(0,i.useEffect)((()=>{Re&&Re.length>0&&Re.forEach((e=>{if(["l_a_exception_ctg","l_a_exception_rmk"].includes(e.columnName))if(qe.l_a_approval_status&&qe.l_a_approval_status!==Pe("L1ApprovalStatusData","Approved")&&e.update)We.includes(e.columnName)||We.push(e.columnName);else if(We.includes(e.columnName)){const l=We.indexOf(e.columnName);We.splice(l,1)}if(["l_b_exception_ctg","l_b_exception_rmk"].includes(e.columnName))if(qe.l_b_approval_status&&qe.l_b_approval_status!==Pe("L2ApprovalStatusData","Approved")&&e.update)We.includes(e.columnName)||We.push(e.columnName);else if(We.includes(e.columnName)){const l=We.indexOf(e.columnName);We.splice(l,1)}}))}),[Re,qe,Pe,We]);const Qe=(0,i.useMemo)((()=>Object.fromEntries(Object.entries(Ke).map((e=>{let[l,o]=e;return[l,Be[o]||null]})))),[Ke,Be]);(0,i.useEffect)((()=>{var e;if(Object.keys(Qe).length>0&&Ge.length>0&&(null===Y||void 0===Y||null===(e=Y.dropdownLovDataObject)||void 0===e?void 0:e.length)>0){var l;const e=[];Object.entries(Qe).forEach((l=>{var o,i,t,n,r,a,d;let[u,s]=l;const c=Ge.find((e=>e.columnName===u)),p=Ge.find((e=>e.columnName===s));null!==p&&void 0!==p&&null!==(o=p.properties)&&void 0!==o&&o.conditions&&null!==c&&void 0!==c&&null!==(i=c.properties)&&void 0!==i&&null!==(t=i.conditions)&&void 0!==t&&t.length&&null!==p&&void 0!==p&&null!==(n=p.properties)&&void 0!==n&&null!==(r=n.conditions)&&void 0!==r&&r.length&&(null===c||void 0===c||null===(a=c.properties)||void 0===a?void 0:a.sourceTable)===(null===p||void 0===p||null===(d=p.properties)||void 0===d?void 0:d.sourceTable)&&JSON.stringify(p.properties.conditions)===JSON.stringify(c.properties.conditions)&&e.push([p.name,c.name])}));const o={};null===Y||void 0===Y||null===(l=Y.dropdownLovDataObject)||void 0===l||l.forEach((l=>{if(!e.some((e=>(null===e||void 0===e?void 0:e[1])===Object.keys(l)[0]))){const[i]=Object.keys(l),t=i.replace(/\s/g,"")+"Data";o[t]=l[i];const n=e.findIndex((e=>(null===e||void 0===e?void 0:e[0])===i));if(n>-1){const[i,t]=e[n],r=t.replace(/\s/g,"")+"Data";o[r]=l[i]}}})),be(o),Ae(e),ke(!0)}}),[Qe,Ge,Y]);const el=(0,i.useCallback)(((e,l)=>{if(!l)return null===ge||void 0===ge?void 0:ge[e];const o=Be[l],i=null===Z||void 0===Z?void 0:Z[o];if(void 0===i)return[];const t=xe.some((l=>{let[,o]=l;return Je[o]===e}))?"id":"matchingcolumn";var n,r;return"string"===typeof i?null===ge||void 0===ge||null===(n=ge[e])||void 0===n?void 0:n.filter((e=>i===e[t])):null===ge||void 0===ge||null===(r=ge[e])||void 0===r?void 0:r.filter((e=>null===i||void 0===i?void 0:i.includes(null===e||void 0===e?void 0:e[t])))}),[Be,Z,xe,ge,Je]),ll=(0,i.useCallback)(((e,l)=>{const o=Re.filter((l=>{var o;return(null===l||void 0===l||null===(o=l.default_attribute)||void 0===o?void 0:o.name)===e})),i={};if(o.length>0&&ge)return o.forEach((e=>{var o,t;const n=[],r=[],a=Object.entries(null===e||void 0===e?void 0:e.properties).filter((e=>e[0].startsWith("column"))),d=Object.entries(null===e||void 0===e?void 0:e.properties).filter((e=>e[0].startsWith("separator")));a.sort(((e,l)=>{let[o]=e,[i]=l;return o.replace("column","")-i.replace("column","")})),d.sort(((e,l)=>{let[o]=e,[i]=l;return o.replace("separator","")-i.replace("separator","")})),a.forEach((e=>{let[,l]=e;n.push(l)})),d.forEach((e=>{let[,l]=e;r.push(l)}));const u=null===n||void 0===n?void 0:n.map((e=>{var l,o,i;const t=Re.find((l=>l.id===e)),n=(null===t||void 0===t||null===(l=t.properties)||void 0===l?void 0:l.dependency)&&xe.some((e=>e[1]===t.name))&&(null===Y||void 0===Y||null===(o=Y.sourceColumnByIdObject)||void 0===o?void 0:o[t.properties.sourceColumn])||"";return t?{columnName:null===t||void 0===t?void 0:t.columnName,type:null===t||void 0===t||null===(i=t.default_attribute)||void 0===i?void 0:i.inputType,name:t.name,customKeyName:n}:{}})).filter((e=>Object.keys(e).length>0)),s=`${(null===e||void 0===e||null===(o=e.properties)||void 0===o?void 0:o.prefix)||""}${r[0]}${u.map((e=>{let{columnName:o,type:i,name:t,customKeyName:n}=e;if(i&&"dropdown"===i){const e=t.replace(/\s/g,"")+"Data";if(ge&&ge[e]){const i=ge[e].filter((e=>{var i;return null===(i=l[o])||void 0===i?void 0:i.includes(e.id)})).map((e=>n?e[n]:e.name)).join("/");if(i)return i}}return l[o]})).map(((e,l)=>(e||"")+(r[l+1]||""))).join("")}${(null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.suffix)||""}`;s!==l[e.columnName]&&(i[e.columnName]=s)})),i}),[Re,ge,null===Y||void 0===Y?void 0:Y.sourceColumnByIdObject,xe]),ol=(0,i.useCallback)(((e,l)=>{const o=Re.find((l=>{var o,i;return(null===l||void 0===l||null===(o=l.default_attribute)||void 0===o?void 0:o.name)===e||(null===l||void 0===l||null===(i=l.properties)||void 0===i?void 0:i.qrType)===e})),i={};if(o){var t,n,r,a;const e=null===o||void 0===o||null===(t=o.properties)||void 0===t?void 0:t.columnList,d=Re.filter((l=>null===e||void 0===e?void 0:e.includes(l.id.toString()))).map((e=>e.columnName)),u=(null===o||void 0===o||null===(n=o.properties)||void 0===n?void 0:n.separator)||"",s=`${(null===o||void 0===o||null===(r=o.properties)||void 0===r?void 0:r.prefix)||""}${u}${d.map((e=>l[e])).filter((e=>e)).join(u)}${u}${(null===o||void 0===o||null===(a=o.properties)||void 0===a?void 0:a.suffix)||""}`;s!==l[o.columnName]&&(i[o.columnName]=s)}return i}),[Re]),il=(0,m.mN)({mode:"all",defaultValues:{}}),{handleSubmit:tl,setValue:nl}=il,rl=(0,i.useCallback)((()=>{q.timer&&clearTimeout(q.timer),q.timer=setTimeout((()=>{const e={},l={};Re&&(null===Re||void 0===Re?void 0:Re.length)>0&&$e.length>0&&$e.forEach((e=>{l[e]=!0}));const o=il.getValues(),i=e=>{let{type:l,attribute_visibility_conditions:i}=e;return B[l].call(i,(e=>{var l,i,t,n,r,a,d,u,s,c,p;return(null===e||void 0===e?void 0:e.operatorKey)&&(null===e||void 0===e?void 0:e.compareWithValue)&&(null===e||void 0===e||null===(l=e.form_attribute)||void 0===l?void 0:l.columnName)&&(null===e||void 0===e||null===(i=e.form_attribute)||void 0===i||null===(t=i.default_attribute)||void 0===t?void 0:t.inputType)&&(Array.isArray(o[null===(n=e.form_attribute)||void 0===n?void 0:n.columnName]&&o[null===(r=e.form_attribute)||void 0===r?void 0:r.columnName].length>0)||o[null===(a=e.form_attribute)||void 0===a?void 0:a.columnName])&&H[e.operatorKey]&&H[e.operatorKey].call&&H[e.operatorKey].call(null,K(o[null===(d=e.form_attribute)||void 0===d?void 0:d.columnName],null===(u=e.form_attribute)||void 0===u||null===(s=u.default_attribute)||void 0===s?void 0:s.inputType),K(e.compareWithValue,null===(c=e.form_attribute)||void 0===c||null===(p=c.default_attribute)||void 0===p?void 0:p.inputType))}))};Re.forEach((o=>{const{columnName:t,validations:n,hideConditions:r,showConditions:a}=o;if(r&&!$e.includes(t)&&(l[t]=r.length>0&&B.or.call(r,i)),l[t]&&(null===a||void 0===a?void 0:a.length)>0&&(l[t]=!B.or.call(a,i)),n){const{type:l,message:o}=n;B[l].call(n.attribute_validation_conditions,(e=>{var l,o,i,t,n,r;const a=null===e||void 0===e||null===(l=e.form_attribute)||void 0===l?void 0:l.columnName,d=null===e||void 0===e||null===(o=e.form_attribute)||void 0===o||null===(i=o.default_attribute)||void 0===i?void 0:i.inputType,u=(null===e||void 0===e||null===(t=e.compare_with_column)||void 0===t||null===(n=t.default_attribute)||void 0===n?void 0:n.inputType)||d;let s=(null===e||void 0===e?void 0:e.compareWithValue)||il.getValues(null===e||void 0===e||null===(r=e.compare_with_column)||void 0===r?void 0:r.columnName),c=il.getValues(a);if("dropdown"===u&&"number"===d){var p,m;const l=Le[null===e||void 0===e||null===(p=e.compare_with_column)||void 0===p?void 0:p.columnName],o=ge[l];s=null===o||void 0===o||null===(m=o[0])||void 0===m?void 0:m.name}const v=[K(c,d),K(s,u)];if((Array.isArray(c)&&c.length>0||c)&&H[null===e||void 0===e?void 0:e.operatorKey]&&("dropdown"===d&&((e,l,o)=>{if(Array.isArray(e)&&e.length>0&&["et","net"].includes(o))return B["et"===o?"or":"and"].call(e,(e=>"et"===o?e===l:e!==l));return!1})(c,null===e||void 0===e?void 0:e.compareWithValue,null===e||void 0===e?void 0:e.operatorKey)||H[null===e||void 0===e?void 0:e.operatorKey].call&&H[null===e||void 0===e?void 0:e.operatorKey].apply(null,v)))return!0}))&&(e[t]=o)}}));const t=Object.fromEntries(Object.entries(l).filter((e=>e[1])));ee(t),Object.entries(o).forEach((l=>{let[o,i]=l;!We.includes(o)||$e[o]||t[o]||Ye.includes(o)||(i||0===i)&&(!Array.isArray(i)||0!==i.length&&i[0])||(e[o]="Required")}));const n={};il.clearErrors(),Object.entries(he).forEach((e=>{let[l,o]=e;return!!(t[l]||Ye.includes(l)||$e[l])||(he[l]?(il.setError(l,{type:"validations",message:o}),n[l]=he[l],!0):void 0)})),Object.entries(e).forEach((e=>{let[l,o]=e;if(he[l]||t[l]||Ye.includes(l)||$e[l])return!0;o&&(il.setError(l,{type:"validations",message:o}),n[l]=o)})),oe(n)}),100)}),[$e,ge,Le,Re,il,he,We,Ye]);(0,i.useEffect)((()=>{rl()}),[me,rl]);const al=(0,i.useRef)(!0);(0,i.useEffect)((()=>{w&&(e((0,E.u44)({formId:w,sortBy:"rank",sortOrder:"ASC"})),(async(e,l)=>{let o=await(0,_.default)("/form-response-by-id",{method:"GET",query:{formId:w,responseId:$}});if(o.success&&null!==(e=o.data)&&void 0!==e&&null!==(l=e.data)&&void 0!==l&&l[0])X(o.data.data[0]),il.reset(o.data.data[0]);else{const e=o.error&&o.error.message?o.error.message:o.error;(0,C.A)(e||"Operation failed. Please try again.",{variant:"error"})}})())}),[e,w,$,il]),(0,i.useEffect)((()=>{Re.length>0&&Object.keys(Z).length>0&&al.current&&(al.current=!1,rl(Z))}),[Z,rl,Re]),(0,i.useEffect)((()=>{const l={formId:w,responseId:$,formDropdowns:Re.filter((e=>{var l;return"Dropdown"===(null===e||void 0===e||null===(l=e.default_attribute)||void 0===l?void 0:l.name)})).map((e=>{var l,o,i,t,n,r,a,d,u,s;return{formAttributeId:null===e||void 0===e?void 0:e.id,name:null===e||void 0===e?void 0:e.name,dependency:null===e||void 0===e||null===(l=e.properties)||void 0===l?void 0:l.dependency,sourceTable:null===e||void 0===e||null===(o=e.properties)||void 0===o?void 0:o.sourceTable,sourceColumn:null===e||void 0===e||null===(i=e.properties)||void 0===i?void 0:i.sourceColumn,type:null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.type,conditions:null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.conditions,extraColumn:null===e||void 0===e||null===(r=e.properties)||void 0===r?void 0:r.extraColumn,factoryTable:null===e||void 0===e||null===(a=e.properties)||void 0===a?void 0:a.factoryTable,factoryColumn:null===e||void 0===e||null===(d=e.properties)||void 0===d?void 0:d.factoryColumn,linkColumn:null===e||void 0===e||null===(u=e.properties)||void 0===u?void 0:u.linkColumn,isWebResponse:!(null===e||void 0===e||null===(s=e.properties)||void 0===s||!s.factoryTable)}}))};Re&&Re.length&&e((0,E.Xcn)({dropdownPayload:l}))}),[Re,w,$,e]);const dl=(0,i.useCallback)((e=>{if("function"===typeof e)X((l=>{const o=ll("Key Generator",e(l)),i=ol("generator",e(l)),t={...e(l),...o,...i};return il.reset(t),t}));else{const l=ll("Key Generator",e),o=ol("generator",e);il.reset({...e,...l,...o}),X({...e,...l,...o})}}),[X,ol,ll,il]);(0,i.useEffect)((()=>{const e={};Object.entries(Le).forEach((l=>{var o,i,t;let[n,r]=l;He[n]&&(null===(o=el(r,Ve[n]))||void 0===o?void 0:o.length)<=1&&(null===(i=el(r,Ve[n]).map((e=>e.id)))||void 0===i?void 0:i[0])!==(null===Z||void 0===Z||null===(t=Z[n])||void 0===t?void 0:t[0])&&(e[n]=el(r,Ve[n]).map((e=>e.id)))})),Object.keys(e).length>0&&dl((l=>({...l,...e}))),ve((e=>!e))}),[el,Le,Ve,He,Z,dl]);const ul=function(e,o,i){let t=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if("dropdown"===i){const i={[o]:e};Re.map((e=>{var l,o;return null!==e&&void 0!==e&&null!==(l=e.properties)&&void 0!==l&&l.dependency?{child:e.columnName,parent:Be[null===e||void 0===e||null===(o=e.properties)||void 0===o?void 0:o.dependency]}:null})).filter((e=>e)).forEach((e=>{let{child:l,parent:o}=e;if(l&&o){var t;const e=Le[l],n=xe.some((l=>{let[,o]=l;return Je[o]===e}))?"id":"matchingcolumn",r=null===(t=ge[e])||void 0===t?void 0:t.filter((e=>{var l;return null===(l=i[o]||Z[o]||[])||void 0===l?void 0:l.includes(e[n])})).map((e=>e.id)),a=Object.hasOwn(i,l)?i[l]:Z[l]||[];i[l]=null===a||void 0===a?void 0:a.filter((e=>null===r||void 0===r?void 0:r.includes(e)))}})),dl((e=>{const o={...e,...i};return l.current||il.reset(o),o}))}else dl((l=>({...l,[o]:e})));t&&rl({[o]:e})},[sl,cl]=(0,i.useState)({});(0,i.useEffect)((()=>{if(ge){var e,l,o;const i=(null===(e=Z.l_a_approval_status)||void 0===e?void 0:e[0])===Pe("L1ApprovalStatusData","Approved"),t=(null===(l=Z.l_a_approval_status)||void 0===l?void 0:l[0])===Pe("L1ApprovalStatusData","Rejected"),n=(null===(o=Z.l_b_approval_status)||void 0===o?void 0:o[0])===Pe("L2ApprovalStatusData","Approved"),r={l_a_exception_ctg:i,l_a_exception_rmk:i,is_resurvey:!0,resurveyor_org_type:!t,resurveyor_org_id:!t,resurvey_by:!t,l_b_approval_status:!i,l_b_exception_ctg:!i||n,l_b_exception_rmk:!i||n,l_b_remark:!i};cl(r),Object.entries(r).forEach((e=>{let[l,o]=e;o&&!["resurveyor_org_type","resurveyor_org_id","resurvey_by"].includes(l)&&dl((e=>({...e,[l]:"is_resurvey"===l?t?"YES":"NO":null})))}))}}),[Z.l_a_approval_status,Z.l_b_approval_status,ge]);const pl=e=>{var l,o,i,t,n,r,a,d,u,s,c;return(0,T.jsx)(S,{maxCount:null===(l=e.properties)||void 0===l?void 0:l.imageCount,maxSize:null===(o=e.properties)||void 0===o?void 0:o.maxSize,remCount:null!==(i=Z[e.columnName])&&void 0!==i&&i[0]?(null===(t=e.properties)||void 0===t?void 0:t.imageCount)-(null===(n=Z[e.columnName])||void 0===n?void 0:n.length):null!==(r=Z[e.columnName])&&void 0!==r&&r.length?(null===(a=e.properties)||void 0===a?void 0:a.imageCount)-(null===(d=Z[e.columnName])||void 0===d?void 0:d.length)+1:null===(u=e.properties)||void 0===u?void 0:u.imageCount,multiple:(null===(s=e.properties)||void 0===s?void 0:s.imageCount)&&"1"!==(null===(c=e.properties)||void 0===c?void 0:c.imageCount),columnName:e.columnName,inputs:Z,setInputs:dl,isDocument:"file"===e.default_attribute.inputType})},ml=()=>{nl(Ne,null),X((e=>({...e,[Ne]:null}))),rl(),_e(!1)};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(k.Op,{methods:il,onSubmit:tl((async e=>{var l;const i=structuredClone(e);if(Object.entries(i).forEach((e=>{let[l]=e;Q[l]&&!$e.includes(l)&&(i[l]=null)})),i.updated_at=Date.now()+"","577b8900-b333-42d0-b7fb-347abc3f0b5c"!==(null===o||void 0===o?void 0:o.id)&&"57436bed-c176-4625-96af-aaeec88cdc90"!==(null===o||void 0===o?void 0:o.id)){var t,n,r;null!==Re&&void 0!==Re&&null!==(t=Re.filter((e=>e.columnName.startsWith("l_a")&&e.update)))&&void 0!==t&&t.length&&Object.hasOwnProperty.call(i,"l_a_approval_status")&&Object.hasOwnProperty.call(i,"l_b_approval_status")&&(null===(n=i.l_a_approval_status)||void 0===n?void 0:n[0])===Pe("L1ApprovalStatusData","Approved")&&(null===(r=i.l_b_approval_status)||void 0===r?void 0:r[0])===Pe("L2ApprovalStatusData","Rejected")&&(i.l_b_approval_status=null);(null===Re||void 0===Re?void 0:Re.filter((e=>L.test(e.columnName)&&e.update))).forEach((e=>{i[e.columnName]=[null===o||void 0===o?void 0:o.id]}));(null===Re||void 0===Re?void 0:Re.filter((e=>V.test(e.columnName)&&e.update))).forEach((e=>{i[e.columnName]=(0,F.cD)()}))}i.source="web",i.is_active=1;const a=new FormData;null===(l=Object.entries(i))||void 0===l||l.forEach((e=>{let[l,o]=e;const i=Ue[l],t=Q[l]&&!$e.includes(l),n=Ye[l];if(t||n||Array.isArray(o)&&o.length>0&&!o[0])return a.append(l,null);o&&i&&["file","image"].includes(i)?null===o||void 0===o||o.forEach((async(e,o)=>"[object File]"===Object.prototype.toString.call(e)?(e.fileName&&!e.name&&(e.name=e.fileName),a.append(`${l} - ${o}`,e)):(a.append(l,e),a.append(l,e)))):Array.isArray(o)?(a.append(l,o[0]||""),null===o||void 0===o||o.forEach((e=>{a.append(l,e)}))):a.append(l,o)})),Oe(!0);let d=await(0,_.default)("/form/update-response",{method:"PUT",body:a,params:w,query:{keepOlderVersion:!0},headers:{"Content-Type":"multipart/form-data"}});var u;d.success?(0,C.A)("Response Updated Successfully",{variant:"success",autoHideDuration:null},(()=>{window.close()})):(Oe(!1),(0,C.A)((null===d||void 0===d||null===(u=d.error)||void 0===u?void 0:u.message)||"Operation failed. Please try again.",{variant:"error"}))})),children:(0,T.jsx)(D.A,{sx:{mb:2},title:(0,T.jsxs)(t.Ay,{container:!0,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,T.jsxs)(t.Ay,{item:!0,sx:{display:"flex",alignItems:"center"},children:[(0,T.jsx)(n.A,{sx:{position:"absolute",left:10},onClick:()=>window.close(),color:"primary",children:(0,T.jsx)(x.A,{})}),(0,T.jsx)(r.A,{sx:{position:"relative",left:25},variant:"h4",children:"Response"})]}),!Y.loading&&0===Y.dropdownLovDataObject.length||!Y.loading&&Y.dropdownLovDataObject.length>0&&Ie?"edit"===U&&(0,T.jsx)(t.Ay,{item:!0,children:(0,T.jsx)(a.A,{size:"small",type:"submit",variant:"contained",color:"primary",disabled:Object.values(le).some((e=>e))||Se,children:"Update"})}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(P.W,{variant:"h6",sx:{mr:2},children:"Processing form data, Please wait..."}),(0,T.jsx)(z.A,{})]})]}),contentSX:{padding:"16px 16px 0px 16px"},children:(0,T.jsxs)(t.Ay,{container:!0,spacing:2,sx:{height:"68vh"},children:[(0,T.jsx)(t.Ay,{item:!0,md:8.4,sx:{height:"100%",overflowY:"auto",marginRight:2,paddingRight:2},children:(0,T.jsxs)(t.Ay,{container:!0,item:!0,rowSpacing:4,columnSpacing:2.5,sx:{padding:1,direction:"ltr",justifyContent:"space-between"},children:[ze&&"view"!==U&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsx)(d.A,{value:ie,onChange:e=>te(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),te(e.target.value))},placeholder:"Search...",endAdornment:(0,T.jsx)(u.A,{position:"end",children:(0,T.jsx)(n.A,{edge:"end",onClick:ie?async()=>{const e=await(0,_.default)("/form/get-mapped-data",{method:"GET",query:{formId:w,searchBy:ie}});if(e.success)if(e.data&&e.data.data&&e.data.data.length>0){re(!0);let l=Object.keys(e.data.data[0]).map((e=>({Header:e,accessor:e})));pe(l),de(e.data.data),se(e.data.visibleData)}else{var l;(0,C.A)((null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)||"No Record Found!",{variant:"warning"})}else(0,C.A)(e.error.message)}:()=>{},style:{cursor:"pointer"},children:(0,T.jsx)(A.A,{})})}),sx:{width:"100%"}})}),(0,T.jsx)(t.Ay,{item:!0,md:6})]}),Re&&Re.filter((e=>!Q[e.columnName])).map((e=>{var l,o,i,a,d,u,p,m,v,f,x,A,j,_,N,w,C,S,O,I,D,E,M,F,z,P,q,H,B,K,$,W,G,X,Q,ee,oe,ie,te,ne,re,ae;return["text","number","email","phone","location","network","key_generator","qrcode","ocr","optical","plus_code","ref_code"].includes(null===(l=e.default_attribute)||void 0===l?void 0:l.inputType)?(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsx)(k.o3,{name:e.columnName,type:"number"===(null===(o=e.default_attribute)||void 0===o?void 0:o.inputType)?"number":"text",label:e.name,minLength:null===(i=e.properties)||void 0===i?void 0:i.minLength,maxLength:null===(a=e.properties)||void 0===a?void 0:a.maxLength,decimal:null===(d=e.properties)||void 0===d?void 0:d.decimal,fieldType:null===(u=e.default_attribute)||void 0===u?void 0:u.inputType,decimalPoint:null===(p=e.properties)||void 0===p?void 0:p.decimalPoints,setInsideErrors:ye,disabled:V.test(e.columnName)||"view"===U||!e.update||["text","number","email","phone"].includes(null===(m=e.default_attribute)||void 0===m?void 0:m.inputType)&&!Ce.includes(null===e||void 0===e?void 0:e.columnName)||!["text","number","email","phone"].includes(null===(v=e.default_attribute)||void 0===v?void 0:v.inputType)&&e.properties&&void 0!==e.properties.editable&&!e.properties.editable||sl[e.columnName],multiline:"number"!==(null===(f=e.default_attribute)||void 0===f?void 0:f.inputType),handleChange:l=>{var o,i;return ul(null===(o=l.target)||void 0===o?void 0:o.value,null===e||void 0===e?void 0:e.columnName,null===e||void 0===e||null===(i=e.default_attribute)||void 0===i?void 0:i.inputType)},InputProps:{style:{resize:"vertical",overflowY:"hidden",height:"40px",minHeight:"40px"}},errorMessage:le[e.columnName],required:We.includes(e.columnName)})},e.id):"date"===(null===(x=e.default_attribute)||void 0===x?void 0:x.inputType)?(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsx)(b.A,{name:e.columnName,label:e.name,pickerType:(null===(A=e.properties)||void 0===A?void 0:A.pickerType)||"",timeFormat:(null===(j=e.properties)||void 0===j?void 0:j.timeFormat)||"",minDate:null===(_=e.properties)||void 0===_?void 0:_.minDate,maxDate:null===(N=e.properties)||void 0===N?void 0:N.maxDate,setInsideErrors:ye,onChange:l=>{var o;return ul(l,null===e||void 0===e?void 0:e.columnName,null===e||void 0===e||null===(o=e.default_attribute)||void 0===o?void 0:o.inputType)},disabled:V.test(e.columnName)||"view"===U||!e.update||!Ce.includes(null===e||void 0===e?void 0:e.columnName)||sl[e.columnName],errorMessage:le[e.columnName],required:We.includes(e.columnName)})},e.id):"chip"===(null===(w=e.default_attribute)||void 0===w?void 0:w.inputType)?(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsx)(k.Yq,{name:e.columnName,single:!0,disable:"view"===U||!e.update||e.properties&&void 0!==e.properties.editable&&!e.properties.editable||sl[e.columnName],placeholder:"Select Field",defaultValue:Z[e.columnName],label:e.name,onChange:l=>{var o;return ul(l,null===e||void 0===e?void 0:e.columnName,null===e||void 0===e||null===(o=e.default_attribute)||void 0===o?void 0:o.inputType,!0)},menus:(null===(C=e.properties)||void 0===C||null===(S=C.values)||void 0===S?void 0:S.split(",").map((e=>({id:e,name:e}))))||[],errorMessage:le[e.columnName],required:We.includes(e.columnName)})},e.id):"checkbox"===(null===(O=e.default_attribute)||void 0===O?void 0:O.inputType)?(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsx)(k.Yq,{name:e.columnName,disable:"view"===U||!e.update||e.properties&&void 0!==e.properties.editable&&!e.properties.editable,single:"single"===(null===(I=e.properties)||void 0===I?void 0:I.selectType),placeholder:"Select Field",defaultValue:Z[e.columnName],label:e.name,onChange:l=>{var o;return ul(l,null===e||void 0===e?void 0:e.columnName,null===e||void 0===e||null===(o=e.default_attribute)||void 0===o?void 0:o.inputType,!0)},menus:(null===(D=e.properties)||void 0===D||null===(E=D.values)||void 0===E?void 0:E.split(",").map((e=>({id:e,name:e}))))||[],errorMessage:le[e.columnName],required:We.includes(e.columnName)})},e.id):"dropdown"===(null===(M=e.default_attribute)||void 0===M?void 0:M.inputType)?(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsx)(k.Yq,{name:e.columnName,disable:L.test(e.columnName)||"view"===U||!e.update||(!(null===e||void 0===e||!e.isRequired)||!(null===e||void 0===e||null===(F=e.properties)||void 0===F||!F.factoryTable))&&1===(null===(z=el(Le[e.columnName],null===(P=e.properties)||void 0===P?void 0:P.dependency))||void 0===z?void 0:z.length)||!Ce.includes(null===e||void 0===e?void 0:e.columnName)||sl[e.columnName],single:"single"===(null===(q=e.properties)||void 0===q?void 0:q.selectType),placeholder:"Select Field",defaultValue:Z[e.columnName],label:e.name,autoSelect:(!(null===e||void 0===e||!e.isRequired)||!(null===e||void 0===e||null===(H=e.properties)||void 0===H||!H.factoryTable))&&1===(null===(B=el(Le[e.columnName],null===(K=e.properties)||void 0===K?void 0:K.dependency))||void 0===B?void 0:B.length),onChange:l=>{var o;return ul(l,null===e||void 0===e?void 0:e.columnName,null===e||void 0===e||null===(o=e.default_attribute)||void 0===o?void 0:o.inputType,!0)},menus:el(Le[e.columnName],null===($=e.properties)||void 0===$?void 0:$.dependency)||[],errorMessage:le[e.columnName],required:We.includes(e.columnName),customKeyName:e.properties.dependency&&xe.some((l=>l[1]===e.name))&&Y.sourceColumnByIdObject[e.properties.sourceColumn]||""})},e.id):"image"===(null===(W=e.default_attribute)||void 0===W?void 0:W.inputType)||"blob"===(null===(G=e.default_attribute)||void 0===G?void 0:G.inputType)?(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsxs)(s.A,{spacing:1,children:[(0,T.jsxs)(r.A,{children:[e.name,e.isRequired&&" *"]}),(0,T.jsx)(c.A,{disabled:"view"===U||!e.update,placeholder:Array.isArray(Z[e.columnName])?(null===(X=Z[e.columnName])||void 0===X?void 0:X.length)>0?"View Image":"No Image Available":Z[e.columnName]?"View Image":"No Image Available",error:!!le[e.columnName],helperText:le[e.columnName],sx:{"& .MuiFormHelperText-root":{position:"absolute",top:37,left:-10},background:"view"!==U&&e.update?"#fff":"#f2f2f2"},InputProps:{readOnly:!0,style:{resize:"vertical",overflowY:"hidden",height:"40px",minHeight:"40px"},endAdornment:(Array.isArray(Z[e.columnName])?!((null===(Q=Z[e.columnName])||void 0===Q?void 0:Q.length)>0&&Z[e.columnName][0]):!Z[e.columnName])?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(n.A,{color:"secondary",children:(0,T.jsx)(y.A,{})}),"view"!==U&&e.update&&"image"===(null===(te=e.default_attribute)||void 0===te?void 0:te.inputType)&&pl(e)]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(n.A,{onClick:()=>J(e),color:"primary",children:(0,T.jsx)(y.A,{})}),"view"!==U&&e.update&&(null===(ee=Z[e.columnName])||void 0===ee?void 0:ee.length)<(null===(oe=e.properties)||void 0===oe?void 0:oe.imageCount)&&"image"===(null===(ie=e.default_attribute)||void 0===ie?void 0:ie.inputType)&&pl(e)]})},errorMessage:le[e.columnName],required:We.includes(e.columnName)})]})},e.id):"file"===(null===(ne=e.default_attribute)||void 0===ne?void 0:ne.inputType)?(0,T.jsx)(t.Ay,{item:!0,md:6,children:(0,T.jsxs)(s.A,{spacing:1,children:[(0,T.jsxs)(r.A,{children:[e.name,e.isRequired&&" *"]}),(0,T.jsx)(c.A,{disabled:"view"===U||!e.update,placeholder:(null===(re=Z[e.columnName])||void 0===re?void 0:re.length)>0?"Open File":"No File Available",error:!!le[e.columnName],helperText:le[e.columnName],sx:{"& .MuiFormHelperText-root":{position:"absolute",top:37,left:-10},background:"view"!==U&&e.update?"#fff":"#f2f2f2"},InputProps:{readOnly:!0,style:{resize:"vertical",overflowY:"hidden",height:"40px",minHeight:"40px"},endAdornment:(null===(ae=Z[e.columnName])||void 0===ae?void 0:ae.length)>0?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(n.A,{onClick:()=>{var l;return(e=>{const l=document.createElement("a");l.href="object"===typeof e?URL.createObjectURL(e):e,l.target="_blank",l.click()})(null===(l=Z[e.columnName])||void 0===l?void 0:l[0])},color:"primary",children:(0,T.jsx)(h.A,{})}),"view"!==U&&e.update&&(0,T.jsx)(g.A,{sx:{cursor:"pointer"},title:"Delete",color:"primary",onClick:()=>{we(e.columnName),_e(!0)}}),(0,T.jsx)(R.A,{open:je,handleClose:()=>_e(!1),handleConfirm:ml,title:"Delete File",message:"Are you sure you want to delete?",confirmBtnTitle:"Delete"})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(n.A,{color:"secondary",children:(0,T.jsx)(h.A,{})}),"view"!==U&&e.update&&pl(e)]})},errorMessage:le[e.columnName],required:We.includes(e.columnName)})]})},e.id):(0,T.jsx)(T.Fragment,{})}))]})}),(0,T.jsx)(t.Ay,{item:!0,md:3.4,sx:{height:"100%",overflowY:"auto",border:"1px dashed grey",display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 8px !important",marginTop:1},children:(()=>{const e=Array.isArray(Z[null===G||void 0===G?void 0:G.columnName])?Z[null===G||void 0===G?void 0:G.columnName]:[Z[null===G||void 0===G?void 0:G.columnName]];return Z[null===G||void 0===G?void 0:G.columnName]&&e.length>0&&e[0]?(0,T.jsx)(N.A,{blockMode:!0,mode:U,imageList:e,setValue:(e,l)=>{nl(e,0===(null===l||void 0===l?void 0:l.length)?[""]:l),X((o=>({...o,[e]:0===(null===l||void 0===l?void 0:l.length)?[""]:l}))),rl()},preview:G,type:Ue[null===G||void 0===G?void 0:G.columnName]}):(0,T.jsx)(r.A,{children:"Image Preview"})})()})]})})}),(0,T.jsx)(p.A,{open:ne,onClose:()=>re(!1),scroll:"paper",disableEscapeKeyDown:!0,maxWidth:"lg",children:(0,T.jsx)(O.default,{title:"Fetched Records",data:ue,columns:ce,count:(null===ue||void 0===ue?void 0:ue.length)||0,hideSearch:!0,hideAddButton:!0,hideEditIcon:!0,hideDeleteIcon:!0,hideRestoreIcon:!0,hideHistoryIcon:!0,selectIcon:!0,miniAction:!0,hideColumnsSelect:!0,hideExportButton:!0,handleRowView:(e,l)=>{const o=ae[l],i=ue[l],t={},n=[];Object.entries(Qe).map((e=>{let[l,o]=e;if(o&&Object.hasOwn(Qe,o)){if(0===n.length)return n.push([o,l]);const e=n.findIndex((e=>e.includes(o)));if(e>-1)return n[e].push(l);n.push([o,l])}})),null===Re||void 0===Re||Re.forEach((e=>{const l=/^\+\d{12}$/;var t;e.default_attribute.inputType&&"phone"===e.default_attribute.inputType&&o[e.columnName]&&"string"===typeof o[e.columnName]?(o[e.columnName]=null!==(t=o[e.columnName])&&void 0!==t&&t.startsWith("+91")?o[e.columnName]:"+91"+o[e.columnName],o[e.columnName]&&l.test(o[e.columnName])?ye((l=>({...l,[e.columnName]:""}))):ye((l=>({...l,[e.columnName]:"Please enter valid phone number."})))):"text"===e.default_attribute.inputType&&i[e.columnName]&&(o[e.columnName]=i[e.columnName])}));const r=Object.keys(o);Object.entries(Le).forEach((e=>{let[l]=e;n.some((e=>e.includes(l)&&e.some((e=>r.includes(e)))))&&(t[l]=[])}));const a=Object.entries(o),d=JSON.parse(JSON.stringify(Xe));a.forEach((e=>{let[l,o]=e;if(Ze.includes(l)&&d.includes(l)&&(Array.isArray(o)&&o.length>0||o&&""!==o)){const e=d.indexOf(l);d[e]=null}})),Te(d),dl((e=>({...e,...t,...o}))),fe.current=!0,ve((e=>!e)),re(!1)},setPageIndex:Me,setPageSize:Fe,pageIndex:Ee,pageSize:De})})]})}},2606:(e,l,o)=>{o.d(l,{A:()=>y});var i=o(9950),t=o(75989),n=o(79843),r=o(4139),a=o(40821),d=o(12257),u=o(87233),s=o(96395),c=o(39854),p=o(26592),m=o(14351),v=o(86263),f=o(64499),h=o(44414);const y=e=>{let{imageList:l,blockMode:o=!1,base64Image:y=!1,setValue:g,preview:b,type:x,mode:A}=e;const[j,_]=(0,i.useState)();(0,i.useEffect)((()=>{_(0)}),[l]);const[N,w]=(0,i.useState)(!1),[C,T]=(0,i.useState)(null);return(null===l||void 0===l?void 0:l.length)>0?(0,h.jsxs)(r.Ay,{container:!0,children:[(0,h.jsx)(r.Ay,{item:!0,md:12,children:(0,h.jsxs)(m.A,{content:!1,boxShadow:!1,sx:{m:"0 auto",height:"100%",display:"flex",border:"none",alignItems:"center",justifyContent:"center"},children:[(0,h.jsx)(s.GT,{ref:T,children:(0,h.jsx)(s.WZ,{children:(0,h.jsx)(a.A,{component:"img",image:y?"object"===typeof l[j]?URL.createObjectURL(l[j]):l[j]:"object"===typeof l[j]?URL.createObjectURL(l[j]):window.location.origin+l[j],sx:{height:o?"72vh":"90vh",objectFit:"contain"}})})}),(0,h.jsxs)(d.A,{direction:"row",className:"tools",sx:{position:"absolute",bottom:5,zIndex:1,backgroundColor:"white"},children:[l.length>1&&(0,h.jsx)(v.A,{title:"Prev",color:"secondary",disabled:0===j,onClick:()=>{j>0&&(_(j-1),C&&C.resetTransform())},children:(0,h.jsx)(t.A,{})}),l.length>1&&(0,h.jsx)(v.A,{title:"Next",color:"secondary",disabled:j>=(null===l||void 0===l?void 0:l.length)-1,onClick:()=>{j<(null===l||void 0===l?void 0:l.length)-1&&(_(j+1),C&&C.resetTransform())},children:(0,h.jsx)(n.A,{})}),(0,h.jsx)(v.A,{title:"Reset",color:"secondary",onClick:()=>{C&&C.resetTransform()},children:(0,h.jsx)(c.A,{})})]}),o&&"view"!==A&&b.update&&"blob"!==x&&(0,h.jsx)(d.A,{direction:"row",className:"tools",sx:{position:"absolute",top:5,right:5,zIndex:1,backgroundColor:"white"},children:(0,h.jsx)(v.A,{title:"Delete",color:"secondary",onClick:()=>w(!0),children:(0,h.jsx)(p.A,{})})})]})}),(0,h.jsx)(f.A,{open:N,handleClose:()=>w(!1),handleConfirm:()=>{g(b.columnName,"blob"===x?"":null===l||void 0===l?void 0:l.filter(((e,l)=>l!==j))),_(0),w(!1)},title:"Delete Field",message:"Are you sure you want to delete?",confirmBtnTitle:"Delete"})]}):(0,h.jsx)(u.A,{children:"Image Preview"})}},12563:(e,l,o)=>{var i=o(24994);l.A=void 0;var t=i(o(79526)),n=o(44414);l.A=(0,t.default)((0,n.jsx)("path",{d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm4 18H6V4h7v5h5z"}),"DescriptionOutlined")},56334:(e,l,o)=>{var i=o(24994);l.A=void 0;var t=i(o(79526)),n=o(44414);l.A=(0,t.default)((0,n.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5z"}),"FileUploadOutlined")},62375:(e,l,o)=>{var i=o(24994);l.A=void 0;var t=i(o(79526)),n=o(44414);l.A=(0,t.default)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},40821:(e,l,o)=>{o.d(l,{A:()=>h});var i=o(98587),t=o(58168),n=o(9950),r=o(72004),a=o(88465),d=o(18463),u=o(59254),s=o(45453),c=o(44414);const p=["children","className","component","image","src","style"],m=(0,u.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,l)=>{const{ownerState:o}=e,{isMediaComponent:i,isImageComponent:t}=o;return[l.root,i&&l.media,t&&l.img]}})((e=>{let{ownerState:l}=e;return(0,t.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},l.isMediaComponent&&{width:"100%"},l.isImageComponent&&{objectFit:"cover"})})),v=["video","audio","picture","iframe","img"],f=["picture","img"],h=n.forwardRef((function(e,l){const o=(0,d.b)({props:e,name:"MuiCardMedia"}),{children:n,className:u,component:h="div",image:y,src:g,style:b}=o,x=(0,i.A)(o,p),A=-1!==v.indexOf(h),j=!A&&y?(0,t.A)({backgroundImage:`url("${y}")`},b):b,_=(0,t.A)({},o,{component:h,isMediaComponent:A,isImageComponent:-1!==f.indexOf(h)}),N=(e=>{const{classes:l,isMediaComponent:o,isImageComponent:i}=e,t={root:["root",o&&"media",i&&"img"]};return(0,a.A)(t,s.R,l)})(_);return(0,c.jsx)(m,(0,t.A)({className:(0,r.A)(N.root,u),as:h,role:!A&&y?"img":void 0,ref:l,style:j,ownerState:_,src:A?y||g:void 0},x,{children:n}))}))},45453:(e,l,o)=>{o.d(l,{A:()=>r,R:()=>n});var i=o(1763),t=o(423);function n(e){return(0,t.Ay)("MuiCardMedia",e)}const r=(0,i.A)("MuiCardMedia",["root","media","img"])}}]);