"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[8048,5406],{14846:(e,t,r)=>{r.d(t,{w:()=>g});var a=r(95537),n=r(53065),s=r(37223),o=r(49985),i=r(11066),c=r(36089),d=r(56334),l=r(58281),u=r(59254),m=r(93951),p=r(44414);const v=(0,u.Ay)("div")((e=>{let{margin:t}=e;return{background:"none",border:"none",padding:"3px",margin:t||"-3px",minWidth:"1px"}}));const g=e=>{let{updateReceipt:t,uploadAttachments:r,viewSerialNumbers:u,openPreview:g,initiatePrint:h,initiateDownload:f,noMargins:x,disablePrint:S,disableDownload:j,editButton:A,uploadButton:b=!1,disableUpload:k}=e;return(0,p.jsxs)(a.A,{display:"flex",children:[u&&(0,p.jsx)(n.A,{title:b?"View Old Serial Numbers":"Print Serial Numbers",placement:"bottom",children:(0,p.jsx)(v,{margin:"-7px",children:(0,p.jsx)(m.A,{onClick:()=>u(),children:(0,p.jsx)(l.A,{})})})}),!x&&(0,p.jsx)(a.A,{sx:{display:"inline-block",width:"7px"}}),A&&(0,p.jsx)(n.A,{title:"Edit E-Way Bill Details",placement:"bottom",children:(0,p.jsx)(v,{...u&&{margin:"-7px"},children:(0,p.jsx)(m.A,{onClick:()=>t(),children:(0,p.jsx)(c.A,{})})})}),b&&(0,p.jsx)(n.A,{title:"Upload Attachments",placement:"bottom",children:(0,p.jsx)(v,{...u&&{margin:"-7px"},children:(0,p.jsx)(m.A,{onClick:()=>r(),disabled:k,children:(0,p.jsx)(d.A,{})})})}),!x&&(0,p.jsx)(a.A,{sx:{display:"inline-block",width:"7px"}}),(0,p.jsx)(n.A,{title:"Preview",placement:"bottom",children:(0,p.jsx)(v,{...u&&{margin:"-7px"},children:(0,p.jsx)(m.A,{onClick:()=>g(),children:(0,p.jsx)(o.A,{})})})}),!x&&(0,p.jsx)(a.A,{sx:{display:"inline-block",width:"7px"}}),(0,p.jsx)(n.A,{title:"Print",placement:"bottom",children:(0,p.jsx)("span",{children:(0,p.jsx)(v,{...u&&{margin:"-7px"},children:(0,p.jsx)(m.A,{onClick:()=>h(),disabled:S,children:(0,p.jsx)(i.A,{})})})})}),!x&&(0,p.jsx)(a.A,{sx:{display:"inline-block",width:"7px"}}),(0,p.jsx)(n.A,{title:"Download",placement:"bottom",children:(0,p.jsx)("span",{children:(0,p.jsx)(v,{...u&&{margin:"-7px"},children:(0,p.jsx)(m.A,{onClick:()=>f(),disabled:j,children:(0,p.jsx)(s.A,{})})})})})]})};g.defaultProps={noMargins:!1}},93951:(e,t,r)=>{r.d(t,{A:()=>s});const{IconButton:a,styled:n}=r(505),s=n(a)((e=>{let{theme:t}=e;return{padding:t.spacing(.5),"& .MuiSvgIcon-root":{fontSize:"20px",color:"#3c3c3c"},"&:disabled .MuiSvgIcon-root":{color:"gray"},"&:hover":{backgroundColor:"#E6F4FF"}}}))},89649:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(9950),n=r(80415);function s(){const[e,t]=(0,a.useState)({pageIndex:n.j7.pageIndex,pageSize:n.j7.pageSize,forceUpdate:!0}),r=(0,a.useCallback)((function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.pageIndex,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pageSize;t((e=>({pageIndex:r,pageSize:a,forceUpdate:!e.forceUpdate})))}),[e]),s=(0,a.useCallback)((()=>{t((e=>({pageIndex:n.j7.pageIndex,pageSize:n.j7.pageSize,forceUpdate:!e.forceUpdate})))}),[]);return{paginations:e,setPageIndex:e=>t((t=>({...t,pageIndex:e,forceUpdate:!t.forceUpdate}))),setPageSize:e=>t((t=>({pageIndex:n.j7.pageIndex,pageSize:e,forceUpdate:!t.forceUpdate}))),refreshPagination:s,setPaginationsFunctions:r}}},39225:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(41397),n=r.n(a),s=r(9950);const o=e=>{const{isFcMode:t}=e||{},[r,a]=(0,s.useState)(void 0),[o,i]=(0,s.useState)(!1),c=(0,s.useRef)([]),d=(0,s.useCallback)((e=>{const a=c.current;c.current=e,r&&(t||n().isEqual(e,a)||i((e=>!e)))}),[t,r]),l=(0,s.useMemo)((()=>null===r||void 0===r?void 0:r.trim()),[r]);return{searchString:r,searchStringTrimmed:l,forceSearch:o,accessorsRef:c,setSearchString:a,setAccessors:d}}},88848:(e,t,r)=>{r.d(t,{$:()=>s});var a=r(9950),n=r(27081);const s=()=>{const[e,t]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[r,s]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[o,i]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[c,d]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[l,u]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[m,p]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[v,g]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[h,f]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[x,S]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[j,A]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[b,k]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),M=(0,n.d4)((e=>e.masterMakerLov||{})),y=(0,n.d4)((e=>e.masterMakerLovList||{})),I=(0,n.d4)((e=>e.lovsForMasterName||[])),w=(0,n.d4)((e=>e.lovsForMasterNameSecond||[])),z=(0,n.d4)((e=>e.lovsForMasterNameThird||[])),H=(0,n.d4)((e=>e.currency||[])),O=(0,n.d4)((e=>e.gstStatus||[])),T=(0,n.d4)((e=>e.paymentTerm||[])),D=(0,n.d4)((e=>e.incoterms||[])),E=(0,n.d4)((e=>e.title||[])),C=(0,n.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{t((e=>({...e,...M})))}),[M]),(0,a.useEffect)((()=>{s((e=>({...e,...y})))}),[y]),(0,a.useEffect)((()=>{i((e=>({...e,...I})))}),[I]),(0,a.useEffect)((()=>{d((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{u((e=>({...e,...z})))}),[z]),(0,a.useEffect)((()=>{p((e=>({...e,...H})))}),[H]),(0,a.useEffect)((()=>{g((e=>({...e,...O})))}),[O]),(0,a.useEffect)((()=>{f((e=>({...e,...T})))}),[T]),(0,a.useEffect)((()=>{S((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{A((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{k((e=>({...e,...C})))}),[C]),{masterMakerLovs:e,masterMakerLovsList:r,masterMakerOrgType:o,masterMakerOrgTypeSecond:c,masterMakerOrgTypeThird:l,masterMakerCurrency:m,masterMakerGstStatus:v,masterMakerIncoterms:x,masterMakerPaymentTerm:h,masterMakerLovHistory:b,masterMakerTitle:j}}},46091:(e,t,r)=>{r.d(t,{b:()=>s});var a=r(9950),n=r(27081);const s=()=>{const[e,t]=(0,a.useState)({requestDetails:{},error:"",loading:!0}),r=(0,n.d4)((e=>e.requestList||{}));return(0,a.useEffect)((()=>{t((e=>({...e,...r})))}),[r]),{transactionRequest:e}}},61835:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var a=r(9950),n=r(27081),s=r(28429),o=r(88848),i=r(46091),c=r(29024),d=r(52867),l=r(99635),u=r(89649),m=r(14846),p=r(3252),v=r(39225),g=r(44414);const h=(0,p.A)((0,a.lazy)((()=>r.e(8820).then(r.bind(r,46439))))),f=[{Header:"Actions",accessor:"actionButtons"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"materialData[0].project.name"},{Header:"From Company Store",accessor:"toStore.name"},{Header:"To Company Store",accessor:"fromStore.name"},{Header:"Status",accessor:"receiptStatus"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}];const x=e=>{if(!e)return[];const t=e.reduce(((e,t)=>{const{transactionTypeId:r,referenceDocumentNumber:a}=t;return e[a+r+(0,d.rd)(t)]||(e[a+r+(0,d.rd)(t)]=[]),e[a+r+(0,d.rd)(t)].push(t),e}),{});return Object.entries(t).map((e=>{let[,t]=e;return{transactionTypeId:t[0].transactionTypeId,referenceDocumentNumber:t[0].referenceDocumentNumber,fromStore:t[0].from_store,projectName:t[0].project.name,remarks:t[0].remarks,toStore:t[0].to_store,createdAt:t[0].createdAt,materialData:t}}))},S=()=>{var e,t;const r=(0,n.wA)(),{transactionId:p}=(0,s.g)(),[S,j]=(0,a.useState)("closed"),[A,b]=(0,a.useState)(null),[k,M]=(0,a.useState)(null),{searchString:y,setSearchString:I,accessorsRef:w,setAccessors:z,forceSearch:H,searchStringTrimmed:O}=(0,v.A)(),{paginations:{pageSize:T,pageIndex:D},setPageIndex:E,setPageSize:C}=(0,u.A)(),{transactionRequest:P}=(0,i.b)(),{masterMakerOrgType:N}=(0,o.$)(),L=null===N||void 0===N?void 0:N.masterObject,{data:R,count:U}=(0,a.useMemo)((()=>{var e,t;return{data:x(null===P||void 0===P||null===(e=P.requestDetails)||void 0===e?void 0:e.rows).map(((e,t)=>{var r,a,n,s;return{...e,receiptStatus:(0,d.Uq)(null===e||void 0===e?void 0:e.materialData[0]),serialNumber:(D*T-T+t+1).toString(),projectSiteStore:null===(r=e.materialData)||void 0===r||null===(a=r.filter((e=>e.quantity<0)))||void 0===a||null===(n=a[0])||void 0===n||null===(s=n.organization_store)||void 0===s?void 0:s.name,actionButtons:(0,g.jsx)(m.w,{openPreview:()=>(e=>{j("view"),b(e)})(t),initiatePrint:()=>(e=>{j("print"),b(e)})(t),initiateDownload:()=>(e=>{j("download"),b(e)})(t),noMargins:!0})}}))||[],count:null===P||void 0===P||null===(t=P.requestDetails)||void 0===t?void 0:t.count,isLoading:null===P||void 0===P?void 0:P.loading,error:null===P||void 0===P?void 0:P.error}}),[P,D,T]),F=null===R||void 0===R||null===(e=R[A])||void 0===e?void 0:e.referenceDocumentNumber;(0,a.useEffect)((()=>{r((0,c.VOH)("TRANSACTION TYPE"))}),[r]);const V=function(e,t){for(let r=0;r<e.length;r++)if(e[r].name===t)return e[r].id;return null}(L,"STR");return(0,a.useEffect)((()=>{V&&r((0,c.exE)({pageIndex:D,pageSize:T,transactionTypeId:V,...O&&{searchString:O,accessors:JSON.stringify(w.current)},sortBy:(null===k||void 0===k?void 0:k[0])||"createdAt",sortOrder:(null===k||void 0===k?void 0:k[1])||"DESC"}))}),[r,p,D,T,L,V,O,k,w,H]),(0,g.jsxs)(g.Fragment,{children:["closed"!==S&&(0,g.jsx)(h,{fetchFromRoute:"/str-receipt",apiQuery:{referenceDocumentNumber:F,transactionTypeId:null===R||void 0===R||null===(t=R[A])||void 0===t?void 0:t.transactionTypeId,toStoreId:(0,d.rd)(null===R||void 0===R?void 0:R[A])},previewAction:S,onClose:()=>{j("hidden"),b(null)},fileNameForDownload:F}),(0,g.jsx)(l.default,{title:"STR Receipt",setPageIndex:E,setPageSize:C,pageIndex:D,pageSize:T,columns:f,data:V?R:[],count:V?U:0,hideAddButton:!0,hideActions:!0,searchConfig:{searchString:y,searchStringTrimmed:O,setSearchString:I,setAccessors:z},sortConfig:{sort:k,setSort:M},exportConfig:{tableName:"str_receipt",apiQuery:{transactionTypeId:V}}})]})}},13239:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(89379),n=r(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var o=r(14840),i=function(e,t){return n.createElement(o.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:s}))};const c=n.forwardRef(i)},26592:(e,t,r)=>{var a=r(24994);t.A=void 0;var n=a(r(79526)),s=r(44414);t.A=(0,n.default)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},36089:(e,t,r)=>{var a=r(24994);t.A=void 0;var n=a(r(79526)),s=r(44414);t.A=(0,n.default)((0,s.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined")},56334:(e,t,r)=>{var a=r(24994);t.A=void 0;var n=a(r(79526)),s=r(44414);t.A=(0,n.default)((0,s.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5z"}),"FileUploadOutlined")},58281:(e,t,r)=>{var a=r(24994);t.A=void 0;var n=a(r(79526)),s=r(44414);t.A=(0,n.default)((0,s.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-7-8.5c1.84 0 3.48.96 4.34 2.5-.86 1.54-2.5 2.5-4.34 2.5s-3.48-.96-4.34-2.5c.86-1.54 2.5-2.5 4.34-2.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"PreviewOutlined")},11066:(e,t,r)=>{var a=r(24994);t.A=void 0;var n=a(r(79526)),s=r(44414);t.A=(0,n.default)([(0,s.jsx)("path",{d:"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3M8 5h8v3H8zm8 12v2H8v-4h8zm2-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4z"},"0"),(0,s.jsx)("circle",{cx:"18",cy:"11.5",r:"1"},"1")],"PrintOutlined")}}]);