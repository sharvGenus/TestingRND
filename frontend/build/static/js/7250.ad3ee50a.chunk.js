"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[7250,5406],{14846:(e,t,a)=>{a.d(t,{w:()=>f});var n=a(95537),r=a(53065),o=a(37223),i=a(49985),s=a(11066),c=a(36089),l=a(56334),d=a(58281),u=a(59254),p=a(93951),h=a(44414);const m=(0,u.Ay)("div")((e=>{let{margin:t}=e;return{background:"none",border:"none",padding:"3px",margin:t||"-3px",minWidth:"1px"}}));const f=e=>{let{updateReceipt:t,uploadAttachments:a,viewSerialNumbers:u,openPreview:f,initiatePrint:g,initiateDownload:b,noMargins:x,disablePrint:v,disableDownload:j,editButton:S,uploadButton:A=!1,disableUpload:y}=e;return(0,h.jsxs)(n.A,{display:"flex",children:[u&&(0,h.jsx)(r.A,{title:A?"View Old Serial Numbers":"Print Serial Numbers",placement:"bottom",children:(0,h.jsx)(m,{margin:"-7px",children:(0,h.jsx)(p.A,{onClick:()=>u(),children:(0,h.jsx)(d.A,{})})})}),!x&&(0,h.jsx)(n.A,{sx:{display:"inline-block",width:"7px"}}),S&&(0,h.jsx)(r.A,{title:"Edit E-Way Bill Details",placement:"bottom",children:(0,h.jsx)(m,{...u&&{margin:"-7px"},children:(0,h.jsx)(p.A,{onClick:()=>t(),children:(0,h.jsx)(c.A,{})})})}),A&&(0,h.jsx)(r.A,{title:"Upload Attachments",placement:"bottom",children:(0,h.jsx)(m,{...u&&{margin:"-7px"},children:(0,h.jsx)(p.A,{onClick:()=>a(),disabled:y,children:(0,h.jsx)(l.A,{})})})}),!x&&(0,h.jsx)(n.A,{sx:{display:"inline-block",width:"7px"}}),(0,h.jsx)(r.A,{title:"Preview",placement:"bottom",children:(0,h.jsx)(m,{...u&&{margin:"-7px"},children:(0,h.jsx)(p.A,{onClick:()=>f(),children:(0,h.jsx)(i.A,{})})})}),!x&&(0,h.jsx)(n.A,{sx:{display:"inline-block",width:"7px"}}),(0,h.jsx)(r.A,{title:"Print",placement:"bottom",children:(0,h.jsx)("span",{children:(0,h.jsx)(m,{...u&&{margin:"-7px"},children:(0,h.jsx)(p.A,{onClick:()=>g(),disabled:v,children:(0,h.jsx)(s.A,{})})})})}),!x&&(0,h.jsx)(n.A,{sx:{display:"inline-block",width:"7px"}}),(0,h.jsx)(r.A,{title:"Download",placement:"bottom",children:(0,h.jsx)("span",{children:(0,h.jsx)(m,{...u&&{margin:"-7px"},children:(0,h.jsx)(p.A,{onClick:()=>b(),disabled:j,children:(0,h.jsx)(o.A,{})})})})})]})};f.defaultProps={noMargins:!1}},93951:(e,t,a)=>{a.d(t,{A:()=>o});const{IconButton:n,styled:r}=a(505),o=r(n)((e=>{let{theme:t}=e;return{padding:t.spacing(.5),"& .MuiSvgIcon-root":{fontSize:"20px",color:"#3c3c3c"},"&:disabled .MuiSvgIcon-root":{color:"gray"},"&:hover":{backgroundColor:"#E6F4FF"}}}))},83456:(e,t,a)=>{a.d(t,{A:()=>v});var n=a(9950),r=a(65669),o=a(95537),i=a(87233),s=a(67535),c=a(16632);a(78971);const{useEffect:l,useState:d}=a(9950),{default:u}=a(71826),p=e=>{const[t,a]=d([]),[n,r]=d(!1),[o,i]=d("");return l((()=>{const t=async e=>{var t,a,n,r;const o=await u("/serial-number-list",{method:"GET",query:{projectId:e.projectId,storeId:e.storeId,materialId:e.materialId,...e.storeLocationId&&{storeLocationId:e.storeLocationId},...e.id&&{stockLedgerId:e.id},sort:["createdAt","ASC"]}});if(null===o||void 0===o||!o.success)throw new Error("Issues fetching serial numbers.");const i=(null===o||void 0===o||null===(t=o.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.rows)||[];return{materialName:null===e||void 0===e||null===(n=e.material)||void 0===n?void 0:n.name,materialCode:null===e||void 0===e||null===(r=e.material)||void 0===r?void 0:r.code,serialNumbers:i.map((e=>e.serialNumber))}};(async()=>{const n=e.filter((e=>{var t;return null===e||void 0===e||null===(t=e.material)||void 0===t?void 0:t.isSerialNumber}));if(!n.length)return void i("There are no materials with serial numbers in this transaction.");i("");const o=n.map(t);r(!0);const s=await Promise.all(o).catch((()=>{i("An error occurred while fetching the serial numbers."),r(!1)}));s&&(a(s),r(!1))})()}),[e]),{data:t,pending:n,message:o}};var h=a(7857),m=a(52351),f=a(44414);const g={width:"85%",height:"80%",backgroundColor:"white",overflow:"auto"},b={display:"flex",alignItems:"center",justifyContent:"center"},x=e=>{let{onClose:t,selectedMaterialList:a}=e;const l=n.useRef(),d=n.useRef(),{data:u,pending:x,message:v}=p(a);return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(r.A,{open:!0,onClose:t,style:b,children:(0,f.jsxs)(o.A,{style:g,children:[(0,f.jsxs)(o.A,{margin:"2rem",ref:l,children:[x&&(0,f.jsx)(m.A,{}),v&&(0,f.jsx)(i.A,{variant:"body",children:v}),(0,f.jsx)("table",{cellSpacing:0,ref:d,className:"table-container",children:u.map((e=>(0,f.jsxs)(n.Fragment,{children:[(0,f.jsx)("tbody",{className:"table-head",children:(0,f.jsx)("tr",{rowSpan:2,children:(0,f.jsx)("th",{colSpan:4,children:`${e.materialName} - ${e.materialCode}`})})}),(()=>{const{serialNumbers:t}=e,a=(e=>e.reduce(((e,t,a)=>{const n=Math.floor(a/44),r=Math.floor(n/4);return e[r]||(e[r]=[]),e[r][n%4]||(e[r][n%4]=[]),e[r][n%4].push(t),e}),[]))(t);return a.map(((e,t)=>{const a=e[0].length;return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("tbody",{className:0!==t?"page-br":"",children:Array.from({length:a}).map(((e,t)=>t+1)).map(((a,n)=>(0,f.jsx)("tr",{children:(0,f.jsx)(f.Fragment,{children:Array.from({length:4}).map(((e,t)=>t+1)).map(((a,r)=>{var o;const i=44*t*4+44*r+n+1;return(0,f.jsx)("td",{children:null!==e&&void 0!==e&&null!==(o=e[r])&&void 0!==o&&o[n]?`${i}. ${e[r][n]}`:""},a)}))})},a)))})})}))})()]},`${e.materialName} - ${e.materialCode}`)))})]}),(0,f.jsx)(o.A,{style:{paddingLeft:"2rem",paddingBottom:"2rem"},children:(0,f.jsx)(s.A,{disabled:x||v.length>0,variant:"contained",color:"secondary",onClick:async()=>{var e=l.current.innerHTML,t=window.open("","_blank");t.document.open(),t.document.write(`\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Material Serial Numbers</title>\n          <style>\n            ${h.k}\n            ${h.R}\n          </style>\n        </head>\n        <body>\n          ${e}\n        </body>\n      </html>\n    `),t.document.close(),t.print(),setTimeout((()=>{t.close()}),1),t.onfocus=()=>{t.close()}},startIcon:(0,f.jsx)(c.A,{}),children:"Print"})})]})})})};x.defaultProps={selectedMaterialList:[]};const v=x},7857:(e,t,a)=>{a.d(t,{R:()=>n,k:()=>r});const n="\n.table-container,\n.table-container th,\n.table-container td {\n  border: 1px solid black;\n  border-collapse: collapse;\n  word-wrap: anywhere;\n  padding: 4px;\n}\n\n@media print {\n  @page {\n    size: auto;\n    margin: 10mm 5mm 10mm 5mm;\n  }\n\n  .table-container,\n  .table-container th,\n  .table-container td {\n    border: 1px solid black;\n    border-collapse: collapse;\n    word-wrap: anywhere;\n    padding-top: 3px;\n    padding-bottom: 3px;\n    padding-left: 2px;\n    padding-right: 1px;\n    font-size: 12px;\n  }\n}\n\ntd {\n  min-width: 5rem;\n}\n\nth {\n  text-align: left;\n}\n\n.table-container {\n  padding: 2rem;\n  width: 100%;\n}\n\n.table-container .table-head:not(:first-child) {\n  break-before: always;\n  page-break-before: always;\n}\n\n.table-body-container .table-body:not(:first-child) {\n  break-before: always;\n  page-break-before: always;\n}\n\n.page-br {\n  break-before: always;\n  page-break-before: always;\n}\n\n",r="\nbody {\n  display: none;\n}\n\n@media print {\n  body { \n    display: block;\n  }\n}\n"},89649:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(9950),r=a(80415);function o(){const[e,t]=(0,n.useState)({pageIndex:r.j7.pageIndex,pageSize:r.j7.pageSize,forceUpdate:!0}),a=(0,n.useCallback)((function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.pageIndex,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.pageSize;t((e=>({pageIndex:a,pageSize:n,forceUpdate:!e.forceUpdate})))}),[e]),o=(0,n.useCallback)((()=>{t((e=>({pageIndex:r.j7.pageIndex,pageSize:r.j7.pageSize,forceUpdate:!e.forceUpdate})))}),[]);return{paginations:e,setPageIndex:e=>t((t=>({...t,pageIndex:e,forceUpdate:!t.forceUpdate}))),setPageSize:e=>t((t=>({pageIndex:r.j7.pageIndex,pageSize:e,forceUpdate:!t.forceUpdate}))),refreshPagination:o,setPaginationsFunctions:a}}},39225:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(41397),r=a.n(n),o=a(9950);const i=e=>{const{isFcMode:t}=e||{},[a,n]=(0,o.useState)(void 0),[i,s]=(0,o.useState)(!1),c=(0,o.useRef)([]),l=(0,o.useCallback)((e=>{const n=c.current;c.current=e,a&&(t||r().isEqual(e,n)||s((e=>!e)))}),[t,a]),d=(0,o.useMemo)((()=>null===a||void 0===a?void 0:a.trim()),[a]);return{searchString:a,searchStringTrimmed:d,forceSearch:i,accessorsRef:c,setSearchString:n,setAccessors:l}}},62605:(e,t,a)=>{a.d(t,{t:()=>o});var n=a(9950),r=a(27081);const o=()=>{const[e,t]=(0,n.useState)({stocksObject:{},error:"",loading:!0}),[a,o]=(0,n.useState)({transactionObject:{},error:"",loading:!1}),[i,s]=(0,n.useState)({transactionObject:{},error:"",loading:!0}),[c,l]=(0,n.useState)({transactionObject:{},error:"",loading:!0}),[d,u]=(0,n.useState)({transactionObject:{},error:"",loading:!0}),[p,h]=(0,n.useState)({data:{},error:"",loading:!0}),[m,f]=(0,n.useState)({data:{},error:"",loading:!0}),[g,b]=(0,n.useState)({data:{},error:"",loading:!0}),[x,v]=(0,n.useState)({stoDataObject:{},error:"",loading:!0}),[j,S]=(0,n.useState)({refDataObject:{},error:"",loading:!0}),[A,y]=(0,n.useState)({refDataSecondObject:{},error:"",loading:!0}),[k,w]=(0,n.useState)({refDataThirdObject:{},error:"",loading:!0}),[L,M]=(0,n.useState)({stockLedgerDetailListObject:{},error:"",loading:!0}),[E,I]=(0,n.useState)({storeLocationsTransactionObject:{},error:"",loading:!0}),[z,O]=(0,n.useState)({allStoreLocationsStock:[],error:"",loading:!0}),[C,D]=(0,n.useState)({transactionObject:{},error:"",loading:!1}),[N,H]=(0,n.useState)({transactionObject:{},error:"",loading:!1}),[P,T]=(0,n.useState)({storeLocationsTransactionObject:{},error:"",loading:!0}),[U,B]=(0,n.useState)({storeLocationsTransactionObject:{},error:"",loading:!0}),[F,R]=(0,n.useState)({transactionObject:{},error:"",loading:!1}),V=(0,r.d4)((e=>e.stocks||{})),$=(0,r.d4)((e=>e.transactions||{})),Q=(0,r.d4)((e=>e.transactionsSecond||{})),_=(0,r.d4)((e=>e.transactionsQty||{})),q=(0,r.d4)((e=>e.transactionsSecondQty||{})),W=(0,r.d4)((e=>e.serialNumbers||{})),G=(0,r.d4)((e=>e.serialNumbersSecond||{})),Y=(0,r.d4)((e=>e.allSerialNumbers||{})),J=(0,r.d4)((e=>e.stoData||{})),K=(0,r.d4)((e=>e.refData||{})),X=(0,r.d4)((e=>e.refDataSecond||{})),Z=(0,r.d4)((e=>e.refDataThird||{})),ee=(0,r.d4)((e=>e.stockLedgerDetailList||{})),te=(0,r.d4)((e=>e.storeLocationsTransactions||{})),ae=(0,r.d4)((e=>e.storeLocationsStock||[])),ne=(0,r.d4)((e=>e.transactionMaterialList||{})),re=(0,r.d4)((e=>e.txnByMaterial||{})),oe=(0,r.d4)((e=>e.txnByLocationMaterial||{})),ie=(0,r.d4)((e=>e.storeStockReport||{})),se=(0,r.d4)((e=>e.stockLedgerMaterialList||{}));return(0,n.useEffect)((()=>{t((e=>({...e,...V})))}),[V]),(0,n.useEffect)((()=>{o((e=>({...e,...$})))}),[$]),(0,n.useEffect)((()=>{s((e=>({...e,...Q})))}),[Q]),(0,n.useEffect)((()=>{l((e=>({...e,..._})))}),[_]),(0,n.useEffect)((()=>{u((e=>({...e,...q})))}),[q]),(0,n.useEffect)((()=>{h((e=>({...e,...W})))}),[W]),(0,n.useEffect)((()=>{f((e=>({...e,...G})))}),[G]),(0,n.useEffect)((()=>{b((e=>({...e,...Y})))}),[Y]),(0,n.useEffect)((()=>{v((e=>({...e,...J})))}),[J]),(0,n.useEffect)((()=>{S((e=>({...e,...K})))}),[K]),(0,n.useEffect)((()=>{y((e=>({...e,...X})))}),[X]),(0,n.useEffect)((()=>{w((e=>({...e,...Z})))}),[Z]),(0,n.useEffect)((()=>{M((e=>({...e,...ee})))}),[ee]),(0,n.useEffect)((()=>{I((e=>({...e,...te})))}),[te]),(0,n.useEffect)((()=>{O((e=>({...e,...ae})))}),[ae]),(0,n.useEffect)((()=>{D((e=>({...e,...ne})))}),[ne]),(0,n.useEffect)((()=>{H((e=>({...e,...re})))}),[re]),(0,n.useEffect)((()=>{T((e=>({...e,...oe})))}),[oe]),(0,n.useEffect)((()=>{B((e=>({...e,...ie})))}),[ie]),(0,n.useEffect)((()=>{R((e=>({...e,...se})))}),[se]),{stocks:e,transaction:a,serialNumbers:p,serialNumbersSecond:m,allSerialNumbers:g,stoData:x,refData:j,stockLedgerDetailList:L,storeLocationsTransaction:E,transactionsSecond:i,refDataSecond:A,refDataThird:k,transactionQty:c,transactionSecondQty:d,storeLocationsStock:z,transactionMaterialList:C,txnByMaterial:N,txnByLocationMaterial:P,storeStockReport:U,stockLedgerMaterialList:F}}},13239:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(89379),r=a(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};var i=a(14840),s=function(e,t){return r.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:o}))};const c=r.forwardRef(s)},26592:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(79526)),o=a(44414);t.A=(0,r.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},36089:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(79526)),o=a(44414);t.A=(0,r.default)((0,o.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined")},56334:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(79526)),o=a(44414);t.A=(0,r.default)((0,o.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5z"}),"FileUploadOutlined")},58281:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(79526)),o=a(44414);t.A=(0,r.default)((0,o.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-7-8.5c1.84 0 3.48.96 4.34 2.5-.86 1.54-2.5 2.5-4.34 2.5s-3.48-.96-4.34-2.5c.86-1.54 2.5-2.5 4.34-2.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"PreviewOutlined")},16632:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(79526)),o=a(44414);t.A=(0,r.default)((0,o.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print")},11066:(e,t,a)=>{var n=a(24994);t.A=void 0;var r=n(a(79526)),o=a(44414);t.A=(0,r.default)([(0,o.jsx)("path",{d:"M19 8h-1V3H6v5H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3M8 5h8v3H8zm8 12v2H8v-4h8zm2-2v-2H6v2H4v-4c0-.55.45-1 1-1h14c.55 0 1 .45 1 1v4z"},"0"),(0,o.jsx)("circle",{cx:"18",cy:"11.5",r:"1"},"1")],"PrintOutlined")},78971:()=>{}}]);