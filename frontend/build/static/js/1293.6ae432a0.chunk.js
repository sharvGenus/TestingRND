"use strict";(self.webpackChunkgenus_power=self.webpackChunkgenus_power||[]).push([[1293],{88848:(e,r,t)=>{t.d(r,{$:()=>o});var a=t(9950),s=t(27081);const o=()=>{const[e,r]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[t,o]=(0,a.useState)({masterMakerLovsObject:{},error:"",loading:!0}),[i,n]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[c,l]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[d,u]=(0,a.useState)({masterObject:[],error:"",loading:!0}),[m,v]=(0,a.useState)({currencyObject:[],error:"",loading:!0}),[g,p]=(0,a.useState)({gstStatusObject:[],error:"",loading:!0}),[S,f]=(0,a.useState)({paymentTermObject:[],error:"",loading:!0}),[b,k]=(0,a.useState)({incotermsObject:[],error:"",loading:!0}),[y,N]=(0,a.useState)({titleObject:[],error:"",loading:!0}),[O,h]=(0,a.useState)({masterMakerLovHistoryObject:{},error:"",loading:!0}),j=(0,s.d4)((e=>e.masterMakerLov||{})),M=(0,s.d4)((e=>e.masterMakerLovList||{})),L=(0,s.d4)((e=>e.lovsForMasterName||[])),A=(0,s.d4)((e=>e.lovsForMasterNameSecond||[])),D=(0,s.d4)((e=>e.lovsForMasterNameThird||[])),H=(0,s.d4)((e=>e.currency||[])),T=(0,s.d4)((e=>e.gstStatus||[])),E=(0,s.d4)((e=>e.paymentTerm||[])),w=(0,s.d4)((e=>e.incoterms||[])),x=(0,s.d4)((e=>e.title||[])),C=(0,s.d4)((e=>e.masterMakerLovHistory||{}));return(0,a.useEffect)((()=>{r((e=>({...e,...j})))}),[j]),(0,a.useEffect)((()=>{o((e=>({...e,...M})))}),[M]),(0,a.useEffect)((()=>{n((e=>({...e,...L})))}),[L]),(0,a.useEffect)((()=>{l((e=>({...e,...A})))}),[A]),(0,a.useEffect)((()=>{u((e=>({...e,...D})))}),[D]),(0,a.useEffect)((()=>{v((e=>({...e,...H})))}),[H]),(0,a.useEffect)((()=>{p((e=>({...e,...T})))}),[T]),(0,a.useEffect)((()=>{f((e=>({...e,...E})))}),[E]),(0,a.useEffect)((()=>{k((e=>({...e,...w})))}),[w]),(0,a.useEffect)((()=>{N((e=>({...e,...x})))}),[x]),(0,a.useEffect)((()=>{h((e=>({...e,...C})))}),[C]),{masterMakerLovs:e,masterMakerLovsList:t,masterMakerOrgType:i,masterMakerOrgTypeSecond:c,masterMakerOrgTypeThird:d,masterMakerCurrency:m,masterMakerGstStatus:g,masterMakerIncoterms:b,masterMakerPaymentTerm:S,masterMakerLovHistory:O,masterMakerTitle:y}}},8712:(e,r,t)=>{t.r(r),t.d(r,{default:()=>N});var a=t(96583),s=t(9950),o=t(27081),i=t(28429),n=t(88848),c=t(62605),l=t(29024),d=t(52867),u=t(99635),m=t(89649),v=t(14846),g=t(3252),p=t(75682),S=t(83456),f=t(39225),b=t(44414);const k=(0,g.A)((0,s.lazy)((()=>t.e(8820).then(t.bind(t,46439))))),y=[{Header:"Actions",accessor:"actionButtons"},{Header:"Receipt Number",accessor:"referenceDocumentNumber"},{Header:"Project",accessor:"stock_ledgers[0].project.name"},{Header:"Receiving Organizaiton",accessor:"stock_ledgers[0].organization.name"},{Header:"Receiving Store",accessor:"stock_ledgers[0].organization_store.name"},{Header:"Status",accessor:"status",exportAccessor:"isActive"},{Header:"Invoice Number",accessor:"invoiceNumber"},{Header:"Invoice Date",accessor:"invoiceDate"},{Header:"Transporter Name",accessor:"transporterName"},{Header:"Transporter Contact Number",accessor:"transporterContactNumber"},{Header:"Vehicle Number",accessor:"vehicleNumber"},{Header:"LR Number",accessor:"lrNumber"},{Header:"E-Way Bill Number",accessor:"eWayBillNumber"},{Header:"E-Way Bill Date",accessor:"eWayBillDate"},{Header:"Actual Receipt Date",accessor:"actualReceiptDate"},{Header:"Created Date",accessor:"createdAt"},{Header:"Updated Date",accessor:"updatedAt"},{Header:"Remarks",accessor:"remarks"}],N=()=>{var e,r,t;const g=(0,o.wA)(),{transactionId:N}=(0,i.g)(),[O,h]=(0,s.useState)("closed"),[j,M]=(0,s.useState)(null),[L,A]=(0,s.useState)(!1),[D,H]=(0,s.useState)(null),[T,E]=(0,s.useState)(!1),[w,x]=(0,s.useState)(null),[C,B]=(0,s.useState)(null),{paginations:{pageSize:P,pageIndex:R,forceUpdate:I},setPageIndex:W,refreshPagination:_,setPageSize:z}=(0,m.A)(),{searchString:F,setSearchString:G,accessorsRef:U,setAccessors:V,forceSearch:Y,searchStringTrimmed:$}=(0,f.A)(),{stockLedgerDetailList:J}=(0,c.t)(),{masterMakerOrgType:K}=(0,n.$)(),Q=null===K||void 0===K?void 0:K.masterObject,{data:q,count:X}=(0,s.useMemo)((()=>{var e,r,t;return{data:(null===(e=(0,d.yN)(null===J||void 0===J||null===(r=J.stockLedgerDetailListObject)||void 0===r?void 0:r.rows))||void 0===e?void 0:e.map(((e,r)=>{var t,a,s,o,i,n,c,l;return{...e,...!0===(null===e||void 0===e||null===(t=e.stock_ledgers[0])||void 0===t?void 0:t.isCancelled)?{status:"Cancelled"}:!0===(null===e||void 0===e||null===(a=e.stock_ledgers[0])||void 0===a?void 0:a.isProcessed)?{status:"Processed"}:{status:null},serialNumber:(R*P-P+r+1).toString(),actionButtons:(0,b.jsx)(v.w,{editButton:!0,openPreview:()=>ae(r),initiatePrint:()=>ie(r),initiateDownload:()=>oe(r),updateReceipt:()=>se(e),viewSerialNumbers:()=>{H(r)},disablePrint:+e.sumOfAmounts>(null===(s=e.stock_ledgers)||void 0===s||null===(o=s[0])||void 0===o||null===(i=o.project)||void 0===i?void 0:i.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,disableDownload:+e.sumOfAmounts>(null===(n=e.stock_ledgers)||void 0===n||null===(c=n[0])||void 0===c||null===(l=c.project)||void 0===l?void 0:l.eWayBillLimit)&&!e.eWayBillDate&&!e.eWayBillNumber,noMargins:!0})}})))||[],count:null===J||void 0===J||null===(t=J.stockLedgerDetailListObject)||void 0===t?void 0:t.count,isLoading:null===J||void 0===J?void 0:J.loading,error:null===J||void 0===J?void 0:J.error}}),[J,R,P]),Z=(null===q||void 0===q||null===(e=q[D])||void 0===e?void 0:e.materialData)||[],ee=null===q||void 0===q||null===(r=q[j])||void 0===r?void 0:r.id,re=null===q||void 0===q||null===(t=q[j])||void 0===t?void 0:t.referenceDocumentNumber,te=(0,d.x)(Q,"STOGRN");(0,s.useEffect)((()=>{g((0,l.VOH)("TRANSACTION TYPE"))}),[g]),(0,s.useEffect)((()=>{te&&g((0,l.rYL)({pageIndex:R,pageSize:P,transactionTypeId:te,...$&&{searchString:$,accessors:JSON.stringify(U.current)},sortBy:(null===C||void 0===C?void 0:C[0])||"createdAt",sortOrder:(null===C||void 0===C?void 0:C[1])||"DESC"}))}),[g,N,R,I,P,te,$,C,U,Y]);const ae=e=>{h("view"),M(e)},se=e=>{x(e),A(!0),E(!0)},oe=e=>{h("download"),M(e)},ie=e=>{h("print"),M(e)};return(0,b.jsxs)(b.Fragment,{children:["closed"!==O&&(0,b.jsx)(k,{fetchFromRoute:"/sto-grn-receipt",apiParams:ee,previewAction:O,onClose:()=>{h("hidden"),M(null)},fileNameForDownload:re}),null!==D&&(0,b.jsx)(S.A,{selectedMaterialList:Z,onClose:()=>{H(null)}}),L&&(0,b.jsx)(a.A,{open:T,onClose:()=>E(!1),scroll:"paper",maxWidth:"xs",disableEscapeKeyDown:!0,children:(0,b.jsx)(p.W,{rowData:w,setOpen:E,refreshPagination:_,title:"STOGRN"})}),(0,b.jsx)(u.default,{title:"STOGRN Receipt",setPageIndex:W,setPageSize:z,pageIndex:R,pageSize:P,columns:y,count:te?X:0,data:te?q:[],hideAddButton:!0,hideActions:!0,searchConfig:{searchString:F,searchStringTrimmed:$,setSearchString:G,setAccessors:V},sortConfig:{sort:C,setSort:B},exportConfig:{tableName:"sto_grn_receipt",apiQuery:{transactionTypeId:te}}})]})}}}]);